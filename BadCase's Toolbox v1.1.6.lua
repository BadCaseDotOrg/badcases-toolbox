--
-- json.lua
--
-- Copyright (c) 2019 rxi
--
-- Permission is hereby granted, free of charge, to any person obtaining a copy of
-- this software and associated documentation files (the "Software"), to deal in
-- the Software without restriction, including without limitation the rights to
-- use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies
-- of the Software, and to permit persons to whom the Software is furnished to do
-- so, subject to the following conditions:
--
-- The above copyright notice and this permission notice shall be included in all
-- copies or substantial portions of the Software.
--
-- THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
-- IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
-- FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
-- AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
-- LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
-- OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
-- SOFTWARE.
--
json = {
    _version = "0.1.2"
}

-------------------------------------------------------------------------------
-- Encode
-------------------------------------------------------------------------------

local encode

local escape_char_map = {
    ["\\"] = "\\\\",
    ["\""] = "\\\"",
    ["\b"] = "\\b",
    ["\f"] = "\\f",
    ["\n"] = "\\n",
    ["\r"] = "\\r",
    ["\t"] = "\\t"
}

local escape_char_map_inv = {
    ["\\/"] = "/"
}
for k, v in pairs(escape_char_map) do
    escape_char_map_inv[v] = k
end

local function escape_char(c)
    return escape_char_map[c] or string.format("\\u%04x", c:byte())
end

local function encode_nil(val)
    return "null"
end

local function encode_table(val, stack)
    local res = {}
    stack = stack or {}

    -- Circular reference?
    if stack[val] then
        error("circular reference")
    end

    stack[val] = true

    if rawget(val, 1) ~= nil or next(val) == nil then
        -- Treat as array -- check keys are valid and it is not sparse
        local n = 0
        for k in pairs(val) do
            if type(k) ~= "number" then
                error("invalid table: mixed or invalid key types")
            end
            n = n + 1
        end
        if n ~= #val then
            error("invalid table: sparse array")
        end
        -- Encode
        for i, v in ipairs(val) do
            table.insert(res, encode(v, stack))
        end
        stack[val] = nil
        return "[" .. table.concat(res, ",") .. "]"

    else
        -- Treat as an object
        for k, v in pairs(val) do
            if type(k) ~= "string" then
                error("invalid table: mixed or invalid key types")
            end
            table.insert(res, encode(k, stack) .. ":" .. encode(v, stack))
        end
        stack[val] = nil
        return "{" .. table.concat(res, ",") .. "}"
    end
end

local function encode_string(val)
    return '"' .. val:gsub('[%z\1-\31\\"]', escape_char) .. '"'
end

local function encode_number(val)
    -- Check for NaN, -inf and inf
    if val ~= val or val <= -math.huge or val >= math.huge then
        error("unexpected number value '" .. tostring(val) .. "'")
    end
    return string.format("%.14g", val)
end

local type_func_map = {
    ["nil"] = encode_nil,
    ["table"] = encode_table,
    ["string"] = encode_string,
    ["number"] = encode_number,
    ["boolean"] = tostring
}

encode = function(val, stack)
    local t = type(val)
    local f = type_func_map[t]
    if f then
        return f(val, stack)
    end
    error("unexpected type '" .. t .. "'")
end

function json.encode(val)
    return (encode(val))
end

-------------------------------------------------------------------------------
-- Decode
-------------------------------------------------------------------------------

local parse

local function create_set(...)
    local res = {}
    for i = 1, select("#", ...) do
        res[select(i, ...)] = true
    end
    return res
end

local space_chars = create_set(" ", "\t", "\r", "\n")
local delim_chars = create_set(" ", "\t", "\r", "\n", "]", "}", ",")
local escape_chars = create_set("\\", "/", '"', "b", "f", "n", "r", "t", "u")
local literals = create_set("true", "false", "null")

local literal_map = {
    ["true"] = true,
    ["false"] = false,
    ["null"] = nil
}

local function next_char(str, idx, set, negate)
    for i = idx, #str do
        if set[str:sub(i, i)] ~= negate then
            return i
        end
    end
    return #str + 1
end

local function decode_error(str, idx, msg)
    local line_count = 1
    local col_count = 1
    for i = 1, idx - 1 do
        col_count = col_count + 1
        if str:sub(i, i) == "\n" then
            line_count = line_count + 1
            col_count = 1
        end
    end
    error(string.format("%s at line %d col %d", msg, line_count, col_count))
end

local function codepoint_to_utf8(n)
    -- http://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&id=iws-appendixa
    local f = math.floor
    if n <= 0x7f then
        return string.char(n)
    elseif n <= 0x7ff then
        return string.char(f(n / 64) + 192, n % 64 + 128)
    elseif n <= 0xffff then
        return string.char(f(n / 4096) + 224, f(n % 4096 / 64) + 128, n % 64 + 128)
    elseif n <= 0x10ffff then
        return string.char(f(n / 262144) + 240, f(n % 262144 / 4096) + 128, f(n % 4096 / 64) + 128, n % 64 + 128)
    end
    error(string.format("invalid unicode codepoint '%x'", n))
end

local function parse_unicode_escape(s)
    local n1 = tonumber(s:sub(3, 6), 16)
    local n2 = tonumber(s:sub(9, 12), 16)
    -- Surrogate pair?
    if n2 then
        return codepoint_to_utf8((n1 - 0xd800) * 0x400 + (n2 - 0xdc00) + 0x10000)
    else
        return codepoint_to_utf8(n1)
    end
end

local function parse_string(str, i)
    local has_unicode_escape = false
    local has_surrogate_escape = false
    local has_escape = false
    local last
    for j = i + 1, #str do
        local x = str:byte(j)

        if x < 32 then
            decode_error(str, j, "control character in string")
        end

        if last == 92 then -- "\\" (escape char)
            if x == 117 then -- "u" (unicode escape sequence)
                local hex = str:sub(j + 1, j + 5)
                if not hex:find("%x%x%x%x") then
                    decode_error(str, j, "invalid unicode escape in string")
                end
                if hex:find("^[dD][89aAbB]") then
                    has_surrogate_escape = true
                else
                    has_unicode_escape = true
                end
            else
                local c = string.char(x)
                if not escape_chars[c] then
                    decode_error(str, j, "invalid escape char '" .. c .. "' in string")
                end
                has_escape = true
            end
            last = nil

        elseif x == 34 then -- '"' (end of string)
            local s = str:sub(i + 1, j - 1)
            if has_surrogate_escape then
                s = s:gsub("\\u[dD][89aAbB]..\\u....", parse_unicode_escape)
            end
            if has_unicode_escape then
                s = s:gsub("\\u....", parse_unicode_escape)
            end
            if has_escape then
                s = s:gsub("\\.", escape_char_map_inv)
            end
            return s, j + 1

        else
            last = x
        end
    end
    decode_error(str, i, "expected closing quote for string")
end

local function parse_number(str, i)
    local x = next_char(str, i, delim_chars)
    local s = str:sub(i, x - 1)
    local n = tonumber(s)
    if not n then
        decode_error(str, i, "invalid number '" .. s .. "'")
    end
    return n, x
end

local function parse_literal(str, i)
    local x = next_char(str, i, delim_chars)
    local word = str:sub(i, x - 1)
    if not literals[word] then
        decode_error(str, i, "invalid literal '" .. word .. "'")
    end
    return literal_map[word], x
end

local function parse_array(str, i)
    local res = {}
    local n = 1
    i = i + 1
    while 1 do
        local x
        i = next_char(str, i, space_chars, true)
        -- Empty / end of array?
        if str:sub(i, i) == "]" then
            i = i + 1
            break
        end
        -- Read token
        x, i = parse(str, i)
        res[n] = x
        n = n + 1
        -- Next token
        i = next_char(str, i, space_chars, true)
        local chr = str:sub(i, i)
        i = i + 1
        if chr == "]" then
            break
        end
        if chr ~= "," then
            decode_error(str, i, "expected ']' or ','")
        end
    end
    return res, i
end

local function parse_object(str, i)
    local res = {}
    i = i + 1
    while 1 do
        local key, val
        i = next_char(str, i, space_chars, true)
        -- Empty / end of object?
        if str:sub(i, i) == "}" then
            i = i + 1
            break
        end
        -- Read key
        if str:sub(i, i) ~= '"' then
            decode_error(str, i, "expected string for key")
        end
        key, i = parse(str, i)
        -- Read ':' delimiter
        i = next_char(str, i, space_chars, true)
        if str:sub(i, i) ~= ":" then
            decode_error(str, i, "expected ':' after key")
        end
        i = next_char(str, i + 1, space_chars, true)
        -- Read value
        val, i = parse(str, i)
        -- Set
        res[key] = val
        -- Next token
        i = next_char(str, i, space_chars, true)
        local chr = str:sub(i, i)
        i = i + 1
        if chr == "}" then
            break
        end
        if chr ~= "," then
            decode_error(str, i, "expected '}' or ','")
        end
    end
    return res, i
end

local char_func_map = {
    ['"'] = parse_string,
    ["0"] = parse_number,
    ["1"] = parse_number,
    ["2"] = parse_number,
    ["3"] = parse_number,
    ["4"] = parse_number,
    ["5"] = parse_number,
    ["6"] = parse_number,
    ["7"] = parse_number,
    ["8"] = parse_number,
    ["9"] = parse_number,
    ["-"] = parse_number,
    ["t"] = parse_literal,
    ["f"] = parse_literal,
    ["n"] = parse_literal,
    ["["] = parse_array,
    ["{"] = parse_object
}

parse = function(str, idx)
    local chr = str:sub(idx, idx)
    local f = char_func_map[chr]
    if f then
        return f(str, idx)
    end
    decode_error(str, idx, "unexpected character '" .. chr .. "'")
end

function json.decode(str)
    if type(str) ~= "string" then
        error("expected argument of type string, got " .. type(str))
    end
    local res, idx = parse(str, next_char(str, 1, space_chars, true))
    idx = next_char(str, idx, space_chars, true)
    if idx <= #str then
        decode_error(str, idx, "trailing garbage")
    end
    return res
end

-- ‐-------------------------
-- End of json.lua
----------------------------
script_title = "🧰 BadCase's Toolbox 🧰\nGame: " .. gg.getTargetInfo().label .. "\nPackage: " .. gg.getTargetPackage()
dataPath = gg.EXT_STORAGE .. "/BC_DATA/"
pluginsDataPath = gg.EXT_STORAGE .. "/BC_DATA/plugins/"
configDataPath = gg.EXT_STORAGE .. "/BC_DATA/config/"
toolboxInstaller = {
    filesTable = {
        [1] = {
            file_name = "toolbox_core.lua",
            file_data = "LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIA0KLS0tLVNlbGVjdCBMaWIgU3RhcnQtLS0tDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCmZ1bmN0aW9uIHNlbGVjdF9saWIoKQ0KICAgIGxvY2FsIGxpYl9uYW1lX2dlbl9zY3JpcHQgPSB7fQ0KICAgIGxvY2FsIGxpYl9zZWxlY3RvciA9IHt9DQogICAgbG9jYWwgbGliX3NlbGVjdG9yX3N0YXJ0ID0ge30NCiAgICBsb2NhbCBsaWJfc2VsZWN0b3JfZW5kID0ge30NCiAgICBsb2NhbCBjaGVja19saWJzID0gZ2cuZ2V0UmFuZ2VzTGlzdCgpDQogICAgZm9yIGssIHYgaW4gcGFpcnMoY2hlY2tfbGlicykgZG8NCiAgICAgICAgaWYgc3RyaW5nLm1hdGNoKGNoZWNrX2xpYnNba11bIm5hbWUiXSwgIiUuZGF0Iikgb3IgDQoJCQlzdHJpbmcubWF0Y2goY2hlY2tfbGlic1trXVsibmFtZSJdLCAiJVtzdGFjayVdIikgb3INCiAgICAgICAgICAgIHN0cmluZy5tYXRjaChjaGVja19saWJzW2tdWyJuYW1lIl0sICIvdmVuZG9yLyIpIG9yIA0KCQkJc3RyaW5nLm1hdGNoKGNoZWNrX2xpYnNba11bIm5hbWUiXSwgIi9zeXN0ZW0vIikgb3INCiAgICAgICAgICAgIHN0cmluZy5tYXRjaChjaGVja19saWJzW2tdWyJuYW1lIl0sICIvZGV2LyIpIG9yIA0KCQkJc3RyaW5nLm1hdGNoKGNoZWNrX2xpYnNba11bIm5hbWUiXSwgIiVbaGVhcCVdIikgb3INCiAgICAgICAgICAgIHN0cmluZy5tYXRjaChjaGVja19saWJzW2tdWyJuYW1lIl0sICIlLmFydCIpIG9yIA0KCQkJc3RyaW5nLm1hdGNoKGNoZWNrX2xpYnNba11bIm5hbWUiXSwgImFub25faW5vZGU6Iikgb3INCiAgICAgICAgICAgIHN0cmluZy5tYXRjaChjaGVja19saWJzW2tdWyJuYW1lIl0sICJkZWxldGVkIikgb3IgDQoJCQlzdHJpbmcubWF0Y2goY2hlY2tfbGlic1trXVsibmFtZSJdLCAiYW5vbjoiKSBvcg0KICAgICAgICAgICAgc3RyaW5nLm1hdGNoKGNoZWNrX2xpYnNba11bIm5hbWUiXSwgIiUudHRmIikgb3IgDQoJCQlzdHJpbmcubWF0Y2goY2hlY2tfbGlic1trXVsibmFtZSJdLCAiLiIpID09IG5pbCB0aGVuDQogICAgICAgICAgICBjaGVja19saWJzW2tdID0gbmlsDQogICAgICAgIGVsc2VpZiBjaGVja19saWJzW2tdWyJuYW1lIl06ZmluZCgiLnNvJCIpIHRoZW4NCiAgICAgICAgICAgIGdldF9zaXplX2FycmF5ID0ge30NCiAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKGNoZWNrX2xpYnNba10pIGRvDQogICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGdldF9zaXplX2FycmF5LCB2KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBsb2NhbCBmaWxlX3NpemUgPSB0b251bWJlcihnZXRfc2l6ZV9hcnJheVsxXSkgLSB0b251bWJlcihnZXRfc2l6ZV9hcnJheVs2XSkNCiAgICAgICAgICAgIGxvY2FsIGZpbGVfc3RhcnQgPSB0b251bWJlcihnZXRfc2l6ZV9hcnJheVs2XSkNCiAgICAgICAgICAgIGxvY2FsIGZpbGVfZW5kID0gdG9udW1iZXIoZ2V0X3NpemVfYXJyYXlbMV0pDQogICAgICAgICAgICBpZiBmaWxlX3NpemUgPCA1MTIwMDAwIHRoZW4NCiAgICAgICAgICAgICAgICBjaGVja19saWJzW2tdID0gbmlsDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgbG9jYWwgZGl2aWRlX2J5ID0gIjEwMjQwMDAiDQogICAgICAgICAgICAgICAgbG9jYWwgc2l6ZV9tYXRoID0gdG9udW1iZXIoZmlsZV9zaXplKSAvIHRvbnVtYmVyKGRpdmlkZV9ieSkNCiAgICAgICAgICAgICAgICBsb2NhbCBzaXplX2Rpc3BsYXkgPSBzaXplX21hdGggLi4gIk1CIg0KICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChsaWJfbmFtZV9nZW5fc2NyaXB0LCBjaGVja19saWJzW2tdWyJuYW1lIl0pDQogICAgICAgICAgICAgICAgbG9jYWwgZmxpYm5hbWUgPSBjaGVja19saWJzW2tdWyJuYW1lIl0NCiAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2WyJuYW1lIl0sICJsaWJpbDJjcHAuc28iKSBvciBzdHJpbmcuZmluZCh2WyJuYW1lIl0sICJzcGxpdF9jb25maWcuYXJtZWFiaV92N2EuYXBrIikgb3INCiAgICAgICAgICAgICAgICAgICAgc3RyaW5nLmZpbmQodlsibmFtZSJdLCAic3BsaXRfY29uZmlnLmFybTY0X3Y4YS5hcGsiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIG1lbnVfc3RyaW5nID0gIuOAsO+4j+OAsO+4j+OAsO+4j+OAsO+4j+OAsO+4j+OAsO+4j+OAsO+4j+OAsO+4j+OAsO+4j+OAsO+4j+OAsO+4j+OAsO+4j1xuTmFtZTogIiAuLg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdlsibmFtZSJdIC4uICJcblJhbmdlOiAiIC4uIHYuc3RhdGUgLi4gIlxuU3RhcnQgQWRkcmVzczogIiAuLg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGV4X28oZ2V0X3NpemVfYXJyYXlbNl0pIC4uICJcbkVuZCBBZGRyZXNzOiAiIC4uIGhleF9vKGdldF9zaXplX2FycmF5WzFdKSAuLg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlxuU2l6ZTogIiAuLiBzaXplX2Rpc3BsYXkgLi4gIlxu44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iPIg0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgbWVudV9zdHJpbmcgPSAi4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBXG5OYW1lOiAiIC4uIHZbIm5hbWUiXSAuLiAiXG5SYW5nZTogIiAuLiB2LnN0YXRlIC4uDQoJCQkJCQkJCSJcblN0YXJ0IEFkZHJlc3M6ICIgLi4gaGV4X28oZ2V0X3NpemVfYXJyYXlbNl0pIC4uICJcbkVuZCBBZGRyZXNzOiAiIC4uDQoJCQkJCQkJCWhleF9vKGdldF9zaXplX2FycmF5WzFdKSAuLiAiXG5TaXplOiAiIC4uIHNpemVfZGlzcGxheSAuLiAiXG7ilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEiDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQoZmxpYm5hbWUsICItIikgYW5kIHN0cmluZy5maW5kKGZsaWJuYW1lLCAiPT0iKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGxpYl9zZWFyY2ggPSBzdHJpbmcuZmluZChmbGlibmFtZSwgIi0iKQ0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBsaWJfc2VhcmNoMiA9IHN0cmluZy5maW5kKGZsaWJuYW1lLCAiPT0iKQ0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBsaWJuYW1lX3BhcnQxID0gc3RyaW5nLnN1YihmbGlibmFtZSwgMSwgbGliX3NlYXJjaCAtIDEpDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGxpYm5hbWVfcGFydDIgPSBzdHJpbmcuc3ViKGZsaWJuYW1lLCBsaWJfc2VhcmNoMiArIDIpDQogICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChsaWJfc2VsZWN0b3IsIG1lbnVfc3RyaW5nKQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGxpYl9zZWxlY3RvciwgbWVudV9zdHJpbmcpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGxpYl9zZWxlY3Rvcl9zdGFydCwgZmlsZV9zdGFydCkNCiAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQobGliX3NlbGVjdG9yX2VuZCwgZmlsZV9lbmQpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgOjpzZWxlY3RfbGliOjoNCiAgICBsb2NhbCBoID0gZ2cuY2hvaWNlKGxpYl9zZWxlY3RvciwgbmlsLCBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2VsZWN0IGxpYmlsMmNwcC5zbyBMaWJyYXJ5IOKEue+4jyIpDQogICAgaWYgaCA9PSBuaWwgdGhlbg0KICAgICAgICBnb3RvIHNlbGVjdF9saWINCiAgICBlbHNlDQogICAgICAgIGxvY2FsIGxpYl9uYW1lID0gbGliX25hbWVfZ2VuX3NjcmlwdFtoXQ0KICAgICAgICBmb3Igc3RyIGluIHN0cmluZy5nbWF0Y2gobGliX25hbWUsICIoW14vXSspIikgZG8NCiAgICAgICAgICAgIGZpeGVkX2xpYl9uYW1lID0gc3RyDQogICAgICAgIGVuZA0KICAgICAgICBCQVNFQUREUiA9IGxpYl9zZWxlY3Rvcl9zdGFydFtoXQ0KICAgICAgICBpZiBsaWJfc2VsZWN0b3JbaCArIDJdIGFuZCBzdHJpbmcuZ3N1YihsaWJfc2VsZWN0b3JbaF0sICIoLitzbyApLisiLCAiJTEiKSA9PSBzdHJpbmcuZ3N1YihsaWJfc2VsZWN0b3JbaCArIDJdLCAiKC4rc28gKS4rIiwgIiUxIikgdGhlbg0KICAgICAgICAgICAgRU5EQUREUiA9IGxpYl9zZWxlY3Rvcl9lbmRbaCArIDJdDQogICAgICAgIGVsc2VpZiBzdHJpbmcuZ3N1YihsaWJfc2VsZWN0b3JbaF0sICIoLitzbyApLisiLCAiJTEiKSA9PSBzdHJpbmcuZ3N1YihsaWJfc2VsZWN0b3JbaCArIDFdLCAiKC4rc28gKS4rIiwgIiUxIikgdGhlbg0KICAgICAgICAgICAgRU5EQUREUiA9IGxpYl9zZWxlY3Rvcl9lbmRbaCArIDFdDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIEVOREFERFIgPSBsaWJfc2VsZWN0b3JfZW5kW2hdDQogICAgICAgIGVuZA0KICAgIGVuZA0KICAgIGdnLnRvYXN0KCLinIUgIiAuLiBmaXhlZF9saWJfbmFtZSAuLiAiIFNlbGVjdGVkIOKchSIpDQogICAgOjplbmRfc2VsZWN0OjoNCmVuZA0KDQpmdW5jdGlvbiBoZXhfbyhuKQ0KICAgIHJldHVybiAiMHgiIC4uIHN0cmluZy51cHBlcihzdHJpbmcuZm9ybWF0KCIleCIsIG4pKQ0KZW5kDQoNCmZ1bmN0aW9uIGhleG54KG4pDQogICAgcmV0dXJuIHN0cmluZy5mb3JtYXQoIiVYIiwgbikNCmVuZA0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi0tLS0tU2VsZWN0IExpYiBFbmQtLS0tLQ0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoNCnNjcmlwdF90aXRsZSA9ICLwn6ewIEJhZENhc2UncyBUb29sYm94IPCfp7BcbkdhbWU6ICIgLi4gZ2cuZ2V0VGFyZ2V0SW5mbygpLmxhYmVsIC4uICJcblBhY2thZ2U6ICIgLi4gZ2cuZ2V0VGFyZ2V0UGFja2FnZSgpDQpkYXRhUGF0aCA9IGdnLkVYVF9TVE9SQUdFIC4uICIvQkNfREFUQS8iDQpwbHVnaW5zRGF0YVBhdGggPSBnZy5FWFRfU1RPUkFHRSAuLiAiL0JDX0RBVEEvcGx1Z2lucy8iDQpjb25maWdEYXRhUGF0aCA9IGdnLkVYVF9TVE9SQUdFIC4uICIvQkNfREFUQS9jb25maWcvIg0KYXJjaCA9IGdnLmdldFRhcmdldEluZm8oKQ0KZ2FtZV9wYXRoID0gZ2cuZ2V0VGFyZ2V0UGFja2FnZSgpDQpkdW1wX2NzX3RhYmxlID0ge30NCmJjX3Rvb2xib3hfbWV0aG9kX3R5cGVzID0ge30NCmJjX3Rvb2xib3hfbWV0aG9kX3R5cGVzX2FsbCA9IHt9DQpzYXZlX2R1bXAgPSBmYWxzZQ0KZHVtcEhhbmRsZXIgPSB7DQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWR1bXBIYW5kbGVyLmNyZWF0ZURpcmVjdG9yeSgpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBjcmVhdGVEaXJlY3RvcnkgPSBmdW5jdGlvbigpDQogICAgICAgIGRpcmVjdG9yeV9jcmVhdGVkID0gdHJ1ZQ0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhnZy5nZXRSYW5nZXNMaXN0KCkpIGRvDQogICAgICAgICAgICBpZiB2WyJlbmQiXSAtIHYuc3RhcnQgPCAxMDI0MCB0aGVuDQogICAgICAgICAgICAgICAgaWYgbm90IHN0cmluZy5maW5kKHZbIm5hbWUiXSwgImRlbGV0ZWQiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGNyZWF0ZV9zdGFydCA9IHYuc3RhcnQNCiAgICAgICAgICAgICAgICAgICAgY3JlYXRlX2VuZCA9IHZbImVuZCJdDQogICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGdnLmR1bXBNZW1vcnkoY3JlYXRlX3N0YXJ0LCBjcmVhdGVfZW5kLCBkYXRhUGF0aCAuLiBnYW1lX3BhdGggLi4gIi8iLCBnZy5EVU1QX1NLSVBfU1lTVEVNX0xJQlMpDQogICAgICAgIGdnLmR1bXBNZW1vcnkoY3JlYXRlX3N0YXJ0LCBjcmVhdGVfZW5kLCBkYXRhUGF0aCAuLiBnYW1lX3BhdGggLi4gIi9zY3JpcHRzLyIsIGdnLkRVTVBfU0tJUF9TWVNURU1fTElCUykNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWR1bXBIYW5kbGVyLmltcG9ydER1bXAoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgaW1wb3J0RHVtcCA9IGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgc3RhcnRUaW1lID0gb3MudGltZSgpDQogICAgICAgIGxvY2FsIGZpbGVOYW1lID0gZ2cucHJvbXB0KHsi4oS577iPIFNlbGVjdCBEdW1wLmNzIOKEue+4jyJ9LCBuaWwsIHsiZmlsZSJ9KQ0KICAgICAgICBpZiBmaWxlTmFtZSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgbG9jYWwgdGVtcER1bXBUYWJsZSA9IHt9DQogICAgICAgICAgICBsb2NhbCBmaWxlID0gYXNzZXJ0KGlvLm9wZW4oZmlsZU5hbWVbMV0sICJyIikpDQogICAgICAgICAgICBsb2NhbCBjb250ZW50ID0gZmlsZTpyZWFkKCIqYSIpDQogICAgICAgICAgICBmaWxlOmNsb3NlKCkNCiAgICAgICAgICAgIGxvY2FsIGRlbGltaXRlciA9ICJcbiINCiAgICAgICAgICAgIGZvciBtYXRjaCBpbiAoY29udGVudCAuLiBkZWxpbWl0ZXIpOmdtYXRjaCgiKC4tKSIgLi4gZGVsaW1pdGVyKSBkbw0KICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydCh0ZW1wRHVtcFRhYmxlLCBtYXRjaCk7DQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGxvY2FsIHRlbXBfZHVtcF9jc190YWJsZSA9IHt9DQogICAgICAgICAgICBpZiB0ZW1wRHVtcFRhYmxlWzFdOmZpbmQoIi8lKiIpIHRoZW4NCiAgICAgICAgICAgICAgICBsb2NhbCBjdXJyZW50X25hbWVzcGFjZSA9ICJHbG9iYWwiDQogICAgICAgICAgICAgICAgbG9jYWwgY2FwdHVyaW5nX2ZpZWxkcyA9IGZhbHNlDQogICAgICAgICAgICAgICAgbG9jYWwgY2FwdHVyaW5nX2VudW1zID0gZmFsc2UNCiAgICAgICAgICAgICAgICBsb2NhbCBjYXB0dXJpbmdfbWV0aG9kcyA9IGZhbHNlDQogICAgICAgICAgICAgICAgbG9jYWwgY2FwdHVyaW5nX3Byb3BlcnRpZXMgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHRlbXBEdW1wVGFibGUpIGRvDQogICAgICAgICAgICAgICAgICAgIGlmIHY6ZmluZCgiXm5hbWVzcGFjZSAuKyIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfbmFtZXNwYWNlID0gdjpnc3ViKCJebmFtZXNwYWNlICguKykiLCAiJTEiKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgdjpmaW5kKCIJLisgY2xhc3MgLisgLy8gVHlwZURlZkluZGV4LisiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50X2NsYXNzID0gdjpnc3ViKCIoLispIC8vIC4rIiwgIiUxIikNCiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydCh0ZW1wX2R1bXBfY3NfdGFibGUsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcyA9IGN1cnJlbnRfY2xhc3MsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlID0gY3VycmVudF9uYW1lc3BhY2UNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiB2OmZpbmQoIi4rIGNsYXNzIC4rIC8vIFR5cGVEZWZJbmRleC4rIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9uYW1lc3BhY2UgPSAiR2xvYmFsIg0KICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9jbGFzcyA9IHY6Z3N1YigiKC4rKSAvLyAuKyIsICIlMSIpDQogICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQodGVtcF9kdW1wX2NzX3RhYmxlLCB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3MgPSBjdXJyZW50X2NsYXNzLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZSA9IGN1cnJlbnRfbmFtZXNwYWNlDQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICBlbHNlaWYgdjpmaW5kKCIJLisgc3RydWN0IC4rIC8vIFR5cGVEZWZJbmRleC4rIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9jbGFzcyA9IHY6Z3N1YigiKC4rKSAvLyAuKyIsICIlMSIpDQogICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQodGVtcF9kdW1wX2NzX3RhYmxlLCB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0ID0gY3VycmVudF9jbGFzcywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2UgPSBjdXJyZW50X25hbWVzcGFjZQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIHY6ZmluZCgiLisgc3RydWN0IC4rIC8vIFR5cGVEZWZJbmRleC4rIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9uYW1lc3BhY2UgPSAiR2xvYmFsIg0KICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9jbGFzcyA9IHY6Z3N1YigiKC4rKSAvLyAuKyIsICIlMSIpDQogICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQodGVtcF9kdW1wX2NzX3RhYmxlLCB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0ID0gY3VycmVudF9jbGFzcywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2UgPSBjdXJyZW50X25hbWVzcGFjZQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIHY6ZmluZCgiCS4rIGVudW0gLisgLy8gVHlwZURlZkluZGV4LisiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50X2NsYXNzID0gdjpnc3ViKCIoLispIC8vIC4rIiwgIiUxIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmluZ19lbnVtcyA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydCh0ZW1wX2R1bXBfY3NfdGFibGUsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnVtID0gY3VycmVudF9jbGFzcywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2UgPSBjdXJyZW50X25hbWVzcGFjZQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBfZHVtcF9jc190YWJsZVsjdGVtcF9kdW1wX2NzX3RhYmxlXS5maWVsZHMgPSB7fQ0KICAgICAgICAgICAgICAgICAgICBlbHNlaWYgdjpmaW5kKCIuKyBlbnVtIC4rIC8vIFR5cGVEZWZJbmRleC4rIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9uYW1lc3BhY2UgPSAiR2xvYmFsIg0KICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9jbGFzcyA9IHY6Z3N1YigiKC4rKSAvLyAuKyIsICIlMSIpDQogICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJpbmdfZW51bXMgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQodGVtcF9kdW1wX2NzX3RhYmxlLCB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bSA9IGN1cnJlbnRfY2xhc3MsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlID0gY3VycmVudF9uYW1lc3BhY2UNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICB0ZW1wX2R1bXBfY3NfdGFibGVbI3RlbXBfZHVtcF9jc190YWJsZV0uZmllbGRzID0ge30NCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIGNhcHR1cmluZ19maWVsZHMgPT0gdHJ1ZSBhbmQgKHY6ZmluZCgifSIpIG9yIHY6ZmluZCgiLy8gW0EtWl0iKSkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgY2FwdHVyaW5nX2ZpZWxkcyA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiB2OmZpbmQoIi8vIEZpZWxkcyIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmluZ19maWVsZHMgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICB0ZW1wX2R1bXBfY3NfdGFibGVbI3RlbXBfZHVtcF9jc190YWJsZV0uZmllbGRzID0ge30NCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIGNhcHR1cmluZ19tZXRob2RzID09IHRydWUgYW5kIHY6ZmluZCgifSIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmluZ19tZXRob2RzID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIHY6ZmluZCgiLy8gTWV0aG9kcyIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmluZ19tZXRob2RzID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHRlbXBfZHVtcF9jc190YWJsZVsjdGVtcF9kdW1wX2NzX3RhYmxlXS5tZXRob2RzIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wX2R1bXBfY3NfdGFibGVbI3RlbXBfZHVtcF9jc190YWJsZV0ubWV0aG9kcyA9IHt9DQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIGNhcHR1cmluZ19lbnVtcyA9PSB0cnVlIGFuZCB2OmZpbmQoIn0iKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJpbmdfZW51bXMgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgY2FwdHVyaW5nX3Byb3BlcnRpZXMgPT0gdHJ1ZSBhbmQgdjpmaW5kKCIvLyBbQS1aXSIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmluZ19wcm9wZXJ0aWVzID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIHY6ZmluZCgiLy8gUHJvcGVydGllcyIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmluZ19wcm9wZXJ0aWVzID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHRlbXBfZHVtcF9jc190YWJsZVsjdGVtcF9kdW1wX2NzX3RhYmxlXS5tZXRob2RzIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wX2R1bXBfY3NfdGFibGVbI3RlbXBfZHVtcF9jc190YWJsZV0ubWV0aG9kcyA9IHt9DQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIGNhcHR1cmluZ19wcm9wZXJ0aWVzID09IHRydWUgYW5kIHY6ZmluZCgiQ29tcGlsZXJHZW5lcmF0ZWQiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RfbmFtZV9nZXQgPSB2OmdzdWIoIiguKyApKC4rKSB7LisiLCAiJTFnZXRfJTIoKSB7IH0iKQ0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kX3R5cGVfZ2V0ID0gdjpnc3ViKCIuKyAoLispICguKyB7KS4rIiwgIiUxIik6Z3N1YigiWz4/JVslXV0iLCAiIikNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZF9vZmZzZXRfZ2V0ID0gdjpnc3ViKCIuK30gLy8gKC4rKSIsICIlMSIpOmdzdWIoIiguKyktLisgLisiLCAiJTEiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHRlbXBfZHVtcF9jc190YWJsZVsjdGVtcF9kdW1wX2NzX3RhYmxlXS5tZXRob2RzLCB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kX29mZnNldCA9IG1ldGhvZF9vZmZzZXRfZ2V0LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZF9uYW1lID0gbWV0aG9kX25hbWVfZ2V0LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZF90eXBlID0gbWV0aG9kX3R5cGVfZ2V0DQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kX25hbWVfc2V0ID0gdjpnc3ViKCIoLisgKSguKykgKC4rKSB7LisiLCAiJTF2b2lkIHNldF8lMyglMiB2YWx1ZSkgeyB9IikNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZF90eXBlX3NldCA9ICJ2b2lkIg0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kX29mZnNldF9zZXQgPSB2OmdzdWIoIi4rfSAvLyAoLispIiwgIiUxIik6Z3N1YigiListLisgKC4rKS0uKyIsICIlMSIpDQogICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQodGVtcF9kdW1wX2NzX3RhYmxlWyN0ZW1wX2R1bXBfY3NfdGFibGVdLm1ldGhvZHMsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Rfb2Zmc2V0ID0gbWV0aG9kX29mZnNldF9zZXQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kX25hbWUgPSBtZXRob2RfbmFtZV9zZXQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kX3R5cGUgPSBtZXRob2RfdHlwZV9zZXQNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBjYXB0dXJpbmdfcHJvcGVydGllcyA9PSB0cnVlIGFuZCB2OmZpbmQoInsgZ2V0OyB9IikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kX25hbWVfZ2V0ID0gdjpnc3ViKCIoLisgKSguKykgey4rIiwgIiUxZ2V0XyUyKCkgeyB9IikNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZF90eXBlX2dldCA9IHY6Z3N1YigiLisgKC4rKSAoLisgeykuKyIsICIlMSIpOmdzdWIoIls+PyVbJV1dIiwgIiIpDQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Rfb2Zmc2V0X2dldCA9IHY6Z3N1YigiLit9IC8vICguKykiLCAiJTEiKTpnc3ViKCIoLispLS4rIiwgIiUxIikNCiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydCh0ZW1wX2R1bXBfY3NfdGFibGVbI3RlbXBfZHVtcF9jc190YWJsZV0ubWV0aG9kcywgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZF9vZmZzZXQgPSBtZXRob2Rfb2Zmc2V0X2dldCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RfbmFtZSA9IG1ldGhvZF9uYW1lX2dldCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RfdHlwZSA9IG1ldGhvZF90eXBlX2dldA0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGNhcHR1cmluZ19wcm9wZXJ0aWVzID09IHRydWUgYW5kIHY6ZmluZCgieyBzZXQ7IH0iKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RfbmFtZV9zZXQgPSB2OmdzdWIoIiguKyApKC4rKSAoLispIHsuKyIsICIlMXZvaWQgc2V0XyUzKCUyIHZhbHVlKSB7IH0iKQ0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kX3R5cGVfc2V0ID0gInZvaWQiDQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Rfb2Zmc2V0X3NldCA9IHY6Z3N1YigiLit9IC8vICguKykiLCAiJTEiKTpnc3ViKCIoLispLS4rIiwgIiUxIikNCiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydCh0ZW1wX2R1bXBfY3NfdGFibGVbI3RlbXBfZHVtcF9jc190YWJsZV0ubWV0aG9kcywgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZF9vZmZzZXQgPSBtZXRob2Rfb2Zmc2V0X3NldCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RfbmFtZSA9IG1ldGhvZF9uYW1lX3NldCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RfdHlwZSA9IG1ldGhvZF90eXBlX3NldA0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIGNhcHR1cmluZ19tZXRob2RzID09IHRydWUgYW5kIHY6ZmluZCgiJSk7IC8vIDB4IikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgbWV0aG9kX29mZnNldCA9IHY6Z3N1YigiLisvLyAoLispLS4rIiwgIiUxIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIG1ldGhvZF9uYW1lID0gdjpnc3ViKCIoLispOy4rIiwgIiUxIik6Z3N1YigiCSIsICIiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgbWV0aG9kX3R5cGUgPSAiIg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbWV0aG9kX25hbWU6ZmluZCgiIHN0YXRpYyAiKSBvciBtZXRob2RfbmFtZTpmaW5kKCIgb3ZlcnJpZGUgIikgb3INCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RfbmFtZTpmaW5kKCIgaW50ZXJuYWwgIikgb3IgbWV0aG9kX25hbWU6ZmluZCgiIHZpcnR1YWwgIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZF90eXBlID0gbWV0aG9kX25hbWU6Z3N1YigiLisgLisgKC4rKSAuKyUoLisiLCAiJTEiKTpnc3ViKCJbCSolWyVdXSIsICIiKTpnc3ViKCJbPixdIiwgIiIpDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kX3R5cGUgPSBtZXRob2RfbmFtZTpnc3ViKCIuKyAoLispIC4rJSguKyIsICIlMSIpOmdzdWIoIlsJKiVbJV1dIiwgIiIpOmdzdWIoIls+LF0iLCAiIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHRlbXBfZHVtcF9jc190YWJsZVsjdGVtcF9kdW1wX2NzX3RhYmxlXS5tZXRob2RzLCB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kX29mZnNldCA9IG1ldGhvZF9vZmZzZXQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kX25hbWUgPSBtZXRob2RfbmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RfdHlwZSA9IG1ldGhvZF90eXBlDQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgY2FwdHVyaW5nX2VudW1zID09IHRydWUgYW5kIHY6ZmluZCgiW0EtWmEtejAtOV0rID0iKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBlbnVtX3ZhbHVlID0gdjpnc3ViKCIuKyA9ICguKykiLCAiJTEiKTpnc3ViKCIsIiwgIiIpDQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBlbnVtX25hbWUgPSB2OmdzdWIoIihbQS1aYS16XSspID0gLisiLCAiJTEiKTpnc3ViKCIJIiwgIiIpDQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBlbnVtX3R5cGUgPSAiIg0KICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHRlbXBfZHVtcF9jc190YWJsZVsjdGVtcF9kdW1wX2NzX3RhYmxlXS5maWVsZHMsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnVtX3R5cGUgPSBlbnVtX3R5cGUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bV92YWx1ZSA9IGVudW1fdmFsdWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bV9uYW1lID0gZW51bV9uYW1lDQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgY2FwdHVyaW5nX2ZpZWxkcyA9PSB0cnVlIGFuZCB2OmZpbmQoIjsgLy8gMHgiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBmaWVsZF90eXBlID0gIiINCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGZpZWxkX29mZnNldCA9ICIiDQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBmaWVsZF9uYW1lID0gIiINCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHY6ZmluZCgiIHN0YXRpYyAiKSBvciB2OmZpbmQoIiByZWFkb25seSAiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfdHlwZSA9IHY6Z3N1YigiLisgLisgKC4rKSAuKzsgLy8gMHguKyIsICIlMSIpOmdzdWIoIlsJKiVbJV1dIiwgIiIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfb2Zmc2V0ID0gdjpnc3ViKCIuKyAuKyAuKyAuKzsgLy8gKDB4LispIiwgIiUxIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF9uYW1lID0gdjpnc3ViKCIuKyAuKyAuKyAoLispOyAvLyAweC4rIiwgIiUxIik6Z3N1YigiCSIsICIiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX3R5cGUgPSB2OmdzdWIoIi4rICguKykgLis7IC8vIDB4LisiLCAiJTEiKTpnc3ViKCJbCSolWyVdXSIsICIiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX29mZnNldCA9IHY6Z3N1YigiLisgLisgLis7IC8vICgweC4rKSIsICIlMSIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfbmFtZSA9IHY6Z3N1YigiLisgLisgKC4rKTsgLy8gMHguKyIsICIlMSIpOmdzdWIoIgkiLCAiIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHRlbXBfZHVtcF9jc190YWJsZVsjdGVtcF9kdW1wX2NzX3RhYmxlXS5maWVsZHMsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF90eXBlID0gZmllbGRfdHlwZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF9vZmZzZXQgPSBmaWVsZF9vZmZzZXQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfbmFtZSA9IGZpZWxkX25hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHRlbXBEdW1wVGFibGUpIGRvDQogICAgICAgICAgICAgICAgICAgIGlmIHY6ZmluZCgiIE5hbWVzcGFjZToiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJpbmcgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgY2FwdHVyaW5nX2ZpZWxkcyA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJpbmdfbWV0aG9kcyA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBpZiB0ZW1wRHVtcFRhYmxlW2kgKyAxXTpmaW5kKCIuKyBjbGFzcyAuKyIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJpbmcgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcF9kdW1wX2NzX3RhYmxlWyN0ZW1wX2R1bXBfY3NfdGFibGUgKyAxXSA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlID0gdGVtcER1bXBUYWJsZVtpXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3MgPSB0ZW1wRHVtcFRhYmxlW2kgKyAxXQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiB0ZW1wRHVtcFRhYmxlW2kgKyAxXTpmaW5kKCIuKyBzdHJ1Y3QgLisiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FwdHVyaW5nID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBfZHVtcF9jc190YWJsZVsjdGVtcF9kdW1wX2NzX3RhYmxlICsgMV0gPSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZSA9IHRlbXBEdW1wVGFibGVbaV0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCA9IHRlbXBEdW1wVGFibGVbaSArIDFdDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIHRlbXBEdW1wVGFibGVbaSArIDFdOmZpbmQoIi4rIGVudW0gLisiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FwdHVyaW5nID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBfZHVtcF9jc190YWJsZVsjdGVtcF9kdW1wX2NzX3RhYmxlICsgMV0gPSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZSA9IHRlbXBEdW1wVGFibGVbaV0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudW0gPSB0ZW1wRHVtcFRhYmxlW2kgKyAxXQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgY2FwdHVyaW5nID09IHRydWUgYW5kIHY6ZmluZCgiLy8gTWV0aG9kcyIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBfZHVtcF9jc190YWJsZVsjdGVtcF9kdW1wX2NzX3RhYmxlXS5tZXRob2RzID0ge30NCiAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmluZ19tZXRob2RzID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgY2FwdHVyaW5nX2ZpZWxkcyA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiB2OmZpbmQoIi8vIFByb3BlcnRpZXMiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJpbmdfZmllbGRzID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIGNhcHR1cmluZ19maWVsZHMgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAjdiA+IDAgYW5kIHY6ZmluZCgiIC8vIDB4IikgYW5kIHRlbXBfZHVtcF9jc190YWJsZVsjdGVtcF9kdW1wX2NzX3RhYmxlXS5jbGFzcyB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZmllbGRfdHlwZSA9ICIiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZmllbGRfb2Zmc2V0ID0gIiINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBmaWVsZF9uYW1lID0gIiINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2OmZpbmQoIiBzdGF0aWMgIikgb3IgdjpmaW5kKCIgcmVhZG9ubHkgIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF90eXBlID0gdjpnc3ViKCIuKyAuKyAoLispIC4rOyAvLyAweC4rIiwgIiUxIik6Z3N1YigiWwkqJVslXV0iLCAiIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfb2Zmc2V0ID0gdjpnc3ViKCIuKyAuKyAuKyAuKzsgLy8gKDB4LispIiwgIiUxIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfbmFtZSA9IHY6Z3N1YigiLisgLisgLisgKC4rKTsgLy8gMHguKyIsICIlMSIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF90eXBlID0gdjpnc3ViKCIuKyAoLispIC4rOyAvLyAweC4rIiwgIiUxIik6Z3N1YigiWwkqJVslXV0iLCAiIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfb2Zmc2V0ID0gdjpnc3ViKCIuKyAuKyAuKzsgLy8gKDB4LispIiwgIiUxIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfbmFtZSA9IHY6Z3N1YigiLisgLisgKC4rKTsgLy8gMHguKyIsICIlMSIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHRlbXBfZHVtcF9jc190YWJsZVsjdGVtcF9kdW1wX2NzX3RhYmxlXS5maWVsZHMsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfdHlwZSA9IGZpZWxkX3R5cGUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX29mZnNldCA9IGZpZWxkX29mZnNldCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfbmFtZSA9IGZpZWxkX25hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmICN2ID4gMCBhbmQgdjpmaW5kKCIgJT0gIikgYW5kIHRlbXBfZHVtcF9jc190YWJsZVsjdGVtcF9kdW1wX2NzX3RhYmxlXS5lbnVtIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBmaWVsZF90eXBlID0gIiINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBmaWVsZF92YWx1ZSA9ICIiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZmllbGRfbmFtZSA9ICIiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfdHlwZSA9IHY6Z3N1YigiLisgY29uc3QgKC4rKSAuKyAlPSBbJS0wLTldKzsiLCAiJTEiKTpnc3ViKCJbCSolWyVdXSIsICIiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX3ZhbHVlID0gdjpnc3ViKCIuKyBjb25zdCAuKyAuKyAlPSAoWyUtMC05XSspOyIsICIlMSIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfbmFtZSA9IHY6Z3N1YigiLisgY29uc3QgLisgKC4rKSAlPSBbJS0wLTldKzsiLCAiJTEiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydCh0ZW1wX2R1bXBfY3NfdGFibGVbI3RlbXBfZHVtcF9jc190YWJsZV0uZmllbGRzLCB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudW1fdHlwZSA9IGZpZWxkX3R5cGUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudW1fdmFsdWUgPSBmaWVsZF92YWx1ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bV9uYW1lID0gZmllbGRfbmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIGNhcHR1cmluZ19tZXRob2RzID09IHRydWUgYW5kIHY6ZmluZCgiCS8vIFJWQToiKSBhbmQgdjpmaW5kKCIgVkE6ICIpIGFuZCB2OmZpbmQoIk1vdmVOZXh0IikgPT0NCiAgICAgICAgICAgICAgICAgICAgICAgIG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJpbmdfZmllbGRzID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIG1ldGhvZF9vZmZzZXQgPSB0ZW1wRHVtcFRhYmxlW2ldOmdzdWIoIi4rLy8gUlZBOiAoMHhbQS1aMC05XSspIE9mZnNldDogLisiLCAiJTEiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgbWV0aG9kX25hbWUgPSB0ZW1wRHVtcFRhYmxlW2kgKyAxXTpnc3ViKCIJIiwgIiIpDQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBtZXRob2RfdHlwZSA9ICIiDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBtZXRob2RfbmFtZTpmaW5kKCIgc3RhdGljICIpIG9yIG1ldGhvZF9uYW1lOmZpbmQoIiBvdmVycmlkZSAiKSBvcg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZF9uYW1lOmZpbmQoIiBpbnRlcm5hbCAiKSBvciBtZXRob2RfbmFtZTpmaW5kKCIgdmlydHVhbCAiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kX3R5cGUgPSBtZXRob2RfbmFtZTpnc3ViKCIuKyAuKyAoLispIC4rJSguKyIsICIlMSIpOmdzdWIoIlsJKiVbJV1dIiwgIiIpOmdzdWIoIls+LF0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RfdHlwZSA9IG1ldGhvZF9uYW1lOmdzdWIoIi4rICguKykgLislKC4rIiwgIiUxIik6Z3N1YigiWwkqJVslXV0iLCAiIik6Z3N1YigiWz4sXSIsICIiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQodGVtcF9kdW1wX2NzX3RhYmxlWyN0ZW1wX2R1bXBfY3NfdGFibGVdLm1ldGhvZHMsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Rfb2Zmc2V0ID0gbWV0aG9kX29mZnNldCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RfbmFtZSA9IG1ldGhvZF9uYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZF90eXBlID0gbWV0aG9kX3R5cGUNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBjYXB0dXJpbmcgPT0gdHJ1ZSBhbmQgdGVtcER1bXBUYWJsZVtpXTpmaW5kKCIvLyBGaWVsZHMiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICB0ZW1wX2R1bXBfY3NfdGFibGVbI3RlbXBfZHVtcF9jc190YWJsZV0uZmllbGRzID0ge30NCiAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmluZ19maWVsZHMgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBkdW1wX2NzX3RhYmxlID0gdGVtcF9kdW1wX2NzX3RhYmxlDQogICAgICAgIGVuZA0KICAgICAgICBzYXZlX2R1bXAgPSB0cnVlDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglkdW1wSGFuZGxlci5zYXZlSlNPTigpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBzYXZlSlNPTiA9IGZ1bmN0aW9uKCkNCiAgICAgICAgZmlsZSA9IGlvLm9wZW4oZGF0YVBhdGggLi4gZ2FtZV9wYXRoIC4uICIvcHJvY2Vzc2VkX2R1bXBfIiAuLiBnZy5nZXRUYXJnZXRJbmZvKCkudmVyc2lvbk5hbWUgLi4gIi5qc29uIiwgIncrIikNCiAgICAgICAgZmlsZTp3cml0ZShqc29uLmVuY29kZShkdW1wX2NzX3RhYmxlKSkNCiAgICAgICAgZmlsZTpjbG9zZSgpDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglkdW1wSGFuZGxlci5sb2FkSlNPTigpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBsb2FkSlNPTiA9IGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgZmlsZSA9IGFzc2VydChpby5vcGVuKGRhdGFQYXRoIC4uIGdhbWVfcGF0aCAuLiAiL3Byb2Nlc3NlZF9kdW1wXyIgLi4gZ2cuZ2V0VGFyZ2V0SW5mbygpLnZlcnNpb25OYW1lIC4uICIuanNvbiIsICJyIikpDQogICAgICAgIGxvY2FsIGNvbnRlbnQgPSBmaWxlOnJlYWQoIiphIikNCiAgICAgICAgZmlsZTpjbG9zZSgpDQogICAgICAgIGR1bXBfY3NfdGFibGUgPSBqc29uLmRlY29kZShjb250ZW50KQ0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJZHVtcEhhbmRsZXIubG9hZER1bXBEYXRhKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIGxvYWREdW1wRGF0YSA9IGZ1bmN0aW9uKCkNCiAgICAgICAgaWYgI2R1bXBfY3NfdGFibGUgPT0gMCB0aGVuDQogICAgICAgICAgICBzZWxlY3RfbGliKCkNCiAgICAgICAgICAgIGlmIHBjYWxsKGR1bXBIYW5kbGVyLmxvYWRKU09OKSA9PSBmYWxzZSB0aGVuDQogICAgICAgICAgICAgICAgZHVtcEhhbmRsZXIuY3JlYXRlRGlyZWN0b3J5KCkNCiAgICAgICAgICAgICAgICBkdW1wSGFuZGxlci5pbXBvcnREdW1wKCkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgbG9jYWwgdGVtcF90eXBlcyA9IHt9DQogICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhkdW1wX2NzX3RhYmxlKSBkbw0KICAgICAgICAgICAgICAgIGlmIHYubWV0aG9kcyB0aGVuDQogICAgICAgICAgICAgICAgICAgIGZvciBpbmRleCwgdmFsdWUgaW4gcGFpcnModi5tZXRob2RzKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHRlbXBfdHlwZXNbdmFsdWUubWV0aG9kX3R5cGVdIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wX3R5cGVzW3ZhbHVlLm1ldGhvZF90eXBlXSA9IHZhbHVlLm1ldGhvZF90eXBlDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGZvciBrLCB2IGluIHBhaXJzKHRlbXBfdHlwZXMpIGRvDQogICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGJjX3Rvb2xib3hfbWV0aG9kX3R5cGVzX2FsbCwgdikNCiAgICAgICAgICAgICAgICBpZiB2OmZpbmQoIltBLVpdIikgdGhlbg0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGJjX3Rvb2xib3hfbWV0aG9kX3R5cGVzLCB2KQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KfQ0KDQpwbHVnaW5NYW5hZ2VyID0gew0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglwbHVnaW5NYW5hZ2VyLmNvbmZpZ01lbnUoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgY29uZmlnTWVudSA9IGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgbWVudSA9IGdnLmNob2ljZSh7IuKGle+4jyBDaGFuZ2UgTWVudSBPcmRlciIsIA0KCQkJCQkJCQki8J+UoiBTZXQgTWVudSBJdGVtIExpbWl0IiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIvCflJcgQ29uZmlndXJlIERlZmF1bHQgUGx1Z2lucyIsIA0KCQkJCQkJCQki8J+TpSBJbnN0YWxsIFBsdWdpbiIsIA0KCQkJCQkJCQki4pyP77iPIFJlbmFtZSBQbHVnaW4iLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAi4pyFIEVuYWJsZS9EaXNhYmxlIFBsdWdpbnMifSwgDQoJCQkJCQkJCW5pbCwgDQoJCQkJCQkJCXNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBQbHVnaW4gTWFuYWdlciDihLnvuI8iKQ0KICAgICAgICBpZiBtZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICBpZiBtZW51ID09IDEgdGhlbg0KICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIubWVudU9yZGVyKCkNCiAgICAgICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmNvbmZpZ01lbnUoKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBtZW51ID09IDIgdGhlbg0KICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIubWVudUxpbWl0KCkNCiAgICAgICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmNvbmZpZ01lbnUoKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBtZW51ID09IDMgdGhlbg0KICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIuZGVmYXVsdFBsdWdpbnMoKQ0KICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIuY29uZmlnTWVudSgpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGlmIG1lbnUgPT0gNCB0aGVuDQogICAgICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5pbnN0YWxsUGx1Z2luKCkNCiAgICAgICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmNvbmZpZ01lbnUoKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBtZW51ID09IDUgdGhlbg0KICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIucmVuYW1lUGx1Z2luKCkNCiAgICAgICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmNvbmZpZ01lbnUoKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBtZW51ID09IDYgdGhlbg0KICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIudG9nZ2xlUGx1Z2lucygpDQogICAgICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5jb25maWdNZW51KCkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCXBsdWdpbk1hbmFnZXIuY2FsbFBsdWdpbihwbHVnaW5fcGF0aCwgZnVuY3Rpb25fdGFibGUsIHBhc3NlZF9kYXRhKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgY2FsbFBsdWdpbiA9IGZ1bmN0aW9uKHBsdWdpbl9wYXRoLCBmdW5jdGlvbl90YWJsZSwgcGFzc2VkX2RhdGEpDQogICAgICAgIGlmIF9HW2Z1bmN0aW9uX3RhYmxlXSB0aGVuDQogICAgICAgICAgICBfR1tmdW5jdGlvbl90YWJsZV0uaG9tZShwYXNzZWRfZGF0YSkNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgZG9maWxlKHBsdWdpbl9wYXRoKQ0KICAgICAgICAgICAgaWYgcGFzc2VkX2RhdGEgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICBfR1tmdW5jdGlvbl90YWJsZV0uaG9tZShwYXNzZWRfZGF0YSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCXBsdWdpbk1hbmFnZXIuZGVmYXVsdEhhbmRsZXIoaGFuZGxlciwgcGFzc2VkX2RhdGEpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBkZWZhdWx0SGFuZGxlciA9IGZ1bmN0aW9uKGhhbmRsZXIsIHBhc3NlZF9kYXRhKQ0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhwbHVnaW5NYW5hZ2VyLnRvb2xib3hQbHVnaW5zKSBkbw0KICAgICAgICAgICAgaWYgdi5kZWZhdWx0X2hhbmRsZXIgPT0gaGFuZGxlciB0aGVuDQogICAgICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5jYWxsUGx1Z2luKHYucGx1Z2luX3BhdGgsIHYuZnVuY3Rpb25fdGFibGUsIHBhc3NlZF9kYXRhKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJcGx1Z2luTWFuYWdlci5pbml0UGx1Z2luTWFuYWdlcigpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBpbml0UGx1Z2luTWFuYWdlciA9IGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgZmlsZSA9IGFzc2VydChpby5vcGVuKGNvbmZpZ0RhdGFQYXRoIC4uICJwbHVnaW5fbWFuYWdlci5qc29uIiwgInIiKSkNCiAgICAgICAgbG9jYWwgY29udGVudCA9IGZpbGU6cmVhZCgiKmEiKQ0KICAgICAgICBmaWxlOmNsb3NlKCkNCiAgICAgICAgcGx1Z2luTWFuYWdlci50b29sYm94UGx1Z2lucyA9IGpzb24uZGVjb2RlKGNvbnRlbnQpDQogICAgICAgIGRvZmlsZShjb25maWdEYXRhUGF0aCAuLiAicGx1Z2luX21hbmFnZXJfY29uZmlnLmx1YSIpDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglwbHVnaW5NYW5hZ2VyLmluaXRBbGxQbHVnaW5NYW5hZ2VyKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIGluaXRBbGxQbHVnaW5NYW5hZ2VyID0gZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBmaWxlID0gYXNzZXJ0KGlvLm9wZW4oY29uZmlnRGF0YVBhdGggLi4gInBsdWdpbl9tYW5hZ2VyX2FsbF9wbHVnaW5zLmpzb24iLCAiciIpKQ0KICAgICAgICBsb2NhbCBjb250ZW50ID0gZmlsZTpyZWFkKCIqYSIpDQogICAgICAgIGZpbGU6Y2xvc2UoKQ0KICAgICAgICBwbHVnaW5NYW5hZ2VyLnRvb2xib3hBbGxQbHVnaW5zID0ganNvbi5kZWNvZGUoY29udGVudCkNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCXBsdWdpbk1hbmFnZXIubWVudU9yZGVyKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIG1lbnVPcmRlciA9IGZ1bmN0aW9uKCkNCiAgICAgICAgaWYgcGNhbGwoY2hlY2tfcGx1Z2luX21hbmFnZXIpID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIuc2F2ZVBsdWdpbnMoKQ0KICAgICAgICBlbmQNCiAgICAgICAgbG9jYWwgc2xpZGVyX3JhbmdlID0gJyBbMTsgJyAuLiAjcGx1Z2luTWFuYWdlci50b29sYm94UGx1Z2lucyAuLiAnXScNCiAgICAgICAgbG9jYWwgc2xpZGVycyA9IHt9DQogICAgICAgIGxvY2FsIG51bWJlcnMgPSB7fQ0KICAgICAgICBsb2NhbCBtZW51ID0ge30NCiAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMocGx1Z2luTWFuYWdlci50b29sYm94UGx1Z2lucykgZG8NCiAgICAgICAgICAgIHNsaWRlcnNbaV0gPSB2Lm1lbnVfbmFtZSAuLiBzbGlkZXJfcmFuZ2UNCiAgICAgICAgICAgIG51bWJlcnNbaV0gPSAibnVtYmVyIg0KICAgICAgICAgICAgbWVudVtpXSA9IGkNCiAgICAgICAgZW5kDQogICAgICAgIHNsaWRlcnNbMV0gPSBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2V0IG9yZGVyIG9mIG1haW4gbWVudSBpdGVtcyBiZWxvdy4g4oS577iPXG5cbiIgLi4gc2xpZGVyc1sxXQ0KICAgICAgICA6OmR1cGxpY2F0ZV9pbmRleDo6DQogICAgICAgIG1lbnUgPSBnZy5wcm9tcHQoc2xpZGVycywgbWVudSwgbnVtYmVycykNCiAgICAgICAgaWYgbWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgbG9jYWwgY2hlY2tfZHVwbGljYXRlX2luZGV4ZXMgPSB7fQ0KICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMobWVudSkgZG8NCiAgICAgICAgICAgICAgICBpZiBjaGVja19kdXBsaWNhdGVfaW5kZXhlc1t2XSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGdnLmFsZXJ0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBEdXBsaWNhdGUgSW5kZXhlcyBGb3VuZCDihLnvuI8iKQ0KICAgICAgICAgICAgICAgICAgICBnb3RvIGR1cGxpY2F0ZV9pbmRleA0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgY2hlY2tfZHVwbGljYXRlX2luZGV4ZXNbdl0gPSB2DQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGxvY2FsIHRlbXBfcGx1Z2lucyA9IHt9DQogICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhtZW51KSBkbw0KICAgICAgICAgICAgICAgIHRlbXBfcGx1Z2luc1t0b251bWJlcih2KV0gPSBwbHVnaW5NYW5hZ2VyLnRvb2xib3hQbHVnaW5zW2ldDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIudG9vbGJveFBsdWdpbnMgPSB0ZW1wX3BsdWdpbnMNCiAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIuc2F2ZVBsdWdpbnMoKQ0KICAgICAgICAgICAgZ2cudG9hc3Qoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIE1lbnUgb3JkZXIgc2V0LiDihLnvuI8iKQ0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCXBsdWdpbk1hbmFnZXIuZGVmYXVsdFBsdWdpbnMoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgZGVmYXVsdFBsdWdpbnMgPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIGhhbmRsZXJfaW5kZXhlcyA9IHsNCiAgICAgICAgICAgIG1ldGhvZCA9ICIiLA0KICAgICAgICAgICAgZmllbGQgPSAiIiwNCiAgICAgICAgICAgIGVudW0gPSAiIiwNCiAgICAgICAgICAgIGNsYXNzID0gIiINCiAgICAgICAgfQ0KICAgICAgICBsb2NhbCBtZXRob2RfcmVzdWx0c19oYW5kbGVyID0gIk1ldGhvZCBzZWFyY2ggcmVzdWx0IGhhbmRsZXI6XG4iDQogICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHBsdWdpbk1hbmFnZXIudG9vbGJveFBsdWdpbnMpIGRvDQogICAgICAgICAgICBpZiB2LmRlZmF1bHRfaGFuZGxlciA9PSAibWV0aG9kX3Jlc3VsdHMiIHRoZW4NCiAgICAgICAgICAgICAgICBoYW5kbGVyX2luZGV4ZXMubWV0aG9kID0gaQ0KICAgICAgICAgICAgICAgIG1ldGhvZF9yZXN1bHRzX2hhbmRsZXIgPSBtZXRob2RfcmVzdWx0c19oYW5kbGVyIC4uIHYubWVudV9uYW1lDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIGZpZWxkX3Jlc3VsdHNfaGFuZGxlciA9ICJGaWVsZCBzZWFyY2ggcmVzdWx0IGhhbmRsZXI6XG4iDQogICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHBsdWdpbk1hbmFnZXIudG9vbGJveFBsdWdpbnMpIGRvDQogICAgICAgICAgICBpZiB2LmRlZmF1bHRfaGFuZGxlciA9PSAiZmllbGRfcmVzdWx0cyIgdGhlbg0KICAgICAgICAgICAgICAgIGhhbmRsZXJfaW5kZXhlcy5maWVsZCA9IGkNCiAgICAgICAgICAgICAgICBmaWVsZF9yZXN1bHRzX2hhbmRsZXIgPSBmaWVsZF9yZXN1bHRzX2hhbmRsZXIgLi4gdi5tZW51X25hbWUNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgbG9jYWwgZW51bV9yZXN1bHRzX2hhbmRsZXIgPSAiRW51bSBzZWFyY2ggcmVzdWx0IGhhbmRsZXI6XG4iDQogICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHBsdWdpbk1hbmFnZXIudG9vbGJveFBsdWdpbnMpIGRvDQogICAgICAgICAgICBpZiB2LmRlZmF1bHRfaGFuZGxlciA9PSAiZW51bV9yZXN1bHRzIiB0aGVuDQogICAgICAgICAgICAgICAgaGFuZGxlcl9pbmRleGVzLmVudW0gPSBpDQogICAgICAgICAgICAgICAgZW51bV9yZXN1bHRzX2hhbmRsZXIgPSBlbnVtX3Jlc3VsdHNfaGFuZGxlciAuLiB2Lm1lbnVfbmFtZQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBsb2NhbCBjbGFzc19yZXN1bHRzX2hhbmRsZXIgPSAiQ2xhc3MvRmllbGQgc2VhcmNoIHJlc3VsdCBoYW5kbGVyOlxuIg0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhwbHVnaW5NYW5hZ2VyLnRvb2xib3hQbHVnaW5zKSBkbw0KICAgICAgICAgICAgaWYgdi5kZWZhdWx0X2hhbmRsZXIgPT0gImNsYXNzX3Jlc3VsdHMiIHRoZW4NCiAgICAgICAgICAgICAgICBoYW5kbGVyX2luZGV4ZXMuY2xhc3MgPSBpDQogICAgICAgICAgICAgICAgY2xhc3NfcmVzdWx0c19oYW5kbGVyID0gY2xhc3NfcmVzdWx0c19oYW5kbGVyIC4uIHYubWVudV9uYW1lDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIGhhbmRsZXJNZW51ID0gZ2cuY2hvaWNlKHttZXRob2RfcmVzdWx0c19oYW5kbGVyLCANCgkJCQkJCQkJCQlmaWVsZF9yZXN1bHRzX2hhbmRsZXIsIA0KCQkJCQkJCQkJCWVudW1fcmVzdWx0c19oYW5kbGVyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzX3Jlc3VsdHNfaGFuZGxlcn0sIA0KCQkJCQkJCQkJCW5pbCwNCgkJCQkJCQkJCQlzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2V0IGRlZmF1bHQgcGx1Z2lucy4g4oS577iPIikNCiAgICAgICAgaWYgaGFuZGxlck1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgIGxvY2FsIGhhbmRsZXJfdHlwZXMgPSB7DQogICAgICAgICAgICAgICAgWzFdID0gIm1ldGhvZCIsDQogICAgICAgICAgICAgICAgWzJdID0gImZpZWxkIiwNCiAgICAgICAgICAgICAgICBbM10gPSAiZW51bSIsDQogICAgICAgICAgICAgICAgWzRdID0gImNsYXNzIg0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbG9jYWwgaGFuZGxlcl9uYW1lcyA9IHsNCiAgICAgICAgICAgICAgICBbMV0gPSAibWV0aG9kX3Jlc3VsdHMiLA0KICAgICAgICAgICAgICAgIFsyXSA9ICJmaWVsZF9yZXN1bHRzIiwNCiAgICAgICAgICAgICAgICBbM10gPSAiZW51bV9yZXN1bHRzIiwNCiAgICAgICAgICAgICAgICBbNF0gPSAiY2xhc3NfcmVzdWx0cyINCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGxvY2FsIHBsdWdpbnNfbWVudV9pdGVtcyA9IHt9DQogICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhwbHVnaW5NYW5hZ2VyLnRvb2xib3hQbHVnaW5zKSBkbw0KICAgICAgICAgICAgICAgIHBsdWdpbnNfbWVudV9pdGVtc1tpXSA9IHYubWVudV9uYW1lDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGxvY2FsIHNlbGVjdEhhbmRsZXJNZW51ID0gZ2cuY2hvaWNlKHBsdWdpbnNfbWVudV9pdGVtcywgbmlsLA0KICAgICAgICAgICAgICAgIHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBTZWxlY3QgZGVmYXVsdCBwbHVnaW4g4oS577iPIikNCiAgICAgICAgICAgIGlmIHNlbGVjdEhhbmRsZXJNZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgcGx1Z2luTWFuYWdlci50b29sYm94UGx1Z2luc1toYW5kbGVyX2luZGV4ZXNbaGFuZGxlcl90eXBlc1toYW5kbGVyTWVudV1dXS5kZWZhdWx0X2hhbmRsZXIgPSBuaWwNCiAgICAgICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLnRvb2xib3hQbHVnaW5zW3NlbGVjdEhhbmRsZXJNZW51XS5kZWZhdWx0X2hhbmRsZXIgPSBoYW5kbGVyX25hbWVzW2hhbmRsZXJNZW51XQ0KICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIuc2F2ZVBsdWdpbnMoKQ0KICAgICAgICAgICAgICAgIGdnLnRvYXN0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBEZWZhdWx0IHBsdWdpbiBzZXQuIOKEue+4jyIpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglwbHVnaW5NYW5hZ2VyLmluc3RhbGxQbHVnaW4oKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgaW5zdGFsbFBsdWdpbiA9IGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgc2VsZWN0UGx1Z2luTHVhID0gZ2cucHJvbXB0KHtzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2VsZWN0IHBsdWdpbiB0byBpbnN0YWxsLiDihLnvuI8ifSwge2dnLkVYVF9TVE9SQUdFIC4uICIvRG93bmxvYWQvIn0sIHsiZmlsZSJ9KQ0KICAgICAgICBpZiBzZWxlY3RQbHVnaW5MdWEgfj0gbmlsIGFuZCBzZWxlY3RQbHVnaW5MdWEgfj0gZ2cuRVhUX1NUT1JBR0UgLi4gIi9Eb3dubG9hZC8iIHRoZW4NCiAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIuaW5zdGFsbGluZ1BsdWdpbiA9IHRydWUNCiAgICAgICAgICAgIGRvZmlsZShzZWxlY3RQbHVnaW5MdWFbMV0pDQogICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmluc3RhbGxpbmdQbHVnaW4gPSBmYWxzZQ0KICAgICAgICAgICAgbG9jYWwgaW5zdGFsbE1lbnUgPSBnZy5wcm9tcHQoe3NjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBJbnN0YWxsaW5nIFBsdWdpbiDihLnvuI9cblxuTWVudSBuYW1lIGZvciBQbHVnaW4gIiwgDQoJCQkJCQkJCQkJICAiTmFtZSBvZiBmdW5jdGlvbiB0YWJsZSBjb250YWluaW5nIHBsdWdpbnMgaG9tZSgpIG1lbnUuIn0sDQoJCQkJCQkJCQkJICB7DQoJCQkJCQkJCQkJICBwbHVnaW5NYW5hZ2VyLmluc3RhbGxpbmdQbHVnaW5OYW1lLCANCgkJCQkJCQkJCQkgIHBsdWdpbk1hbmFnZXIuaW5zdGFsbGluZ1BsdWdpblRhYmxlfSwgDQoJCQkJCQkJCQkJICB7DQoJCQkJCQkJCQkJICAidGV4dCIsIA0KCQkJCQkJCQkJCSAgInRleHQifSkNCiAgICAgICAgICAgIGlmIGluc3RhbGxNZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgaWYgI2luc3RhbGxNZW51WzFdID4gMCBhbmQgI2luc3RhbGxNZW51WzJdID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGZpbGVuYW1lID0gc2VsZWN0UGx1Z2luTHVhWzFdOmdzdWIoIi4rLyguKykiLCAiJTEiKQ0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBhbGxyZWFkeV9pbnN0YWxsZWQgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhwbHVnaW5NYW5hZ2VyLnRvb2xib3hQbHVnaW5zKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgcGx1Z2luc0RhdGFQYXRoIC4uIGZpbGVuYW1lID09IHYucGx1Z2luX3BhdGggdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbHJlYWR5X2luc3RhbGxlZCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgYWxscmVhZHlfaW5zdGFsbGVkID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgZ2cuYWxlcnQoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIEEgcGx1Z2luIHdpdGggdGhpcyBmaWxlbmFtZSBpcyBhbHJlYWR5IGluc3RhbGxlZCB0cnkgcmVuYW1pbmcgdGhlIGx1YSBmaWxlIGZpcnN0IGlmIHlvdSBhcmUgc3VyZSBpdCBpcyBhIGRpZmZlcmVudCBwbHVnaW4uIOKEue+4jyIpDQogICAgICAgICAgICAgICAgICAgICAgICBnb3RvIGRvbmUNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIG9zLnJlbmFtZShzZWxlY3RQbHVnaW5MdWFbMV0sIHBsdWdpbnNEYXRhUGF0aCAuLiBmaWxlbmFtZSkNCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdGVtcF9wbHVnaW4gPSB7DQogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbl90YWJsZSA9IGluc3RhbGxNZW51WzJdLA0KICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9uYW1lID0gaW5zdGFsbE1lbnVbMV0sDQogICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW5fcGF0aCA9IHBsdWdpbnNEYXRhUGF0aCAuLiBmaWxlbmFtZQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChwbHVnaW5NYW5hZ2VyLnRvb2xib3hQbHVnaW5zLCB0ZW1wX3BsdWdpbikNCiAgICAgICAgICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5zYXZlUGx1Z2lucygpDQogICAgICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIuaW5pdEFsbFBsdWdpbk1hbmFnZXIoKQ0KICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQocGx1Z2luTWFuYWdlci50b29sYm94QWxsUGx1Z2lucywgdGVtcF9wbHVnaW4pDQogICAgICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIuc2F2ZUFsbFBsdWdpbnMoKQ0KICAgICAgICAgICAgICAgICAgICBnZy50b2FzdChzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gUGx1Z2luIGhhcyBiZWVuIGluc3RhbGxlZC4g4oS577iPIikNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgOjpkb25lOjoNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCXBsdWdpbk1hbmFnZXIucmVtb3ZlUGx1Z2luKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIHJlbW92ZVBsdWdpbiA9IGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgcGx1Z2luc19tZW51X2l0ZW1zID0ge30NCiAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMocGx1Z2luTWFuYWdlci50b29sYm94UGx1Z2lucykgZG8NCiAgICAgICAgICAgIHBsdWdpbnNfbWVudV9pdGVtc1tpXSA9IHYubWVudV9uYW1lDQogICAgICAgIGVuZA0KICAgICAgICBsb2NhbCByZW1vdmVQbHVnaW5NZW51ID0gZ2cuY2hvaWNlKHBsdWdpbnNfbWVudV9pdGVtcywgbmlsLA0KICAgICAgICAgICAgc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIFNlbGVjdCBwbHVnaW4gdG8gdW5pbnN0YWxsLiDihLnvuI8iKQ0KICAgICAgICBpZiByZW1vdmVQbHVnaW5NZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICBsb2NhbCBjb25maXJtUmVtb3ZlID0gZ2cuY2hvaWNlKHsi4pyFIFllcyIsIA0KCQkJCQkJCQkJCQkgIuKdjCBObyJ9LCANCgkJCQkJCQkJCQkJIG5pbCwgDQoJCQkJCQkJCQkJCSBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gUmVtb3ZlIHRoZSAiIC4uIHBsdWdpbnNfbWVudV9pdGVtc1tyZW1vdmVQbHVnaW5NZW51XSAuLiAiIHBsdWdpbj8g4oS577iPIikNCiAgICAgICAgICAgIGlmIGNvbmZpcm1SZW1vdmUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBjb25maXJtUmVtb3ZlID09IDEgdGhlbg0KICAgICAgICAgICAgICAgICAgICB0YWJsZS5yZW1vdmUocGx1Z2luTWFuYWdlci50b29sYm94UGx1Z2lucywgcmVtb3ZlUGx1Z2luTWVudSkNCiAgICAgICAgICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5zYXZlUGx1Z2lucygpDQogICAgICAgICAgICAgICAgICAgIGdnLnRvYXN0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBQbHVnaW4gaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIHRoZSBtZW51LiDihLnvuI8iKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJcGx1Z2luTWFuYWdlci5zYXZlUGx1Z2lucygpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBzYXZlUGx1Z2lucyA9IGZ1bmN0aW9uKCkNCiAgICAgICAgZmlsZSA9IGlvLm9wZW4oY29uZmlnRGF0YVBhdGggLi4gInBsdWdpbl9tYW5hZ2VyLmpzb24iLCAidysiKQ0KICAgICAgICBmaWxlOndyaXRlKGpzb24uZW5jb2RlKHBsdWdpbk1hbmFnZXIudG9vbGJveFBsdWdpbnMpKQ0KICAgICAgICBmaWxlOmNsb3NlKCkNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCXBsdWdpbk1hbmFnZXIuc2F2ZUFsbFBsdWdpbnMoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgc2F2ZUFsbFBsdWdpbnMgPSBmdW5jdGlvbigpDQogICAgICAgIGZpbGUgPSBpby5vcGVuKGNvbmZpZ0RhdGFQYXRoIC4uICJwbHVnaW5fbWFuYWdlcl9hbGxfcGx1Z2lucy5qc29uIiwgIncrIikNCiAgICAgICAgZmlsZTp3cml0ZShqc29uLmVuY29kZShwbHVnaW5NYW5hZ2VyLnRvb2xib3hBbGxQbHVnaW5zKSkNCiAgICAgICAgZmlsZTpjbG9zZSgpDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglwbHVnaW5NYW5hZ2VyLnNhdmVNZW51TGltaXQoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgc2F2ZU1lbnVMaW1pdCA9IGZ1bmN0aW9uKCkNCiAgICAgICAgZmlsZSA9IGlvLm9wZW4oY29uZmlnRGF0YVBhdGggLi4gInBsdWdpbl9tYW5hZ2VyX2NvbmZpZy5sdWEiLCAidysiKQ0KICAgICAgICBmaWxlOndyaXRlKCJwbHVnaW5NYW5hZ2VyLm1lbnVJdGVtTGltaXQgPSAiIC4uIHBsdWdpbk1hbmFnZXIubWVudUl0ZW1MaW1pdCkNCiAgICAgICAgZmlsZTpjbG9zZSgpDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglwbHVnaW5NYW5hZ2VyLnJlbmFtZVBsdWdpbigpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICByZW5hbWVQbHVnaW4gPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIHBsdWdpbnNfbWVudV9pdGVtcyA9IHt9DQogICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHBsdWdpbk1hbmFnZXIudG9vbGJveFBsdWdpbnMpIGRvDQogICAgICAgICAgICBwbHVnaW5zX21lbnVfaXRlbXNbaV0gPSB2Lm1lbnVfbmFtZQ0KICAgICAgICBlbmQNCiAgICAgICAgbG9jYWwgcmVuYW1lUGx1Z2luTWVudSA9IGdnLmNob2ljZShwbHVnaW5zX21lbnVfaXRlbXMsIG5pbCwgc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIFNlbGVjdCBwbHVnaW4gdG8gcmVuYW1lLiDihLnvuI8iKQ0KICAgICAgICBpZiByZW5hbWVQbHVnaW5NZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICBsb2NhbCByZW5hbWVQcm9tcHQgPSBnZy5wcm9tcHQoe3NjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBFbnRlciBhIG5ldyBtZW51IG5hbWUgZm9yIHRoZSBwbHVnaW4uIOKEue+4jyJ9LA0KICAgICAgICAgICAgICAgIHtwbHVnaW5zX21lbnVfaXRlbXNbcmVuYW1lUGx1Z2luTWVudV19LCB7InRleHQifSkNCiAgICAgICAgICAgIGlmIHJlbmFtZVByb21wdCB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIudG9vbGJveFBsdWdpbnNbcmVuYW1lUGx1Z2luTWVudV0ubWVudV9uYW1lID0gcmVuYW1lUHJvbXB0WzFdDQogICAgICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5zYXZlUGx1Z2lucygpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglwbHVnaW5NYW5hZ2VyLm1lbnVMaW1pdCgpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBtZW51TGltaXQgPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIG1lbnUgPSBnZy5wcm9tcHQoe3NjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBTZXQgbGltaXQgZm9yIG51bWJlciBvZiBpdGVtcyBwZXIgbWVudS4g4oS577iPXG5cblNldCBtZW51IGl0ZW0gbGltaXQgWzA7IDIwXSJ9LCB7cGx1Z2luTWFuYWdlci5tZW51SXRlbUxpbWl0fSwgeydudW1iZXInfSkNCiAgICAgICAgaWYgbWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5tZW51SXRlbUxpbWl0ID0gbWVudVsxXQ0KICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5zYXZlTWVudUxpbWl0KCkNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglwbHVnaW5NYW5hZ2VyLnRvZ2dsZVBsdWdpbnMoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgdG9nZ2xlUGx1Z2lucyA9IGZ1bmN0aW9uKCkNCiAgICAgICAgaWYgbm90IHBsdWdpbk1hbmFnZXIudG9vbGJveEFsbFBsdWdpbnMgdGhlbg0KICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5pbml0QWxsUGx1Z2luTWFuYWdlcigpDQogICAgICAgIGVuZA0KICAgICAgICBsb2NhbCBtZW51X25hbWVzID0ge30NCiAgICAgICAgbG9jYWwgbWVudV9jaGVja2JveGVzID0ge30NCiAgICAgICAgbG9jYWwgbWVudV92YWx1ZXMgPSB7fQ0KICAgICAgICBsb2NhbCBtZW51X3BhdGhzID0ge30NCiAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMocGx1Z2luTWFuYWdlci50b29sYm94QWxsUGx1Z2lucykgZG8NCiAgICAgICAgICAgIG1lbnVfbmFtZXNbaV0gPSB2Lm1lbnVfbmFtZQ0KICAgICAgICAgICAgbWVudV9jaGVja2JveGVzW2ldID0gImNoZWNrYm94Ig0KICAgICAgICAgICAgbWVudV92YWx1ZXNbaV0gPSBmYWxzZQ0KICAgICAgICAgICAgbWVudV9wYXRoc1tpXSA9IHYucGx1Z2luX3BhdGgNCiAgICAgICAgICAgIGZvciBpbmRleCwgdmFsdWUgaW4gcGFpcnMocGx1Z2luTWFuYWdlci50b29sYm94UGx1Z2lucykgZG8NCiAgICAgICAgICAgICAgICBpZiB2LnBsdWdpbl9wYXRoID09IHZhbHVlLnBsdWdpbl9wYXRoIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbWVudV92YWx1ZXNbaV0gPSB0cnVlDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIG1lbnUgPSBnZy5wcm9tcHQobWVudV9uYW1lcywgbWVudV92YWx1ZXMsIG1lbnVfY2hlY2tib3hlcykNCiAgICAgICAgaWYgbWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMobWVudSkgZG8NCiAgICAgICAgICAgICAgICBpZiB2ID09IHRydWUgYW5kIG1lbnVfdmFsdWVzW2ldID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHBsdWdpbk1hbmFnZXIudG9vbGJveFBsdWdpbnMsIHBsdWdpbk1hbmFnZXIudG9vbGJveEFsbFBsdWdpbnNbaV0pDQogICAgICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIuc2F2ZVBsdWdpbnMoKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIHYgPT0gZmFsc2UgYW5kIG1lbnVfdmFsdWVzW2ldID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICBmb3IgaW5kZXgsIHZhbHVlIGluIHBhaXJzKHBsdWdpbk1hbmFnZXIudG9vbGJveFBsdWdpbnMpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICBpZiB2YWx1ZS5wbHVnaW5fcGF0aCA9PSBtZW51X3BhdGhzW2ldIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5yZW1vdmUocGx1Z2luTWFuYWdlci50b29sYm94UGx1Z2lucywgaW5kZXgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5zYXZlUGx1Z2lucygpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglwbHVnaW5NYW5hZ2VyLnRvb2xib3hQbHVnaW5zDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICB0b29sYm94UGx1Z2lucyA9IHt7DQogICAgICAgIGZ1bmN0aW9uX3RhYmxlID0gInN0YXRpY1ZhbHVlRmluZGVyIiwNCiAgICAgICAgbWVudV9uYW1lID0gIvCflbXvuI/igI0gU3RhdGljIFZhbHVlIEZpbmRlciIsDQogICAgICAgIHBsdWdpbl9wYXRoID0gcGx1Z2luc0RhdGFQYXRoIC4uICJwbHVnaW5fYmNfc3RhdGljX3ZhbHVlX2ZpbmRlci5sdWEiDQogICAgfSwgew0KICAgICAgICBtZW51X25hbWUgPSAi8J+SviBHbG9iYWwtTWV0YWRhdGEgRHVtcGVyIiwNCiAgICAgICAgcGx1Z2luX3BhdGggPSBwbHVnaW5zRGF0YVBhdGggLi4gInBsdWdpbl9iY19tZXRhZGF0YV9kdW1wZXIubHVhIg0KICAgIH0sIHsNCiAgICAgICAgbWVudV9uYW1lID0gIvCfkr4gTGliIER1bXBlciIsDQogICAgICAgIHBsdWdpbl9wYXRoID0gcGx1Z2luc0RhdGFQYXRoIC4uICJwbHVnaW5fYmNfbGliX2R1bXBlci5sdWEiDQogICAgfSwgew0KICAgICAgICBtZW51X25hbWUgPSAi8J+UjiBDbGFzcyBGaWVsZCBTZWFyY2hlciIsDQogICAgICAgIHBsdWdpbl9wYXRoID0gcGx1Z2luc0RhdGFQYXRoIC4uICJwbHVnaW5fYmNfY2xhc3NfZmllbGRfc2VhcmNoLmx1YSINCiAgICB9LCB7DQogICAgICAgIGZ1bmN0aW9uX3RhYmxlID0gImR1bXBTZWFyY2hlciIsDQogICAgICAgIG1lbnVfbmFtZSA9ICLwn5SNIFNlYXJjaCBEdW1wLmNzIiwNCiAgICAgICAgcGx1Z2luX3BhdGggPSBwbHVnaW5zRGF0YVBhdGggLi4gInBsdWdpbl9iY19kdW1wX3NlYXJjaC5sdWEiDQogICAgfSwgew0KICAgICAgICBmdW5jdGlvbl90YWJsZSA9ICJtZXRob2RTZWFyY2hSZXN1bHRzIiwNCiAgICAgICAgZGVmYXVsdF9oYW5kbGVyID0gIm1ldGhvZF9yZXN1bHRzIiwNCiAgICAgICAgbWVudV9uYW1lID0gIvCfl5LvuI8gTWV0aG9kIFNlYXJjaCBSZXN1bHRzIiwNCiAgICAgICAgbWVudV9jb3VudF90YWJsZSA9ICJkdW1wU2VhcmNoZXIubWV0aG9kUmVzdWx0cyIsDQogICAgICAgIHBsdWdpbl9wYXRoID0gcGx1Z2luc0RhdGFQYXRoIC4uICJwbHVnaW5fYmNfbWV0aG9kX3NlYXJjaF9yZXN1bHRzLmx1YSINCiAgICB9LCB7DQogICAgICAgIGZ1bmN0aW9uX3RhYmxlID0gImZpZWxkU2VhcmNoUmVzdWx0cyIsDQogICAgICAgIGRlZmF1bHRfaGFuZGxlciA9ICJmaWVsZF9yZXN1bHRzIiwNCiAgICAgICAgbWVudV9uYW1lID0gIvCfl5LvuI8gRmllbGQgU2VhcmNoIFJlc3VsdHMiLA0KICAgICAgICBtZW51X2NvdW50X3RhYmxlID0gImR1bXBTZWFyY2hlci5maWVsZFJlc3VsdHMiLA0KICAgICAgICBwbHVnaW5fcGF0aCA9IHBsdWdpbnNEYXRhUGF0aCAuLiAicGx1Z2luX2JjX2ZpZWxkX3NlYXJjaF9yZXN1bHRzLmx1YSINCiAgICB9LCB7DQogICAgICAgIGZ1bmN0aW9uX3RhYmxlID0gImVudW1TZWFyY2hSZXN1bHRzIiwNCiAgICAgICAgZGVmYXVsdF9oYW5kbGVyID0gImVudW1fcmVzdWx0cyIsDQogICAgICAgIG1lbnVfbmFtZSA9ICLwn5eS77iPIEVudW0gU2VhcmNoIFJlc3VsdHMiLA0KICAgICAgICBtZW51X2NvdW50X3RhYmxlID0gImR1bXBTZWFyY2hlci5lbnVtUmVzdWx0cyIsDQogICAgICAgIHBsdWdpbl9wYXRoID0gcGx1Z2luc0RhdGFQYXRoIC4uICJwbHVnaW5fYmNfZW51bV9zZWFyY2hfcmVzdWx0cy5sdWEiDQogICAgfSwgew0KICAgICAgICBmdW5jdGlvbl90YWJsZSA9ICJpbDJjcHBGaWVsZHMiLA0KICAgICAgICBkZWZhdWx0X2hhbmRsZXIgPSAiY2xhc3NfcmVzdWx0cyIsDQogICAgICAgIG1lbnVfbmFtZSA9ICLwn5OdIEJhZENhc2UncyBJbDJDcHAgRmllbGRzIiwNCiAgICAgICAgcGx1Z2luX3BhdGggPSBwbHVnaW5zRGF0YVBhdGggLi4gInBsdWdpbl9iY19pbDJjcHBfZmllbGRzLmx1YSINCiAgICB9LCB7DQogICAgICAgIGZ1bmN0aW9uX3RhYmxlID0gImlsMmNwcEVkaXRzIiwNCiAgICAgICAgbWVudV9uYW1lID0gIvCfk50gQmFkQ2FzZSdzIElsMkNwcCBFZGl0cyBieSBOYW1lIiwNCiAgICAgICAgcGx1Z2luX3BhdGggPSBwbHVnaW5zRGF0YVBhdGggLi4gInBsdWdpbl9iY19pbDJjcHBfZWRpdHMubHVhIg0KICAgIH0sIHsNCiAgICAgICAgZnVuY3Rpb25fdGFibGUgPSAic2NyaXB0Q3JlYXRvciIsDQogICAgICAgIG1lbnVfbmFtZSA9ICLwn4+X77iPIFNjcmlwdCBDcmVhdG9yIiwNCiAgICAgICAgcGx1Z2luX3BhdGggPSBwbHVnaW5zRGF0YVBhdGggLi4gInBsdWdpbl9iY19zY3JpcHRfY3JlYXRvci5sdWEiDQogICAgfSwgew0KICAgICAgICBmdW5jdGlvbl90YWJsZSA9ICJzYXZlTGlzdE1hbmFnZXIiLA0KICAgICAgICBtZW51X25hbWUgPSAi8J+TkSBTYXZlIExpc3QgTWFuYWdlciIsDQogICAgICAgIHBsdWdpbl9wYXRoID0gcGx1Z2luc0RhdGFQYXRoIC4uICJwbHVnaW5fYmNfc2F2ZV9saXN0Lmx1YSINCiAgICB9fSwNCiAgICBtZW51SXRlbUxpbWl0ID0gMCwNCiAgICByZXR1cm5Ib21lID0gZmFsc2UsDQogICAgcmV0dXJuUGx1Z2luVGFibGUgPSAiIiwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJcGx1Z2luTWFuYWdlci5ob21lKG1lbnVfbnVtYmVyKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgaG9tZSA9IGZ1bmN0aW9uKG1lbnVfbnVtYmVyKQ0KICAgICAgICBpZiBwbHVnaW5NYW5hZ2VyLnJldHVybkhvbWUgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICBfR1twbHVnaW5NYW5hZ2VyLnJldHVyblBsdWdpblRhYmxlXS5ob21lKCkNCiAgICAgICAgZWxzZWlmIHBsdWdpbk1hbmFnZXIubWVudUl0ZW1MaW1pdCA9PSAwIHRoZW4NCiAgICAgICAgICAgIGxvY2FsIG1lbnVfbmFtZXMgPSB7fQ0KICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMocGx1Z2luTWFuYWdlci50b29sYm94UGx1Z2lucykgZG8NCiAgICAgICAgICAgICAgICBtZW51X25hbWVzW2ldID0gdi5tZW51X25hbWUNCiAgICAgICAgICAgICAgICBpZiB2Lm1lbnVfY291bnRfdGFibGUgYW5kIF9HW3YubWVudV9jb3VudF90YWJsZTpnc3ViKCIoLispJS4uKyIsICIlMSIpXSB0aGVuDQogICAgICAgICAgICAgICAgICAgIG1lbnVfbmFtZXNbaV0gPSBtZW51X25hbWVzW2ldIC4uICIgKCIgLi4gI19HW3YubWVudV9jb3VudF90YWJsZTpnc3ViKCIoLispJS4uKyIsICIlMSIpXVt2Lm1lbnVfY291bnRfdGFibGU6Z3N1YigiLislLiguKykiLCAiJTEiKV0gLi4gIikiDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIG1lbnVfbmFtZXNbI21lbnVfbmFtZXMgKyAxXSA9ICLimpnvuI8gUGx1Z2luIE1hbmFnZXIiDQogICAgICAgICAgICBtZW51X25hbWVzWyNtZW51X25hbWVzICsgMV0gPSAi4p2MIEV4aXQiDQogICAgICAgICAgICBsb2NhbCBtZW51ID0gZ2cuY2hvaWNlKG1lbnVfbmFtZXMsIG5pbCwgc2NyaXB0X3RpdGxlKQ0KICAgICAgICAgICAgaWYgbWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgIGlmIG1lbnUgPT0gI21lbnVfbmFtZXMgdGhlbg0KICAgICAgICAgICAgICAgICAgICBvcy5leGl0KCkNCiAgICAgICAgICAgICAgICBlbHNlaWYgbWVudSA9PSAjbWVudV9uYW1lcyAtIDEgdGhlbg0KICAgICAgICAgICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmNvbmZpZ01lbnUoKQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgc3RhdHVzLCByZXR2YWwgPSBwY2FsbChwbHVnaW5NYW5hZ2VyLmNhbGxQbHVnaW4sDQogICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLnRvb2xib3hQbHVnaW5zW21lbnVdLnBsdWdpbl9wYXRoLA0KICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luTWFuYWdlci50b29sYm94UGx1Z2luc1ttZW51XS5mdW5jdGlvbl90YWJsZSk7DQogICAgICAgICAgICAgICAgICAgIGlmIHN0YXR1cyA9PSBmYWxzZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBlcnJvcl9tZW51ID0gZ2cuYWxlcnQocmV0dmFsLCAiT0siLCAiQ29weSBFcnJvciIpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBlcnJvcl9tZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZXJyb3JfbWVudSA9PSAyIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2cuY29weVRleHQocmV0dmFsKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIGxvY2FsIGN1cnJlbnRfbWVudSA9IDENCiAgICAgICAgICAgIGlmIG1lbnVfbnVtYmVyIH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgY3VycmVudF9tZW51ID0gbWVudV9udW1iZXINCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgbG9jYWwgbGltaXQgPSBjdXJyZW50X21lbnUgLSAxDQogICAgICAgICAgICBsb2NhbCBtZW51X25hbWVzID0ge30NCiAgICAgICAgICAgIGxvY2FsIHRvdGFsX3BsdWdpbnMgPSAjcGx1Z2luTWFuYWdlci50b29sYm94UGx1Z2lucw0KICAgICAgICAgICAgbG9jYWwgbWVudV9saW1pdCA9IHBsdWdpbk1hbmFnZXIubWVudUl0ZW1MaW1pdA0KICAgICAgICAgICAgbWVudV9jb3VudCA9IHRvdGFsX3BsdWdpbnMgLyBtZW51X2xpbWl0DQogICAgICAgICAgICBpZiB0b3RhbF9wbHVnaW5zICUgbWVudV9saW1pdCB+PSAwIHRoZW4NCiAgICAgICAgICAgICAgICBtZW51X2NvdW50ID0gbWVudV9jb3VudCArIDENCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMocGx1Z2luTWFuYWdlci50b29sYm94UGx1Z2lucykgZG8NCiAgICAgICAgICAgICAgICBpZiBpIDw9IHBsdWdpbk1hbmFnZXIubWVudUl0ZW1MaW1pdCAqIGN1cnJlbnRfbWVudSBhbmQgaSA+IHBsdWdpbk1hbmFnZXIubWVudUl0ZW1MaW1pdCAqIGxpbWl0IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbWVudV9uYW1lc1sjbWVudV9uYW1lcyArIDFdID0gdi5tZW51X25hbWUNCiAgICAgICAgICAgICAgICAgICAgaWYgdi5tZW51X2NvdW50X3RhYmxlIGFuZCBfR1t2Lm1lbnVfY291bnRfdGFibGU6Z3N1YigiKC4rKSUuLisiLCAiJTEiKV0gdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9uYW1lc1sjbWVudV9uYW1lc10gPSBtZW51X25hbWVzWyNtZW51X25hbWVzXSAuLiAiICgiIC4uICNfR1t2Lm1lbnVfY291bnRfdGFibGU6Z3N1YigiKC4rKSUuLisiLCAiJTEiKV1bdi5tZW51X2NvdW50X3RhYmxlOmdzdWIoIi4rJS4oLispIiwgIiUxIildIC4uICIpIg0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBpZiAjbWVudV9uYW1lcyA9PSBwbHVnaW5NYW5hZ2VyLm1lbnVJdGVtTGltaXQgdGhlbg0KICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBtZW51X2NvdW50IGFuZCBjdXJyZW50X21lbnUgPT0gbWVudV9jb3VudCB0aGVuDQogICAgICAgICAgICAgICAgbWVudV9uYW1lc1sjbWVudV9uYW1lcyArIDFdID0gIvCfj6AgSG9tZSBNZW51Ig0KICAgICAgICAgICAgZWxzZWlmIG1lbnVfY291bnQgdGhlbg0KICAgICAgICAgICAgICAgIG1lbnVfbmFtZXNbI21lbnVfbmFtZXMgKyAxXSA9ICLij63vuI8gTmV4dCBNZW51Ig0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBtZW51X25hbWVzWyNtZW51X25hbWVzICsgMV0gPSAi4pqZ77iPIFBsdWdpbiBNYW5hZ2VyIg0KICAgICAgICAgICAgbWVudV9uYW1lc1sjbWVudV9uYW1lcyArIDFdID0gIuKdjCBFeGl0Ig0KICAgICAgICAgICAgbG9jYWwgbWVudSA9IGdnLmNob2ljZShtZW51X25hbWVzLCBuaWwsIHNjcmlwdF90aXRsZSkNCiAgICAgICAgICAgIGlmIG1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICBsb2NhbCBtZW51UmFuZ2UgPSBwbHVnaW5NYW5hZ2VyLm1lbnVJdGVtTGltaXQgKiBsaW1pdA0KICAgICAgICAgICAgICAgIGlmIG1lbnUgPT0gI21lbnVfbmFtZXMgdGhlbg0KICAgICAgICAgICAgICAgICAgICBvcy5leGl0KCkNCiAgICAgICAgICAgICAgICBlbHNlaWYgbWVudSA9PSAjbWVudV9uYW1lcyAtIDEgdGhlbg0KICAgICAgICAgICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmNvbmZpZ01lbnUoKQ0KICAgICAgICAgICAgICAgIGVsc2VpZiBtZW51IDw9ICNtZW51X25hbWVzIC0gMyB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIGN1cnJlbnRfbWVudSA+IDEgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgY2FsbF9pbmRleCA9IG1lbnUgKyBwbHVnaW5NYW5hZ2VyLm1lbnVJdGVtTGltaXQgKiBsaW1pdA0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBjYWxsX2luZGV4ID0gbWVudQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgc3RhdHVzLCByZXR2YWwgPSBwY2FsbChwbHVnaW5NYW5hZ2VyLmNhbGxQbHVnaW4sDQogICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLnRvb2xib3hQbHVnaW5zW2NhbGxfaW5kZXhdLnBsdWdpbl9wYXRoLA0KICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luTWFuYWdlci50b29sYm94UGx1Z2luc1tjYWxsX2luZGV4XS5mdW5jdGlvbl90YWJsZSk7DQogICAgICAgICAgICAgICAgICAgIGlmIHN0YXR1cyA9PSBmYWxzZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBlcnJvcl9tZW51ID0gZ2cuYWxlcnQocmV0dmFsLCAiT0siLCAiQ29weSBFcnJvciIpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBlcnJvcl9tZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZXJyb3JfbWVudSA9PSAyIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2cuY29weVRleHQocmV0dmFsKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVsc2VpZiBtZW51ID49ICNtZW51X25hbWVzIC0gMiAtIG1lbnVfY291bnQgYW5kIG1lbnUgPD0gI21lbnVfbmFtZXMgLSAyIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgY3VycmVudF9tZW51ID09IG1lbnVfY291bnQgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5ob21lKDEpDQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIuaG9tZShjdXJyZW50X21lbnUgKyAxKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgd2hpbGVMb29wID0ge30sDQogICAgZG9XaGlsZUxvb3AgPSBmdW5jdGlvbigpDQogICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHBsdWdpbk1hbmFnZXIud2hpbGVMb29wKSBkbw0KICAgICAgICAgICAgbG9jYWwgbXNfdG9fc2VjID0gdi5ydW5fZXZlcnkgLyAxMDAwDQogICAgICAgICAgICBpZiBvcy50aW1lKCkgLSB2Lmxhc3RfcnVuID4gbXNfdG9fc2VjIHRoZW4NCiAgICAgICAgICAgICAgICBpZiB2LmRvX3BjYWxsID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICBwY2FsbChfR1t2LnBsdWdpbl90YWJsZV1bdi5jYWxsX2Z1bmN0aW9uXSkNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIF9HW3YucGx1Z2luX3RhYmxlXVt2LmNhbGxfZnVuY3Rpb25dKCkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICB2Lmxhc3RfcnVuID0gb3MudGltZSgpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQp9DQoNCmlmIHBjYWxsKHBsdWdpbk1hbmFnZXIuaW5pdFBsdWdpbk1hbmFnZXIpID09IGZhbHNlIHRoZW4NCiAgICBwbHVnaW5NYW5hZ2VyLnRvb2xib3hBbGxQbHVnaW5zID0gcGx1Z2luTWFuYWdlci50b29sYm94UGx1Z2lucw0KICAgIHBsdWdpbk1hbmFnZXIuc2F2ZUFsbFBsdWdpbnMoKQ0KICAgIHBsdWdpbk1hbmFnZXIuc2F2ZU1lbnVMaW1pdCgpDQplbmQNCnBsdWdpbk1hbmFnZXIuc2F2ZVBsdWdpbnMoKQ0KDQpwbHVnaW5NYW5hZ2VyLmhvbWUoKQ0KDQpnZy5zaG93VWlCdXR0b24oKQ0KDQp3aGlsZSB0cnVlIGRvDQogICAgcGx1Z2luTWFuYWdlci5kb1doaWxlTG9vcCgpDQogICAgaWYgZ2cuaXNDbGlja2VkVWlCdXR0b24oKSB0aGVuDQogICAgICAgIHBsdWdpbk1hbmFnZXIuaG9tZSgpDQogICAgZW5kDQogICAgZ2cuc2xlZXAoMTAwKQ0KZW5kDQo"
        },
        [2] = {
            file_name = "plugin_bc_class_field_search.lua",
            file_data = "Y2xhc3NGaWVsZFNlYXJjaGVyID0gew0KCS0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCgljbGFzc0ZpZWxkU2VhcmNoZXIuaG9tZSgpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBob21lID0gZnVuY3Rpb24oKQ0KICAgICAgICB3aGlsZSAobmlsKSBkbw0KICAgICAgICAgICAgbG9jYWwgaG9tZVZhbCA9IHt9DQogICAgICAgICAgICBpZiAoaG9tZVZhbC5ob21lVmFsKSB0aGVuDQogICAgICAgICAgICAgICAgaG9tZVZhbC5ob21lVmFsID0gKGhvbWVWYWwuaG9tZVZhbChob21lVmFsKSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZ2cuc2V0UmFuZ2VzKGdnLlJFR0lPTl9DX0FMTE9DIHwgZ2cuUkVHSU9OX0FOT05ZTU9VUykNCiAgICAgICAgbG9jYWwgc3RhcnRfYWRkcmVzcyA9IGdnLmdldFJlc3VsdHMoMSkNCiAgICAgICAgZ2cuc2VhcmNoUG9pbnRlcigxMDAwKQ0KICAgICAgICBsb2NhbCBwb2ludGVyc190byA9IGdnLmdldFJlc3VsdHMoZ2cuZ2V0UmVzdWx0c0NvdW50KCkpDQogICAgICAgIGxvY2FsIGZpZWxkX29mZnNldCA9IDB4MA0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhwb2ludGVyc190bykgZG8NCiAgICAgICAgICAgIHBvaW50ZXJzX3RvW2ldLmFkZHJlc3MgPSB2LnZhbHVlDQogICAgICAgIGVuZA0KICAgICAgICB0YWJsZS5pbnNlcnQocG9pbnRlcnNfdG8sIHN0YXJ0X2FkZHJlc3NbMV0pDQogICAgICAgIGdnLmxvYWRSZXN1bHRzKHBvaW50ZXJzX3RvKQ0KICAgICAgICBsb2NhbCBwb2ludGVyc190byA9IGdnLmdldFJlc3VsdHMoZ2cuZ2V0UmVzdWx0c0NvdW50KCkpDQogICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHBvaW50ZXJzX3RvKSBkbw0KICAgICAgICAgICAgaWYgdi5hZGRyZXNzID09IHN0YXJ0X2FkZHJlc3NbMV0uYWRkcmVzcyB0aGVuDQogICAgICAgICAgICAgICAgbG9jYWwgY2xhc3NfcG9pbnRlciA9IHtwb2ludGVyc190b1tpIC0gMV19DQogICAgICAgICAgICAgICAgZmllbGRfb2Zmc2V0ID0gaGV4X28ocG9pbnRlcnNfdG9baV0uYWRkcmVzcyAtIHBvaW50ZXJzX3RvW2kgLSAxXS5hZGRyZXNzKQ0KICAgICAgICAgICAgICAgIGdnLmxvYWRSZXN1bHRzKGNsYXNzX3BvaW50ZXIpDQogICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgbG9jYWwgY2xhc3NfcG9pbnRlciA9IGdnLmdldFJlc3VsdHMoMSkNCiAgICAgICAgbG9jYWwgY2xhc3NfbmFtZV9wb2ludGVyID0ge30NCiAgICAgICAgY2xhc3NfbmFtZV9wb2ludGVyWzFdID0ge30NCiAgICAgICAgY2xhc3NfbmFtZV9wb2ludGVyWzFdLmFkZHJlc3MgPSBjbGFzc19wb2ludGVyWzFdLnZhbHVlICsgOA0KICAgICAgICBjbGFzc19uYW1lX3BvaW50ZXJbMV0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgIGxvY2FsIGNsYXNzX25hbWVfYWRkcmVzcyA9IGdnLmdldFZhbHVlcyhjbGFzc19uYW1lX3BvaW50ZXIpDQogICAgICAgIGNsYXNzX25hbWVfYWRkcmVzcyA9IGNsYXNzX25hbWVfYWRkcmVzc1sxXS52YWx1ZQ0KICAgICAgICBnZXRfY2xhc3NfbmFtZSA9IHt9DQogICAgICAgIG9mZnNldCA9IDANCiAgICAgICAgZm9yIGkgPSAxLCAxMDAgZG8NCiAgICAgICAgICAgIGdldF9jbGFzc19uYW1lW2ldID0ge30NCiAgICAgICAgICAgIGdldF9jbGFzc19uYW1lW2ldLmFkZHJlc3MgPSBjbGFzc19uYW1lX2FkZHJlc3MgKyBvZmZzZXQNCiAgICAgICAgICAgIGdldF9jbGFzc19uYW1lW2ldLmZsYWdzID0gZ2cuVFlQRV9CWVRFDQogICAgICAgICAgICBvZmZzZXQgPSBvZmZzZXQgKyAxDQogICAgICAgIGVuZA0KICAgICAgICBnZXRfY2xhc3NfbmFtZSA9IGdnLmdldFZhbHVlcyhnZXRfY2xhc3NfbmFtZSkNCiAgICAgICAgY2xhc3NfbmFtZSA9ICIiDQogICAgICAgIGZvciBpbmRleCwgdmFsdWUgaW4gcGFpcnMoZ2V0X2NsYXNzX25hbWUpIGRvDQogICAgICAgICAgICBpZiB2YWx1ZS52YWx1ZSA+PSAwIGFuZCB2YWx1ZS52YWx1ZSA8PSAyNTUgdGhlbg0KICAgICAgICAgICAgICAgIGNsYXNzX25hbWUgPSBjbGFzc19uYW1lIC4uIHN0cmluZy5jaGFyKHZhbHVlLnZhbHVlKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiB2YWx1ZS52YWx1ZSA9PSAwIHRoZW4NCiAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBjbGFzc19uYW1lID0gY2xhc3NfbmFtZTpnc3ViKCIAIiwgIiIpDQogICAgICAgIGxvY2FsIGZpZWxkc19wb2ludGVyID0ge30NCiAgICAgICAgZmllbGRzX3BvaW50ZXJbMV0gPSB7fQ0KICAgICAgICBmaWVsZHNfcG9pbnRlclsxXS5hZGRyZXNzID0gY2xhc3NfcG9pbnRlclsxXS52YWx1ZSArIDB4NDANCiAgICAgICAgZmllbGRzX3BvaW50ZXJbMV0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgIGxvY2FsIGZpZWxkc19wb2ludGVyX2FkZHJlc3MgPSBnZy5nZXRWYWx1ZXMoZmllbGRzX3BvaW50ZXIpDQogICAgICAgIGxvY2FsIGZpZWxkc19zdGFydCA9IHt9DQogICAgICAgIGZpZWxkc19zdGFydFsxXSA9IHt9DQogICAgICAgIGZpZWxkc19zdGFydFsxXS5hZGRyZXNzID0gZmllbGRzX3BvaW50ZXJfYWRkcmVzc1sxXS52YWx1ZQ0KICAgICAgICBmaWVsZHNfc3RhcnRbMV0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgIGdnLmxvYWRSZXN1bHRzKGZpZWxkc19zdGFydCkNCiAgICAgICAgZmllbGRzX3N0YXJ0ID0gZ2cuZ2V0UmVzdWx0cygxKQ0KICAgICAgICBnZy5jbGVhclJlc3VsdHMoKQ0KICAgICAgICBnZy5zZWFyY2hOdW1iZXIodG9udW1iZXIoZmllbGRfb2Zmc2V0KSwgZ2cuVFlQRV9EV09SRCwgZmFsc2UsIGdnLlNJR05fRVFVQUwsIGZpZWxkc19zdGFydFsxXS5hZGRyZXNzLA0KICAgICAgICAgICAgZmllbGRzX3N0YXJ0WzFdLmFkZHJlc3MgKyAxMDAwLCAxKQ0KICAgICAgICBsb2NhbCBmaWVsZF9mb3VuZCA9IGdnLmdldFJlc3VsdHMoMSkNCiAgICAgICAgbG9jYWwgZmllbGRfbmFtZV9wb2ludGVyID0ge30NCiAgICAgICAgZmllbGRfbmFtZV9wb2ludGVyWzFdID0ge30NCiAgICAgICAgZmllbGRfbmFtZV9wb2ludGVyWzFdLmFkZHJlc3MgPSBmaWVsZF9mb3VuZFsxXS5hZGRyZXNzIC0gMTINCiAgICAgICAgZmllbGRfbmFtZV9wb2ludGVyWzFdLmZsYWdzID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICBmaWVsZF9uYW1lX3BvaW50ZXIgPSBnZy5nZXRWYWx1ZXMoZmllbGRfbmFtZV9wb2ludGVyKQ0KICAgICAgICBnZXRfZmllbGRfbmFtZSA9IHt9DQogICAgICAgIG9mZnNldCA9IDANCiAgICAgICAgZm9yIGkgPSAxLCAxMDAgZG8NCiAgICAgICAgICAgIGdldF9maWVsZF9uYW1lW2ldID0ge30NCiAgICAgICAgICAgIGdldF9maWVsZF9uYW1lW2ldLmFkZHJlc3MgPSBmaWVsZF9uYW1lX3BvaW50ZXJbMV0udmFsdWUgKyBvZmZzZXQNCiAgICAgICAgICAgIGdldF9maWVsZF9uYW1lW2ldLmZsYWdzID0gZ2cuVFlQRV9CWVRFDQogICAgICAgICAgICBvZmZzZXQgPSBvZmZzZXQgKyAxDQogICAgICAgIGVuZA0KICAgICAgICBnZXRfZmllbGRfbmFtZSA9IGdnLmdldFZhbHVlcyhnZXRfZmllbGRfbmFtZSkNCiAgICAgICAgZmllbGRfbmFtZSA9ICIiDQogICAgICAgIGZvciBpbmRleCwgdmFsdWUgaW4gcGFpcnMoZ2V0X2ZpZWxkX25hbWUpIGRvDQogICAgICAgICAgICBpZiB2YWx1ZS52YWx1ZSA+PSAwIGFuZCB2YWx1ZS52YWx1ZSA8PSAyNTUgdGhlbg0KICAgICAgICAgICAgICAgIGZpZWxkX25hbWUgPSBmaWVsZF9uYW1lIC4uIHN0cmluZy5jaGFyKHZhbHVlLnZhbHVlKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiB2YWx1ZS52YWx1ZSA9PSAwIHRoZW4NCiAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBnZy5sb2FkUmVzdWx0cyhzdGFydF9hZGRyZXNzKQ0KICAgICAgICBnZy5hbGVydChzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gQ2xhc3MvRmllbGQgc2VhcmNoIHJlc3VsdC4g4oS577iPXG5DbGFzcyBOYW1lOiAiIC4uIGNsYXNzX25hbWUgLi4gIlxuRmllbGQgTmFtZTogIiAuLiBmaWVsZF9uYW1lIC4uICJcbkZpZWxkIE9mZnNldDogIiAuLiBmaWVsZF9vZmZzZXQpDQogICAgICAgIHBsdWdpbk1hbmFnZXIuZGVmYXVsdEhhbmRsZXIoImNsYXNzX3Jlc3VsdHMiLCBjbGFzc19uYW1lKQ0KICAgIGVuZA0KfQ0KDQpjbGFzc0ZpZWxkU2VhcmNoZXIuaG9tZSgpDQo"
        },
        [3] = {
            file_name = "plugin_bc_enum_search_results.lua",
            file_data = "ZW51bVNlYXJjaFJlc3VsdHMgPSB7DQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWVudW1TZWFyY2hSZXN1bHRzLmhvbWUoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgaG9tZSA9IGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgY2xlYW5lZF90YWJsZSA9IHt9DQogICAgICAgIGxvY2FsIGFkZGVkX3RhYmxlID0ge30NCiAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoZHVtcFNlYXJjaGVyLmVudW1SZXN1bHRzKSBkbw0KICAgICAgICAgICAgaWYgbm90IGFkZGVkX3RhYmxlW3ZbMV1dIHRoZW4NCiAgICAgICAgICAgICAgICBhZGRlZF90YWJsZVt2WzFdXSA9IHRydWUNCiAgICAgICAgICAgICAgICBsb2NhbCBuYW1lX3N0cmluZyA9ICIiDQogICAgICAgICAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBwYWlycyhkdW1wX2NzX3RhYmxlW3ZbMV1dLmZpZWxkcykgZG8NCiAgICAgICAgICAgICAgICAgICAgaWYgbmFtZV9zdHJpbmcgPT0gIiIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgbmFtZV9zdHJpbmcgPSB2YWx1ZS5lbnVtX3R5cGUgLi4gIlxuIg0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgbmFtZV9zdHJpbmcgPSBuYW1lX3N0cmluZyAuLiB2YWx1ZS5lbnVtX25hbWUgLi4gIsKgPcKgIiAuLiB2YWx1ZS5lbnVtX3ZhbHVlIC4uICJcbiINCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBjbGVhbmVkX3RhYmxlWyNjbGVhbmVkX3RhYmxlICsgMV0gPSBuYW1lX3N0cmluZw0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBsb2NhbCByZXN1bHRzX21lbnUgPSBnZy5jaG9pY2UoY2xlYW5lZF90YWJsZSwgbmlsLCBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gRW51bSBzZWFyY2ggcmVzdWx0cy4g4oS577iPIikNCiAgICAgICAgaWYgcmVzdWx0c19tZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICBnZy5jb3B5VGV4dChjbGVhbmVkX3RhYmxlW3Jlc3VsdHNfbWVudV0pDQogICAgICAgICAgICBnZy50b2FzdChzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gTGlzdCBDb3BpZWQgVG8gQ2xpcGJvYXJkIOKEue+4jyIpDQogICAgICAgIGVuZA0KICAgIGVuZA0KfQ0KDQplbnVtU2VhcmNoUmVzdWx0cy5ob21lKCkNCg"
        },
        [4] = {
            file_name = "plugin_bc_lib_dumper.lua",
            file_data = "bGliRHVtcGVyID0gew0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglsaWJEdW1wZXIuZHVtcEZpbGUoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgZHVtcEZpbGUgPSBmdW5jdGlvbihzdGFydF9hZGRyZXNzLCBlbmRfYWRkcmVzcykNCiAgICAgICAgbG9jYWwgc3RhcnRfYWRkcmVzc19mbmFtZSA9IHN0cmluZy5sb3dlcihzdHJpbmcuc3ViKHN0YXJ0X2FkZHJlc3MsIDMpKQ0KICAgICAgICBsb2NhbCBlbmRfYWRkcmVzc19mbmFtZSA9IHN0cmluZy5sb3dlcihzdHJpbmcuc3ViKGVuZF9hZGRyZXNzLCAzKSkNCiAgICAgICAgZ2cuZHVtcE1lbW9yeSh0b251bWJlcihzdGFydF9hZGRyZXNzKSwgdG9udW1iZXIoZW5kX2FkZHJlc3MpLA0KICAgICAgICAgICAgZ2cuRVhUX1NUT1JBR0UgLi4gIi9CQ19EQVRBLyIgLi4gZ2FtZV9wYXRoIC4uICIvZHVtcC8iLCBnZy5EVU1QX1NLSVBfU1lTVEVNX0xJQlMpDQogICAgICAgIGdnLmFsZXJ0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBEYXRhIER1bXBlZCDihLnvuI9cblxuU2F2ZWQgdG86ICIgLi4gZ2cuRVhUX1NUT1JBR0UgLi4gIi9CQ19EQVRBLyIgLi4gZ2FtZV9wYXRoIC4uICIvZHVtcC8gIikNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWxpYkR1bXBlci5zZWxlY3RMaWIoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgc2VsZWN0TGliID0gZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBsaWJfbmFtZV9nZW5fc2NyaXB0ID0ge30NCiAgICAgICAgbG9jYWwgbGliX3NlbGVjdG9yID0ge30NCiAgICAgICAgbG9jYWwgbGliX3NlbGVjdG9yX3N0YXJ0ID0ge30NCiAgICAgICAgbG9jYWwgbGliX3NlbGVjdG9yX2VuZCA9IHt9DQogICAgICAgIGxvY2FsIGNoZWNrX2xpYnMgPSBnZy5nZXRSYW5nZXNMaXN0KCkNCiAgICAgICAgZm9yIGssIHYgaW4gcGFpcnMoY2hlY2tfbGlicykgZG8NCiAgICAgICAgICAgIGlmIHN0cmluZy5tYXRjaChjaGVja19saWJzW2tdWyJuYW1lIl0sICIlLmRhdCIpIG9yIA0KCQkJCXN0cmluZy5tYXRjaChjaGVja19saWJzW2tdWyJuYW1lIl0sICIlW3N0YWNrJV0iKSBvcg0KICAgICAgICAgICAgICAgIHN0cmluZy5tYXRjaChjaGVja19saWJzW2tdWyJuYW1lIl0sICIvdmVuZG9yLyIpIG9yIA0KCQkJCXN0cmluZy5tYXRjaChjaGVja19saWJzW2tdWyJuYW1lIl0sICIvc3lzdGVtLyIpIG9yDQogICAgICAgICAgICAgICAgc3RyaW5nLm1hdGNoKGNoZWNrX2xpYnNba11bIm5hbWUiXSwgIi9kZXYvIikgb3IgDQoJCQkJc3RyaW5nLm1hdGNoKGNoZWNrX2xpYnNba11bIm5hbWUiXSwgIiVbaGVhcCVdIikgb3INCiAgICAgICAgICAgICAgICBzdHJpbmcubWF0Y2goY2hlY2tfbGlic1trXVsibmFtZSJdLCAiJS5hcnQiKSBvciANCgkJCQlzdHJpbmcubWF0Y2goY2hlY2tfbGlic1trXVsibmFtZSJdLCAiYW5vbl9pbm9kZToiKSBvcg0KICAgICAgICAgICAgICAgIHN0cmluZy5tYXRjaChjaGVja19saWJzW2tdWyJuYW1lIl0sICJkZWxldGVkIikgb3IgDQoJCQkJc3RyaW5nLm1hdGNoKGNoZWNrX2xpYnNba11bIm5hbWUiXSwgImFub246Iikgb3INCiAgICAgICAgICAgICAgICBzdHJpbmcubWF0Y2goY2hlY2tfbGlic1trXVsibmFtZSJdLCAiJS50dGYiKSBvciANCgkJCQlzdHJpbmcubWF0Y2goY2hlY2tfbGlic1trXVsibmFtZSJdLCAiLiIpID09IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgY2hlY2tfbGlic1trXSA9IG5pbA0KICAgICAgICAgICAgZWxzZWlmIGNoZWNrX2xpYnNba11bIm5hbWUiXTpmaW5kKCIuc28kIikgdGhlbg0KICAgICAgICAgICAgICAgIGdldF9zaXplX2FycmF5ID0ge30NCiAgICAgICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhjaGVja19saWJzW2tdKSBkbw0KICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoZ2V0X3NpemVfYXJyYXksIHYpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgbG9jYWwgZmlsZV9zaXplID0gdG9udW1iZXIoZ2V0X3NpemVfYXJyYXlbMV0pIC0gdG9udW1iZXIoZ2V0X3NpemVfYXJyYXlbNl0pDQogICAgICAgICAgICAgICAgbG9jYWwgZmlsZV9zdGFydCA9IHRvbnVtYmVyKGdldF9zaXplX2FycmF5WzZdKQ0KICAgICAgICAgICAgICAgIGxvY2FsIGZpbGVfZW5kID0gdG9udW1iZXIoZ2V0X3NpemVfYXJyYXlbMV0pDQogICAgICAgICAgICAgICAgaWYgZmlsZV9zaXplIDwgNTEyMDAwMCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGNoZWNrX2xpYnNba10gPSBuaWwNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGRpdmlkZV9ieSA9ICIxMDI0MDAwIg0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBzaXplX21hdGggPSB0b251bWJlcihmaWxlX3NpemUpIC8gdG9udW1iZXIoZGl2aWRlX2J5KQ0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBzaXplX2Rpc3BsYXkgPSBzaXplX21hdGggLi4gIk1CIg0KICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQobGliX25hbWVfZ2VuX3NjcmlwdCwgY2hlY2tfbGlic1trXVsibmFtZSJdKQ0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBmbGlibmFtZSA9IGNoZWNrX2xpYnNba11bIm5hbWUiXQ0KICAgICAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2WyJuYW1lIl0sICJsaWJpbDJjcHAuc28iKSBvciBzdHJpbmcuZmluZCh2WyJuYW1lIl0sICJzcGxpdF9jb25maWcuYXJtZWFiaV92N2EuYXBrIikgb3INCiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZy5maW5kKHZbIm5hbWUiXSwgInNwbGl0X2NvbmZpZy5hcm02NF92OGEuYXBrIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9zdHJpbmcgPSAi44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iPXG5OYW1lOiAiIC4uDQoJCQkJCQkJCQl2WyJuYW1lIl0gLi4gIlxuUmFuZ2U6ICIgLi4gdi5zdGF0ZSAuLiAiXG5TdGFydCBBZGRyZXNzOiAiIC4uDQoJCQkJCQkJCQlsaWJEdW1wZXIuaGV4X28oZ2V0X3NpemVfYXJyYXlbNl0pIC4uICJcbkVuZCBBZGRyZXNzOiAiIC4uDQoJCQkJCQkJCQlsaWJEdW1wZXIuaGV4X28oZ2V0X3NpemVfYXJyYXlbMV0pIC4uICJcblNpemU6ICIgLi4gc2l6ZV9kaXNwbGF5IC4uDQoJCQkJCQkJCQkiXG7jgLDvuI/jgLDvuI/jgLDvuI/jgLDvuI/jgLDvuI/jgLDvuI/jgLDvuI/jgLDvuI/jgLDvuI/jgLDvuI/jgLDvuI/jgLDvuI8iDQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVfc3RyaW5nID0gIuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgVxuTmFtZTogIiAuLiB2WyJuYW1lIl0gLi4gIlxuUmFuZ2U6ICIgLi4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuc3RhdGUgLi4gIlxuU3RhcnQgQWRkcmVzczogIiAuLiBsaWJEdW1wZXIuaGV4X28oZ2V0X3NpemVfYXJyYXlbNl0pIC4uDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiXG5FbmQgQWRkcmVzczogIiAuLiBsaWJEdW1wZXIuaGV4X28oZ2V0X3NpemVfYXJyYXlbMV0pIC4uICJcblNpemU6ICIgLi4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemVfZGlzcGxheSAuLiAiXG7ilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEiDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZChmbGlibmFtZSwgIi0iKSBhbmQgc3RyaW5nLmZpbmQoZmxpYm5hbWUsICI9PSIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGxpYl9zZWFyY2ggPSBzdHJpbmcuZmluZChmbGlibmFtZSwgIi0iKQ0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgbGliX3NlYXJjaDIgPSBzdHJpbmcuZmluZChmbGlibmFtZSwgIj09IikNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGxpYm5hbWVfcGFydDEgPSBzdHJpbmcuc3ViKGZsaWJuYW1lLCAxLCBsaWJfc2VhcmNoIC0gMSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGxpYm5hbWVfcGFydDIgPSBzdHJpbmcuc3ViKGZsaWJuYW1lLCBsaWJfc2VhcmNoMiArIDIpDQogICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQobGliX3NlbGVjdG9yLCBtZW51X3N0cmluZykNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGxpYl9zZWxlY3RvciwgbWVudV9zdHJpbmcpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQobGliX3NlbGVjdG9yX3N0YXJ0LCBmaWxlX3N0YXJ0KQ0KICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQobGliX3NlbGVjdG9yX2VuZCwgZmlsZV9lbmQpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIDo6c2VsZWN0X2xpYjo6DQogICAgICAgIGxvY2FsIGggPSBnZy5jaG9pY2UobGliX3NlbGVjdG9yLCBuaWwsIHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBTZWxlY3QgTGlicmFyeSBUbyBEdW1wIOKEue+4jyIpDQogICAgICAgIGlmIGggPT0gbmlsIHRoZW4NCiAgICAgICAgICAgIGdvdG8gZW5kX3NlbGVjdA0KICAgICAgICBlbHNlDQogICAgICAgICAgICBsb2NhbCBsaWJfbmFtZSA9IGxpYl9uYW1lX2dlbl9zY3JpcHRbaF0NCiAgICAgICAgICAgIGZvciBzdHIgaW4gc3RyaW5nLmdtYXRjaChsaWJfbmFtZSwgIihbXi9dKykiKSBkbw0KICAgICAgICAgICAgICAgIGZpeGVkX2xpYl9uYW1lID0gc3RyDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIEJBU0VBRERSID0gbGliX3NlbGVjdG9yX3N0YXJ0W2hdDQogICAgICAgICAgICBpZiBsaWJfc2VsZWN0b3JbaCArIDJdIGFuZCBzdHJpbmcuZ3N1YihsaWJfc2VsZWN0b3JbaF0sICIoLitzbyApLisiLCAiJTEiKSA9PSBzdHJpbmcuZ3N1YihsaWJfc2VsZWN0b3JbaCArIDJdLCAiKC4rc28gKS4rIiwgIiUxIikgdGhlbg0KICAgICAgICAgICAgICAgIEVOREFERFIgPSBsaWJfc2VsZWN0b3JfZW5kW2ggKyAyXQ0KICAgICAgICAgICAgZWxzZWlmIHN0cmluZy5nc3ViKGxpYl9zZWxlY3RvcltoXSwgIiguK3NvICkuKyIsICIlMSIpID09IHN0cmluZy5nc3ViKGxpYl9zZWxlY3RvcltoICsgMV0sICIoLitzbyApLisiLCAiJTEiKSB0aGVuDQogICAgICAgICAgICAgICAgRU5EQUREUiA9IGxpYl9zZWxlY3Rvcl9lbmRbaCArIDFdDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgRU5EQUREUiA9IGxpYl9zZWxlY3Rvcl9lbmRbaF0NCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZ2cudG9hc3Qoc2NyaXB0X3RpdGxlIC4uICJcblxu4pyFICIgLi4gZml4ZWRfbGliX25hbWUgLi4gIiBTZWxlY3RlZCDinIUiKQ0KICAgICAgICBsaWJEdW1wZXIuZHVtcEZpbGUoQkFTRUFERFIsIEVOREFERFIpDQogICAgICAgIDo6ZW5kX3NlbGVjdDo6DQogICAgZW5kLA0KICAgIGhleF9vID0gZnVuY3Rpb24obikNCiAgICAgICAgcmV0dXJuICIweCIgLi4gc3RyaW5nLnVwcGVyKHN0cmluZy5mb3JtYXQoIiV4IiwgbikpDQogICAgZW5kDQp9DQoNCmxpYkR1bXBlci5zZWxlY3RMaWIoKQ0K"
        },
        [5] = {
            file_name = "plugin_bc_save_list.lua",
            file_data = "c2F2ZUxpc3RNYW5hZ2VyID0gew0KICAgIGxpc3QgPSB7fSwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJc2F2ZUxpc3RNYW5hZ2VyLmhvbWUoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgaG9tZSA9IGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgbWFpbk1lbnUgPSBnZy5jaG9pY2UoeyLinpUgQWRkIGl0ZW1zIGluIFNhdmVkIFRhYiB0byBTYXZlIExpc3QiLCANCgkJCQkJCQkJCSLimLAgTG9hZCBTYXZlIExpc3QgdG8gU2F2ZWQgVGFiIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICLwn5SAIFJlcGxhY2UgY3VycmVudCBTYXZlIExpc3Qgd2l0aCBpdGVtcyBpbiBTYXZlZCBUYWIifSwgDQoJCQkJCQkJCQluaWwsDQoJCQkJCQkJCQlzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2F2ZSBMaXN0IE1hbmFnZXIg4oS577iPIikNCiAgICAgICAgaWYgbWFpbk1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgIGlmIG1haW5NZW51ID09IDEgdGhlbg0KICAgICAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKGdnLmdldExpc3RJdGVtcygpKSBkbw0KICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoc2F2ZUxpc3RNYW5hZ2VyLmxpc3QsIHYpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZ2cuYWxlcnQoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPICIgLi4gI2dnLmdldExpc3RJdGVtcygpIC4uICIgaXRlbXMgYWRkZWQgdG8gdGhlIFNhdmUgTGlzdC4g4oS577iPIikNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWYgbWFpbk1lbnUgPT0gMiB0aGVuDQogICAgICAgICAgICAgICAgZ2cuY2xlYXJMaXN0KCkNCiAgICAgICAgICAgICAgICBnZy5hZGRMaXN0SXRlbXMoc2F2ZUxpc3RNYW5hZ2VyLmxpc3QpDQogICAgICAgICAgICAgICAgZ2cuYWxlcnQoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPICIgLi4gI2dnLmdldExpc3RJdGVtcygpIC4uICIgaXRlbXMgbG9hZGVkIGZyb20gU2F2ZSBMaXN0IHRvIFNhdmUgVGFiLiDihLnvuI8iKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBtYWluTWVudSA9PSAzIHRoZW4NCiAgICAgICAgICAgICAgICBsb2NhbCBjb25maXJtID0gZ2cuY2hvaWNlKHsi4pyFIFllcyIsICLinYwgTm8ifSwgbmlsLCBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHJlcGxhY2UgeW91ciBjdXJyZW50IFNhdmUgTGlzdD8g4oS577iPXG5UaGlzIGNhbiBub3QgYmUgdW5kb25lLiIpDQogICAgICAgICAgICAgICAgaWYgY29uZmlybSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBjb25maXJtID09IDEgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZUxpc3RNYW5hZ2VyLmxpc3QgPSBnZy5nZXRMaXN0SXRlbXMoKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZ2cuYWxlcnQoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIFNhdmUgTGlzdCByZXBsYWNlZCB3aXRoIGl0ZW1zIGluIFNhdmVkIFRhYi4g4oS577iPIikNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCn0NCg0Kc2F2ZUxpc3RNYW5hZ2VyLmhvbWUoKQ0K"
        },
        [6] = {
            file_name = "plugin_bc_field_search_results.lua",
            file_data = "ZmllbGRTZWFyY2hSZXN1bHRzID0gew0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglmaWVsZFNlYXJjaFJlc3VsdHMuaG9tZSgpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBob21lID0gZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCByZXN1bHRzID0ge30NCiAgICAgICAgbG9jYWwgY2xhc3NfbmFtZXMgPSB7fQ0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhkdW1wU2VhcmNoZXIuZmllbGRSZXN1bHRzKSBkbw0KICAgICAgICAgICAgbG9jYWwgbmFtZV9zdHJpbmcgPSAiTmFtZXNwYWNlOiAiIC4uIGR1bXBfY3NfdGFibGVbdlsxXV0ubmFtZXNwYWNlIC4uICJcbiINCiAgICAgICAgICAgIGlmIGR1bXBfY3NfdGFibGVbdlsxXV0uY2xhc3MgdGhlbg0KICAgICAgICAgICAgICAgIG5hbWVfc3RyaW5nID0gbmFtZV9zdHJpbmcgLi4gIkNsYXNzIE5hbWU6ICIgLi4gZHVtcF9jc190YWJsZVt2WzFdXS5jbGFzcyAuLiAiXG4iDQogICAgICAgICAgICBlbHNlaWYgZHVtcF9jc190YWJsZVt2WzFdXS5zdHJ1Y3QgdGhlbg0KICAgICAgICAgICAgICAgIG5hbWVfc3RyaW5nID0gbmFtZV9zdHJpbmcgLi4gIlN0cnVjdCBOYW1lOiAiIC4uIGR1bXBfY3NfdGFibGVbdlsxXV0uc3RydWN0IC4uICJcbiINCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgbmFtZV9zdHJpbmcgPSBuYW1lX3N0cmluZyAuLiAiRmllbGQgTmFtZTogIiAuLiBkdW1wX2NzX3RhYmxlW3ZbMV1dLmZpZWxkc1t2WzJdXS5maWVsZF9uYW1lIC4uICJcbiINCiAgICAgICAgICAgIG5hbWVfc3RyaW5nID0gbmFtZV9zdHJpbmcgLi4gIkZpZWxkIFR5cGU6ICIgLi4gZHVtcF9jc190YWJsZVt2WzFdXS5maWVsZHNbdlsyXV0uZmllbGRfdHlwZSAuLiAiXG4iDQogICAgICAgICAgICBuYW1lX3N0cmluZyA9IG5hbWVfc3RyaW5nIC4uICJGaWVsZCBPZmZzZXQ6ICIgLi4gZHVtcF9jc190YWJsZVt2WzFdXS5maWVsZHNbdlsyXV0uZmllbGRfb2Zmc2V0IC4uICJcbiINCiAgICAgICAgICAgIHJlc3VsdHNbI3Jlc3VsdHMgKyAxXSA9IG5hbWVfc3RyaW5nDQogICAgICAgICAgICBpZiBkdW1wX2NzX3RhYmxlW3ZbMV1dLmNsYXNzIHRoZW4NCiAgICAgICAgICAgICAgICBjbGFzc19uYW1lc1sjY2xhc3NfbmFtZXMgKyAxXSA9IHN0cmluZy5nc3ViKGR1bXBfY3NfdGFibGVbdlsxXV0uY2xhc3MsICIuKyBjbGFzcyAoLispIC4rIiwgIiUxIik6Z3N1YigiIC8vIFR5cGVEZWZJbmRleC4rIiwgIiIpOmdzdWIoIiguKykgOiAuKyIsICIlMSIpOmdzdWIoIiguKyksIC4rIiwgIiUxIik6Z3N1YigiIDoiLCAiIikNCiAgICAgICAgICAgIGVsc2VpZiBkdW1wX2NzX3RhYmxlW3ZbMV1dLnN0cnVjdCB0aGVuDQogICAgICAgICAgICAgICAgY2xhc3NfbmFtZXNbI2NsYXNzX25hbWVzICsgMV0gPSBzdHJpbmcuZ3N1YihkdW1wX2NzX3RhYmxlW3ZbMV1dLnN0cnVjdCwgIi4rIHN0cnVjdCAoLispIC4rIiwgIiUxIik6Z3N1YigiIC8vIFR5cGVEZWZJbmRleC4rIiwgIiIpOmdzdWIoIiguKykgOiAuKyIsICIlMSIpOmdzdWIoIiguKyksIC4rIiwgIiUxIik6Z3N1YigiIDoiLCAiIikNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgbG9jYWwgcmVzdWx0c19tZW51ID0gZ2cuY2hvaWNlKHJlc3VsdHMsIG5pbCwgc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIEZpZWxkIHNlYXJjaCByZXN1bHRzLiDihLnvuI8iKQ0KICAgICAgICBpZiByZXN1bHRzX21lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgIGdnLnRvYXN0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBMb2FkaW5nIFBsdWdpbiDihLnvuI8iKQ0KICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5kZWZhdWx0SGFuZGxlcigiY2xhc3NfcmVzdWx0cyIsIGNsYXNzX25hbWVzW3Jlc3VsdHNfbWVudV0pDQogICAgICAgIGVuZA0KICAgIGVuZA0KfQ0KDQpmaWVsZFNlYXJjaFJlc3VsdHMuaG9tZSgpDQo"
        },
        [7] = {
            file_name = "plugin_bc_dump_search.lua",
            file_data = "ZHVtcEhhbmRsZXIubG9hZER1bXBEYXRhKCkNCmR1bXBTZWFyY2hlciA9IHsNCiAgICBtZXRob2RSZXN1bHRzID0ge30sDQogICAgZW51bVJlc3VsdHMgPSB7fSwNCiAgICBmaWVsZFJlc3VsdHMgPSB7fSwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJZHVtcFNlYXJjaGVyLmNhc2VTZW5zaXRpdmUoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgY2FzZVNlbnNpdGl2ZSA9IGZ1bmN0aW9uKHBhc3NlZF9zdHJpbmcsIGlzX2Nhc2Vfc2Vuc2l0aXZlKQ0KICAgICAgICBpZiBpc19jYXNlX3NlbnNpdGl2ZSA9PSBmYWxzZSB0aGVuDQogICAgICAgICAgICBwYXNzZWRfc3RyaW5nID0gc3RyaW5nLmxvd2VyKHBhc3NlZF9zdHJpbmcpDQogICAgICAgIGVuZA0KICAgICAgICByZXR1cm4gcGFzc2VkX3N0cmluZw0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJZHVtcFNlYXJjaGVyLnNlYXJjaER1bXAoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgc2VhcmNoRHVtcCA9IGZ1bmN0aW9uKHNlYXJjaF9wcm9tcHQsIHN0eXBlX2FycmF5KQ0KICAgICAgICBsb2NhbCBpc19jYXNlX3NlbnNpdGl2ZSA9IHNlYXJjaF9wcm9tcHRbNF0NCiAgICAgICAgbG9jYWwgYWxsX3NlYXJjaF90ZXJtcyA9IHNlYXJjaF9wcm9tcHRbNV0NCiAgICAgICAgbG9jYWwgc2VhcmNoX25hbWVzcGFjZXMgPSBzZWFyY2hfcHJvbXB0WzZdDQogICAgICAgIGxvY2FsIHNlYXJjaF9jbGFzc2VzID0gc2VhcmNoX3Byb21wdFs3XQ0KICAgICAgICBsb2NhbCBzZWFyY2hfbWV0aG9kcyA9IHNlYXJjaF9wcm9tcHRbOF0NCiAgICAgICAgbG9jYWwgc2VhcmNoX2ZpZWxkcyA9IHNlYXJjaF9wcm9tcHRbOV0NCiAgICAgICAgbG9jYWwgc2VhcmNoX2VudW1zID0gc2VhcmNoX3Byb21wdFsxMF0NCiAgICAgICAgbG9jYWwgc2VhcmNoX3Rlcm1fb25lID0gZHVtcFNlYXJjaGVyLmNhc2VTZW5zaXRpdmUoc2VhcmNoX3Byb21wdFsxXSwgaXNfY2FzZV9zZW5zaXRpdmUpDQogICAgICAgIGxvY2FsIHNlYXJjaF90ZXJtX3R3byA9IGR1bXBTZWFyY2hlci5jYXNlU2Vuc2l0aXZlKHNlYXJjaF9wcm9tcHRbMl0sIGlzX2Nhc2Vfc2Vuc2l0aXZlKQ0KICAgICAgICBsb2NhbCBzZWFyY2hfdGVybV90aHJlZSA9IGR1bXBTZWFyY2hlci5jYXNlU2Vuc2l0aXZlKHNlYXJjaF9wcm9tcHRbM10sIGlzX2Nhc2Vfc2Vuc2l0aXZlKQ0KICAgICAgICBsb2NhbCBzZWFyY2hfdGVybV9vbmVfbWF0Y2hlcyA9IHt9DQogICAgICAgIGxvY2FsIHNlYXJjaF90ZXJtX3R3b19tYXRjaGVzID0ge30NCiAgICAgICAgbG9jYWwgc2VhcmNoX3Rlcm1fdGhyZWVfbWF0Y2hlcyA9IHt9DQogICAgICAgIGlmIGFsbF9zZWFyY2hfdGVybXMgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhkdW1wX2NzX3RhYmxlKSBkbw0KICAgICAgICAgICAgICAgIGxvY2FsIHNlYXJjaF90ZXJtX29uZV9mb3VuZCA9IGZhbHNlDQogICAgICAgICAgICAgICAgbG9jYWwgc2VhcmNoX3Rlcm1fdHdvX2ZvdW5kID0gZmFsc2UNCiAgICAgICAgICAgICAgICBpZiAjc2VhcmNoX3Rlcm1fdHdvID09IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICBzZWFyY2hfdGVybV90d29fZm91bmQgPSB0cnVlDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgbG9jYWwgc2VhcmNoX3Rlcm1fdGhyZWVfZm91bmQgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIGlmICNzZWFyY2hfdGVybV90aHJlZSA9PSAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3Rlcm1fdGhyZWVfZm91bmQgPSB0cnVlDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgbG9jYWwgc2VhcmNoX3Rlcm1fb25lX21hdGNoX3R5cGVzID0ge30NCiAgICAgICAgICAgICAgICBsb2NhbCBzZWFyY2hfdGVybV90d29fbWF0Y2hfdHlwZXMgPSB7fQ0KICAgICAgICAgICAgICAgIGxvY2FsIHNlYXJjaF90ZXJtX3RocmVlX21hdGNoX3R5cGVzID0ge30NCiAgICAgICAgICAgICAgICBpZiBzZWFyY2hfbmFtZXNwYWNlcyA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgY3VycmVudF9uYW1lc3BhY2UgPSB2Lm5hbWVzcGFjZQ0KICAgICAgICAgICAgICAgICAgICBpZiBpc19jYXNlX3NlbnNpdGl2ZSA9PSBmYWxzZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50X25hbWVzcGFjZSA9IGR1bXBTZWFyY2hlci5jYXNlU2Vuc2l0aXZlKGN1cnJlbnRfbmFtZXNwYWNlLCBpc19jYXNlX3NlbnNpdGl2ZSkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIGN1cnJlbnRfbmFtZXNwYWNlOmZpbmQoc2VhcmNoX3Rlcm1fb25lKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hfdGVybV9vbmVfZm91bmQgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hfdGVybV9vbmVfbWF0Y2hfdHlwZXNbIm5hbWVzcGFjZSJdID0gMQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgY3VycmVudF9uYW1lc3BhY2U6ZmluZChzZWFyY2hfdGVybV90d28pIGFuZCAjc2VhcmNoX3Rlcm1fdHdvID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hfdGVybV90d29fZm91bmQgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hfdGVybV90d29fbWF0Y2hfdHlwZXNbIm5hbWVzcGFjZSJdID0gMQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgY3VycmVudF9uYW1lc3BhY2U6ZmluZChzZWFyY2hfdGVybV90aHJlZSkgYW5kICNzZWFyY2hfdGVybV90aHJlZSA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3Rlcm1fdGhyZWVfZm91bmQgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hfdGVybV90aHJlZV9tYXRjaF90eXBlc1sibmFtZXNwYWNlIl0gPSAxDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIHNlYXJjaF9jbGFzc2VzID09IHRydWUgYW5kICh2LmNsYXNzIG9yIHYuc3RydWN0KSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGN1cnJlbnRfY2xhc3MgPSAiIg0KICAgICAgICAgICAgICAgICAgICBpZiB2LmNsYXNzIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfY2xhc3MgPSB2LmNsYXNzDQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfY2xhc3MgPSB2LnN0cnVjdA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgaXNfY2FzZV9zZW5zaXRpdmUgPT0gZmFsc2UgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9jbGFzcyA9IGR1bXBTZWFyY2hlci5jYXNlU2Vuc2l0aXZlKGN1cnJlbnRfY2xhc3MsIGlzX2Nhc2Vfc2Vuc2l0aXZlKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgY3VycmVudF9jbGFzczpmaW5kKHNlYXJjaF90ZXJtX29uZSkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3Rlcm1fb25lX2ZvdW5kID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3Rlcm1fb25lX21hdGNoX3R5cGVzWyJjbGFzc19zdHJ1Y3QiXSA9IDENCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIGN1cnJlbnRfY2xhc3M6ZmluZChzZWFyY2hfdGVybV90d28pIGFuZCAjc2VhcmNoX3Rlcm1fdHdvID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hfdGVybV90d29fZm91bmQgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hfdGVybV90d29fbWF0Y2hfdHlwZXNbImNsYXNzX3N0cnVjdCJdID0gMQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgY3VycmVudF9jbGFzczpmaW5kKHNlYXJjaF90ZXJtX3RocmVlKSBhbmQgI3NlYXJjaF90ZXJtX3RocmVlID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hfdGVybV90aHJlZV9mb3VuZCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaF90ZXJtX3RocmVlX21hdGNoX3R5cGVzWyJjbGFzc19zdHJ1Y3QiXSA9IDENCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgc2VhcmNoX2ZpZWxkcyA9PSB0cnVlIGFuZCB2LmZpZWxkcyBhbmQgKHYuY2xhc3Mgb3Igdi5zdHJ1Y3QpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgY3VycmVudF9maWVsZHMgPSB0b3N0cmluZyh2LmZpZWxkcyk6Z3N1YigiLS0gdGFibGUlKFswLTlhLXpdKyUpIiwgIiIpDQogICAgICAgICAgICAgICAgICAgIGlmIGlzX2Nhc2Vfc2Vuc2l0aXZlID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfZmllbGRzID0gZHVtcFNlYXJjaGVyLmNhc2VTZW5zaXRpdmUoY3VycmVudF9maWVsZHMsIGlzX2Nhc2Vfc2Vuc2l0aXZlKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgY3VycmVudF9maWVsZHM6ZmluZChzZWFyY2hfdGVybV9vbmUpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaF90ZXJtX29uZV9mb3VuZCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaF90ZXJtX29uZV9tYXRjaF90eXBlc1siZmllbGQiXSA9IDENCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIGN1cnJlbnRfZmllbGRzOmZpbmQoc2VhcmNoX3Rlcm1fdHdvKSBhbmQgI3NlYXJjaF90ZXJtX3R3byA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3Rlcm1fdHdvX2ZvdW5kID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3Rlcm1fdHdvX21hdGNoX3R5cGVzWyJmaWVsZCJdID0gMQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgY3VycmVudF9maWVsZHM6ZmluZChzZWFyY2hfdGVybV90aHJlZSkgYW5kICNzZWFyY2hfdGVybV90aHJlZSA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3Rlcm1fdGhyZWVfZm91bmQgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hfdGVybV90aHJlZV9tYXRjaF90eXBlc1siZmllbGQiXSA9IDENCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgc2VhcmNoX2VudW1zID09IHRydWUgYW5kIHYuZmllbGRzIGFuZCB2LmVudW0gdGhlbg0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBjdXJyZW50X2ZpZWxkcyA9IHRvc3RyaW5nKHYuZmllbGRzKTpnc3ViKCItLSB0YWJsZSUoWzAtOWEtel0rJSkiLCAiIikNCiAgICAgICAgICAgICAgICAgICAgaWYgaXNfY2FzZV9zZW5zaXRpdmUgPT0gZmFsc2UgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9maWVsZHMgPSBkdW1wU2VhcmNoZXIuY2FzZVNlbnNpdGl2ZShjdXJyZW50X2ZpZWxkcywgaXNfY2FzZV9zZW5zaXRpdmUpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBjdXJyZW50X2ZpZWxkczpmaW5kKHNlYXJjaF90ZXJtX29uZSkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3Rlcm1fb25lX2ZvdW5kID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3Rlcm1fb25lX21hdGNoX3R5cGVzWyJlbnVtIl0gPSAxDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBjdXJyZW50X2ZpZWxkczpmaW5kKHNlYXJjaF90ZXJtX3R3bykgYW5kICNzZWFyY2hfdGVybV90d28gPiAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaF90ZXJtX3R3b19mb3VuZCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaF90ZXJtX3R3b19tYXRjaF90eXBlc1siZW51bSJdID0gMQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgY3VycmVudF9maWVsZHM6ZmluZChzZWFyY2hfdGVybV90aHJlZSkgYW5kICNzZWFyY2hfdGVybV90aHJlZSA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3Rlcm1fdGhyZWVfZm91bmQgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hfdGVybV90aHJlZV9tYXRjaF90eXBlc1siZW51bSJdID0gMQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBpZiBzZWFyY2hfdGVybV9vbmVfZm91bmQgPT0gdHJ1ZSBhbmQgc2VhcmNoX3Rlcm1fdHdvX2ZvdW5kID09IHRydWUgYW5kIHNlYXJjaF90ZXJtX3RocmVlX2ZvdW5kID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBzZWFyY2hfdGVybV9vbmVfbWF0Y2hfdHlwZXNbImVudW0iXSBvciBzZWFyY2hfdGVybV90d29fbWF0Y2hfdHlwZXNbImVudW0iXSBvcg0KICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3Rlcm1fdGhyZWVfbWF0Y2hfdHlwZXNbImVudW0iXSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgaW5kZXgsIHZhbHVlIGluIHBhaXJzKHYuZmllbGRzKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHZhbHVlLmVudW1fbmFtZTpmaW5kKHNlYXJjaF90ZXJtX29uZSkgb3IgKHZhbHVlLmVudW1fbmFtZTpmaW5kKHNlYXJjaF90ZXJtX3R3bykgYW5kICNzZWFyY2hfdGVybV90d28gPiAwKSBvciAodmFsdWUuZW51bV9uYW1lOmZpbmQoc2VhcmNoX3Rlcm1fdGhyZWUpIGFuZCAjc2VhcmNoX3Rlcm1fdGhyZWUgPiAwKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChkdW1wU2VhcmNoZXIuZW51bVJlc3VsdHMsIHtpLCBpbmRleH0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIHNlYXJjaF90ZXJtX29uZV9tYXRjaF90eXBlc1siZmllbGQiXSBvciBzZWFyY2hfdGVybV90d29fbWF0Y2hfdHlwZXNbImZpZWxkIl0gb3INCiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaF90ZXJtX3RocmVlX21hdGNoX3R5cGVzWyJmaWVsZCJdIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpbmRleCwgdmFsdWUgaW4gcGFpcnModi5maWVsZHMpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdmFsdWUuZmllbGRfbmFtZTpmaW5kKHNlYXJjaF90ZXJtX29uZSkgb3IgKHZhbHVlLmZpZWxkX25hbWU6ZmluZChzZWFyY2hfdGVybV90d28pIGFuZCAjc2VhcmNoX3Rlcm1fdHdvID4gMCkgb3IgKHZhbHVlLmZpZWxkX25hbWU6ZmluZChzZWFyY2hfdGVybV90aHJlZSkgYW5kICNzZWFyY2hfdGVybV90aHJlZSA+IDApIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGR1bXBTZWFyY2hlci5maWVsZFJlc3VsdHMsIHtpLCBpbmRleH0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgc2VhcmNoX21ldGhvZHMgPT0gdHJ1ZSBhbmQgdi5tZXRob2RzIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBwYWlycyh2Lm1ldGhvZHMpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBmb3VuZF9pbl9tZXRob2QgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgY3VycmVudF9tZXRob2QgPSB0b3N0cmluZyh2YWx1ZSk6Z3N1YigiLS0gdGFibGUlKFswLTlhLXpdKyUpIiwgIiIpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBpc19jYXNlX3NlbnNpdGl2ZSA9PSBmYWxzZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9tZXRob2QgPSBkdW1wU2VhcmNoZXIuY2FzZVNlbnNpdGl2ZShjdXJyZW50X21ldGhvZCwgaXNfY2FzZV9zZW5zaXRpdmUpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHNlYXJjaF90ZXJtX29uZV9mb3VuZF9sb2MgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgc2VhcmNoX3Rlcm1fdHdvX2ZvdW5kX2xvYyA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBzZWFyY2hfdGVybV90aHJlZV9mb3VuZF9sb2MgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgY3VycmVudF9tZXRob2Q6ZmluZChzZWFyY2hfdGVybV9vbmUpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hfdGVybV9vbmVfZm91bmRfbG9jID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNlYXJjaF90ZXJtX3R3b19mb3VuZCA9PSB0cnVlIGFuZCBzZWFyY2hfdGVybV90aHJlZV9mb3VuZCA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGR1bXBTZWFyY2hlci5tZXRob2RSZXN1bHRzLCB7aSwgaW5kZXh9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBzZWFyY2hfdGVybV90d29fbWF0Y2hfdHlwZXNbImZpZWxkIl0gb3Igc2VhcmNoX3Rlcm1fdGhyZWVfbWF0Y2hfdHlwZXNbImZpZWxkIl0gdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGluZCwgdmFsIGluIHBhaXJzKHYuZmllbGRzKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWwuZmllbGRfbmFtZTpmaW5kKHNlYXJjaF90ZXJtX3R3bykgYW5kICNzZWFyY2hfdGVybV90d28gPiAwKSBvciAodmFsLmZpZWxkX25hbWU6ZmluZChzZWFyY2hfdGVybV90aHJlZSkgYW5kICNzZWFyY2hfdGVybV90aHJlZSA+IDApIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGR1bXBTZWFyY2hlci5maWVsZFJlc3VsdHMsIHtpLCBpbmR9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBjdXJyZW50X21ldGhvZDpmaW5kKHNlYXJjaF90ZXJtX3R3bykgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaF90ZXJtX3R3b19mb3VuZF9sb2MgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlYXJjaF90ZXJtX29uZV9mb3VuZCA9PSB0cnVlIG9yIHNlYXJjaF90ZXJtX29uZV9mb3VuZF9sb2MgPT0gdHJ1ZSkgYW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzZWFyY2hfdGVybV90aHJlZV9mb3VuZCA9PSB0cnVlIG9yIHNlYXJjaF90ZXJtX3RocmVlX2ZvdW5kX2xvYyA9PSB0cnVlKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChkdW1wU2VhcmNoZXIubWV0aG9kUmVzdWx0cywge2ksIGluZGV4fSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgc2VhcmNoX3Rlcm1fb25lX21hdGNoX3R5cGVzWyJmaWVsZCJdIG9yIHNlYXJjaF90ZXJtX3RocmVlX21hdGNoX3R5cGVzWyJmaWVsZCJdIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpbmQsIHZhbCBpbiBwYWlycyh2LmZpZWxkcykgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsLmZpZWxkX25hbWU6ZmluZChzZWFyY2hfdGVybV9vbmUpIGFuZCAjc2VhcmNoX3Rlcm1fb25lID4gMCkgb3IgKHZhbC5maWVsZF9uYW1lOmZpbmQoc2VhcmNoX3Rlcm1fdGhyZWUpIGFuZCAjc2VhcmNoX3Rlcm1fdGhyZWUgPiAwKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChkdW1wU2VhcmNoZXIuZmllbGRSZXN1bHRzLCB7aSwgaW5kfSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgY3VycmVudF9tZXRob2Q6ZmluZChzZWFyY2hfdGVybV90aHJlZSkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaF90ZXJtX3RocmVlX2ZvdW5kX2xvYyA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VhcmNoX3Rlcm1fb25lX2ZvdW5kID09IHRydWUgb3Igc2VhcmNoX3Rlcm1fb25lX2ZvdW5kX2xvYyA9PSB0cnVlKSBhbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHNlYXJjaF90ZXJtX3R3b19mb3VuZCA9PSB0cnVlIG9yIHNlYXJjaF90ZXJtX3R3b19mb3VuZF9sb2MgPT0gdHJ1ZSkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoZHVtcFNlYXJjaGVyLm1ldGhvZFJlc3VsdHMsIHtpLCBpbmRleH0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNlYXJjaF90ZXJtX29uZV9tYXRjaF90eXBlc1siZmllbGQiXSBvciBzZWFyY2hfdGVybV90d29fbWF0Y2hfdHlwZXNbImZpZWxkIl0gdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGluZCwgdmFsIGluIHBhaXJzKHYuZmllbGRzKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWwuZmllbGRfbmFtZTpmaW5kKHNlYXJjaF90ZXJtX29uZSkgYW5kICNzZWFyY2hfdGVybV9vbmUgPiAwKSBvciAodmFsLmZpZWxkX25hbWU6ZmluZChzZWFyY2hfdGVybV90d28pIGFuZCAjc2VhcmNoX3Rlcm1fdHdvID4gMCkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoZHVtcFNlYXJjaGVyLmZpZWxkUmVzdWx0cywge2ksIGluZH0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZWlmIGFsbF9zZWFyY2hfdGVybXMgPT0gZmFsc2UgdGhlbg0KICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoZHVtcF9jc190YWJsZSkgZG8NCiAgICAgICAgICAgICAgICBpZiBzZWFyY2hfbmFtZXNwYWNlcyA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgY3VycmVudF9uYW1lc3BhY2UgPSB2Lm5hbWVzcGFjZQ0KICAgICAgICAgICAgICAgICAgICBpZiBpc19jYXNlX3NlbnNpdGl2ZSA9PSBmYWxzZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50X25hbWVzcGFjZSA9IGR1bXBTZWFyY2hlci5jYXNlU2Vuc2l0aXZlKGN1cnJlbnRfbmFtZXNwYWNlLCBpc19jYXNlX3NlbnNpdGl2ZSkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIGN1cnJlbnRfbmFtZXNwYWNlOmZpbmQoc2VhcmNoX3Rlcm1fb25lKSBvciAoI3NlYXJjaF90ZXJtX3R3byA+IDAgYW5kIGN1cnJlbnRfbmFtZXNwYWNlOmZpbmQoc2VhcmNoX3Rlcm1fdHdvKSkgb3IgKCNzZWFyY2hfdGVybV90aHJlZSA+IDAgYW5kIGN1cnJlbnRfbmFtZXNwYWNlOmZpbmQoc2VhcmNoX3Rlcm1fdGhyZWUpKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodi5jbGFzcyBvciB2LnN0cnVjdCkgYW5kIHYubWV0aG9kcyB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBwYWlycyh2Lm1ldGhvZHMpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChkdW1wU2VhcmNoZXIubWV0aG9kUmVzdWx0cywge2ksIGluZGV4fSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYuY2xhc3Mgb3Igdi5zdHJ1Y3QpIGFuZCB2LmZpZWxkcyB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBwYWlycyh2LmZpZWxkcykgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGR1bXBTZWFyY2hlci5maWVsZFJlc3VsdHMsIHtpLCBpbmRleH0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuZW51bSBhbmQgdi5maWVsZHMgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpbmRleCwgdmFsdWUgaW4gcGFpcnModi5maWVsZHMpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChkdW1wU2VhcmNoZXIuZW51bVJlc3VsdHMsIHtpLCBpbmRleH0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgc2VhcmNoX2NsYXNzZXMgPT0gdHJ1ZSBhbmQgKHYuY2xhc3Mgb3Igdi5zdHJ1Y3QpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgY3VycmVudF9jbGFzcyA9ICIiDQogICAgICAgICAgICAgICAgICAgIGlmIHYuY2xhc3MgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9jbGFzcyA9IHYuY2xhc3MNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9jbGFzcyA9IHYuc3RydWN0DQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBpc19jYXNlX3NlbnNpdGl2ZSA9PSBmYWxzZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50X2NsYXNzID0gZHVtcFNlYXJjaGVyLmNhc2VTZW5zaXRpdmUoY3VycmVudF9jbGFzcywgaXNfY2FzZV9zZW5zaXRpdmUpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBjdXJyZW50X2NsYXNzOmZpbmQoc2VhcmNoX3Rlcm1fb25lKSBvcg0KICAgICAgICAgICAgICAgICAgICAgICAgKCNzZWFyY2hfdGVybV90d28gPiAwIGFuZCBjdXJyZW50X2NsYXNzOmZpbmQoc2VhcmNoX3Rlcm1fdHdvKSkgb3IgKCNzZWFyY2hfdGVybV90aHJlZSA+IDAgYW5kIGN1cnJlbnRfY2xhc3M6ZmluZChzZWFyY2hfdGVybV90aHJlZSkpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2LmNsYXNzIG9yIHYuc3RydWN0KSBhbmQgdi5tZXRob2RzIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaW5kZXgsIHZhbHVlIGluIHBhaXJzKHYubWV0aG9kcykgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGR1bXBTZWFyY2hlci5tZXRob2RSZXN1bHRzLCB7aSwgaW5kZXh9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodi5jbGFzcyBvciB2LnN0cnVjdCkgYW5kIHYuZmllbGRzIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaW5kZXgsIHZhbHVlIGluIHBhaXJzKHYuZmllbGRzKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoZHVtcFNlYXJjaGVyLmZpZWxkUmVzdWx0cywge2ksIGluZGV4fSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBpZiBzZWFyY2hfbWV0aG9kcyA9PSB0cnVlIGFuZCB2Lm1ldGhvZHMgdGhlbg0KICAgICAgICAgICAgICAgICAgICBmb3IgaW5kZXgsIHZhbHVlIGluIHBhaXJzKHYubWV0aG9kcykgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGN1cnJlbnRfbWV0aG9kID0gdmFsdWUubWV0aG9kX25hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlzX2Nhc2Vfc2Vuc2l0aXZlID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50X21ldGhvZCA9IGR1bXBTZWFyY2hlci5jYXNlU2Vuc2l0aXZlKGN1cnJlbnRfbWV0aG9kLCBpc19jYXNlX3NlbnNpdGl2ZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgY3VycmVudF9tZXRob2Q6ZmluZChzZWFyY2hfdGVybV9vbmUpIG9yICgjc2VhcmNoX3Rlcm1fdHdvID4gMCBhbmQgY3VycmVudF9tZXRob2Q6ZmluZChzZWFyY2hfdGVybV90d28pKSBvciAoI3NlYXJjaF90ZXJtX3RocmVlID4gMCBhbmQgY3VycmVudF9tZXRob2Q6ZmluZChzZWFyY2hfdGVybV90aHJlZSkpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoZHVtcFNlYXJjaGVyLm1ldGhvZFJlc3VsdHMsIHtpLCBpbmRleH0pDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgc2VhcmNoX2ZpZWxkcyA9PSB0cnVlIGFuZCB2LmZpZWxkcyBhbmQgKHYuY2xhc3Mgb3Igdi5zdHJ1Y3QpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBwYWlycyh2LmZpZWxkcykgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGN1cnJlbnRfZmllbGQgPSB2YWx1ZS5maWVsZF9uYW1lDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBpc19jYXNlX3NlbnNpdGl2ZSA9PSBmYWxzZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9maWVsZCA9IGR1bXBTZWFyY2hlci5jYXNlU2Vuc2l0aXZlKGN1cnJlbnRfZmllbGQsIGlzX2Nhc2Vfc2Vuc2l0aXZlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBjdXJyZW50X2ZpZWxkOmZpbmQoc2VhcmNoX3Rlcm1fb25lKSBvciAoI3NlYXJjaF90ZXJtX3R3byA+IDAgYW5kIGN1cnJlbnRfZmllbGQ6ZmluZChzZWFyY2hfdGVybV90d28pKSBvciAoI3NlYXJjaF90ZXJtX3RocmVlID4gMCBhbmQgY3VycmVudF9maWVsZDpmaW5kKHNlYXJjaF90ZXJtX3RocmVlKSkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChkdW1wU2VhcmNoZXIuZmllbGRSZXN1bHRzLCB7aSwgaW5kZXh9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIHNlYXJjaF9lbnVtcyA9PSB0cnVlIGFuZCB2LmZpZWxkcyBhbmQgdi5lbnVtIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBwYWlycyh2LmZpZWxkcykgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGN1cnJlbnRfZmllbGQgPSB2YWx1ZS5lbnVtX25hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlzX2Nhc2Vfc2Vuc2l0aXZlID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50X2ZpZWxkID0gZHVtcFNlYXJjaGVyLmNhc2VTZW5zaXRpdmUoY3VycmVudF9maWVsZCwgaXNfY2FzZV9zZW5zaXRpdmUpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGN1cnJlbnRfZmllbGQ6ZmluZChzZWFyY2hfdGVybV9vbmUpIG9yICgjc2VhcmNoX3Rlcm1fdHdvID4gMCBhbmQgY3VycmVudF9maWVsZDpmaW5kKHNlYXJjaF90ZXJtX3R3bykpIG9yICgjc2VhcmNoX3Rlcm1fdGhyZWUgPiAwIGFuZCBjdXJyZW50X2ZpZWxkOmZpbmQoc2VhcmNoX3Rlcm1fdGhyZWUpKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGR1bXBTZWFyY2hlci5lbnVtUmVzdWx0cywge2ksIGluZGV4fSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCg0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBsb2NhbCBjbGVhbmVkX21ldGhvZHMgPSB7fQ0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhkdW1wU2VhcmNoZXIubWV0aG9kUmVzdWx0cykgZG8NCiAgICAgICAgICAgIGxvY2FsIG1ldGhvZF9mb3VuZCA9IGZhbHNlDQogICAgICAgICAgICBmb3IgaW5kZXgsIHZhbHVlIGluIHBhaXJzKGNsZWFuZWRfbWV0aG9kcykgZG8NCiAgICAgICAgICAgICAgICBpZiB2WzFdID09IHZhbHVlWzFdIGFuZCB2WzJdID09IHZhbHVlWzJdIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kX2ZvdW5kID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBtZXRob2RfZm91bmQgPT0gZmFsc2UgdGhlbg0KICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChjbGVhbmVkX21ldGhvZHMsIHYpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGR1bXBTZWFyY2hlci5tZXRob2RSZXN1bHRzID0gY2xlYW5lZF9tZXRob2RzDQogICAgICAgIGxvY2FsIGNsZWFuZWRfbWV0aG9kcyA9IHt9DQogICAgICAgIGZvciBpLCB2IGluIHBhaXJzKGR1bXBTZWFyY2hlci5maWVsZFJlc3VsdHMpIGRvDQogICAgICAgICAgICBsb2NhbCBtZXRob2RfZm91bmQgPSBmYWxzZQ0KICAgICAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBwYWlycyhjbGVhbmVkX21ldGhvZHMpIGRvDQogICAgICAgICAgICAgICAgaWYgdlsxXSA9PSB2YWx1ZVsxXSBhbmQgdlsyXSA9PSB2YWx1ZVsyXSB0aGVuDQogICAgICAgICAgICAgICAgICAgIG1ldGhvZF9mb3VuZCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWYgbWV0aG9kX2ZvdW5kID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoY2xlYW5lZF9tZXRob2RzLCB2KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBkdW1wU2VhcmNoZXIuZmllbGRSZXN1bHRzID0gY2xlYW5lZF9tZXRob2RzDQogICAgICAgIGxvY2FsIGNsZWFuZWRfbWV0aG9kcyA9IHt9DQogICAgICAgIGZvciBpLCB2IGluIHBhaXJzKGR1bXBTZWFyY2hlci5lbnVtUmVzdWx0cykgZG8NCiAgICAgICAgICAgIGxvY2FsIG1ldGhvZF9mb3VuZCA9IGZhbHNlDQogICAgICAgICAgICBmb3IgaW5kZXgsIHZhbHVlIGluIHBhaXJzKGNsZWFuZWRfbWV0aG9kcykgZG8NCiAgICAgICAgICAgICAgICBpZiB2WzFdID09IHZhbHVlWzFdIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kX2ZvdW5kID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBtZXRob2RfZm91bmQgPT0gZmFsc2UgdGhlbg0KICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChjbGVhbmVkX21ldGhvZHMsIHYpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGR1bXBTZWFyY2hlci5lbnVtUmVzdWx0cyA9IGNsZWFuZWRfbWV0aG9kcw0KICAgICAgICBpZiAjc3R5cGVfYXJyYXkgPiAwIHRoZW4NCiAgICAgICAgICAgIGxvY2FsIHR5cGVfa2V5cyA9IHt9DQogICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhzdHlwZV9hcnJheSkgZG8NCiAgICAgICAgICAgICAgICB0eXBlX2tleXNbdl0gPSAxDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGxvY2FsIHNvcnRfbWV0aG9kX3R5cGVzID0ge30NCiAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKGR1bXBTZWFyY2hlci5tZXRob2RSZXN1bHRzKSBkbw0KICAgICAgICAgICAgICAgIGlmIHR5cGVfa2V5c1tkdW1wX2NzX3RhYmxlW3ZbMV1dWyJtZXRob2RzIl1bdlsyXV0ubWV0aG9kX3R5cGVdIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHNvcnRfbWV0aG9kX3R5cGVzLCB2KQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBkdW1wU2VhcmNoZXIubWV0aG9kUmVzdWx0cyA9IHNvcnRfbWV0aG9kX3R5cGVzDQogICAgICAgICAgICBsb2NhbCBzb3J0X2ZpZWxkX3R5cGVzID0ge30NCiAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKGR1bXBTZWFyY2hlci5maWVsZFJlc3VsdHMpIGRvDQogICAgICAgICAgICAgICAgaWYgdHlwZV9rZXlzW2R1bXBfY3NfdGFibGVbdlsxXV1bImZpZWxkcyJdW3ZbMl1dLmZpZWxkX3R5cGVdIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHNvcnRfZmllbGRfdHlwZXMsIHYpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGR1bXBTZWFyY2hlci5maWVsZFJlc3VsdHMgPSBzb3J0X2ZpZWxkX3R5cGVzDQogICAgICAgIGVuZA0KICAgICAgICBsb2NhbCBzZWFyY2hfcmVzdWx0cyA9IGdnLmNob2ljZSh7IvCflJggTWV0aG9kIFJlc3VsdHMgKCIgLi4gI2R1bXBTZWFyY2hlci5tZXRob2RSZXN1bHRzIC4uICIpIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICLwn5SYIEZpZWxkIFJlc3VsdHMgKCIgLi4gI2R1bXBTZWFyY2hlci5maWVsZFJlc3VsdHMgLi4gIikiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIvCflJggRW51bSBSZXN1bHRzICgiIC4uICNkdW1wU2VhcmNoZXIuZW51bVJlc3VsdHMgLi4gIikifSwNCgkJCQkJCQkJCQkgIG5pbCwNCgkJCQkJCQkJCQkgIHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBTZWFyY2ggUmVzdWx0cyDihLnvuI8iKQ0KICAgICAgICBpZiBzZWFyY2hfcmVzdWx0cyB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgbG9jYWwgaGFuZGxlciA9ICIiDQogICAgICAgICAgICBpZiBzZWFyY2hfcmVzdWx0cyA9PSAxIHRoZW4NCiAgICAgICAgICAgICAgICBoYW5kbGVyID0gIm1ldGhvZF9yZXN1bHRzIg0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBzZWFyY2hfcmVzdWx0cyA9PSAyIHRoZW4NCiAgICAgICAgICAgICAgICBoYW5kbGVyID0gImZpZWxkX3Jlc3VsdHMiDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGlmIHNlYXJjaF9yZXN1bHRzID09IDMgdGhlbg0KICAgICAgICAgICAgICAgIGhhbmRsZXIgPSAiZW51bV9yZXN1bHRzIg0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmRlZmF1bHRIYW5kbGVyKGhhbmRsZXIpDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJZHVtcFNlYXJjaGVyLnNlYXJjaFByb21wdCgpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBzZWFyY2hQcm9tcHQgPSBmdW5jdGlvbihzdGVybTEsIHN0ZXJtMiwgYmF0Y2gpDQogICAgICAgIGR1bXBTZWFyY2hlci5tZXRob2RSZXN1bHRzID0ge30NCiAgICAgICAgZHVtcFNlYXJjaGVyLmVudW1SZXN1bHRzID0ge30NCiAgICAgICAgZHVtcFNlYXJjaGVyLmZpZWxkUmVzdWx0cyA9IHt9DQogICAgICAgIGxvY2FsIHRlbXBfdHlwZXMgPSBiY190b29sYm94X21ldGhvZF90eXBlcw0KICAgICAgICBsb2NhbCBzZWFyY2hfcHJvbXB0X3R5cGVzID0gZ2cubXVsdGlDaG9pY2UodGVtcF90eXBlcywgbmlsLCBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2VsZWN0IE1ldGhvZCBUeXBlcyAoc2VsZWN0IG5vbmUgZm9yIGFsbCkg4oS577iPIikNCiAgICAgICAgaWYgc2VhcmNoX3Byb21wdF90eXBlcyB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgc2VhcmNoX2FsbCA9IHRydWUNCiAgICAgICAgICAgIHN0eXBlX2FycmF5ID0ge30NCiAgICAgICAgICAgIGZvciBrLCB2YWx1ZSBpbiBwYWlycyhzZWFyY2hfcHJvbXB0X3R5cGVzKSBkbw0KICAgICAgICAgICAgICAgIGlmIHNlYXJjaF9wcm9tcHRfdHlwZXNba10gPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHNlYXJjaF9hbGwgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBzZWFyY2hfYWxsID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgICAgICBmb3IgaywgdmFsdWUgaW4gcGFpcnMoc2VhcmNoX3Byb21wdF90eXBlcykgZG8NCiAgICAgICAgICAgICAgICAgICAgaWYgc2VhcmNoX3Byb21wdF90eXBlc1trXSA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChzdHlwZV9hcnJheSwgYmNfdG9vbGJveF9tZXRob2RfdHlwZXNba10pDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBsb2NhbCBzZWFyY2hfcHJvbXB0ID0gZ2cucHJvbXB0KHtzY3JpcHRfdGl0bGUgLi4NCgkJCQkJCQkJCQkJICJcblxu4oS577iPIFNlYXJjaCBUZXJtIDEg4oS5ICDirIfvuI/CoFNjcm9sbMKgRG93bsKg4qyH77iPIiwgDQoJCQkJCQkJCQkJCSAi4oS577iPIFNlYXJjaCBUZXJtIDIg4oS5IiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICLihLnvuI8gU2VhcmNoIFRlcm0gMyDihLkiLCANCgkJCQkJCQkJCQkJICJDYXNlIHNlbnNpdGl2ZSIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiTXVzdCBjb250YWluIGFsbCBzZWFyY2ggdGVybXMiLCANCgkJCQkJCQkJCQkJICJTZWFyY2ggbmFtZXNwYWNlcyIsIA0KCQkJCQkJCQkJCQkgIlNlYXJjaCBjbGFzc2VzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTZWFyY2ggbWV0aG9kcyIsIA0KCQkJCQkJCQkJCQkgIlNlYXJjaCBmaWVsZHMiLCANCgkJCQkJCQkJCQkJICJTZWFyY2ggZW51bXMifSwgDQoJCQkJCQkJCQkJCSB7DQoJCQkJCQkJCQkJCSBbMV0gPSBzdGVybTEsDQoJCQkJCQkJCQkJCSBbMl0gPSBzdGVybTIsDQoJCQkJCQkJCQkJCSBbNF0gPSB0cnVlLA0KCQkJCQkJCQkJCQkgWzVdID0gdHJ1ZSwNCgkJCQkJCQkJCQkJIFs2XSA9IHRydWUsDQoJCQkJCQkJCQkJCSBbN10gPSB0cnVlLA0KCQkJCQkJCQkJCQkgWzhdID0gdHJ1ZSwNCgkJCQkJCQkJCQkJIFs5XSA9IHRydWUsDQoJCQkJCQkJCQkJCSBbMTBdID0gdHJ1ZQ0KCQkJCQkJCQkJCQkgfSwgew0KCQkJCQkJCQkJCQkgWzFdID0gInRleHQiLA0KCQkJCQkJCQkJCQkgWzJdID0gInRleHQiLA0KCQkJCQkJCQkJCQkgWzNdID0gInRleHQiLA0KCQkJCQkJCQkJCQkgWzRdID0gImNoZWNrYm94IiwNCgkJCQkJCQkJCQkJIFs1XSA9ICJjaGVja2JveCIsDQoJCQkJCQkJCQkJCSBbNl0gPSAiY2hlY2tib3giLA0KCQkJCQkJCQkJCQkgWzddID0gImNoZWNrYm94IiwNCgkJCQkJCQkJCQkJIFs4XSA9ICJjaGVja2JveCIsDQoJCQkJCQkJCQkJCSBbOV0gPSAiY2hlY2tib3giLA0KCQkJCQkJCQkJCQkgWzEwXSA9ICJjaGVja2JveCINCgkJCQkJCQkJCQkJIH0pDQogICAgICAgICAgICBpZiBzZWFyY2hfcHJvbXB0IH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgZHVtcFNlYXJjaGVyLnNlYXJjaER1bXAoc2VhcmNoX3Byb21wdCwgc3R5cGVfYXJyYXkpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglkdW1wU2VhcmNoZXIucmVtb3ZlTmFtZXNwYWNlcygpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICByZW1vdmVOYW1lc3BhY2VzID0gZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBuYW1lc3BhY2VOYW1lQXNLZXkgPSB7fQ0KICAgICAgICBsb2NhbCBmaXhlZE5hbWVzcGFjZVRhYmxlID0ge30NCiAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoZHVtcF9jc190YWJsZSkgZG8NCiAgICAgICAgICAgIGlmIHYubmFtZXNwYWNlIGFuZCB2Lm5hbWVzcGFjZSB+PSAiLy8gTmFtZXNwYWNlOiAiIHRoZW4NCiAgICAgICAgICAgICAgICBpZiB2Lm5hbWVzcGFjZTpmaW5kKCIvLyBOYW1lc3BhY2U6ICIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgY2xlYW5lZF9jbGFzc19uYW1lID0gdi5uYW1lc3BhY2U6Z3N1YigiLy8gTmFtZXNwYWNlOiAoLispIiwgIiUxIikNCiAgICAgICAgICAgICAgICAgICAgaWYgY2xlYW5lZF9jbGFzc19uYW1lOmZpbmQoIl5bYS16QS1aMC05XSIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZU5hbWVBc0tleVtjbGVhbmVkX2NsYXNzX25hbWVdID0gY2xlYW5lZF9jbGFzc19uYW1lDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlTmFtZUFzS2V5W3YubmFtZXNwYWNlXSA9IHYubmFtZXNwYWNlDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGZvciBrLCB2YWx1ZSBpbiBwYWlycyhuYW1lc3BhY2VOYW1lQXNLZXkpIGRvDQogICAgICAgICAgICBmaXhlZE5hbWVzcGFjZVRhYmxlWyNmaXhlZE5hbWVzcGFjZVRhYmxlICsgMV0gPSB2YWx1ZQ0KICAgICAgICBlbmQNCiAgICAgICAgdGFibGUuc29ydChmaXhlZE5hbWVzcGFjZVRhYmxlKQ0KICAgICAgICBsb2NhbCBzZWxlY3ROYW1lc3BhY2VNZW51ID0gZ2cubXVsdGlDaG9pY2UoZml4ZWROYW1lc3BhY2VUYWJsZSkNCiAgICAgICAgaWYgc2VsZWN0TmFtZXNwYWNlTWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoZHVtcF9jc190YWJsZSkgZG8NCiAgICAgICAgICAgICAgICBmb3IgaW5kZXgsIHZhbHVlIGluIHBhaXJzKHNlbGVjdE5hbWVzcGFjZU1lbnUpIGRvDQogICAgICAgICAgICAgICAgICAgIGlmIHYubmFtZXNwYWNlIGFuZCB2Lm5hbWVzcGFjZTpmaW5kKCIvLyBOYW1lc3BhY2U6ICIgLi4gZml4ZWROYW1lc3BhY2VUYWJsZVtpbmRleF0pIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGR1bXBfY3NfdGFibGVbaV0gPSAicmVtb3ZlIg0KICAgICAgICAgICAgICAgICAgICBlbHNlaWYgdi5uYW1lc3BhY2UgYW5kIHYubmFtZXNwYWNlOmZpbmQoZml4ZWROYW1lc3BhY2VUYWJsZVtpbmRleF0pIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGR1bXBfY3NfdGFibGVbaV0gPSAicmVtb3ZlIg0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgbG9jYWwgdGVtcF9kdW1wX2NzX3RhYmxlID0ge30NCiAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKGR1bXBfY3NfdGFibGUpIGRvDQogICAgICAgICAgICAgICAgaWYgdHlwZSh2KSA9PSAidGFibGUiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgdGVtcF9kdW1wX2NzX3RhYmxlWyN0ZW1wX2R1bXBfY3NfdGFibGUgKyAxXSA9IHYNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZHVtcF9jc190YWJsZSA9IHRlbXBfZHVtcF9jc190YWJsZQ0KICAgICAgICAgICAgZ2cudG9hc3Qoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIE5hbWVzcGFjZXMgUmVtb3ZlZCDihLnvuI8iKQ0KICAgICAgICAgICAgZHVtcEhhbmRsZXIuc2F2ZUpTT04oKQ0KICAgICAgICAgICAgZ2cudG9hc3Qoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIER1bXAgRGF0YSBVcGRhdGVkIOKEue+4jyIpDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJZHVtcFNlYXJjaGVyLmhvbWUoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgaG9tZSA9IGZ1bmN0aW9uKCkNCiAgICAgICAgaWYgc2F2ZV9kdW1wID09IHRydWUgdGhlbg0KICAgICAgICAgICAgc2F2ZV9kdW1wID0gZmFsc2UNCiAgICAgICAgICAgIGdnLnNsZWVwKDMwMCkNCiAgICAgICAgICAgIGR1bXBIYW5kbGVyLnNhdmVKU09OKCkNCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIG1lbnUgPSBnZy5jaG9pY2UoeyLwn5SNIFNlYXJjaCIsIA0KCQkJCQkJCQki4p6WIFJlbW92ZSBOYW1lc3BhY2VzIiwgDQoJCQkJCQkJCSLwn5SEIFJlcHJvY2VzcyBkdW1wLmNzIn0sIA0KCQkJCQkJCQluaWwsDQoJCQkJCQkJCXNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBTZWFyY2ggRHVtcC5jcyDihLnvuI8iKQ0KICAgICAgICBpZiBtZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICBpZiBtZW51ID09IDEgdGhlbg0KICAgICAgICAgICAgICAgIGR1bXBTZWFyY2hlci5zZWFyY2hQcm9tcHQoKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBtZW51ID09IDIgdGhlbg0KICAgICAgICAgICAgICAgIGR1bXBTZWFyY2hlci5yZW1vdmVOYW1lc3BhY2VzKCkNCiAgICAgICAgICAgICAgICBkdW1wU2VhcmNoZXIuaG9tZSgpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGlmIG1lbnUgPT0gMyB0aGVuDQogICAgICAgICAgICAgICAgZ2cudG9hc3Qoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIFJlcHJvY2Vzc2luZyBkdW1wLmNzIOKEue+4jyIpDQogICAgICAgICAgICAgICAgZHVtcEhhbmRsZXIuaW1wb3J0RHVtcCgpDQogICAgICAgICAgICAgICAgZHVtcFNlYXJjaGVyLmhvbWUoKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KfQ0KZHVtcFNlYXJjaGVyLmhvbWUoKQ0K"
        },
        [8] = {
            file_name = "plugin_bc_il2cpp_fields.lua",
            file_data = "Z2cuY2xlYXJMaXN0KCkNCmlsMmNwcEZpZWxkcyA9IHsNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRmllbGRzLmNyZWF0ZURpcmVjdG9yeSgpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBjcmVhdGVEaXJlY3RvcnkgPSBmdW5jdGlvbigpDQogICAgICAgIHdoaWxlIChuaWwpIGRvDQogICAgICAgICAgICBsb2NhbCBjcmVhdGVEaXJlY3RvcnlWYWwgPSB7fQ0KICAgICAgICAgICAgaWYgKGNyZWF0ZURpcmVjdG9yeVZhbC5jcmVhdGVEaXJlY3RvcnlWYWwpIHRoZW4NCiAgICAgICAgICAgICAgICBjcmVhdGVEaXJlY3RvcnlWYWwuY3JlYXRlRGlyZWN0b3J5VmFsID0gKGNyZWF0ZURpcmVjdG9yeVZhbC5jcmVhdGVEaXJlY3RvcnlWYWwoY3JlYXRlRGlyZWN0b3J5VmFsKSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZGlyZWN0b3J5X2NyZWF0ZWQgPSB0cnVlDQogICAgICAgIGZvciBpLCB2IGluIHBhaXJzKGdnLmdldFJhbmdlc0xpc3QoKSkgZG8NCiAgICAgICAgICAgIGlmIHZbImVuZCJdIC0gdi5zdGFydCA8IDEwMjQwIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBub3Qgc3RyaW5nLmZpbmQodlsibmFtZSJdLCAiZGVsZXRlZCIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgY3JlYXRlX3N0YXJ0ID0gdi5zdGFydA0KICAgICAgICAgICAgICAgICAgICBjcmVhdGVfZW5kID0gdlsiZW5kIl0NCiAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZ2cuZHVtcE1lbW9yeShjcmVhdGVfc3RhcnQsIGNyZWF0ZV9lbmQsIGlsMmNwcEZpZWxkcy5zYXZlUGF0aCwgZ2cuRFVNUF9TS0lQX1NZU1RFTV9MSUJTKQ0KICAgIGVuZCwNCiAgICBzYXZlUGF0aCA9IHBsdWdpbnNEYXRhUGF0aCAuLiAiYmFkY2FzZV9pbDJjcHBfZmllbGRzX2RhdGEvIiwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRmllbGRzLmNoZWNrQ29uZmlnRmlsZUdhbWUoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgY2hlY2tDb25maWdGaWxlR2FtZSA9IGZ1bmN0aW9uKCkNCiAgICAgICAgZG9maWxlKGlsMmNwcEZpZWxkcy5zYXZlUGF0aCAuLiAiLyIgLi4gZ2cuZ2V0VGFyZ2V0UGFja2FnZSgpIC4uICIuY2ZnIikNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWlsMmNwcEZpZWxkcy5zYXZlQ29uZmlnKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIHNhdmVDb25maWcgPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIGZpbGUgPSBpby5vcGVuKGlsMmNwcEZpZWxkcy5zYXZlUGF0aCAuLiAiLyIgLi4gZ2cuZ2V0VGFyZ2V0UGFja2FnZSgpIC4uICIuY2ZnIiwgIncrIikNCiAgICAgICAgZmlsZTp3cml0ZSgiaWwyY3BwRmllbGRzLnNhdmVkRWRpdHNUYWJsZSA9ICIgLi4gdG9zdHJpbmcoaWwyY3BwRmllbGRzLnNhdmVkRWRpdHNUYWJsZSkpDQogICAgICAgIGZpbGU6Y2xvc2UoKQ0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRmllbGRzLmdldFJhbmdlKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIGdldFJhbmdlID0gZnVuY3Rpb24oKQ0KICAgICAgICB3aGlsZSAobmlsKSBkbw0KICAgICAgICAgICAgbG9jYWwgZ2V0UmFuZ2VWYWwgPSB7fQ0KICAgICAgICAgICAgaWYgKGdldFJhbmdlVmFsLmdldFJhbmdlVmFsKSB0aGVuDQogICAgICAgICAgICAgICAgZ2V0UmFuZ2VWYWwuZ2V0UmFuZ2VWYWwgPSAoZ2V0UmFuZ2VWYWwuZ2V0UmFuZ2VWYWwoZ2V0UmFuZ2VWYWwpKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBnZy5zZXRSYW5nZXMoZ2cuUkVHSU9OX09USEVSKQ0KICAgICAgICBnZy5zZXRWaXNpYmxlKGZhbHNlKQ0KICAgICAgICBnZy50b2FzdChzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gQ29uZmlndXJpbmcgU2NyaXB0IOKEue+4jyIpDQogICAgICAgIGdnLmNsZWFyUmVzdWx0cygpDQogICAgICAgIDo6dHJ5X2NhOjoNCiAgICAgICAgZ2cuc2VhcmNoTnVtYmVyKGlsMmNwcEZpZWxkcy5zX2JfcywgZ2cuVFlQRV9CWVRFLCBmYWxzZSwgZ2cuU0lHTl9FUVVBTCwgbmlsLCBuaWwsIDEpDQogICAgICAgIGlmIGdnLmdldFJlc3VsdHNDb3VudCgpID09IDAgdGhlbg0KICAgICAgICAgICAgZ2cuc2V0UmFuZ2VzKGdnLlJFR0lPTl9DX0FMTE9DKQ0KICAgICAgICAgICAgZ290byB0cnlfY2ENCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIHN0YXJ0X3NlYXJjaCA9IGdnLmdldFJlc3VsdHMoMSkNCiAgICAgICAgZ2cuY2xlYXJSZXN1bHRzKCkNCiAgICAgICAgcmFuZ2Vfc3RhcnQgPSBzdGFydF9zZWFyY2hbMV0uYWRkcmVzcw0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhnZy5nZXRSYW5nZXNMaXN0KCkpIGRvDQogICAgICAgICAgICBpZiB2WyJzdGFydCJdIDwgcmFuZ2Vfc3RhcnQgYW5kIHZbImVuZCJdID4gcmFuZ2Vfc3RhcnQgdGhlbg0KICAgICAgICAgICAgICAgIG1ldGFkYXRhX2VuZCA9IHZbImVuZCJdDQogICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZ2cuc2VhcmNoTnVtYmVyKGlsMmNwcEZpZWxkcy5lX2JfcywgZ2cuVFlQRV9CWVRFLCBmYWxzZSwgZ2cuU0lHTl9FUVVBTCwgcmFuZ2Vfc3RhcnQsIG5pbCwgMSkNCiAgICAgICAgbG9jYWwgZW5kX3NlYXJjaCA9IGdnLmdldFJlc3VsdHMoMSkNCiAgICAgICAgcmFuZ2VfZW5kID0gZW5kX3NlYXJjaFsxXS5hZGRyZXNzDQogICAgICAgIGdnLmNsZWFyUmVzdWx0cygpDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglpbDJjcHBGaWVsZHMuY3JlYXRlU2VhcmNoKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIGNyZWF0ZVNlYXJjaCA9IGZ1bmN0aW9uKHNlYXJjaF9zdHJpbmcpDQogICAgICAgIGJ5dGVfc2VhcmNoID0gIjA7Ig0KICAgICAgICBmb3IgYyBpbiBzZWFyY2hfc3RyaW5nOmdtYXRjaCAiLiIgZG8NCiAgICAgICAgICAgIGlmICNzZWFyY2hfc3RyaW5nID4gMSB0aGVuDQogICAgICAgICAgICAgICAgYnl0ZV9zZWFyY2ggPSBieXRlX3NlYXJjaCAuLiBzdHJpbmcuYnl0ZShjKSAuLiAiOyINCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBieXRlX3NlYXJjaCA9IGJ5dGVfc2VhcmNoIC4uIHN0cmluZy5ieXRlKGMpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGJ5dGVfc2VhcmNoID0gYnl0ZV9zZWFyY2ggLi4gIjAiDQogICAgICAgIGlmICNzZWFyY2hfc3RyaW5nID4gMSB0aGVuDQogICAgICAgICAgICBieXRlX3NlYXJjaCA9IGJ5dGVfc2VhcmNoIC4uICI6OiIgLi4gI3NlYXJjaF9zdHJpbmcgKyAyDQogICAgICAgIGVuZA0KICAgICAgICByZXR1cm4gYnl0ZV9zZWFyY2gNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWlsMmNwcEZpZWxkcy5nZXRNZXRob2RUeXBlcygpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBnZXRNZXRob2RUeXBlcyA9IGZ1bmN0aW9uKCkNCiAgICAgICAgd2hpbGUgKG5pbCkgZG8NCiAgICAgICAgICAgIGxvY2FsIGdldE1ldGhvZFR5cGVzVmFsID0ge30NCiAgICAgICAgICAgIGlmIChnZXRNZXRob2RUeXBlc1ZhbC5nZXRNZXRob2RUeXBlc1ZhbCkgdGhlbg0KICAgICAgICAgICAgICAgIGdldE1ldGhvZFR5cGVzVmFsLmdldE1ldGhvZFR5cGVzVmFsID0gKGdldE1ldGhvZFR5cGVzVmFsLmdldE1ldGhvZFR5cGVzVmFsKGdldE1ldGhvZFR5cGVzVmFsKSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoaWwyY3BwRmllbGRzLmdldF9tZXRob2Rfc2VhcmNoZXMpIGRvDQogICAgICAgICAgICBnZy5zZXRSYW5nZXMoZ2cuUkVHSU9OX09USEVSKQ0KICAgICAgICAgICAgZ2cuY2xlYXJSZXN1bHRzKCkNCiAgICAgICAgICAgIGdnLnNlYXJjaE51bWJlcihpbDJjcHBGaWVsZHMuY3JlYXRlU2VhcmNoKHZbMl0pLCBnZy5UWVBFX0JZVEUsIGZhbHNlLCBnZy5TSUdOX0VRVUFMLCByYW5nZV9zdGFydCwgcmFuZ2VfZW5kKQ0KICAgICAgICAgICAgbG9jYWwgc3RyaW5nX2FkZHJlc3MgPSBnZy5nZXRSZXN1bHRzKDEsIDEpDQogICAgICAgICAgICBzdHJpbmdfYWRkcmVzcyA9IHN0cmluZ19hZGRyZXNzWzFdLmFkZHJlc3MNCiAgICAgICAgICAgIGdnLmNsZWFyUmVzdWx0cygpDQogICAgICAgICAgICBnZy5zZXRSYW5nZXMoZ2cuUkVHSU9OX0NfQUxMT0MpDQogICAgICAgICAgICBnZy5zZWFyY2hOdW1iZXIoc3RyaW5nX2FkZHJlc3MsIGZsYWdfdHlwZSwgbmlsLCBuaWwsIG5pbCwgbmlsLCAxKQ0KICAgICAgICAgICAgbG9jYWwgbWV0aG9kX2RhdGEgPSBnZy5nZXRSZXN1bHRzKDEpDQogICAgICAgICAgICBpZiBnZy5nZXRSZXN1bHRzQ291bnQoKSA+IDAgdGhlbg0KICAgICAgICAgICAgICAgIGxvY2FsIGdldF90eXBlID0ge30NCiAgICAgICAgICAgICAgICBnZXRfdHlwZVsxXSA9IHt9DQogICAgICAgICAgICAgICAgaWYgaWwyY3BwRmllbGRzLmFyY2gueDY0IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZ2V0X3R5cGVbMV0uYWRkcmVzcyA9IG1ldGhvZF9kYXRhWzFdLmFkZHJlc3MgKyAxNg0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgZ2V0X3R5cGVbMV0uYWRkcmVzcyA9IG1ldGhvZF9kYXRhWzFdLmFkZHJlc3MgKyA4DQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZ2V0X3R5cGVbMV0uZmxhZ3MgPSBmbGFnX3R5cGUNCiAgICAgICAgICAgICAgICBnZXRfdHlwZSA9IGdnLmdldFZhbHVlcyhnZXRfdHlwZSkNCiAgICAgICAgICAgICAgICBsb2NhbCBnZXRfdHlwZTIgPSB7fQ0KICAgICAgICAgICAgICAgIGdldF90eXBlMlsxXSA9IHt9DQogICAgICAgICAgICAgICAgZ2V0X3R5cGUyWzFdLmFkZHJlc3MgPSBnZXRfdHlwZVsxXS52YWx1ZQ0KICAgICAgICAgICAgICAgIGdldF90eXBlMlsxXS5mbGFncyA9IGdnLlRZUEVfRFdPUkQNCiAgICAgICAgICAgICAgICBnZXRfdHlwZTIgPSBnZy5nZXRWYWx1ZXMoZ2V0X3R5cGUyKQ0KICAgICAgICAgICAgICAgIGlmICN0b3N0cmluZyhnZXRfdHlwZTJbMV0udmFsdWUpID4gOCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGdldF90eXBlMiA9IHt9DQogICAgICAgICAgICAgICAgICAgIGdldF90eXBlMlsxXSA9IHt9DQogICAgICAgICAgICAgICAgICAgIGdldF90eXBlMlsxXS5hZGRyZXNzID0gZ2V0X3R5cGVbMV0udmFsdWUgKyA0DQogICAgICAgICAgICAgICAgICAgIGdldF90eXBlMlsxXS5mbGFncyA9IGdnLlRZUEVfRFdPUkQNCiAgICAgICAgICAgICAgICAgICAgZ2V0X3R5cGUyID0gZ2cuZ2V0VmFsdWVzKGdldF90eXBlMikNCiAgICAgICAgICAgICAgICAgICAgZm9yIGluZGV4ID0gMSwgMTAgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGlsMmNwcEZpZWxkcy5tZXRob2RfdHlwZXNbdG9zdHJpbmcoZ2V0X3R5cGUyWzFdLnZhbHVlICsgaW5kZXgpXSA9IHZbMV0NCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWwyY3BwRmllbGRzLm1ldGhvZF90eXBlc1t0b3N0cmluZyhnZXRfdHlwZTJbMV0udmFsdWUpXSA9IHZbMV0NCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgbG9jYWwgZmlsZSA9IGlvLm9wZW4oaWwyY3BwRmllbGRzLnNhdmVQYXRoIC4uIGdnLmdldFRhcmdldFBhY2thZ2UoKSAuLiAiXyIgLi4gZ2cuZ2V0VGFyZ2V0SW5mbygpLnZlcnNpb25Db2RlIC4uICJfbWV0aG9kX3R5cGVzLmx1YSIsICJ3KyIpDQogICAgICAgIGZpbGU6d3JpdGUoImlsMmNwcEZpZWxkcy5tZXRob2RfdHlwZXMgPSAiIC4uIHRvc3RyaW5nKGlsMmNwcEZpZWxkcy5tZXRob2RfdHlwZXMpKQ0KICAgICAgICBmaWxlOmNsb3NlKCkNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWlsMmNwcEZpZWxkcy5jaGVja01ldGhvZFR5cGVzKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIGNoZWNrTWV0aG9kVHlwZXMgPSBmdW5jdGlvbigpDQogICAgICAgIGRvZmlsZShpbDJjcHBGaWVsZHMuc2F2ZVBhdGggLi4gZ2cuZ2V0VGFyZ2V0UGFja2FnZSgpIC4uICJfIiAuLiBnZy5nZXRUYXJnZXRJbmZvKCkudmVyc2lvbkNvZGUgLi4gIl9tZXRob2RfdHlwZXMubHVhIikNCiAgICBlbmQsDQogICAgZl9oZXggPSBmdW5jdGlvbihuKQ0KICAgICAgICByZXR1cm4gIjB4IiAuLiBzdHJpbmcuZm9ybWF0KCIleCIsIG4pDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglpbDJjcHBGaWVsZHMubG9hZEZpZWxkcyhjbGFzcywgY29udGludWUpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBsb2FkRmllbGRzID0gZnVuY3Rpb24oY2xhc3MsIGNvbnRpbnVlKQ0KICAgICAgICB3aGlsZSAobmlsKSBkbw0KICAgICAgICAgICAgbG9jYWwgbG9hZEZpZWxkc1ZhbCA9IHt9DQogICAgICAgICAgICBpZiAobG9hZEZpZWxkc1ZhbC5sb2FkRmllbGRzVmFsKSB0aGVuDQogICAgICAgICAgICAgICAgbG9hZEZpZWxkc1ZhbC5sb2FkRmllbGRzVmFsID0gKGxvYWRGaWVsZHNWYWwubG9hZEZpZWxkc1ZhbChsb2FkRmllbGRzVmFsKSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgbG9jYWwgc3RyaW5nX2FkZHJlc3MgPSB7fQ0KICAgICAgICBsb2NhbCBjbGFzc19oZWFkZXJzID0ge30NCiAgICAgICAgbG9jYWwgZ2V0X251bWJlcl9vZl9maWVsZHMgPSB7fQ0KICAgICAgICBsb2NhbCBmaXJzdF9maWVsZF9hZGRyZXNzID0ge30NCiAgICAgICAgbG9jYWwgZmllbGRfZGF0YSA9ICIiDQogICAgICAgIGxvY2FsIGZpZWxkX25hbWVfcG9pbnRlciA9ICIiDQogICAgICAgIGxvY2FsIHR5cGVfcG9pbnRlciA9ICIiDQogICAgICAgIGxvY2FsIGNsYXNzX3BvaW50ZXIgPSAiIg0KICAgICAgICBsb2NhbCBmaWVsZF9vZmZzZXQgPSAiIg0KICAgICAgICBsb2NhbCBjdXJyZW50X2FkZHJlc3MgPSAiIg0KICAgICAgICBsb2NhbCBnZXRfZmllbGRfbmFtZSA9IHt9DQogICAgICAgIGxvY2FsIG9mZnNldCA9IDANCiAgICAgICAgbG9jYWwgY291bnQgPSAxDQogICAgICAgIGxvY2FsIGZpZWxkX2RhdGEgPSB7fQ0KICAgICAgICBsb2NhbCBmaWVsZF9uYW1lID0gIiINCiAgICAgICAgbG9jYWwgZ2V0X3R5cGUgPSB7fQ0KICAgICAgICBsb2NhbCBmaWVsZF90eXBlID0ge30NCiAgICAgICAgbG9jYWwgcG9pbnRlcnNfdG9faW5zdGFuY2VzID0ge30NCiAgICAgICAgaWYgbm90IGNsYXNzIHRoZW4NCiAgICAgICAgICAgIGNsYXNzID0gIiINCiAgICAgICAgZW5kDQogICAgICAgIGdnLmNsZWFyTGlzdCgpDQogICAgICAgIGlmIG5vdCBjb250aW51ZSB0aGVuDQogICAgICAgICAgICBjbGFzc19zdHJpbmdfc2VhcmNoID0gZ2cucHJvbXB0KHtzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gRW50ZXIgQ2xhc3MgTmFtZSDihLnvuI8ifSwge2NsYXNzfSwgeyJ0ZXh0In0pDQogICAgICAgIGVuZA0KICAgICAgICBpZiBjbGFzc19zdHJpbmdfc2VhcmNoIH49IG5pbCBvciBjb250aW51ZSA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgIGlmIGNvbnRpbnVlID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgIGdvdG8gZG9fbW9yZQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICB3b3JraW5nX2NsYXNzID0gY2xhc3Nfc3RyaW5nX3NlYXJjaFsxXQ0KICAgICAgICAgICAgZ2cuc2V0UmFuZ2VzKGdnLlJFR0lPTl9PVEhFUikNCiAgICAgICAgICAgIGdnLmNsZWFyUmVzdWx0cygpDQogICAgICAgICAgICBnZy5zZWFyY2hOdW1iZXIoaWwyY3BwRmllbGRzLmNyZWF0ZVNlYXJjaChjbGFzc19zdHJpbmdfc2VhcmNoWzFdKSwgZ2cuVFlQRV9CWVRFLCBmYWxzZSwgZ2cuU0lHTl9FUVVBTCwNCiAgICAgICAgICAgICAgICByYW5nZV9zdGFydCwgcmFuZ2VfZW5kKQ0KICAgICAgICAgICAgc3RyaW5nX2FkZHJlc3MgPSBnZy5nZXRSZXN1bHRzKDEsIDEpDQogICAgICAgICAgICBpZiBnZy5nZXRSZXN1bHRzQ291bnQoKSA9PSAwIHRoZW4NCiAgICAgICAgICAgICAgICBub25lX2ZvdW5kID0gdHJ1ZQ0KICAgICAgICAgICAgICAgIGdvdG8gbm9uZQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBzdHJpbmdfYWRkcmVzcyA9IHN0cmluZ19hZGRyZXNzWzFdLmFkZHJlc3MNCiAgICAgICAgICAgIGdnLmNsZWFyUmVzdWx0cygpDQogICAgICAgICAgICBnZy5zZXRSYW5nZXMoZ2cuUkVHSU9OX0NfQUxMT0MpDQogICAgICAgICAgICBnZy5zZWFyY2hOdW1iZXIoc3RyaW5nX2FkZHJlc3MsIGZsYWdfdHlwZSkNCiAgICAgICAgICAgIGNsYXNzX2hlYWRlcnMgPSBnZy5nZXRSZXN1bHRzKGdnLmdldFJlc3VsdHNDb3VudCgpKQ0KICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoY2xhc3NfaGVhZGVycykgZG8NCiAgICAgICAgICAgICAgICBpZiBpbDJjcHBGaWVsZHMuYXJjaC54NjQgdGhlbg0KICAgICAgICAgICAgICAgICAgICBjbGFzc19oZWFkZXJzW2ldLmFkZHJlc3MgPSBjbGFzc19oZWFkZXJzW2ldLmFkZHJlc3MgLSAxNg0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgY2xhc3NfaGVhZGVyc1tpXS5hZGRyZXNzID0gY2xhc3NfaGVhZGVyc1tpXS5hZGRyZXNzIC0gOA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBnZy5zZXRSYW5nZXMoZ2cuUkVHSU9OX0FOT05ZTU9VUykNCiAgICAgICAgICAgIGdnLmxvYWRSZXN1bHRzKGNsYXNzX2hlYWRlcnMpDQogICAgICAgICAgICBnZy5zZWFyY2hQb2ludGVyKDApDQogICAgICAgICAgICBpbnN0YW5jZV9oZWFkZXJzID0gZ2cuZ2V0UmVzdWx0cyhnZy5nZXRSZXN1bHRzQ291bnQoKSkNCiAgICAgICAgICAgIGlmIGdnLmdldFJlc3VsdHNDb3VudCgpID09IDAgdGhlbg0KICAgICAgICAgICAgICAgIG5vbmVfZm91bmQgPSB0cnVlDQogICAgICAgICAgICAgICAgZ290byBub25lDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGNsYXNzX2hlYWRlciA9IGluc3RhbmNlX2hlYWRlcnNbMV0udmFsdWUNCiAgICAgICAgICAgIGZpcnN0X2ZpZWxkX2FkZHJlc3MgPSB7fQ0KICAgICAgICAgICAgZmlyc3RfZmllbGRfYWRkcmVzc1sxXSA9IHt9DQogICAgICAgICAgICBpZiBpbDJjcHBGaWVsZHMuYXJjaC54NjQgdGhlbg0KICAgICAgICAgICAgICAgIGZpcnN0X2ZpZWxkX2FkZHJlc3NbMV0uYWRkcmVzcyA9IGNsYXNzX2hlYWRlciArIDB4ODANCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBmaXJzdF9maWVsZF9hZGRyZXNzWzFdLmFkZHJlc3MgPSBjbGFzc19oZWFkZXIgKyAweDQwDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGZpcnN0X2ZpZWxkX2FkZHJlc3NbMV0uZmxhZ3MgPSBmbGFnX3R5cGUNCiAgICAgICAgICAgIGZpcnN0X2ZpZWxkX2FkZHJlc3MgPSBnZy5nZXRWYWx1ZXMoZmlyc3RfZmllbGRfYWRkcmVzcykNCiAgICAgICAgICAgIGZpcnN0X2ZpZWxkX2FkZHJlc3MgPSBmaXJzdF9maWVsZF9hZGRyZXNzWzFdLnZhbHVlDQogICAgICAgICAgICBpZiBpbDJjcHBGaWVsZHMuYXJjaC54NjQgdGhlbg0KICAgICAgICAgICAgICAgIGdldF9udW1fZmllbGRzX3N0YXJ0ID0gZmlyc3RfZmllbGRfYWRkcmVzcyArIDI0DQogICAgICAgICAgICAgICAgZ2V0X251bV9maWVsZHNfb2Zmc2V0ID0gMzINCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBnZXRfbnVtX2ZpZWxkc19zdGFydCA9IGZpcnN0X2ZpZWxkX2FkZHJlc3MgKyAxMg0KICAgICAgICAgICAgICAgIGdldF9udW1fZmllbGRzX29mZnNldCA9IDIwDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIG51bV9vZmZzZXQgPSAwDQogICAgICAgICAgICBudW1fZmllbGRfZGF0YSA9IHt9DQogICAgICAgICAgICBmb3IgaSA9IDEsIDEwMDAgZG8NCiAgICAgICAgICAgICAgICBudW1fZmllbGRfZGF0YVtpXSA9IHt9DQogICAgICAgICAgICAgICAgbnVtX2ZpZWxkX2RhdGFbaV0uYWRkcmVzcyA9IGdldF9udW1fZmllbGRzX3N0YXJ0ICsgbnVtX29mZnNldA0KICAgICAgICAgICAgICAgIG51bV9maWVsZF9kYXRhW2ldLmZsYWdzID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICAgICAgICAgIG51bV9vZmZzZXQgPSBudW1fb2Zmc2V0ICsgZ2V0X251bV9maWVsZHNfb2Zmc2V0DQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIG51bV9maWVsZF9kYXRhID0gZ2cuZ2V0VmFsdWVzKG51bV9maWVsZF9kYXRhKQ0KICAgICAgICAgICAgZmllbGRfY291bnRlciA9IDANCiAgICAgICAgICAgIGxhc3RfZmllbGRfb2Zmc2V0ID0gMA0KICAgICAgICAgICAgYnJlYWtfY291bnQgPSAwDQogICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhudW1fZmllbGRfZGF0YSkgZG8NCiAgICAgICAgICAgICAgICBpZiB2LnZhbHVlID49IGxhc3RfZmllbGRfb2Zmc2V0IG9yIHYudmFsdWUgPT0gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIHYudmFsdWUgPj0gbGFzdF9maWVsZF9vZmZzZXQgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtfY291bnQgPSAwDQogICAgICAgICAgICAgICAgICAgICAgICBsYXN0X2ZpZWxkX29mZnNldCA9IHYudmFsdWUNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGZpZWxkX2NvdW50ZXIgPSBmaWVsZF9jb3VudGVyICsgMQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgYnJlYWtfY291bnQgPSBicmVha19jb3VudCArIDENCiAgICAgICAgICAgICAgICAgICAgaWYgYnJlYWtfY291bnQgPT0gMiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZmllbGRfZGF0YSA9ICIiDQogICAgICAgICAgICBmaWVsZF9uYW1lX3BvaW50ZXIgPSAiIg0KICAgICAgICAgICAgdHlwZV9wb2ludGVyID0gIiINCiAgICAgICAgICAgIGNsYXNzX3BvaW50ZXIgPSAiIg0KICAgICAgICAgICAgZmllbGRfb2Zmc2V0ID0gIiINCiAgICAgICAgICAgIGZpZWxkcyA9IHt9DQogICAgICAgICAgICBudW1iZXJfb2ZfZmllbGRzID0gZmllbGRfY291bnRlcg0KICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gZmlyc3RfZmllbGRfYWRkcmVzcw0KICAgICAgICAgICAgZm9yIGkgPSAxLCBudW1iZXJfb2ZfZmllbGRzIGRvDQogICAgICAgICAgICAgICAgaWYgaWwyY3BwRmllbGRzLmFyY2gueDY0IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZmllbGRfZGF0YSA9IHt9DQogICAgICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbMV0gPSB7fQ0KICAgICAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzFdLmFkZHJlc3MgPSBjdXJyZW50X2FkZHJlc3MNCiAgICAgICAgICAgICAgICAgICAgZmllbGRfZGF0YVsxXS5mbGFncyA9IGdnLlRZUEVfUVdPUkQNCiAgICAgICAgICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNA0KICAgICAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzJdID0ge30NCiAgICAgICAgICAgICAgICAgICAgZmllbGRfZGF0YVsyXS5hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzDQogICAgICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbMl0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcyArIDQNCiAgICAgICAgICAgICAgICAgICAgZmllbGRfZGF0YVszXSA9IHt9DQogICAgICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbM10uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcw0KICAgICAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzNdLmZsYWdzID0gZ2cuVFlQRV9RV09SRA0KICAgICAgICAgICAgICAgICAgICBjdXJyZW50X2FkZHJlc3MgPSBjdXJyZW50X2FkZHJlc3MgKyA0DQogICAgICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNF0gPSB7fQ0KICAgICAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzRdLmFkZHJlc3MgPSBjdXJyZW50X2FkZHJlc3MNCiAgICAgICAgICAgICAgICAgICAgZmllbGRfZGF0YVs0XS5mbGFncyA9IGdnLlRZUEVfRFdPUkQNCiAgICAgICAgICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNA0KICAgICAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzVdID0ge30NCiAgICAgICAgICAgICAgICAgICAgZmllbGRfZGF0YVs1XS5hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzDQogICAgICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNV0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcyArIDQNCiAgICAgICAgICAgICAgICAgICAgZmllbGRfZGF0YVs2XSA9IHt9DQogICAgICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNl0uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcw0KICAgICAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzZdLmZsYWdzID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICAgICAgICAgICAgICBjdXJyZW50X2FkZHJlc3MgPSBjdXJyZW50X2FkZHJlc3MgKyA0DQogICAgICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbN10gPSB7fQ0KICAgICAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzddLmFkZHJlc3MgPSBjdXJyZW50X2FkZHJlc3MNCiAgICAgICAgICAgICAgICAgICAgZmllbGRfZGF0YVs3XS5mbGFncyA9IGdnLlRZUEVfRFdPUkQNCiAgICAgICAgICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNA0KICAgICAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzhdID0ge30NCiAgICAgICAgICAgICAgICAgICAgZmllbGRfZGF0YVs4XS5hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzDQogICAgICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbOF0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcyArIDQNCiAgICAgICAgICAgICAgICAgICAgZmllbGRfZGF0YSA9IGdnLmdldFZhbHVlcyhmaWVsZF9kYXRhKQ0KICAgICAgICAgICAgICAgICAgICBmaWVsZF9uYW1lX3BvaW50ZXIgPSBmaWVsZF9kYXRhWzFdLnZhbHVlDQogICAgICAgICAgICAgICAgICAgIHR5cGVfcG9pbnRlciA9IGZpZWxkX2RhdGFbM10udmFsdWUNCiAgICAgICAgICAgICAgICAgICAgY2xhc3NfcG9pbnRlciA9IGZpZWxkX2RhdGFbNV0udmFsdWUNCiAgICAgICAgICAgICAgICAgICAgZmllbGRfb2Zmc2V0ID0gZmllbGRfZGF0YVs3XS52YWx1ZQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgZmllbGRfZGF0YSA9IHt9DQogICAgICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbMV0gPSB7fQ0KICAgICAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzFdLmFkZHJlc3MgPSBjdXJyZW50X2FkZHJlc3MNCiAgICAgICAgICAgICAgICAgICAgZmllbGRfZGF0YVsxXS5mbGFncyA9IGdnLlRZUEVfRFdPUkQNCiAgICAgICAgICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNA0KICAgICAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzJdID0ge30NCiAgICAgICAgICAgICAgICAgICAgZmllbGRfZGF0YVsyXS5hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzDQogICAgICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbMl0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcyArIDQNCiAgICAgICAgICAgICAgICAgICAgZmllbGRfZGF0YVszXSA9IHt9DQogICAgICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbM10uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcw0KICAgICAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzNdLmZsYWdzID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICAgICAgICAgICAgICBjdXJyZW50X2FkZHJlc3MgPSBjdXJyZW50X2FkZHJlc3MgKyA0DQogICAgICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNF0gPSB7fQ0KICAgICAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzRdLmFkZHJlc3MgPSBjdXJyZW50X2FkZHJlc3MNCiAgICAgICAgICAgICAgICAgICAgZmllbGRfZGF0YVs0XS5mbGFncyA9IGdnLlRZUEVfRFdPUkQNCiAgICAgICAgICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNA0KICAgICAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzVdID0ge30NCiAgICAgICAgICAgICAgICAgICAgZmllbGRfZGF0YVs1XS5hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzDQogICAgICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNV0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcyArIDQNCiAgICAgICAgICAgICAgICAgICAgZmllbGRfZGF0YSA9IGdnLmdldFZhbHVlcyhmaWVsZF9kYXRhKQ0KICAgICAgICAgICAgICAgICAgICBmaWVsZF9uYW1lX3BvaW50ZXIgPSBmaWVsZF9kYXRhWzFdLnZhbHVlDQogICAgICAgICAgICAgICAgICAgIHR5cGVfcG9pbnRlciA9IGZpZWxkX2RhdGFbMl0udmFsdWUNCiAgICAgICAgICAgICAgICAgICAgY2xhc3NfcG9pbnRlciA9IGZpZWxkX2RhdGFbM10udmFsdWUNCiAgICAgICAgICAgICAgICAgICAgZmllbGRfb2Zmc2V0ID0gZmllbGRfZGF0YVs0XS52YWx1ZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGdldF9maWVsZF9uYW1lID0ge30NCiAgICAgICAgICAgICAgICBvZmZzZXQgPSAwDQogICAgICAgICAgICAgICAgY291bnQgPSAxDQogICAgICAgICAgICAgICAgcmVwZWF0DQogICAgICAgICAgICAgICAgICAgIGdldF9maWVsZF9uYW1lW2NvdW50XSA9IHt9DQogICAgICAgICAgICAgICAgICAgIGdldF9maWVsZF9uYW1lW2NvdW50XS5hZGRyZXNzID0gZmllbGRfbmFtZV9wb2ludGVyICsgb2Zmc2V0DQogICAgICAgICAgICAgICAgICAgIGdldF9maWVsZF9uYW1lW2NvdW50XS5mbGFncyA9IGdnLlRZUEVfQllURQ0KICAgICAgICAgICAgICAgICAgICBjb3VudCA9IGNvdW50ICsgMQ0KICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSBvZmZzZXQgKyAxDQogICAgICAgICAgICAgICAgdW50aWwgKGNvdW50ID09IDEwMCkNCiAgICAgICAgICAgICAgICBnZXRfZmllbGRfbmFtZSA9IGdnLmdldFZhbHVlcyhnZXRfZmllbGRfbmFtZSkNCiAgICAgICAgICAgICAgICBmaWVsZF9uYW1lID0gIiINCiAgICAgICAgICAgICAgICBmb3IgaW5kZXgsIHZhbHVlIGluIHBhaXJzKGdldF9maWVsZF9uYW1lKSBkbw0KICAgICAgICAgICAgICAgICAgICBpZiB2YWx1ZS52YWx1ZSA+PSAwIGFuZCB2YWx1ZS52YWx1ZSA8PSAyNTUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfbmFtZSA9IGZpZWxkX25hbWUgLi4gc3RyaW5nLmNoYXIodmFsdWUudmFsdWUpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiB2YWx1ZS52YWx1ZSA9PSAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGdldF90eXBlID0ge30NCiAgICAgICAgICAgICAgICBnZXRfdHlwZVsxXSA9IHt9DQogICAgICAgICAgICAgICAgZ2V0X3R5cGVbMV0uYWRkcmVzcyA9IHR5cGVfcG9pbnRlcg0KICAgICAgICAgICAgICAgIGdldF90eXBlWzFdLmZsYWdzID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICAgICAgICAgIGZpZWxkX3R5cGUgPSBnZy5nZXRWYWx1ZXMoZ2V0X3R5cGUpDQogICAgICAgICAgICAgICAgZmllbGRfdHlwZSA9IGZpZWxkX3R5cGVbMV0udmFsdWUNCiAgICAgICAgICAgICAgICBpZiAjdG9zdHJpbmcoZmllbGRfdHlwZSkgPiA4IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZ2V0X3R5cGUgPSB7fQ0KICAgICAgICAgICAgICAgICAgICBnZXRfdHlwZVsxXSA9IHt9DQogICAgICAgICAgICAgICAgICAgIGdldF90eXBlWzFdLmFkZHJlc3MgPSB0eXBlX3BvaW50ZXIgKyA0DQogICAgICAgICAgICAgICAgICAgIGdldF90eXBlWzFdLmZsYWdzID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICAgICAgICAgICAgICBmaWVsZF90eXBlID0gZ2cuZ2V0VmFsdWVzKGdldF90eXBlKQ0KICAgICAgICAgICAgICAgICAgICBmaWVsZF90eXBlID0gZmllbGRfdHlwZVsxXS52YWx1ZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIGlsMmNwcEZpZWxkcy5tZXRob2RfdHlwZXNbdG9zdHJpbmcoZmllbGRfdHlwZSldID09ICJmbG9hdCIgdGhlbg0KICAgICAgICAgICAgICAgICAgICB2YWx1ZV90eXBlID0gZ2cuVFlQRV9GTE9BVA0KICAgICAgICAgICAgICAgIGVsc2VpZiBpbDJjcHBGaWVsZHMubWV0aG9kX3R5cGVzW3Rvc3RyaW5nKGZpZWxkX3R5cGUpXSA9PSAiZG91YmxlIiB0aGVuDQogICAgICAgICAgICAgICAgICAgIHZhbHVlX3R5cGUgPSBnZy5UWVBFX0RPVUJMRQ0KICAgICAgICAgICAgICAgIGVsc2VpZiAoZmllbGRfb2Zmc2V0ICUgMiB+PSAwKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHZhbHVlX3R5cGUgPSBnZy5UWVBFX0JZVEUNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIHZhbHVlX3R5cGUgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgdmFsdWVfdHlwZSBhbmQgZmllbGRfb2Zmc2V0IGFuZCBzdHJpbmcuZmluZChmaWVsZF9uYW1lLCAiW0EtWmEtel0iKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHR5cGVfbWVudSA9ICI/IiAuLiBmaWVsZF90eXBlIC4uICI/Ig0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBhc2tfdHlwZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIGlmIGlsMmNwcEZpZWxkcy5tZXRob2RfdHlwZXNbdG9zdHJpbmcoZmllbGRfdHlwZSldIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVfbWVudSA9IGlsMmNwcEZpZWxkcy5tZXRob2RfdHlwZXNbdG9zdHJpbmcoZmllbGRfdHlwZSldDQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIGFza190eXBlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZmllbGRzWyNmaWVsZHMgKyAxXSA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX25hbWUgPSBmaWVsZF9uYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfb2Zmc2V0ID0gaWwyY3BwRmllbGRzLmZfaGV4KGZpZWxkX29mZnNldCksDQogICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF90eXBlID0gdmFsdWVfdHlwZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVfbWVudSA9IHR5cGVfbWVudSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGFza190eXBlID0gYXNrX3R5cGUNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBnZy5sb2FkUmVzdWx0cyhpbnN0YW5jZV9oZWFkZXJzKQ0KICAgICAgICAgICAgZ2cuc2VhcmNoUG9pbnRlcigwKQ0KICAgICAgICAgICAgcG9pbnRlcnNfdG9faW5zdGFuY2VzID0gZ2cuZ2V0UmVzdWx0cyhnZy5nZXRSZXN1bHRzQ291bnQoKSkNCiAgICAgICAgICAgIHNvcnRlZF9pbnN0YW5jZV9oZWFkZXJzID0ge30NCiAgICAgICAgICAgIGFkZGVkX2hlYWRlcnMgPSB7fQ0KICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMocG9pbnRlcnNfdG9faW5zdGFuY2VzKSBkbw0KICAgICAgICAgICAgICAgIGlmIG5vdCBhZGRlZF9oZWFkZXJzW3YudmFsdWVdIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgYWRkZWRfaGVhZGVyc1t2LnZhbHVlXSA9IHYudmFsdWUNCiAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHNvcnRlZF9pbnN0YW5jZV9oZWFkZXJzLCB2KQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBnZy5sb2FkUmVzdWx0cyhzb3J0ZWRfaW5zdGFuY2VfaGVhZGVycykNCiAgICAgICAgICAgIHNvcnRlZF9pbnN0YW5jZV9oZWFkZXJzID0gZ2cuZ2V0UmVzdWx0cyhnZy5nZXRSZXN1bHRzQ291bnQoKSkNCiAgICAgICAgICAgIHNlbGVjdF9maWVsZF9pdGVtcyA9IHt9DQogICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhmaWVsZHMpIGRvDQogICAgICAgICAgICAgICAgc2VsZWN0X2ZpZWxkX2l0ZW1zW2ldID0gIvCflJggIiAuLiB2LnR5cGVfbWVudSAuLiAiICIgLi4gdi5maWVsZF9uYW1lIC4uICIgIiAuLiB2LmZpZWxkX29mZnNldA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICA6OmRvX21vcmU6Og0KICAgICAgICAgICAgZ2cubG9hZFJlc3VsdHMoc29ydGVkX2luc3RhbmNlX2hlYWRlcnMpDQogICAgICAgICAgICBzZWxlY3RfZmllbGRfbWVudSA9IGdnLmNob2ljZShzZWxlY3RfZmllbGRfaXRlbXMsIG5pbCwgc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPICIgLi4gI3NvcnRlZF9pbnN0YW5jZV9oZWFkZXJzIC4uICIgSW5zdGFuY2VzIEZvdW5kIOKEue+4j1xuQ2xhc3MgTmFtZTogIiAuLiBjbGFzc19zdHJpbmdfc2VhcmNoWzFdKQ0KICAgICAgICAgICAgaWYgc2VsZWN0X2ZpZWxkX21lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICB3b3JraW5nX29mZnNldCA9IGZpZWxkc1tzZWxlY3RfZmllbGRfbWVudV0uZmllbGRfb2Zmc2V0DQogICAgICAgICAgICAgICAgd29ya2luZ19maWVsZF9uYW1lID0gZmllbGRzW3NlbGVjdF9maWVsZF9tZW51XS5maWVsZF9uYW1lDQogICAgICAgICAgICAgICAgbG9hZF9maWVsZF92YWx1ZXMgPSB7fQ0KICAgICAgICAgICAgICAgIGlmIGZpZWxkc1tzZWxlY3RfZmllbGRfbWVudV0uYXNrX3R5cGUgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGdnX3R5cGVzID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgWzFdID0gNCwNCiAgICAgICAgICAgICAgICAgICAgICAgIFsyXSA9IDE2LA0KICAgICAgICAgICAgICAgICAgICAgICAgWzNdID0gNjQsDQogICAgICAgICAgICAgICAgICAgICAgICBbNF0gPSAyLA0KICAgICAgICAgICAgICAgICAgICAgICAgWzVdID0gMSwNCiAgICAgICAgICAgICAgICAgICAgICAgIFs2XSA9IDMyLA0KICAgICAgICAgICAgICAgICAgICAgICAgWzddID0gOA0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHR5cGVfbWVudV9pdGVtcyA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFsxXSA9ICJUWVBFX0RXT1JEIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIFsyXSA9ICJUWVBFX0ZMT0FUIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIFszXSA9ICJUWVBFX0RPVUJMRSIsDQogICAgICAgICAgICAgICAgICAgICAgICBbNF0gPSAiVFlQRV9XT1JEIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIFs1XSA9ICJUWVBFX0JZVEUiLA0KICAgICAgICAgICAgICAgICAgICAgICAgWzZdID0gIlRZUEVfUVdPUkQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgWzddID0gIlRZUEVfWE9SIg0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHR5cGVfbWVudSA9IGdnLmNob2ljZSh0eXBlX21lbnVfaXRlbXMpDQogICAgICAgICAgICAgICAgICAgIGlmIHR5cGVfbWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVfdHlwZSA9IGdnX3R5cGVzW3R5cGVfbWVudV0NCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoc29ydGVkX2luc3RhbmNlX2hlYWRlcnMpIGRvDQogICAgICAgICAgICAgICAgICAgIGxvYWRfZmllbGRfdmFsdWVzW2ldID0gdg0KICAgICAgICAgICAgICAgICAgICBsb2FkX2ZpZWxkX3ZhbHVlc1tpXS5hZGRyZXNzID0gdi52YWx1ZSArIGZpZWxkc1tzZWxlY3RfZmllbGRfbWVudV0uZmllbGRfb2Zmc2V0DQogICAgICAgICAgICAgICAgICAgIGxvYWRfZmllbGRfdmFsdWVzW2ldLmZsYWdzID0gZmllbGRzW3NlbGVjdF9maWVsZF9tZW51XS5maWVsZF90eXBlDQogICAgICAgICAgICAgICAgICAgIGxvYWRfZmllbGRfdmFsdWVzW2ldLm5hbWUgPSAiSW5zdGFuY2UgIiAuLiBpIC4uICI6ICIgLi4gc2VsZWN0X2ZpZWxkX2l0ZW1zW3NlbGVjdF9maWVsZF9tZW51XQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGdnLmFkZExpc3RJdGVtcyhsb2FkX2ZpZWxkX3ZhbHVlcykNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgOjpub25lOjoNCiAgICAgICAgaWYgbm9uZV9mb3VuZCA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgIGdnLmFsZXJ0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBObyBDbGFzcyBJbnN0YW5jZXMgRm91bmQg4oS577iPIikNCiAgICAgICAgICAgIHNlbGVjdF9maWVsZF9tZW51ID0gbmlsDQogICAgICAgICAgICBsb2FkX2ZpZWxkX3ZhbHVlcyA9IHt9DQogICAgICAgICAgICBub25lX2ZvdW5kID0gZmFsc2UNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgaWYgc2VsZWN0X2ZpZWxkX21lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICBzZWxlY3RfZmllbGRfbWVudSA9IG5pbA0KICAgICAgICAgICAgICAgIGdnLnNldFZpc2libGUodHJ1ZSkNCiAgICAgICAgICAgICAgICBnZy5hbGVydChzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gIiAuLiAjbG9hZF9maWVsZF92YWx1ZXMgLi4gIiBJbnN0YW5jZXMgQWRkZWQgVG8gU2F2ZSBMaXN0IOKEue+4jyIpDQogICAgICAgICAgICAgICAgbG9hZF9maWVsZF92YWx1ZXMgPSB7fQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRmllbGRzLmVkaXRGaWVsZHMoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgZWRpdEZpZWxkcyA9IGZ1bmN0aW9uKCkNCiAgICAgICAgd2hpbGUgKG5pbCkgZG8NCiAgICAgICAgICAgIGxvY2FsIGVkaXRGaWVsZHNWYWwgPSB7fQ0KICAgICAgICAgICAgaWYgKGVkaXRGaWVsZHNWYWwuZWRpdEZpZWxkc1ZhbCkgdGhlbg0KICAgICAgICAgICAgICAgIGVkaXRGaWVsZHNWYWwuZWRpdEZpZWxkc1ZhbCA9IChlZGl0RmllbGRzVmFsLmVkaXRGaWVsZHNWYWwoZWRpdEZpZWxkc1ZhbCkpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQoNCiAgICAgICAgbG9jYWwgbWVudV9pdGVtcyA9IHt9DQogICAgICAgIGxvY2FsIG1lbnVfbmFtZXMgPSB7fQ0KICAgICAgICBsb2NhbCBtZW51X3ZhbHVlcyA9IHt9DQogICAgICAgIGxvY2FsIG1lbnVfdHlwZXMgPSB7fQ0KICAgICAgICBsb2NhbCBzYXZlX2xpc3Rfc2VsZWN0ZWQgPSBnZy5nZXRTZWxlY3RlZExpc3RJdGVtcygpDQogICAgICAgIGxvY2FsIHNhdmVfZWRpdF92YWx1ZXMgPSB7DQogICAgICAgICAgICBjbGFzc19uYW1lID0gd29ya2luZ19jbGFzcywNCiAgICAgICAgICAgIGZpZWxkX25hbWUgPSB3b3JraW5nX2ZpZWxkX25hbWUsDQogICAgICAgICAgICB2YWx1ZV90eXBlID0gc2F2ZV9saXN0X3NlbGVjdGVkWzFdLmZsYWdzDQogICAgICAgIH0NCiAgICAgICAgbWVudV9pdGVtc1sjbWVudV9pdGVtcyArIDFdID0gc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIENyZWF0ZSBFZGl0IOKEuVxuIiAuLiBpbDJjcHBGaWVsZHMuZ2dfZmxhZ3Nbc2F2ZV9saXN0X3NlbGVjdGVkWzFdLmZsYWdzXSAuLiAiICIgLi4gc2F2ZV9saXN0X3NlbGVjdGVkWzFdLm5hbWUNCiAgICAgICAgbWVudV92YWx1ZXNbI21lbnVfdmFsdWVzICsgMV0gPSBzYXZlX2xpc3Rfc2VsZWN0ZWRbMV0udmFsdWUNCiAgICAgICAgbWVudV90eXBlc1sjbWVudV90eXBlcyArIDFdID0gIm51bWJlciINCiAgICAgICAgbWVudV9uYW1lc1sjbWVudV9uYW1lcyArIDFdID0gc2F2ZV9saXN0X3NlbGVjdGVkWzFdLm5hbWUNCiAgICAgICAgbWVudV9pdGVtc1sjbWVudV9pdGVtcyArIDFdID0gIkZyZWV6ZSINCiAgICAgICAgbWVudV9pdGVtc1sjbWVudV9pdGVtcyArIDFdID0gIkVkaXQgQWxsIEluc3RhbmNlcyAoT25seSBzZWxlY3Qgb25lKSINCiAgICAgICAgbWVudV9pdGVtc1sjbWVudV9pdGVtcyArIDFdID0gIkVkaXQgQWxsIEluc3RhbmNlcyBBZGRyZXNzICsgNCBYNCAoT25seSBzZWxlY3Qgb25lKSINCiAgICAgICAgbWVudV9pdGVtc1sjbWVudV9pdGVtcyArIDFdID0gIkVkaXQgQWxsIEluc3RhbmNlcyBXaXRoIFNhbWUgSW5pdGlhbCBWYWx1ZSAoT25seSBzZWxlY3Qgb25lKSINCiAgICAgICAgbWVudV9pdGVtc1sjbWVudV9pdGVtcyArIDFdID0gIkVkaXQgQWxsIEluc3RhbmNlcyBUaGF0IEhhdmUgVmFsdWUgQmVsb3cgKE9ubHkgc2VsZWN0IG9uZSkiDQogICAgICAgIG1lbnVfaXRlbXNbI21lbnVfaXRlbXMgKyAxXSA9ICJFZGl0IEluc3RhbmNlcyBUaGF0IEhhdmUgVGhpcyBWYWx1ZSINCiAgICAgICAgbWVudV92YWx1ZXNbI21lbnVfdmFsdWVzICsgMV0gPSBmYWxzZQ0KICAgICAgICBtZW51X3R5cGVzWyNtZW51X3R5cGVzICsgMV0gPSAiY2hlY2tib3giDQogICAgICAgIG1lbnVfdmFsdWVzWyNtZW51X3ZhbHVlcyArIDFdID0gZmFsc2UNCiAgICAgICAgbWVudV90eXBlc1sjbWVudV90eXBlcyArIDFdID0gImNoZWNrYm94Ig0KICAgICAgICBtZW51X3ZhbHVlc1sjbWVudV92YWx1ZXMgKyAxXSA9IGZhbHNlDQogICAgICAgIG1lbnVfdHlwZXNbI21lbnVfdHlwZXMgKyAxXSA9ICJjaGVja2JveCINCiAgICAgICAgbWVudV92YWx1ZXNbI21lbnVfdmFsdWVzICsgMV0gPSBmYWxzZQ0KICAgICAgICBtZW51X3R5cGVzWyNtZW51X3R5cGVzICsgMV0gPSAiY2hlY2tib3giDQogICAgICAgIG1lbnVfdmFsdWVzWyNtZW51X3ZhbHVlcyArIDFdID0gZmFsc2UNCiAgICAgICAgbWVudV90eXBlc1sjbWVudV90eXBlcyArIDFdID0gImNoZWNrYm94Ig0KICAgICAgICBtZW51X3ZhbHVlc1sjbWVudV92YWx1ZXMgKyAxXSA9ICIiDQogICAgICAgIG1lbnVfdHlwZXNbI21lbnVfdHlwZXMgKyAxXSA9ICJudW1iZXIiDQogICAgICAgIGxvY2FsIG1lbnUgPSBnZy5wcm9tcHQobWVudV9pdGVtcywgbWVudV92YWx1ZXMsIG1lbnVfdHlwZXMpDQogICAgICAgIGlmIG1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgIGlmIG1lbnVbI21lbnUgLSA1XSA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgICBzYXZlX2VkaXRfdmFsdWVzLmZyZWV6ZSA9IHRydWUNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBzYXZlX2VkaXRfdmFsdWVzLmZyZWV6ZSA9IGZhbHNlDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGlmIG1lbnVbI21lbnUgLSAzXSA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgICBsb2NhbCBzYXZlX2xpc3RfYWxsID0gZ2cuZ2V0TGlzdEl0ZW1zKCkNCiAgICAgICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhzYXZlX2xpc3RfYWxsKSBkbw0KICAgICAgICAgICAgICAgICAgICBzYXZlX2xpc3RfYWxsW2ldLmFkZHJlc3MgPSBzYXZlX2xpc3RfYWxsW2ldLmFkZHJlc3MgKyA0DQogICAgICAgICAgICAgICAgICAgIHNhdmVfbGlzdF9hbGxbaV0udmFsdWUgPSBtZW51WzFdIC4uICJYNCINCiAgICAgICAgICAgICAgICAgICAgc2F2ZV9saXN0X2FsbFtpXS5mcmVlemUgPSBzYXZlX2VkaXRfdmFsdWVzLmZyZWV6ZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGdnLmFkZExpc3RJdGVtcyhzYXZlX2xpc3RfYWxsKQ0KICAgICAgICAgICAgICAgIHNhdmVfZWRpdF92YWx1ZXMuZWRpdF90eXBlID0gImVkaXRfYWxsX3g0Ig0KICAgICAgICAgICAgICAgIHNhdmVfZWRpdF92YWx1ZXMuZWRpdF92YWx1ZSA9IG1lbnVbMV0NCiAgICAgICAgICAgIGVsc2VpZiBtZW51WyNtZW51IC0gNF0gPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgbG9jYWwgc2F2ZV9saXN0X2FsbCA9IGdnLmdldExpc3RJdGVtcygpDQogICAgICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoc2F2ZV9saXN0X2FsbCkgZG8NCiAgICAgICAgICAgICAgICAgICAgc2F2ZV9saXN0X2FsbFtpXS52YWx1ZSA9IG1lbnVbMV0NCiAgICAgICAgICAgICAgICAgICAgc2F2ZV9saXN0X2FsbFtpXS5mcmVlemUgPSBzYXZlX2VkaXRfdmFsdWVzLmZyZWV6ZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGdnLmFkZExpc3RJdGVtcyhzYXZlX2xpc3RfYWxsKQ0KICAgICAgICAgICAgICAgIHNhdmVfZWRpdF92YWx1ZXMuZWRpdF90eXBlID0gImVkaXRfYWxsIg0KICAgICAgICAgICAgICAgIHNhdmVfZWRpdF92YWx1ZXMuZWRpdF92YWx1ZSA9IG1lbnVbMV0NCiAgICAgICAgICAgIGVsc2VpZiBtZW51WyNtZW51IC0gMl0gPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgbG9jYWwgc2F2ZV9saXN0X2FsbCA9IGdnLmdldExpc3RJdGVtcygpDQogICAgICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoc2F2ZV9saXN0X2FsbCkgZG8NCiAgICAgICAgICAgICAgICAgICAgaWYgc2F2ZV9saXN0X2FsbFtpXS52YWx1ZSA9PSBzYXZlX2xpc3Rfc2VsZWN0ZWRbMV0udmFsdWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZV9saXN0X2FsbFtpXS52YWx1ZSA9IG1lbnVbMV0NCiAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVfbGlzdF9hbGxbaV0uZnJlZXplID0gc2F2ZV9lZGl0X3ZhbHVlcy5mcmVlemUNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZ2cuYWRkTGlzdEl0ZW1zKHNhdmVfbGlzdF9hbGwpDQogICAgICAgICAgICAgICAgc2F2ZV9lZGl0X3ZhbHVlcy5lZGl0X3R5cGUgPSAiZWRpdF9hbGxfdGhhdF9lcXVhbCINCiAgICAgICAgICAgICAgICBzYXZlX2VkaXRfdmFsdWVzLmVkaXRfdmFsdWUgPSBtZW51WzFdDQogICAgICAgICAgICAgICAgc2F2ZV9lZGl0X3ZhbHVlcy5tdXN0X2VxdWFsID0gc2F2ZV9saXN0X3NlbGVjdGVkWzFdLnZhbHVlDQogICAgICAgICAgICBlbHNlaWYgbWVudVsjbWVudSAtIDFdID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgIGxvY2FsIHNhdmVfbGlzdF9hbGwgPSBnZy5nZXRMaXN0SXRlbXMoKQ0KICAgICAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHNhdmVfbGlzdF9hbGwpIGRvDQogICAgICAgICAgICAgICAgICAgIGlmIHNhdmVfbGlzdF9hbGxbaV0udmFsdWUgPT0gbWVudVsjbWVudV0gdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZV9saXN0X2FsbFtpXS52YWx1ZSA9IG1lbnVbMV0NCiAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVfbGlzdF9hbGxbaV0uZnJlZXplID0gc2F2ZV9lZGl0X3ZhbHVlcy5mcmVlemUNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZ2cuYWRkTGlzdEl0ZW1zKHNhdmVfbGlzdF9hbGwpDQogICAgICAgICAgICAgICAgc2F2ZV9lZGl0X3ZhbHVlcy5lZGl0X3R5cGUgPSAiZWRpdF9hbGxfdGhhdF9lcXVhbCINCiAgICAgICAgICAgICAgICBzYXZlX2VkaXRfdmFsdWVzLmVkaXRfdmFsdWUgPSBtZW51WzFdDQogICAgICAgICAgICAgICAgc2F2ZV9lZGl0X3ZhbHVlcy5tdXN0X2VxdWFsID0gbWVudVsjbWVudV0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhzYXZlX2xpc3Rfc2VsZWN0ZWQpIGRvDQogICAgICAgICAgICAgICAgICAgIHNhdmVfbGlzdF9zZWxlY3RlZFtpXS52YWx1ZSA9IG1lbnVbMV0NCiAgICAgICAgICAgICAgICAgICAgc2F2ZV9saXN0X2FsbFtpXS5mcmVlemUgPSBzYXZlX2VkaXRfdmFsdWVzLmZyZWV6ZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGdnLmFkZExpc3RJdGVtcyhzYXZlX2xpc3Rfc2VsZWN0ZWQpDQogICAgICAgICAgICAgICAgbG9jYWwgc2F2ZV9lZGl0X2luZGV4ZXMgPSB7fQ0KICAgICAgICAgICAgICAgIGxvY2FsIHNhdmVfbGlzdF9hbGwgPSBnZy5nZXRMaXN0SXRlbXMoKQ0KICAgICAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHNhdmVfbGlzdF9zZWxlY3RlZCkgZG8NCiAgICAgICAgICAgICAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBwYWlycyhzYXZlX2xpc3RfYWxsKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5hZGRyZXNzID09IHZhbHVlLmFkZHJlc3MgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChzYXZlX2VkaXRfaW5kZXhlcywgaW5kZXgpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgc2F2ZV9lZGl0X3ZhbHVlcy5lZGl0X3R5cGUgPSAiZWRpdF9pbmRleGVzIg0KICAgICAgICAgICAgICAgIHNhdmVfZWRpdF92YWx1ZXMuZWRpdF92YWx1ZSA9IG1lbnVbMV0NCiAgICAgICAgICAgICAgICBzYXZlX2VkaXRfdmFsdWVzLmVkaXRfaW5kZXhlcyA9IHNhdmVfZWRpdF9pbmRleGVzDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIDo6ZW50ZXJfbmFtZTo6DQogICAgICAgICAgICBsb2NhbCBuYW1lX2VkaXQgPSBnZy5wcm9tcHQoe3NjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBFbnRlciBOYW1lIEZvciBFZGl0IOKEuSJ9LCB7c2F2ZV9lZGl0X3ZhbHVlcy5maWVsZF9uYW1lfSwgeyJ0ZXh0In0pDQogICAgICAgICAgICBpZiBuYW1lX2VkaXQgPT0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICBnb3RvIGVudGVyX25hbWUNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgc2F2ZV9lZGl0X3ZhbHVlcy5lZGl0X25hbWUgPSBuYW1lX2VkaXRbMV0NCiAgICAgICAgICAgIGlsMmNwcEZpZWxkcy5zYXZlZEVkaXRzVGFibGVbI2lsMmNwcEZpZWxkcy5zYXZlZEVkaXRzVGFibGUgKyAxXSA9IHNhdmVfZWRpdF92YWx1ZXMNCiAgICAgICAgICAgIG1ha2luZ19lZGl0ID0gdHJ1ZQ0KICAgICAgICAgICAgZ2cuYWxlcnQoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIFZhbHVlIGhhcyBiZWVuIHNldC4g4oS577iPIFxuVGVzdCB0byB2ZXJpZnkgaXQgaXMgd29ya2luZyBhbmQgdGhlbiBwcmVzcyB0aGUgZmxvYXRpbmcgR0cgYnV0dG9uIHRvIGVpdGhlciBTYXZlIG9yIERpc2NhcmQgZWRpdC4iKQ0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWlsMmNwcEZpZWxkcy5kb1NhdmVkRWRpdChzYXZlZF9lZGl0X3RhYmxlKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgZG9TYXZlZEVkaXQgPSBmdW5jdGlvbihzYXZlZF9lZGl0X3RhYmxlKQ0KICAgICAgICB3aGlsZSAobmlsKSBkbw0KICAgICAgICAgICAgbG9jYWwgZG9TYXZlZEVkaXRWYWwgPSB7fQ0KICAgICAgICAgICAgaWYgKGRvU2F2ZWRFZGl0VmFsLmRvU2F2ZWRFZGl0VmFsKSB0aGVuDQogICAgICAgICAgICAgICAgZG9TYXZlZEVkaXRWYWwuZG9TYXZlZEVkaXRWYWwgPSAoZG9TYXZlZEVkaXRWYWwuZG9TYXZlZEVkaXRWYWwoZG9TYXZlZEVkaXRWYWwpKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBsb2NhbCBzdHJpbmdfYWRkcmVzcyA9IHt9DQogICAgICAgIGxvY2FsIGNsYXNzX2hlYWRlcnMgPSB7fQ0KICAgICAgICBsb2NhbCBnZXRfbnVtYmVyX29mX2ZpZWxkcyA9IHt9DQogICAgICAgIGxvY2FsIGZpcnN0X2ZpZWxkX2FkZHJlc3MgPSB7fQ0KICAgICAgICBsb2NhbCBmaWVsZF9kYXRhID0gIiINCiAgICAgICAgbG9jYWwgZmllbGRfbmFtZV9wb2ludGVyID0gIiINCiAgICAgICAgbG9jYWwgdHlwZV9wb2ludGVyID0gIiINCiAgICAgICAgbG9jYWwgY2xhc3NfcG9pbnRlciA9ICIiDQogICAgICAgIGxvY2FsIGZpZWxkX29mZnNldCA9ICIiDQogICAgICAgIGxvY2FsIGN1cnJlbnRfYWRkcmVzcyA9ICIiDQogICAgICAgIGxvY2FsIGdldF9maWVsZF9uYW1lID0ge30NCiAgICAgICAgbG9jYWwgb2Zmc2V0ID0gMA0KICAgICAgICBsb2NhbCBjb3VudCA9IDENCiAgICAgICAgbG9jYWwgZmllbGRfZGF0YSA9IHt9DQogICAgICAgIGxvY2FsIGZpZWxkX25hbWUgPSAiIg0KICAgICAgICBsb2NhbCBnZXRfdHlwZSA9IHt9DQogICAgICAgIGxvY2FsIGZpZWxkX3R5cGUgPSB7fQ0KICAgICAgICBsb2NhbCBwb2ludGVyc190b19pbnN0YW5jZXMgPSB7fQ0KICAgICAgICBpZiBub3QgY2xhc3MgdGhlbg0KICAgICAgICAgICAgY2xhc3MgPSAiIg0KICAgICAgICBlbmQNCiAgICAgICAgZ2cuY2xlYXJMaXN0KCkNCiAgICAgICAgd29ya2luZ19jbGFzcyA9IHNhdmVkX2VkaXRfdGFibGUuY2xhc3NfbmFtZQ0KICAgICAgICBnZy5zZXRSYW5nZXMoZ2cuUkVHSU9OX09USEVSKQ0KICAgICAgICBnZy5jbGVhclJlc3VsdHMoKQ0KICAgICAgICBnZy5zZWFyY2hOdW1iZXIoaWwyY3BwRmllbGRzLmNyZWF0ZVNlYXJjaChzYXZlZF9lZGl0X3RhYmxlLmNsYXNzX25hbWUpLCBnZy5UWVBFX0JZVEUsIGZhbHNlLCBnZy5TSUdOX0VRVUFMLCByYW5nZV9zdGFydCwgcmFuZ2VfZW5kKQ0KICAgICAgICBzdHJpbmdfYWRkcmVzcyA9IGdnLmdldFJlc3VsdHMoMSwgMSkNCiAgICAgICAgaWYgZ2cuZ2V0UmVzdWx0c0NvdW50KCkgPT0gMCB0aGVuDQogICAgICAgICAgICBub25lX2ZvdW5kID0gdHJ1ZQ0KICAgICAgICAgICAgZ290byBub25lDQogICAgICAgIGVuZA0KICAgICAgICBzdHJpbmdfYWRkcmVzcyA9IHN0cmluZ19hZGRyZXNzWzFdLmFkZHJlc3MNCiAgICAgICAgZ2cuY2xlYXJSZXN1bHRzKCkNCiAgICAgICAgZ2cuc2V0UmFuZ2VzKGdnLlJFR0lPTl9DX0FMTE9DKQ0KICAgICAgICBnZy5zZWFyY2hOdW1iZXIoc3RyaW5nX2FkZHJlc3MsIGZsYWdfdHlwZSkNCiAgICAgICAgY2xhc3NfaGVhZGVycyA9IGdnLmdldFJlc3VsdHMoZ2cuZ2V0UmVzdWx0c0NvdW50KCkpDQogICAgICAgIGlmIGdnLmdldFJlc3VsdHNDb3VudCgpID09IDAgdGhlbg0KICAgICAgICAgICAgbm9uZV9mb3VuZCA9IHRydWUNCiAgICAgICAgICAgIGdvdG8gbm9uZQ0KICAgICAgICBlbmQNCiAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoY2xhc3NfaGVhZGVycykgZG8NCiAgICAgICAgICAgIGlmIGlsMmNwcEZpZWxkcy5hcmNoLng2NCB0aGVuDQogICAgICAgICAgICAgICAgY2xhc3NfaGVhZGVyc1tpXS5hZGRyZXNzID0gY2xhc3NfaGVhZGVyc1tpXS5hZGRyZXNzIC0gMTYNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBjbGFzc19oZWFkZXJzW2ldLmFkZHJlc3MgPSBjbGFzc19oZWFkZXJzW2ldLmFkZHJlc3MgLSA4DQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGdnLnNldFJhbmdlcyhnZy5SRUdJT05fQU5PTllNT1VTKQ0KICAgICAgICBnZy5sb2FkUmVzdWx0cyhjbGFzc19oZWFkZXJzKQ0KICAgICAgICBnZy5zZWFyY2hQb2ludGVyKDApDQogICAgICAgIGluc3RhbmNlX2hlYWRlcnMgPSBnZy5nZXRSZXN1bHRzKGdnLmdldFJlc3VsdHNDb3VudCgpKQ0KICAgICAgICBpZiBnZy5nZXRSZXN1bHRzQ291bnQoKSA9PSAwIHRoZW4NCiAgICAgICAgICAgIG5vbmVfZm91bmQgPSB0cnVlDQogICAgICAgICAgICBnb3RvIG5vbmUNCiAgICAgICAgZW5kDQogICAgICAgIGNsYXNzX2hlYWRlciA9IGluc3RhbmNlX2hlYWRlcnNbMV0udmFsdWUNCiAgICAgICAgZmlyc3RfZmllbGRfYWRkcmVzcyA9IHt9DQogICAgICAgIGZpcnN0X2ZpZWxkX2FkZHJlc3NbMV0gPSB7fQ0KICAgICAgICBpZiBpbDJjcHBGaWVsZHMuYXJjaC54NjQgdGhlbg0KICAgICAgICAgICAgZmlyc3RfZmllbGRfYWRkcmVzc1sxXS5hZGRyZXNzID0gY2xhc3NfaGVhZGVyICsgMHg4MA0KICAgICAgICBlbHNlDQogICAgICAgICAgICBmaXJzdF9maWVsZF9hZGRyZXNzWzFdLmFkZHJlc3MgPSBjbGFzc19oZWFkZXIgKyAweDQwDQogICAgICAgIGVuZA0KICAgICAgICBmaXJzdF9maWVsZF9hZGRyZXNzWzFdLmZsYWdzID0gZmxhZ190eXBlDQogICAgICAgIGZpcnN0X2ZpZWxkX2FkZHJlc3MgPSBnZy5nZXRWYWx1ZXMoZmlyc3RfZmllbGRfYWRkcmVzcykNCiAgICAgICAgZmlyc3RfZmllbGRfYWRkcmVzcyA9IGZpcnN0X2ZpZWxkX2FkZHJlc3NbMV0udmFsdWUNCiAgICAgICAgaWYgaWwyY3BwRmllbGRzLmFyY2gueDY0IHRoZW4NCiAgICAgICAgICAgIGdldF9udW1fZmllbGRzX3N0YXJ0ID0gZmlyc3RfZmllbGRfYWRkcmVzcyArIDI0DQogICAgICAgICAgICBnZXRfbnVtX2ZpZWxkc19vZmZzZXQgPSAzMg0KICAgICAgICBlbHNlDQogICAgICAgICAgICBnZXRfbnVtX2ZpZWxkc19zdGFydCA9IGZpcnN0X2ZpZWxkX2FkZHJlc3MgKyAxMg0KICAgICAgICAgICAgZ2V0X251bV9maWVsZHNfb2Zmc2V0ID0gMjANCiAgICAgICAgZW5kDQogICAgICAgIG51bV9vZmZzZXQgPSAwDQogICAgICAgIG51bV9maWVsZF9kYXRhID0ge30NCiAgICAgICAgZm9yIGkgPSAxLCAxMDAwIGRvDQogICAgICAgICAgICBudW1fZmllbGRfZGF0YVtpXSA9IHt9DQogICAgICAgICAgICBudW1fZmllbGRfZGF0YVtpXS5hZGRyZXNzID0gZ2V0X251bV9maWVsZHNfc3RhcnQgKyBudW1fb2Zmc2V0DQogICAgICAgICAgICBudW1fZmllbGRfZGF0YVtpXS5mbGFncyA9IGdnLlRZUEVfRFdPUkQNCiAgICAgICAgICAgIG51bV9vZmZzZXQgPSBudW1fb2Zmc2V0ICsgZ2V0X251bV9maWVsZHNfb2Zmc2V0DQogICAgICAgIGVuZA0KICAgICAgICBudW1fZmllbGRfZGF0YSA9IGdnLmdldFZhbHVlcyhudW1fZmllbGRfZGF0YSkNCiAgICAgICAgZmllbGRfY291bnRlciA9IDANCiAgICAgICAgbGFzdF9maWVsZF9vZmZzZXQgPSAwDQogICAgICAgIGZvciBpLCB2IGluIHBhaXJzKG51bV9maWVsZF9kYXRhKSBkbw0KICAgICAgICAgICAgaWYgdi52YWx1ZSA+PSBsYXN0X2ZpZWxkX29mZnNldCBvciB2LnZhbHVlID09IDAgdGhlbg0KICAgICAgICAgICAgICAgIGlmIHYudmFsdWUgPj0gbGFzdF9maWVsZF9vZmZzZXQgdGhlbg0KICAgICAgICAgICAgICAgICAgICBsYXN0X2ZpZWxkX29mZnNldCA9IHYudmFsdWUNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBmaWVsZF9jb3VudGVyID0gZmllbGRfY291bnRlciArIDENCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBmaWVsZF9kYXRhID0gIiINCiAgICAgICAgZmllbGRfbmFtZV9wb2ludGVyID0gIiINCiAgICAgICAgdHlwZV9wb2ludGVyID0gIiINCiAgICAgICAgY2xhc3NfcG9pbnRlciA9ICIiDQogICAgICAgIGZpZWxkX29mZnNldCA9ICIiDQogICAgICAgIGZpZWxkcyA9IHt9DQogICAgICAgIG51bWJlcl9vZl9maWVsZHMgPSBmaWVsZF9jb3VudGVyDQogICAgICAgIGN1cnJlbnRfYWRkcmVzcyA9IGZpcnN0X2ZpZWxkX2FkZHJlc3MNCiAgICAgICAgZm9yIGkgPSAxLCBudW1iZXJfb2ZfZmllbGRzIGRvDQogICAgICAgICAgICBpZiBpbDJjcHBGaWVsZHMuYXJjaC54NjQgdGhlbg0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGEgPSB7fQ0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbMV0gPSB7fQ0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbMV0uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcw0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbMV0uZmxhZ3MgPSBnZy5UWVBFX1FXT1JEDQogICAgICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNA0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbMl0gPSB7fQ0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbMl0uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcw0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbMl0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNA0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbM10gPSB7fQ0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbM10uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcw0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbM10uZmxhZ3MgPSBnZy5UWVBFX1FXT1JEDQogICAgICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNA0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNF0gPSB7fQ0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNF0uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcw0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNF0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNA0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNV0gPSB7fQ0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNV0uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcw0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNV0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNA0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNl0gPSB7fQ0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNl0uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcw0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNl0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNA0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbN10gPSB7fQ0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbN10uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcw0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbN10uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNA0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbOF0gPSB7fQ0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbOF0uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcw0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbOF0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNA0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGEgPSBnZy5nZXRWYWx1ZXMoZmllbGRfZGF0YSkNCiAgICAgICAgICAgICAgICBmaWVsZF9uYW1lX3BvaW50ZXIgPSBmaWVsZF9kYXRhWzFdLnZhbHVlDQogICAgICAgICAgICAgICAgdHlwZV9wb2ludGVyID0gZmllbGRfZGF0YVszXS52YWx1ZQ0KICAgICAgICAgICAgICAgIGNsYXNzX3BvaW50ZXIgPSBmaWVsZF9kYXRhWzVdLnZhbHVlDQogICAgICAgICAgICAgICAgZmllbGRfb2Zmc2V0ID0gZmllbGRfZGF0YVs3XS52YWx1ZQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGEgPSB7fQ0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbMV0gPSB7fQ0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbMV0uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcw0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbMV0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNA0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbMl0gPSB7fQ0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbMl0uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcw0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbMl0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNA0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbM10gPSB7fQ0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbM10uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcw0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbM10uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNA0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNF0gPSB7fQ0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNF0uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcw0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNF0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNA0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNV0gPSB7fQ0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNV0uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcw0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNV0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNA0KICAgICAgICAgICAgICAgIGZpZWxkX2RhdGEgPSBnZy5nZXRWYWx1ZXMoZmllbGRfZGF0YSkNCiAgICAgICAgICAgICAgICBmaWVsZF9uYW1lX3BvaW50ZXIgPSBmaWVsZF9kYXRhWzFdLnZhbHVlDQogICAgICAgICAgICAgICAgdHlwZV9wb2ludGVyID0gZmllbGRfZGF0YVsyXS52YWx1ZQ0KICAgICAgICAgICAgICAgIGNsYXNzX3BvaW50ZXIgPSBmaWVsZF9kYXRhWzNdLnZhbHVlDQogICAgICAgICAgICAgICAgZmllbGRfb2Zmc2V0ID0gZmllbGRfZGF0YVs0XS52YWx1ZQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBnZXRfZmllbGRfbmFtZSA9IHt9DQogICAgICAgICAgICBvZmZzZXQgPSAwDQogICAgICAgICAgICBjb3VudCA9IDENCiAgICAgICAgICAgIHJlcGVhdA0KICAgICAgICAgICAgICAgIGdldF9maWVsZF9uYW1lW2NvdW50XSA9IHt9DQogICAgICAgICAgICAgICAgZ2V0X2ZpZWxkX25hbWVbY291bnRdLmFkZHJlc3MgPSBmaWVsZF9uYW1lX3BvaW50ZXIgKyBvZmZzZXQNCiAgICAgICAgICAgICAgICBnZXRfZmllbGRfbmFtZVtjb3VudF0uZmxhZ3MgPSBnZy5UWVBFX0JZVEUNCiAgICAgICAgICAgICAgICBjb3VudCA9IGNvdW50ICsgMQ0KICAgICAgICAgICAgICAgIG9mZnNldCA9IG9mZnNldCArIDENCiAgICAgICAgICAgIHVudGlsIChjb3VudCA9PSAxMDApDQogICAgICAgICAgICBnZXRfZmllbGRfbmFtZSA9IGdnLmdldFZhbHVlcyhnZXRfZmllbGRfbmFtZSkNCiAgICAgICAgICAgIGZpZWxkX25hbWUgPSAiIg0KICAgICAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBwYWlycyhnZXRfZmllbGRfbmFtZSkgZG8NCiAgICAgICAgICAgICAgICBpZiB2YWx1ZS52YWx1ZSA+PSAwIGFuZCB2YWx1ZS52YWx1ZSA8PSAyNTUgdGhlbg0KICAgICAgICAgICAgICAgICAgICBmaWVsZF9uYW1lID0gZmllbGRfbmFtZSAuLiBzdHJpbmcuY2hhcih2YWx1ZS52YWx1ZSkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBpZiB2YWx1ZS52YWx1ZSA9PSAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZ2V0X3R5cGUgPSB7fQ0KICAgICAgICAgICAgZ2V0X3R5cGVbMV0gPSB7fQ0KICAgICAgICAgICAgZ2V0X3R5cGVbMV0uYWRkcmVzcyA9IHR5cGVfcG9pbnRlcg0KICAgICAgICAgICAgZ2V0X3R5cGVbMV0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgICAgICBmaWVsZF90eXBlID0gZ2cuZ2V0VmFsdWVzKGdldF90eXBlKQ0KICAgICAgICAgICAgZmllbGRfdHlwZSA9IGZpZWxkX3R5cGVbMV0udmFsdWUNCiAgICAgICAgICAgIGlmICN0b3N0cmluZyhmaWVsZF90eXBlKSA+IDggdGhlbg0KICAgICAgICAgICAgICAgIGdldF90eXBlID0ge30NCiAgICAgICAgICAgICAgICBnZXRfdHlwZVsxXSA9IHt9DQogICAgICAgICAgICAgICAgZ2V0X3R5cGVbMV0uYWRkcmVzcyA9IHR5cGVfcG9pbnRlciArIDQNCiAgICAgICAgICAgICAgICBnZXRfdHlwZVsxXS5mbGFncyA9IGdnLlRZUEVfRFdPUkQNCiAgICAgICAgICAgICAgICBmaWVsZF90eXBlID0gZ2cuZ2V0VmFsdWVzKGdldF90eXBlKQ0KICAgICAgICAgICAgICAgIGZpZWxkX3R5cGUgPSBmaWVsZF90eXBlWzFdLnZhbHVlDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGlmIGlsMmNwcEZpZWxkcy5tZXRob2RfdHlwZXNbdG9zdHJpbmcoZmllbGRfdHlwZSldID09ICJmbG9hdCIgdGhlbg0KICAgICAgICAgICAgICAgIHZhbHVlX3R5cGUgPSBnZy5UWVBFX0ZMT0FUDQogICAgICAgICAgICBlbHNlaWYgaWwyY3BwRmllbGRzLm1ldGhvZF90eXBlc1t0b3N0cmluZyhmaWVsZF90eXBlKV0gPT0gImRvdWJsZSIgdGhlbg0KICAgICAgICAgICAgICAgIHZhbHVlX3R5cGUgPSBnZy5UWVBFX0RPVUJMRQ0KICAgICAgICAgICAgZWxzZWlmIChmaWVsZF9vZmZzZXQgJSAyIH49IDApIHRoZW4NCiAgICAgICAgICAgICAgICB2YWx1ZV90eXBlID0gZ2cuVFlQRV9CWVRFDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdmFsdWVfdHlwZSA9IGdnLlRZUEVfRFdPUkQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWYgdmFsdWVfdHlwZSBhbmQgZmllbGRfb2Zmc2V0IGFuZCBzdHJpbmcuZmluZChmaWVsZF9uYW1lLCAiW0EtWmEtel0iKSB0aGVuDQogICAgICAgICAgICAgICAgdHlwZV9tZW51ID0gIj8iIC4uIGZpZWxkX3R5cGUgLi4gIj8iDQogICAgICAgICAgICAgICAgaWYgaWwyY3BwRmllbGRzLm1ldGhvZF90eXBlc1t0b3N0cmluZyhmaWVsZF90eXBlKV0gdGhlbg0KICAgICAgICAgICAgICAgICAgICB0eXBlX21lbnUgPSBpbDJjcHBGaWVsZHMubWV0aG9kX3R5cGVzW3Rvc3RyaW5nKGZpZWxkX3R5cGUpXQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGZpZWxkc1sjZmllbGRzICsgMV0gPSB7DQogICAgICAgICAgICAgICAgICAgIGZpZWxkX25hbWUgPSBmaWVsZF9uYW1lLA0KICAgICAgICAgICAgICAgICAgICBmaWVsZF9vZmZzZXQgPSBpbDJjcHBGaWVsZHMuZl9oZXgoZmllbGRfb2Zmc2V0KSwNCiAgICAgICAgICAgICAgICAgICAgZmllbGRfdHlwZSA9IHZhbHVlX3R5cGUsDQogICAgICAgICAgICAgICAgICAgIHR5cGVfbWVudSA9IHR5cGVfbWVudQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZ2cubG9hZFJlc3VsdHMoaW5zdGFuY2VfaGVhZGVycykNCiAgICAgICAgZ2cuc2VhcmNoUG9pbnRlcigwKQ0KICAgICAgICBwb2ludGVyc190b19pbnN0YW5jZXMgPSBnZy5nZXRSZXN1bHRzKGdnLmdldFJlc3VsdHNDb3VudCgpKQ0KICAgICAgICBzb3J0ZWRfaW5zdGFuY2VfaGVhZGVycyA9IHt9DQogICAgICAgIGFkZGVkX2hlYWRlcnMgPSB7fQ0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhwb2ludGVyc190b19pbnN0YW5jZXMpIGRvDQogICAgICAgICAgICBpZiBub3QgYWRkZWRfaGVhZGVyc1t2LnZhbHVlXSB0aGVuDQogICAgICAgICAgICAgICAgYWRkZWRfaGVhZGVyc1t2LnZhbHVlXSA9IHYudmFsdWUNCiAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoc29ydGVkX2luc3RhbmNlX2hlYWRlcnMsIHYpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGdnLmxvYWRSZXN1bHRzKHNvcnRlZF9pbnN0YW5jZV9oZWFkZXJzKQ0KICAgICAgICBzb3J0ZWRfaW5zdGFuY2VfaGVhZGVycyA9IGdnLmdldFJlc3VsdHMoZ2cuZ2V0UmVzdWx0c0NvdW50KCkpDQogICAgICAgIGZvciBpLCB2IGluIHBhaXJzKGZpZWxkcykgZG8NCiAgICAgICAgICAgIGlmIHNhdmVkX2VkaXRfdGFibGUuZmllbGRfbmFtZSA9PSB2LmZpZWxkX25hbWUgdGhlbg0KICAgICAgICAgICAgICAgIGVkaXRfb2Zmc2V0ID0gdi5maWVsZF9vZmZzZXQNCiAgICAgICAgICAgICAgICBlZGl0X3R5cGUgPSB2LmZpZWxkX3R5cGUNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgbG9hZF9maWVsZF92YWx1ZXMgPSB7fQ0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhzb3J0ZWRfaW5zdGFuY2VfaGVhZGVycykgZG8NCiAgICAgICAgICAgIGxvYWRfZmllbGRfdmFsdWVzW2ldID0gdg0KICAgICAgICAgICAgbG9hZF9maWVsZF92YWx1ZXNbaV0uYWRkcmVzcyA9IHYudmFsdWUgKyBlZGl0X29mZnNldA0KICAgICAgICAgICAgbG9hZF9maWVsZF92YWx1ZXNbaV0uZmxhZ3MgPSBlZGl0X3R5cGUNCiAgICAgICAgZW5kDQogICAgICAgIGdnLmFkZExpc3RJdGVtcyhsb2FkX2ZpZWxkX3ZhbHVlcykNCiAgICAgICAgaWYgc2F2ZWRfZWRpdF90YWJsZS5lZGl0X3R5cGUgPT0gImVkaXRfYWxsX3g0IiB0aGVuDQogICAgICAgICAgICBsb2NhbCBzYXZlX2xpc3RfYWxsID0gZ2cuZ2V0TGlzdEl0ZW1zKCkNCiAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHNhdmVfbGlzdF9hbGwpIGRvDQogICAgICAgICAgICAgICAgc2F2ZV9saXN0X2FsbFtpXS5hZGRyZXNzID0gc2F2ZV9saXN0X2FsbFtpXS5hZGRyZXNzICsgNA0KICAgICAgICAgICAgICAgIHNhdmVfbGlzdF9hbGxbaV0udmFsdWUgPSBzYXZlZF9lZGl0X3RhYmxlLmVkaXRfdmFsdWUgLi4gIlg0Ig0KICAgICAgICAgICAgICAgIHNhdmVfbGlzdF9hbGxbaV0uZnJlZXplID0gc2F2ZV9lZGl0X3ZhbHVlcy5mcmVlemUNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZ2cuYWRkTGlzdEl0ZW1zKHNhdmVfbGlzdF9hbGwpDQogICAgICAgIGVsc2VpZiBzYXZlZF9lZGl0X3RhYmxlLmVkaXRfdHlwZSA9PSAiZWRpdF9pbmRleGVzIiB0aGVuDQogICAgICAgICAgICBsb2NhbCBzYXZlX2xpc3RfYWxsID0gZ2cuZ2V0TGlzdEl0ZW1zKCkNCiAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHNhdmVkX2VkaXRfdGFibGUuZWRpdF9pbmRleGVzKSBkbw0KICAgICAgICAgICAgICAgIHNhdmVfbGlzdF9hbGxbdl0udmFsdWUgPSBzYXZlZF9lZGl0X3RhYmxlLmVkaXRfdmFsdWUNCiAgICAgICAgICAgICAgICBzYXZlX2xpc3RfYWxsW2ldLmZyZWV6ZSA9IHNhdmVfZWRpdF92YWx1ZXMuZnJlZXplDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGdnLmFkZExpc3RJdGVtcyhzYXZlX2xpc3RfYWxsKQ0KICAgICAgICBlbHNlaWYgc2F2ZWRfZWRpdF90YWJsZS5lZGl0X3R5cGUgPT0gImVkaXRfYWxsX3RoYXRfZXF1YWwiIHRoZW4NCiAgICAgICAgICAgIGxvY2FsIHNhdmVfbGlzdF9hbGwgPSBnZy5nZXRMaXN0SXRlbXMoKQ0KICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoc2F2ZV9saXN0X2FsbCkgZG8NCiAgICAgICAgICAgICAgICBpZiB2LnZhbHVlID09IHNhdmVkX2VkaXRfdGFibGUubXVzdF9lcXVhbCB0aGVuDQogICAgICAgICAgICAgICAgICAgIHNhdmVfbGlzdF9hbGxbaV0udmFsdWUgPSBzYXZlZF9lZGl0X3RhYmxlLmVkaXRfdmFsdWUNCiAgICAgICAgICAgICAgICAgICAgc2F2ZV9saXN0X2FsbFtpXS5mcmVlemUgPSBzYXZlX2VkaXRfdmFsdWVzLmZyZWV6ZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBnZy5hZGRMaXN0SXRlbXMoc2F2ZV9saXN0X2FsbCkNCiAgICAgICAgZWxzZWlmIHNhdmVkX2VkaXRfdGFibGUuZWRpdF90eXBlID09ICJlZGl0X2FsbCIgdGhlbg0KICAgICAgICAgICAgbG9jYWwgc2F2ZV9saXN0X2FsbCA9IGdnLmdldExpc3RJdGVtcygpDQogICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhzYXZlX2xpc3RfYWxsKSBkbw0KICAgICAgICAgICAgICAgIHNhdmVfbGlzdF9hbGxbaV0udmFsdWUgPSBzYXZlZF9lZGl0X3RhYmxlLmVkaXRfdmFsdWUNCiAgICAgICAgICAgICAgICBzYXZlX2xpc3RfYWxsW2ldLmZyZWV6ZSA9IHNhdmVfZWRpdF92YWx1ZXMuZnJlZXplDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGdnLmFkZExpc3RJdGVtcyhzYXZlX2xpc3RfYWxsKQ0KICAgICAgICBlbmQNCiAgICAgICAgZmllbGRzID0ge30NCiAgICAgICAgOjpub25lOjoNCiAgICAgICAgaWYgbm9uZV9mb3VuZCA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgIGdnLmFsZXJ0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBObyBDbGFzcyBJbnN0YW5jZXMgRm91bmQg4oS577iPIikNCiAgICAgICAgICAgIG5vbmVfZm91bmQgPSBmYWxzZQ0KICAgICAgICBlbHNlDQogICAgICAgICAgICBnZy50b2FzdChzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gRWRpdHMgTWFkZSDihLnvuI8iKQ0KICAgICAgICAgICAgaWwyY3BwRmllbGRzLmhvbWUoKQ0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWlsMmNwcEZpZWxkcy5kZWxldGVFZGl0KCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIGRlbGV0ZUVkaXQgPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIG1lbnVfbmFtZXMgPSB7fQ0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhpbDJjcHBGaWVsZHMuc2F2ZWRFZGl0c1RhYmxlKSBkbw0KICAgICAgICAgICAgbWVudV9uYW1lc1tpXSA9IHYuZWRpdF9uYW1lDQogICAgICAgIGVuZA0KICAgICAgICBsb2NhbCBtZW51ID0gZ2cubXVsdGlDaG9pY2UobWVudV9uYW1lcywgbmlsLCBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2VsZWN0IEVkaXRzIFRvIERlbGV0ZSDihLkiKQ0KICAgICAgICBpZiBtZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICBsb2NhbCBjb25maXJtID0gZ2cuY2hvaWNlKHsi4pyFIFllcyBkZWxldGUgdGhlIGVkaXRzIiwgDQoJCQkJCQkJCQkgICAi4p2MIE5vIn0sIA0KCQkJCQkJCQkJICAgbmlsLCANCgkJCQkJCQkJCSAgIHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBBcmUgeW91IHN1cmU/IOKEuVxuQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGVzZSBlZGl0cywgIHRoaXMgY2FuIG5vdCBiZSB1bmRvbmU/ICIpDQogICAgICAgICAgICBpZiBjb25maXJtIH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgaWYgY29uZmlybSA9PSAxIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZm9yIGssIHYgaW4gcGFpcnMoaWwyY3BwRmllbGRzLnNhdmVkRWRpdHNUYWJsZSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBrZXksIHZhbHVlIGluIHBhaXJzKG1lbnUpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgayA9PSBrZXkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbDJjcHBGaWVsZHMuc2F2ZWRFZGl0c1RhYmxlW2tdID0gImRlbGV0ZSINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgOjpnZXRfbmV4dDo6DQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGNvdW50ID0gMQ0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBkb191bnRpbCA9ICNpbDJjcHBGaWVsZHMuc2F2ZWRFZGl0c1RhYmxlICsgMQ0KICAgICAgICAgICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhpbDJjcHBGaWVsZHMuc2F2ZWRFZGl0c1RhYmxlKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgY291bnQgPSBjb3VudCArIDENCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHR5cGUodikgPT0gInN0cmluZyIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLnJlbW92ZShpbDJjcHBGaWVsZHMuc2F2ZWRFZGl0c1RhYmxlLCBpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIGNvdW50IDwgZG9fdW50aWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgZ290byBnZXRfbmV4dA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWwyY3BwRmllbGRzLnNhdmVDb25maWcoKQ0KICAgICAgICAgICAgICAgICAgICBnZy50b2FzdCgi4pyFIEVkaXRzIERlbGV0ZWQg4pyFIikNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWlsMmNwcEZpZWxkcy5leHBvcnRFZGl0cygpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBleHBvcnRFZGl0cyA9IGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgbWVudV9uYW1lcyA9IHt9DQogICAgICAgIGZvciBpLCB2IGluIHBhaXJzKGlsMmNwcEZpZWxkcy5zYXZlZEVkaXRzVGFibGUpIGRvDQogICAgICAgICAgICBtZW51X25hbWVzW2ldID0gdi5lZGl0X25hbWUNCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIHRvX2V4cG9ydCA9IHt9DQogICAgICAgIGxvY2FsIG1lbnUgPSBnZy5tdWx0aUNob2ljZShtZW51X25hbWVzLCBuaWwsIHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBTZWxlY3QgZWRpdHMgdG8gZXhwb3J0LiDihLnvuI8iKQ0KICAgICAgICBpZiBtZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICBmb3IgaywgdiBpbiBwYWlycyhtZW51KSBkbw0KICAgICAgICAgICAgICAgIHRvX2V4cG9ydFsjdG9fZXhwb3J0ICsgMV0gPSBpbDJjcHBGaWVsZHMuc2F2ZWRFZGl0c1RhYmxlW2tdDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGxvY2FsIGZpbGUgPSBpby5vcGVuKGlsMmNwcEZpZWxkcy5zYXZlUGF0aCAuLiAiLyIgLi4gZ2cuZ2V0VGFyZ2V0UGFja2FnZSgpIC4uICJfIiAuLiBvcy5kYXRlKCkgLi4gIl9leHBvcnQuanNvbiIsICJ3KyIpDQogICAgICAgICAgICBpZiBmaWxlID09IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgZmlsZSA9IGlvLm9wZW4oaWwyY3BwRmllbGRzLnNhdmVQYXRoIC4uICIvIiAuLiBnZy5nZXRUYXJnZXRQYWNrYWdlKCkgLi4gIl8iIC4uIG9zLnRpbWUoKSAuLiAiX2V4cG9ydC5qc29uIiwgIncrIikNCiAgICAgICAgICAgICAgICBnZy5hbGVydChzY3JpcHRfdGl0bGUgLi4gIlxuXG7inIUgRWRpdHMgRXhwb3J0ZWQg4pyFXG5cbiIgLi4gaWwyY3BwRmllbGRzLnNhdmVQYXRoIC4uICIvIiAuLiBnZy5nZXRUYXJnZXRQYWNrYWdlKCkgLi4gIl8iIC4uIG9zLnRpbWUoKSAuLiAiX2V4cG9ydC5qc29uIikNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBnZy5hbGVydChzY3JpcHRfdGl0bGUgLi4gIlxuXG7inIUgRWRpdHMgRXhwb3J0ZWQg4pyFXG5cbiIgLi4gaWwyY3BwRmllbGRzLnNhdmVQYXRoIC4uICIvIiAuLiBnZy5nZXRUYXJnZXRQYWNrYWdlKCkgLi4gIl8iIC4uIG9zLmRhdGUoKSAuLiAiX2V4cG9ydC5qc29uIikNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZmlsZTp3cml0ZShqc29uLmVuY29kZSh0b19leHBvcnQpKQ0KICAgICAgICAgICAgZmlsZTpjbG9zZSgpDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRmllbGRzLmltcG9ydEVkaXRzKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIGltcG9ydEVkaXRzID0gZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBtZW51ID0gZ2cucHJvbXB0KHtzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2VsZWN0IEpTT04g4oS577iPIn0sIHsNCiAgICAgICAgICAgIFsxXSA9IGlsMmNwcEZpZWxkcy5zYXZlUGF0aCAuLiAiLyINCiAgICAgICAgfSwgew0KICAgICAgICAgICAgWzFdID0gImZpbGUiDQogICAgICAgIH0pDQogICAgICAgIGlmIG1lbnUgPT0gbmlsIHRoZW4NCiAgICAgICAgZW5kDQogICAgICAgIGlmIG1lbnUgfj0gbmlsIGFuZCBzdHJpbmcuZmluZChtZW51WzFdLCAiJS5qc29uIikgdGhlbg0KICAgICAgICAgICAgbG9jYWwgZmlsZSA9IGFzc2VydChpby5vcGVuKG1lbnVbMV0sICJyIikpDQogICAgICAgICAgICBsb2NhbCBjb250ZW50ID0gZmlsZTpyZWFkKCIqYSIpDQogICAgICAgICAgICBmaWxlOmNsb3NlKCkNCiAgICAgICAgICAgIGxvY2FsIGltcG9ydF90YWJsZSA9IGpzb24uZGVjb2RlKGNvbnRlbnQpDQogICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhpbXBvcnRfdGFibGUpIGRvDQogICAgICAgICAgICAgICAgaWwyY3BwRmllbGRzLnNhdmVkRWRpdHNUYWJsZVsjaWwyY3BwRmllbGRzLnNhdmVkRWRpdHNUYWJsZSArIDFdID0gdg0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpbDJjcHBGaWVsZHMuc2F2ZUNvbmZpZygpDQogICAgICAgICAgICBnZy50b2FzdCgi4pyFIEVkaXRzIEltcG9ydGVkIOKchSIpDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRmllbGRzLmFib3V0KCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIGFib3V0ID0gZnVuY3Rpb24oKQ0KICAgICAgICBnZy5hbGVydChzY3JpcHRfdGl0bGUgLi4gW1sNCg0KDQrihLnvuI8gQWJvdXQgU2NyaXB0IOKEue+4jw0KDQpUaGlzIHNjcmlwdCBhbGxvd3MgdXNlcnMgdG8gZWRpdCBmaWVsZCBvZmZzZXQgdmFsdWVzIGluIGluc3RhbmNlcyBvZiBJbDJDcHAgY2xhc3NlcyBieSBlbnRlcmluZyBhIGNsYXNzIG5hbWUsIHRoaXMgbWVhbnMgbm8gb2Zmc2V0cyBhcmUgbmVlZGVkLiBBcyBsb25nIGFzIGNsYXNzIGFuZCBmaWVsZCBuYW1lcyBhcmUgbm90IGNoYW5nZWQgaW4gdGhlIGdhbWUgdGhlIGVkaXRzIHdpbGwgY29udGludWUgd29ya2luZyBldmVuIGFmdGVyIGEgZ2FtZSB1cGRhdGVzLg0KDQrinpUgQ3JlYXRlIEVkaXQgKEVudGVyIENsYXNzIE5hbWUpDQpIZXJlIHlvdSB3aWxsIGVudGVyIGEga25vd24gY2xhc3MgbmFtZSB0byBzZWFyY2ggZm9yIGluc3RhbmNlcyBhbmQgY3JlYXRlIGFuIGVkaXQuIEVkaXRzIHlvdSBjcmVhdGUgZm9yIGEgZ2FtZSBhcmUgYWRkZWQgdG8gdGhlIG1haW4gbWVudSBhYm92ZSB0aGlzIG1lbnUgaXRlbS4NCg0K4p6VIENyZWF0ZSBFZGl0IChTZWFyY2ggSWwyQ3BwRHVtcGVyIER1bXApDQpIZXJlIHlvdSBjYW4gbG9hZCBhIElsMkNwcER1bXBlciBkdW1wLmNzIGFuZCBzZWFyY2ggZm9yIGtleXdvcmRzIHRvIGZpbmQgY2xhc3MgbmFtZXMsIHNlYXJjaCBmb3IgaW5zdGFuY2VzIGFuZCBjcmVhdGUgYW4gZWRpdC4gRWRpdHMgeW91IGNyZWF0ZSBmb3IgYSBnYW1lIGFyZSBhZGRlZCB0byB0aGUgbWFpbiBtZW51IGFib3ZlIHRoaXMgbWVudSBpdGVtLg0KDQripLTvuI8gSW1wb3J0IEVkaXRzDQpIZXJlIHlvdSBjYW4gaW1wb3J0IGVkaXRzIGNyZWF0ZWQgYW5kIGV4cG9ydGVkIGJ5IG90aGVyIHVzZXJzIG9mIHRoaXMgc2NyaXB0Lg0KIA0K4qS177iPIEV4cG9ydCBFZGl0cw0KSGVyZSB5b3UgY2FuIGV4cG9ydCBlZGl0cyB5b3UgaGF2ZSBjcmVhdGVkIHRvIHNoYXJlIHRoZW0gd2l0aCBvdGhlciB1c2VycyBvZiB0aGUgc2NyaXB0Lg0KDQrwn5eR77iPIERlbGV0ZSBFZGl0DQpIZXJlIHlvdSBjYW4gZGVsZXRlIGVkaXRzIGZvciBhIGdhbWUgYW5kIHJlbW92ZSB0aGVtIGZyb20gdGhlIG1haW4gbWVudS4NCl1dKQ0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRmllbGRzLmhvbWUoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgaG9tZSA9IGZ1bmN0aW9uKHBhc3NlZF9kYXRhKQ0KICAgICAgICBwbHVnaW5NYW5hZ2VyLnJldHVybkhvbWUgPSB0cnVlDQogICAgICAgIHBsdWdpbk1hbmFnZXIucmV0dXJuUGx1Z2luVGFibGUgPSAiaWwyY3BwRmllbGRzIg0KICAgICAgICBpZiBwYXNzZWRfZGF0YSB0aGVuDQogICAgICAgICAgICBpbDJjcHBGaWVsZHMubG9hZEZpZWxkcyhwYXNzZWRfZGF0YSkNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgaWYgbWFraW5nX2VkaXQgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgbG9jYWwgbWVudSA9IGdnLmNob2ljZSh7IuKchSBTYXZlIEVkaXQiLCANCgkJCQkJCQkJCQki8J+Xke+4jyBEaXNjYXJkIEVkaXQifSwgDQoJCQkJCQkJCQkJbmlsLA0KCQkJCQkJCQkJCXNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBTYXZlIG9yIERpc2NhcmQgZWRpdC4g4oS577iPIikNCiAgICAgICAgICAgICAgICBpZiBtZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIG1lbnUgPT0gMSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpbDJjcHBGaWVsZHMuc2F2ZUNvbmZpZygpDQogICAgICAgICAgICAgICAgICAgICAgICBtYWtpbmdfZWRpdCA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBnZy50b2FzdCgi4pyFIEVkaXQgc2F2ZWQg4pyFIikNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIG1lbnUgPT0gMiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5yZW1vdmUoaWwyY3BwRmllbGRzLnNhdmVkRWRpdHNUYWJsZSwgI2lsMmNwcEZpZWxkcy5zYXZlZEVkaXRzVGFibGUpDQogICAgICAgICAgICAgICAgICAgICAgICBtYWtpbmdfZWRpdCA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBnZy50b2FzdCgi8J+Xke+4jyBFZGl0IGRpc2NhcmRlZCDwn5eR77iPIikNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlsMmNwcEZpZWxkcy5ob21lKCkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWYgI2dnLmdldFNlbGVjdGVkTGlzdEl0ZW1zKCkgPiAwIHRoZW4NCiAgICAgICAgICAgICAgICBpbDJjcHBGaWVsZHMuZWRpdEZpZWxkcygpDQogICAgICAgICAgICBlbHNlaWYgZmllbGRzIGFuZCAjZmllbGRzID4gMCB0aGVuDQogICAgICAgICAgICAgICAgbG9jYWwgbWVudSA9IGdnLmNob2ljZSh7IlllcyIsICJObyJ9LCBuaWwsIHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBDb250aW51ZSBlZGl0aW5nIGZpZWxkcz8g4oS577iPIikNCiAgICAgICAgICAgICAgICBpZiBtZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIG1lbnUgPT0gMSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpbDJjcHBGaWVsZHMubG9hZEZpZWxkcyhuaWwsIHRydWUpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBtZW51ID09IDIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzID0ge30NCiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzX3N0cmluZ19zZWFyY2ggPSBuaWwNCiAgICAgICAgICAgICAgICAgICAgICAgIGlsMmNwcEZpZWxkcy5ob21lKCkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgbG9jYWwgbWVudV9pdGVtcyA9IHt9DQogICAgICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoaWwyY3BwRmllbGRzLnNhdmVkRWRpdHNUYWJsZSkgZG8NCiAgICAgICAgICAgICAgICAgICAgbWVudV9pdGVtc1tpXSA9ICLilrbvuI8gIiAuLiB2LmVkaXRfbmFtZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIG1lbnVfaXRlbXNbI21lbnVfaXRlbXMgKyAxXSA9ICLinpUgQ3JlYXRlIEVkaXQgKEVudGVyIENsYXNzIE5hbWUpIg0KICAgICAgICAgICAgICAgIG1lbnVfaXRlbXNbI21lbnVfaXRlbXMgKyAxXSA9ICLinpUgQ3JlYXRlIEVkaXQgKFNlYXJjaCBJbDJDcHBEdW1wZXIgRHVtcCkiDQogICAgICAgICAgICAgICAgbWVudV9pdGVtc1sjbWVudV9pdGVtcyArIDFdID0gIuKktO+4jyBJbXBvcnQgRWRpdHMiDQogICAgICAgICAgICAgICAgbWVudV9pdGVtc1sjbWVudV9pdGVtcyArIDFdID0gIuKkte+4jyBFeHBvcnQgRWRpdHMiDQogICAgICAgICAgICAgICAgbWVudV9pdGVtc1sjbWVudV9pdGVtcyArIDFdID0gIvCfl5HvuI8gRGVsZXRlIEVkaXRzIg0KICAgICAgICAgICAgICAgIG1lbnVfaXRlbXNbI21lbnVfaXRlbXMgKyAxXSA9ICLihLnvuI8gQWJvdXQgU2NyaXB0Ig0KICAgICAgICAgICAgICAgIG1lbnVfaXRlbXNbI21lbnVfaXRlbXMgKyAxXSA9ICLinYwgRXhpdCBTY3JpcHQiDQogICAgICAgICAgICAgICAgbG9jYWwgbWVudSA9IGdnLmNob2ljZShtZW51X2l0ZW1zLCBuaWwsIHNjcmlwdF90aXRsZSkNCiAgICAgICAgICAgICAgICBpZiBtZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIG1lbnUgPCAjbWVudV9pdGVtcyAtIDYgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgaWwyY3BwRmllbGRzLmRvU2F2ZWRFZGl0KGlsMmNwcEZpZWxkcy5zYXZlZEVkaXRzVGFibGVbbWVudV0pDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBtZW51ID09ICNtZW51X2l0ZW1zIC0gNiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpbDJjcHBGaWVsZHMubG9hZEZpZWxkcygpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBtZW51ID09ICNtZW51X2l0ZW1zIC0gNSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmNhbGxQbHVnaW4ocGx1Z2luc0RhdGFQYXRoIC4uICJwbHVnaW5fYmNfZHVtcF9zZWFyY2gubHVhIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGlsMmNwcEZpZWxkcy5ob21lKCkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIG1lbnUgPT0gI21lbnVfaXRlbXMgLSA0IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGlsMmNwcEZpZWxkcy5pbXBvcnRFZGl0cygpDQogICAgICAgICAgICAgICAgICAgICAgICBpbDJjcHBGaWVsZHMuaG9tZSgpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBtZW51ID09ICNtZW51X2l0ZW1zIC0gMyB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpbDJjcHBGaWVsZHMuZXhwb3J0RWRpdHMoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWwyY3BwRmllbGRzLmhvbWUoKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgbWVudSA9PSAjbWVudV9pdGVtcyAtIDIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgaWwyY3BwRmllbGRzLmRlbGV0ZUVkaXQoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWwyY3BwRmllbGRzLmhvbWUoKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgbWVudSA9PSAjbWVudV9pdGVtcyAtIDEgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgaWwyY3BwRmllbGRzLmFib3V0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlsMmNwcEZpZWxkcy5ob21lKCkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIG1lbnUgPT0gI21lbnVfaXRlbXMgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5yZXR1cm5Ib21lID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIC0tIHBsdWdpbk1hbmFnZXIuaG9tZSgpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICBnZXRfbWV0aG9kX3NlYXJjaGVzID0ge3siYm9vbCIsICJTeXN0ZW0uSUNvbnZlcnRpYmxlLlRvQm9vbGVhbiJ9LCANCgkJCQkJCQl7ImNoYXIiLCAiU3lzdGVtLklDb252ZXJ0aWJsZS5Ub0NoYXIifSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7InNieXRlIiwgIlN5c3RlbS5JQ29udmVydGlibGUuVG9TQnl0ZSJ9LCANCgkJCQkJCQl7ImJ5dGUiLCAiU3lzdGVtLklDb252ZXJ0aWJsZS5Ub0J5dGUifSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7InNob3J0IiwgIlN5c3RlbS5JQ29udmVydGlibGUuVG9JbnQxNiJ9LCANCgkJCQkJCQl7InVzaG9ydCIsICJTeXN0ZW0uSUNvbnZlcnRpYmxlLlRvVUludDE2In0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyJpbnQiLCAiU3lzdGVtLklDb252ZXJ0aWJsZS5Ub0ludDMyIn0sIA0KCQkJCQkJCXsidWludCIsICJTeXN0ZW0uSUNvbnZlcnRpYmxlLlRvVUludDMyIn0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyJsb25nIiwgIlN5c3RlbS5JQ29udmVydGlibGUuVG9JbnQ2NCJ9LCANCgkJCQkJCQl7InVsb25nIiwgIlN5c3RlbS5JQ29udmVydGlibGUuVG9VSW50NjQifSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ImZsb2F0IiwgIlN5c3RlbS5JQ29udmVydGlibGUuVG9TaW5nbGUifSwgDQoJCQkJCQkJeyJkb3VibGUiLCAiU3lzdGVtLklDb252ZXJ0aWJsZS5Ub0RvdWJsZSJ9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsiRGVjaW1hbCIsICJTeXN0ZW0uSUNvbnZlcnRpYmxlLlRvRGVjaW1hbCJ9LCANCgkJCQkJCQl7InZvaWQiLCAiR2V0T2JqZWN0RGF0YSJ9fSwNCiAgICBtZXRob2RfdHlwZXMgPSB7fSwNCiAgICBnZ19mbGFncyA9IHsNCiAgICAgICAgWzFdID0gIlRZUEVfQllURSIsDQogICAgICAgIFs2NF0gPSAiVFlQRV9ET1VCTEUiLA0KICAgICAgICBbNF0gPSAiVFlQRV9EV09SRCIsDQogICAgICAgIFsxNl0gPSAiVFlQRV9GTE9BVCIsDQogICAgICAgIFszMl0gPSAiVFlQRV9RV09SRCIsDQogICAgICAgIFsyXSA9ICJUWVBFX1dPUkQiLA0KICAgICAgICBbOF0gPSAiVFlQRV9YT1IiDQogICAgfSwNCiAgICBzX2JfcyA9ICIxMDk7MTE1Ozk5OzExMTsxMTQ7MTA4OzEwNTs5ODs0NjsxMDA7MTA4OzEwODs3NzsxMTE7MTAwOzExNzsxMDg7MTAxOjoyMCIsDQogICAgZV9iX3MgPSAiMDBoOzAwaDswfn4wOzB+fjA7MH5+MDswMGg7MH5+MDswMGg7MH5+MDswMGg7RkZoO0ZGaDo6MTIiLA0KICAgIGFyY2ggPSBnZy5nZXRUYXJnZXRJbmZvKCkNCn0NCmlmIGlsMmNwcEZpZWxkcy5hcmNoLng2NCB0aGVuDQogICAgZmxhZ190eXBlID0gZ2cuVFlQRV9RV09SRA0KZWxzZQ0KICAgIGZsYWdfdHlwZSA9IGdnLlRZUEVfRFdPUkQNCmVuZA0KaWwyY3BwRmllbGRzLmdldFJhbmdlKCkNCmlmIHBjYWxsKGlsMmNwcEZpZWxkcy5jaGVja0NvbmZpZ0ZpbGVHYW1lKSA9PSBmYWxzZSB0aGVuDQogICAgaWwyY3BwRmllbGRzLmNyZWF0ZURpcmVjdG9yeSgpDQogICAgaWwyY3BwRmllbGRzLnNhdmVkRWRpdHNUYWJsZSA9IHt9DQogICAgaWwyY3BwRmllbGRzLnNhdmVDb25maWcoKQ0KZW5kDQoNCmlmIHBjYWxsKGlsMmNwcEZpZWxkcy5jaGVja01ldGhvZFR5cGVzKSA9PSBmYWxzZSB0aGVuDQogICAgaWwyY3BwRmllbGRzLmdldE1ldGhvZFR5cGVzKCkNCmVuZA0KDQpwbHVnaW5NYW5hZ2VyLnJldHVybkhvbWUgPSB0cnVlDQpwbHVnaW5NYW5hZ2VyLnJldHVyblBsdWdpblRhYmxlID0gImlsMmNwcEZpZWxkcyINCmdnLmFsZXJ0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBQbHVnaW4gbG9hZGVkLCBpZiBsYXVuY2hlZCBkaXJlY3RseSBwcmVzcyB0aGUgZmxvYXRpbmcgW1N4XSBidXR0b24gdG8gb3BlbiB0aGUgbWVudS4g4oS577iPIikNCg"
        },
        [9] = {
            file_name = "plugin_bc_method_search_results.lua",
            file_data = "bWV0aG9kU2VhcmNoUmVzdWx0cyA9IHsNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJbWV0aG9kU2VhcmNoUmVzdWx0cy5ob21lKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIGhvbWUgPSBmdW5jdGlvbigpDQogICAgICAgIHBsdWdpbk1hbmFnZXIucmV0dXJuSG9tZSA9IHRydWUNCiAgICAgICAgcGx1Z2luTWFuYWdlci5yZXR1cm5QbHVnaW5UYWJsZSA9ICJtZXRob2RTZWFyY2hSZXN1bHRzIg0KICAgICAgICBpZiByZXN1bHRzX2xvYWRlZCB+PSB0cnVlIHRoZW4NCiAgICAgICAgICAgIGdnLmNsZWFyTGlzdCgpDQogICAgICAgICAgICBsb2NhbCByZXN1bHRzID0ge30NCiAgICAgICAgICAgIGlmIGR1bXBTZWFyY2hlci5tZXRob2RSZXN1bHRzIHRoZW4NCiAgICAgICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhkdW1wU2VhcmNoZXIubWV0aG9kUmVzdWx0cykgZG8NCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgbmFtZV9zdHJpbmcgPSAiTmFtZXNwYWNlOiAiIC4uIGR1bXBfY3NfdGFibGVbdlsxXV0ubmFtZXNwYWNlIC4uICJcbiINCiAgICAgICAgICAgICAgICAgICAgaWYgZHVtcF9jc190YWJsZVt2WzFdXS5jbGFzcyB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBuYW1lX3N0cmluZyA9IG5hbWVfc3RyaW5nIC4uICJDbGFzcyBOYW1lOiAiIC4uIGR1bXBfY3NfdGFibGVbdlsxXV0uY2xhc3MgLi4gIlxuIg0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgZHVtcF9jc190YWJsZVt2WzFdXS5zdHJ1Y3QgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgbmFtZV9zdHJpbmcgPSBuYW1lX3N0cmluZyAuLiAiU3RydWN0IE5hbWU6ICIgLi4gZHVtcF9jc190YWJsZVt2WzFdXS5zdHJ1Y3QgLi4gIlxuIg0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgbmFtZV9zdHJpbmcgPSBuYW1lX3N0cmluZyAuLiAiTWV0aG9kIE5hbWU6ICIgLi4gZHVtcF9jc190YWJsZVt2WzFdXS5tZXRob2RzW3ZbMl1dLm1ldGhvZF9uYW1lIC4uICJcbiINCiAgICAgICAgICAgICAgICAgICAgbmFtZV9zdHJpbmcgPSBuYW1lX3N0cmluZyAuLiAiT2Zmc2V0OiAiIC4uIGR1bXBfY3NfdGFibGVbdlsxXV0ubWV0aG9kc1t2WzJdXS5tZXRob2Rfb2Zmc2V0IC4uICJcbiINCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0c1tpXSA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgPSBkdW1wX2NzX3RhYmxlW3ZbMV1dLm1ldGhvZHNbdlsyXV0ubWV0aG9kX29mZnNldCArIEJBU0VBRERSLA0KICAgICAgICAgICAgICAgICAgICAgICAgZmxhZ3MgPSBnZy5UWVBFX0RXT1JELA0KICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IG5hbWVfc3RyaW5nDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBnZy5hZGRMaXN0SXRlbXMocmVzdWx0cykNCiAgICAgICAgICAgICAgICBnZy5hbGVydChzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gIiAuLiAjcmVzdWx0cyAuLiAiIHJlc3VsdHMgaGF2ZSBiZWVuIGFkZGVkIHRvIHlvdXIgc2F2ZSBsaXN0LiDihLnvuI8iKQ0KICAgICAgICAgICAgICAgIHJlc3VsdHNfbG9hZGVkID0gdHJ1ZQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIGdnLmFsZXJ0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBZb3UgbXVzdCBoYXZlIHNlYXJjaCByZXN1bHRzIGZyb20gU2VhcmNoIER1bXAuY3MgZmlyc3QuIOKEue+4jyIpDQogICAgICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5yZXR1cm5Ib21lID0gZmFsc2UNCiAgICAgICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmhvbWUoKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVsc2VpZiAjZ2cuZ2V0U2VsZWN0ZWRMaXN0SXRlbXMoKSA9PSAxIHRoZW4NCiAgICAgICAgICAgIGxvY2FsIHBhc3NlZF9kYXRhID0gZ2cuZ2V0U2VsZWN0ZWRMaXN0SXRlbXMoKVsxXS5uYW1lOmdzdWIoIi4rTWV0aG9kIE5hbWU6ICguKyl7IH0uKyIsICIlMSIpOmdzdWIoIi4rICguKylbJShdLisiLCAiJTEiKQ0KICAgICAgICAgICAgZ2cudG9hc3Qoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIExvYWRpbmcgUGx1Z2luIOKEue+4jyIpDQogICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmNhbGxQbHVnaW4ocGx1Z2luc0RhdGFQYXRoIC4uICJwbHVnaW5fYmNfaWwyY3BwX2VkaXRzLmx1YSIsICJpbDJjcHBFZGl0cyIsIHBhc3NlZF9kYXRhKQ0KICAgICAgICBlbHNlDQogICAgICAgICAgICByZXN1bHRzX2xvYWRlZCA9IGZhbHNlDQogICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLnJldHVybkhvbWUgPSBmYWxzZQ0KICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5ob21lKCkNCiAgICAgICAgZW5kDQogICAgZW5kDQp9DQoNCnBsdWdpbk1hbmFnZXIucmV0dXJuSG9tZSA9IHRydWUNCnBsdWdpbk1hbmFnZXIucmV0dXJuUGx1Z2luVGFibGUgPSAibWV0aG9kU2VhcmNoUmVzdWx0cyINCm1ldGhvZFNlYXJjaFJlc3VsdHMuaG9tZSgpDQo"
        },
        [11] = {
            file_name = "plugin_bc_metadata_dumper.lua",
            file_data = "bWV0YWRhdGFEdW1wZXIgPSB7DQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCW1ldGFkYXRhRHVtcGVyLmdldFZlcnNpb24oKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgZ2V0VmVyc2lvbiA9IGZ1bmN0aW9uKCkNCiAgICAgICAgd2hpbGUgKG5pbCkgZG8NCiAgICAgICAgICAgIGxvY2FsIGdldFZlcnNpb25WYWwgPSB7fQ0KICAgICAgICAgICAgaWYgKGdldFZlcnNpb25WYWwuZ2V0VmVyc2lvblZhbCkgdGhlbg0KICAgICAgICAgICAgICAgIGdldFZlcnNpb25WYWwuZ2V0VmVyc2lvblZhbCA9IChnZXRWZXJzaW9uVmFsLmdldFZlcnNpb25WYWwoZ2V0VmVyc2lvblZhbCkpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGdnLnRvYXN0KHNjcmlwdF90aXRsZSAuLg0KICAgICAgICAgICAgICAgICAgICAgIlxuXG7ihLnvuI8gR2V0dGluZyBVbml0eSBWZXJzaW9uIOKEue+4j1xuXG5HZXR0aW5nIFVuaXR5IHZlcnNpb24gZm9yIGdsb2JhbC1tZXRhZGF0YS5kYXQgcmVwYWlyLiIpDQogICAgICAgIGdnLnNldFJhbmdlcyhnZy5SRUdJT05fQ09ERV9BUFApDQogICAgICAgIGdnLmNsZWFyUmVzdWx0cygpDQogICAgICAgIGdnLnNlYXJjaE51bWJlcigiMzJoOzMwaDswfn4wOzB+fjA7MkVoOzB+fjA7MkVoOzY2aDo6MTEiLCBnZy5UWVBFX0JZVEUsIGZhbHNlLCBnZy5TSUdOX0VRVUFMLCBuaWwsIG5pbCwgMTYpDQogICAgICAgIGxvY2FsIHZlcnNpb24gPSBnZy5nZXRSZXN1bHRzKDEsIDgpDQogICAgICAgIGxvY2FsIGNvdW50ID0gMQ0KICAgICAgICBsb2NhbCBvZmZzZXQgPSAwDQogICAgICAgIGxvY2FsIHZlcnNpb25fdGFibGUgPSB7fQ0KICAgICAgICByZXBlYXQNCiAgICAgICAgICAgIHZlcnNpb25fdGFibGVbY291bnRdID0ge30NCiAgICAgICAgICAgIHZlcnNpb25fdGFibGVbY291bnRdLmFkZHJlc3MgPSB2ZXJzaW9uWzFdLmFkZHJlc3MgKyBvZmZzZXQNCiAgICAgICAgICAgIHZlcnNpb25fdGFibGVbY291bnRdLmZsYWdzID0gZ2cuVFlQRV9CWVRFDQogICAgICAgICAgICBvZmZzZXQgPSBvZmZzZXQgKyAxDQogICAgICAgICAgICBjb3VudCA9IGNvdW50ICsgMQ0KICAgICAgICB1bnRpbCAoY291bnQgPT0gNSkNCiAgICAgICAgbG9jYWwgbmFtZV90YWJsZSA9IGdnLmdldFZhbHVlcyh2ZXJzaW9uX3RhYmxlKQ0KICAgICAgICBsb2NhbCBuYW1lX3N0cmluZyA9ICIiDQogICAgICAgIGZvciBpLCB2IGluIHBhaXJzKG5hbWVfdGFibGUpIGRvDQogICAgICAgICAgICBuYW1lX3N0cmluZyA9IG5hbWVfc3RyaW5nIC4uIHN0cmluZy5jaGFyKHYudmFsdWUpDQogICAgICAgIGVuZA0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhtZXRhZGF0YUR1bXBlci51dl9hKSBkbw0KICAgICAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBwYWlycyh2LnZlcnNpb25zKSBkbw0KICAgICAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKHZhbHVlLCBuYW1lX3N0cmluZykgdGhlbg0KICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uXzEgPSB2LmhlYWRlcnNbMV0NCiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbl8yID0gdi5oZWFkZXJzWzJdDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIHJldHVybiB7dmVyc2lvbl8xLCB2ZXJzaW9uXzJ9DQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCgltZXRhZGF0YUR1bXBlci5nZXRSYW5nZXMoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgZ2V0UmFuZ2VzID0gZnVuY3Rpb24oYWRkcmVzcykNCiAgICAgICAgbG9jYWwgcmFuZ2VzID0gZ2cuZ2V0UmFuZ2VzTGlzdCgpDQogICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHJhbmdlcykgZG8NCiAgICAgICAgICAgIGlmIHYuc3RhcnQgPD0gYWRkcmVzcyBhbmQgdlsiZW5kIl0gPiBhZGRyZXNzIHRoZW4NCiAgICAgICAgICAgICAgICByYW5nZV9zdGFydCA9IHYuc3RhcnQNCiAgICAgICAgICAgICAgICByYW5nZV9lbmQgPSB2WyJlbmQiXQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICByZXR1cm4ge3JhbmdlX3N0YXJ0LCByYW5nZV9lbmR9DQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCgltZXRhZGF0YUR1bXBlci5jaGVja0hlYWRlcigpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBjaGVja0hlYWRlciA9IGZ1bmN0aW9uKHJhbmdlX3N0YXJ0KQ0KICAgICAgICB3aGlsZSAobmlsKSBkbw0KICAgICAgICAgICAgbG9jYWwgY2hlY2tIZWFkZXJWYWwgPSB7fQ0KICAgICAgICAgICAgaWYgKGNoZWNrSGVhZGVyVmFsLmNoZWNrSGVhZGVyVmFsKSB0aGVuDQogICAgICAgICAgICAgICAgY2hlY2tIZWFkZXJWYWwuY2hlY2tIZWFkZXJWYWwgPSAoY2hlY2tIZWFkZXJWYWwuY2hlY2tIZWFkZXJWYWwoY2hlY2tIZWFkZXJWYWwpKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBnZy50b2FzdChzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gQ2hlY2tpbmcgSGVhZGVyIOKEue+4j1xuXG5DaGVja2luZyBmb3IgdmFsaWQgZ2xvYmFsLW1ldGFkYXRhLmRhdCBoZWFkZXIuIikNCiAgICAgICAgbG9jYWwgaGVhZGVyX3RhYmxlID0ge30NCiAgICAgICAgaGVhZGVyX3RhYmxlWzFdID0ge30NCiAgICAgICAgaGVhZGVyX3RhYmxlWzFdLmFkZHJlc3MgPSByYW5nZV9zdGFydA0KICAgICAgICBoZWFkZXJfdGFibGVbMV0uZmxhZ3MgPSBnZy5UWVBFX0JZVEUNCiAgICAgICAgaGVhZGVyX3RhYmxlWzJdID0ge30NCiAgICAgICAgaGVhZGVyX3RhYmxlWzJdLmFkZHJlc3MgPSByYW5nZV9zdGFydCArIDENCiAgICAgICAgaGVhZGVyX3RhYmxlWzJdLmZsYWdzID0gZ2cuVFlQRV9CWVRFDQogICAgICAgIGhlYWRlcl90YWJsZVszXSA9IHt9DQogICAgICAgIGhlYWRlcl90YWJsZVszXS5hZGRyZXNzID0gcmFuZ2Vfc3RhcnQgKyAyDQogICAgICAgIGhlYWRlcl90YWJsZVszXS5mbGFncyA9IGdnLlRZUEVfQllURQ0KICAgICAgICBoZWFkZXJfdGFibGVbNF0gPSB7fQ0KICAgICAgICBoZWFkZXJfdGFibGVbNF0uYWRkcmVzcyA9IHJhbmdlX3N0YXJ0ICsgMw0KICAgICAgICBoZWFkZXJfdGFibGVbNF0uZmxhZ3MgPSBnZy5UWVBFX0JZVEUNCiAgICAgICAgaGVhZGVyX3RhYmxlWzVdID0ge30NCiAgICAgICAgaGVhZGVyX3RhYmxlWzVdLmFkZHJlc3MgPSByYW5nZV9zdGFydCArIDQNCiAgICAgICAgaGVhZGVyX3RhYmxlWzVdLmZsYWdzID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICBoZWFkZXJfdGFibGVbNl0gPSB7fQ0KICAgICAgICBoZWFkZXJfdGFibGVbNl0uYWRkcmVzcyA9IHJhbmdlX3N0YXJ0ICsgOA0KICAgICAgICBoZWFkZXJfdGFibGVbNl0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgIGhlYWRlcl92YWx1ZXMgPSBnZy5nZXRWYWx1ZXMoaGVhZGVyX3RhYmxlKQ0KICAgICAgICBpZiBoZWFkZXJfdmFsdWVzWzFdLnZhbHVlIH49IC04MSBvciBoZWFkZXJfdmFsdWVzWzFdLnZhbHVlIH49IDI3IG9yIGhlYWRlcl92YWx1ZXNbMV0udmFsdWUgfj0gLTc5IG9yDQogICAgICAgICAgICBoZWFkZXJfdmFsdWVzWzFdLnZhbHVlIH49IC02IHRoZW4NCiAgICAgICAgICAgIGhlYWRlcl92YWx1ZXNbMV0udmFsdWUgPSAiQUZoIg0KICAgICAgICAgICAgaGVhZGVyX3ZhbHVlc1syXS52YWx1ZSA9ICIxQmgiDQogICAgICAgICAgICBoZWFkZXJfdmFsdWVzWzNdLnZhbHVlID0gIkIxaCINCiAgICAgICAgICAgIGhlYWRlcl92YWx1ZXNbNF0udmFsdWUgPSAiRkFoIg0KICAgICAgICAgICAgYWRkcmVzc19lZGl0X3RhYmxlXzEgPSB7DQogICAgICAgICAgICAgICAgWzFdID0gew0KICAgICAgICAgICAgICAgICAgICBbImFkZHJlc3MiXSA9IGhlYWRlcl90YWJsZVsxXS5hZGRyZXNzLA0KICAgICAgICAgICAgICAgICAgICBbImVkaXQiXSA9ICJBRmgiLA0KICAgICAgICAgICAgICAgICAgICBbInR5cGUiXSA9IGdnLlRZUEVfQllURQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgWzJdID0gew0KICAgICAgICAgICAgICAgICAgICBbImFkZHJlc3MiXSA9IGhlYWRlcl90YWJsZVsyXS5hZGRyZXNzLA0KICAgICAgICAgICAgICAgICAgICBbImVkaXQiXSA9ICIxQmgiLA0KICAgICAgICAgICAgICAgICAgICBbInR5cGUiXSA9IGdnLlRZUEVfQllURQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgWzNdID0gew0KICAgICAgICAgICAgICAgICAgICBbImFkZHJlc3MiXSA9IGhlYWRlcl90YWJsZVszXS5hZGRyZXNzLA0KICAgICAgICAgICAgICAgICAgICBbImVkaXQiXSA9ICJCMWgiLA0KICAgICAgICAgICAgICAgICAgICBbInR5cGUiXSA9IGdnLlRZUEVfQllURQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgWzRdID0gew0KICAgICAgICAgICAgICAgICAgICBbImFkZHJlc3MiXSA9IGhlYWRlcl90YWJsZVs0XS5hZGRyZXNzLA0KICAgICAgICAgICAgICAgICAgICBbImVkaXQiXSA9ICJGQWgiLA0KICAgICAgICAgICAgICAgICAgICBbInR5cGUiXSA9IGdnLlRZUEVfQllURQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIGhlYWRlcl92YWx1ZXMgPSBnZy5nZXRWYWx1ZXMoaGVhZGVyX3RhYmxlKQ0KICAgICAgICBpZiBoZWFkZXJfdmFsdWVzWzVdLnZhbHVlID09IDI0IG9yIGhlYWRlcl92YWx1ZXNbNV0udmFsdWUgPT0gMjcgdGhlbg0KICAgICAgICBlbHNlDQogICAgICAgICAgICBsb2NhbCB2ZXJzaW9uID0gbWV0YWRhdGFEdW1wZXIuZ2V0VmVyc2lvbigpDQogICAgICAgICAgICBoZWFkZXJfdmFsdWVzWzVdLnZhbHVlID0gdmVyc2lvblsxXQ0KICAgICAgICAgICAgaGVhZGVyX3ZhbHVlc1s2XS52YWx1ZSA9IHZlcnNpb25bMl0NCiAgICAgICAgICAgIGFkZHJlc3NfZWRpdF90YWJsZV8yID0gew0KICAgICAgICAgICAgICAgIFsxXSA9IHsNCiAgICAgICAgICAgICAgICAgICAgWyJhZGRyZXNzIl0gPSBoZWFkZXJfdGFibGVbNV0uYWRkcmVzcywNCiAgICAgICAgICAgICAgICAgICAgWyJlZGl0Il0gPSB2ZXJzaW9uWzFdLA0KICAgICAgICAgICAgICAgICAgICBbInR5cGUiXSA9IGdnLlRZUEVfRFdPUkQNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIFsyXSA9IHsNCiAgICAgICAgICAgICAgICAgICAgWyJhZGRyZXNzIl0gPSBoZWFkZXJfdGFibGVbNl0uYWRkcmVzcywNCiAgICAgICAgICAgICAgICAgICAgWyJlZGl0Il0gPSB2ZXJzaW9uWzJdLA0KICAgICAgICAgICAgICAgICAgICBbInR5cGUiXSA9IGdnLlRZUEVfRFdPUkQNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIGVuZA0KICAgICAgICBsb2NhbCBoZWFkZXJfdmFsdWVzID0gZ2cuZ2V0VmFsdWVzKGhlYWRlcl90YWJsZSkNCiAgICAgICAgaWYgaGVhZGVyX3ZhbHVlc1s2XS52YWx1ZSA9PSAyNjQgb3IgaGVhZGVyX3ZhbHVlc1s2XS52YWx1ZSA9PSAyNzIgb3IgaGVhZGVyX3ZhbHVlc1s2XS52YWx1ZSA9PSAyNTYgdGhlbg0KICAgICAgICBlbHNlDQogICAgICAgICAgICBsb2NhbCB2ZXJzaW9uID0gbWV0YWRhdGFEdW1wZXIuZ2V0VmVyc2lvbigpDQogICAgICAgICAgICBoZWFkZXJfdmFsdWVzWzVdLnZhbHVlID0gdmVyc2lvblsxXQ0KICAgICAgICAgICAgaGVhZGVyX3ZhbHVlc1s2XS52YWx1ZSA9IHZlcnNpb25bMl0NCiAgICAgICAgICAgIGFkZHJlc3NfZWRpdF90YWJsZV8zID0gew0KICAgICAgICAgICAgICAgIFsxXSA9IHsNCiAgICAgICAgICAgICAgICAgICAgWyJhZGRyZXNzIl0gPSBoZWFkZXJfdGFibGVbNV0uYWRkcmVzcywNCiAgICAgICAgICAgICAgICAgICAgWyJlZGl0Il0gPSB2ZXJzaW9uWzFdLA0KICAgICAgICAgICAgICAgICAgICBbInR5cGUiXSA9IGdnLlRZUEVfRFdPUkQNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIFsyXSA9IHsNCiAgICAgICAgICAgICAgICAgICAgWyJhZGRyZXNzIl0gPSBoZWFkZXJfdGFibGVbNl0uYWRkcmVzcywNCiAgICAgICAgICAgICAgICAgICAgWyJlZGl0Il0gPSB2ZXJzaW9uWzJdLA0KICAgICAgICAgICAgICAgICAgICBbInR5cGUiXSA9IGdnLlRZUEVfRFdPUkQNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIGVuZA0KICAgICAgICBpZiBhZGRyZXNzX2VkaXRfdGFibGVfMSB0aGVuDQogICAgICAgICAgICBhZGRyZXNzX2VkaXRfdGFibGUgPSBhZGRyZXNzX2VkaXRfdGFibGVfMQ0KICAgICAgICAgICAgbWV0YWRhdGFEdW1wZXIud3JpdGVWYWx1ZXMoKQ0KICAgICAgICBlbmQNCiAgICAgICAgaWYgYWRkcmVzc19lZGl0X3RhYmxlXzIgdGhlbg0KICAgICAgICAgICAgYWRkcmVzc19lZGl0X3RhYmxlID0gYWRkcmVzc19lZGl0X3RhYmxlXzINCiAgICAgICAgICAgIG1ldGFkYXRhRHVtcGVyLndyaXRlVmFsdWVzKCkNCiAgICAgICAgZW5kDQogICAgICAgIGlmIGFkZHJlc3NfZWRpdF90YWJsZV8zIHRoZW4NCiAgICAgICAgICAgIGFkZHJlc3NfZWRpdF90YWJsZSA9IGFkZHJlc3NfZWRpdF90YWJsZV8zDQogICAgICAgICAgICBtZXRhZGF0YUR1bXBlci53cml0ZVZhbHVlcygpDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJbWV0YWRhdGFEdW1wZXIubWV0aG9kT25lKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIG1ldGhvZE9uZSA9IGZ1bmN0aW9uKCkNCiAgICAgICAgd2hpbGUgKG5pbCkgZG8NCiAgICAgICAgICAgIGxvY2FsIG1ldGhvZE9uZVZhbCA9IHt9DQogICAgICAgICAgICBpZiAobWV0aG9kT25lVmFsLm1ldGhvZE9uZVZhbCkgdGhlbg0KICAgICAgICAgICAgICAgIG1ldGhvZE9uZVZhbC5tZXRob2RPbmVWYWwgPSAobWV0aG9kT25lVmFsLm1ldGhvZE9uZVZhbChtZXRob2RPbmVWYWwpKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBnZy50b2FzdChzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gUnVubmluZyBzZWFyY2ggbWV0aG9kIDEgZm9yIGdsb2JhbC1tZXRhZGF0YS5kYXQg4oS577iPIikNCiAgICAgICAgZ2cuY2xlYXJSZXN1bHRzKCkNCiAgICAgICAgZ2cuc2VhcmNoTnVtYmVyKCJBRmg7MUJoO0IxaDtGQWg6OjUiLCBnZy5UWVBFX0JZVEUsIGZhbHNlLCBuaWwsIG5pbCwgbmlsLCAxKQ0KICAgICAgICBsb2NhbCBtZXRhX3N0YXJ0ID0gZ2cuZ2V0UmVzdWx0cygxKQ0KICAgICAgICBpZiBnZy5nZXRSZXN1bHRzQ291bnQoKSA9PSAwIHRoZW4NCiAgICAgICAgICAgIG1ldGFkYXRhRHVtcGVyLm1ldGhvZFR3bygpDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIG1ldGFkYXRhRHVtcGVyLmdtX2R1bXBlZCA9IHRydWUNCiAgICAgICAgICAgIGdnLmNsZWFyUmVzdWx0cygpDQogICAgICAgICAgICByYW5nZV9kYXRhID0gbWV0YWRhdGFEdW1wZXIuZ2V0UmFuZ2VzKG1ldGFfc3RhcnRbMV0uYWRkcmVzcykNCiAgICAgICAgICAgIG1ldGFkYXRhRHVtcGVyLmR1bXBNZXRhKG1ldGFfc3RhcnRbMV0uYWRkcmVzcywgcmFuZ2VfZGF0YVsyXSkNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCgltZXRhZGF0YUR1bXBlci5tZXRob2RUd28oKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgbWV0aG9kVHdvID0gZnVuY3Rpb24oKQ0KICAgICAgICB3aGlsZSAobmlsKSBkbw0KICAgICAgICAgICAgbG9jYWwgbWV0aG9kVHdvVmFsID0ge30NCiAgICAgICAgICAgIGlmIChtZXRob2RUd29WYWwubWV0aG9kVHdvVmFsKSB0aGVuDQogICAgICAgICAgICAgICAgbWV0aG9kVHdvVmFsLm1ldGhvZFR3b1ZhbCA9IChtZXRob2RUd29WYWwubWV0aG9kVHdvVmFsKG1ldGhvZFR3b1ZhbCkpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGdnLnRvYXN0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBSdW5uaW5nIHNlYXJjaCBtZXRob2QgMiBmb3IgZ2xvYmFsLW1ldGFkYXRhLmRhdCDihLnvuI8iKQ0KICAgICAgICBnZy5jbGVhclJlc3VsdHMoKQ0KICAgICAgICBnZy5zZWFyY2hOdW1iZXIoIjB+MjQ7MjU2fjI3Mjo6NSIsIGdnLlRZUEVfRFdPUkQpDQogICAgICAgIGdnLnJlZmluZU51bWJlcigiMjQiLCBnZy5UWVBFX0RXT1JEKQ0KICAgICAgICBsb2NhbCBydGFibGUgPSBnZy5nZXRSZXN1bHRzKGdnLmdldFJlc3VsdHNDb3VudCgpKQ0KICAgICAgICBnZy5jbGVhclJlc3VsdHMoKQ0KICAgICAgICByZXN1bHRzID0ge30NCiAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMocnRhYmxlKSBkbw0KICAgICAgICAgICAgbG9jYWwgc3RhcnRfYWRkcmVzcyA9IHYuYWRkcmVzcw0KICAgICAgICAgICAgbG9jYWwgY3VycmVudF9hZGRyZXNzID0gdi5hZGRyZXNzDQogICAgICAgICAgICBsb2NhbCBlbmRfYWRkcmVzcyA9IHN0YXJ0X2FkZHJlc3MgKyA0NA0KICAgICAgICAgICAgbG9jYWwgdmFsdWVfdGFibGUgPSB7fQ0KICAgICAgICAgICAgbG9jYWwgdGluZGV4ID0gMQ0KICAgICAgICAgICAgcmVwZWF0DQogICAgICAgICAgICAgICAgdmFsdWVfdGFibGVbdGluZGV4XSA9IHt9DQogICAgICAgICAgICAgICAgdmFsdWVfdGFibGVbdGluZGV4XS5hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzDQogICAgICAgICAgICAgICAgdmFsdWVfdGFibGVbdGluZGV4XS5mbGFncyA9IGdnLlRZUEVfRFdPUkQNCiAgICAgICAgICAgICAgICBjdXJyZW50X2FkZHJlc3MgPSBjdXJyZW50X2FkZHJlc3MgKyA0DQogICAgICAgICAgICAgICAgdGluZGV4ID0gdGluZGV4ICsgMQ0KICAgICAgICAgICAgdW50aWwgKGN1cnJlbnRfYWRkcmVzcyA9PSBlbmRfYWRkcmVzcykNCiAgICAgICAgICAgIHZhbHVlX3RhYmxlID0gZ2cuZ2V0VmFsdWVzKHZhbHVlX3RhYmxlKQ0KICAgICAgICAgICAgaWYgdmFsdWVfdGFibGVbM10udmFsdWUgPiB2YWx1ZV90YWJsZVsyXS52YWx1ZSBhbmQgDQoJCQkJdmFsdWVfdGFibGVbNF0udmFsdWUgPiB2YWx1ZV90YWJsZVszXS52YWx1ZSBhbmQNCiAgICAgICAgICAgICAgICB2YWx1ZV90YWJsZVs1XS52YWx1ZSA+IHZhbHVlX3RhYmxlWzRdLnZhbHVlIGFuZCANCgkJCQl2YWx1ZV90YWJsZVs2XS52YWx1ZSA+IHZhbHVlX3RhYmxlWzVdLnZhbHVlIGFuZA0KICAgICAgICAgICAgICAgIHZhbHVlX3RhYmxlWzddLnZhbHVlID4gdmFsdWVfdGFibGVbNl0udmFsdWUgYW5kIA0KCQkJCXZhbHVlX3RhYmxlWzhdLnZhbHVlID4gdmFsdWVfdGFibGVbN10udmFsdWUgYW5kDQogICAgICAgICAgICAgICAgdmFsdWVfdGFibGVbOV0udmFsdWUgPCB2YWx1ZV90YWJsZVs4XS52YWx1ZSBhbmQgDQoJCQkJdmFsdWVfdGFibGVbMTBdLnZhbHVlID4gdmFsdWVfdGFibGVbOV0udmFsdWUgdGhlbg0KICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChyZXN1bHRzLCBzdGFydF9hZGRyZXNzKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBpZiAjcmVzdWx0cyA9PSAxIHRoZW4NCiAgICAgICAgICAgIG1ldGFkYXRhRHVtcGVyLmdtX2R1bXBlZCA9IHRydWUNCiAgICAgICAgICAgIGxvY2FsIG1ldGFfc3RhcnQgPSByZXN1bHRzWzFdIC0gNA0KICAgICAgICAgICAgcmFuZ2VfZGF0YSA9IG1ldGFkYXRhRHVtcGVyLmdldFJhbmdlcyhtZXRhX3N0YXJ0KQ0KICAgICAgICAgICAgbWV0YWRhdGFEdW1wZXIuY2hlY2tIZWFkZXIobWV0YV9zdGFydCkNCiAgICAgICAgICAgIG1ldGFkYXRhRHVtcGVyLmR1bXBNZXRhKG1ldGFfc3RhcnQsIHJhbmdlX2RhdGFbMl0pDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIG1ldGFkYXRhRHVtcGVyLm1ldGhvZFRocmVlKCkNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCgltZXRhZGF0YUR1bXBlci5tZXRob2RUaHJlZSgpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBtZXRob2RUaHJlZSA9IGZ1bmN0aW9uKCkNCiAgICAgICAgd2hpbGUgKG5pbCkgZG8NCiAgICAgICAgICAgIGxvY2FsIG1ldGhvZFRocmVlVmFsID0ge30NCiAgICAgICAgICAgIGlmIChtZXRob2RUaHJlZVZhbC5tZXRob2RUaHJlZVZhbCkgdGhlbg0KICAgICAgICAgICAgICAgIG1ldGhvZFRocmVlVmFsLm1ldGhvZFRocmVlVmFsID0gKG1ldGhvZFRocmVlVmFsLm1ldGhvZFRocmVlVmFsKG1ldGhvZFRocmVlVmFsKSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZ2cudG9hc3Qoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIFJ1bm5pbmcgc2VhcmNoIG1ldGhvZCAzIGZvciBnbG9iYWwtbWV0YWRhdGEuZGF0IOKEue+4jyIpDQogICAgICAgIGdnLmNsZWFyUmVzdWx0cygpDQogICAgICAgIGdnLnNlYXJjaE51bWJlcigiMjdoOzI4aDsyOWg7MkNoOzJEaDsyRWg7MkZoOjo3IiwgZ2cuVFlQRV9CWVRFLCBmYWxzZSwgbmlsLCBuaWwsIG5pbCwgMSkNCiAgICAgICAgbG9jYWwgc20xID0gZ2cuZ2V0UmVzdWx0cygxKQ0KICAgICAgICBpZiBnZy5nZXRSZXN1bHRzQ291bnQoKSA9PSAwIHRoZW4NCiAgICAgICAgICAgIGdnLmFsZXJ0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBObyByZXN1bHRzIOKEue+4j1xuXG5Ucnkgb3RoZXIgbWV0aG9kcyBpZiB5b3UgaGF2ZSBub3QgYWxyZWFkeS4iKQ0KICAgICAgICBlbHNlDQogICAgICAgICAgICBtZXRhZGF0YUR1bXBlci5nbV9kdW1wZWQgPSB0cnVlDQogICAgICAgICAgICBnZy5jbGVhclJlc3VsdHMoKQ0KICAgICAgICAgICAgcmFuZ2VfZGF0YSA9IG1ldGFkYXRhRHVtcGVyLmdldFJhbmdlcyhzbTFbMV0uYWRkcmVzcykNCiAgICAgICAgICAgIHRydWVfc3RhcnQgPSBtZXRhZGF0YUR1bXBlci5nZXRNZXRhU3RhcnQocmFuZ2VfZGF0YVsxXSkNCiAgICAgICAgICAgIG1ldGFkYXRhRHVtcGVyLmNoZWNrSGVhZGVyKHRydWVfc3RhcnQpDQogICAgICAgICAgICBtZXRhZGF0YUR1bXBlci5kdW1wTWV0YSh0cnVlX3N0YXJ0LCByYW5nZV9kYXRhWzJdKQ0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCW1ldGFkYXRhRHVtcGVyLmdldE1ldGFTdGFydCgpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBnZXRNZXRhU3RhcnQgPSBmdW5jdGlvbihyYW5nZV9zdGFydCkNCiAgICAgICAgd2hpbGUgKG5pbCkgZG8NCiAgICAgICAgICAgIGxvY2FsIGdldE1ldGFTdGFydFZhbCA9IHt9DQogICAgICAgICAgICBpZiAoZ2V0TWV0YVN0YXJ0VmFsLmdldE1ldGFTdGFydFZhbCkgdGhlbg0KICAgICAgICAgICAgICAgIGdldE1ldGFTdGFydFZhbC5nZXRNZXRhU3RhcnRWYWwgPSAoZ2V0TWV0YVN0YXJ0VmFsLmdldE1ldGFTdGFydFZhbChnZXRNZXRhU3RhcnRWYWwpKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICByZXBlYXQNCiAgICAgICAgICAgIHN0YXJ0X2FkZHJlc3MgPSByYW5nZV9zdGFydA0KICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gcmFuZ2Vfc3RhcnQNCiAgICAgICAgICAgIGVuZF9hZGRyZXNzID0gc3RhcnRfYWRkcmVzcyArIDQ0DQogICAgICAgICAgICB2YWx1ZV90YWJsZSA9IHt9DQogICAgICAgICAgICB0aW5kZXggPSAxDQogICAgICAgICAgICByZXBlYXQNCiAgICAgICAgICAgICAgICB2YWx1ZV90YWJsZVt0aW5kZXhdID0ge30NCiAgICAgICAgICAgICAgICB2YWx1ZV90YWJsZVt0aW5kZXhdLmFkZHJlc3MgPSBjdXJyZW50X2FkZHJlc3MNCiAgICAgICAgICAgICAgICB2YWx1ZV90YWJsZVt0aW5kZXhdLmZsYWdzID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICAgICAgICAgIGN1cnJlbnRfYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcyArIDQNCiAgICAgICAgICAgICAgICB0aW5kZXggPSB0aW5kZXggKyAxDQogICAgICAgICAgICB1bnRpbCAoY3VycmVudF9hZGRyZXNzID09IGVuZF9hZGRyZXNzKQ0KICAgICAgICAgICAgdmFsdWVfdGFibGUgPSBnZy5nZXRWYWx1ZXModmFsdWVfdGFibGUpDQogICAgICAgICAgICBpZiB2YWx1ZV90YWJsZVs1XS52YWx1ZSA+IHZhbHVlX3RhYmxlWzRdLnZhbHVlIGFuZCANCgkJCQl2YWx1ZV90YWJsZVs0XS52YWx1ZSA+IDAgYW5kIA0KCQkJCXZhbHVlX3RhYmxlWzVdLnZhbHVlID4gMCBhbmQNCiAgICAgICAgICAgICAgICB2YWx1ZV90YWJsZVs2XS52YWx1ZSA+IHZhbHVlX3RhYmxlWzVdLnZhbHVlIGFuZCANCgkJCQl2YWx1ZV90YWJsZVs1XS52YWx1ZSA+IDAgYW5kIA0KCQkJCXZhbHVlX3RhYmxlWzZdLnZhbHVlID4gMCB0aGVuDQogICAgICAgICAgICAgICAgbWV0YV9mb3VuZCA9IHRydWUNCiAgICAgICAgICAgICAgICByZXR1cm4gbWV0YWRhdGFEdW1wZXIuaGV4X28ocmFuZ2Vfc3RhcnQpDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgcmFuZ2Vfc3RhcnQgPSByYW5nZV9zdGFydCArIDB4MTAwMDANCiAgICAgICAgICAgIGVuZA0KICAgICAgICB1bnRpbCAobWV0YV9mb3VuZCA9PSB0cnVlKQ0KICAgIGVuZCwNCiAgICBoZXhfbyA9IGZ1bmN0aW9uKG4pDQogICAgICAgIHJldHVybiAiMHgiIC4uIHN0cmluZy51cHBlcihzdHJpbmcuZm9ybWF0KCIleCIsIG4pKQ0KICAgIGVuZCwNCiAgICBoZXhueCA9IGZ1bmN0aW9uKG4pDQogICAgICAgIHJldHVybiBzdHJpbmcuZm9ybWF0KCIlWCIsIG4pDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCgltZXRhZGF0YUR1bXBlci5kdW1wTWV0YSgpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBkdW1wTWV0YSA9IGZ1bmN0aW9uKHJhbmdlX3N0YXJ0LCByYW5nZV9lbmQpDQogICAgICAgIHdoaWxlIChuaWwpIGRvDQogICAgICAgICAgICBsb2NhbCBkdW1wTWV0YVZhbCA9IHt9DQogICAgICAgICAgICBpZiAoZHVtcE1ldGFWYWwuZHVtcE1ldGFWYWwpIHRoZW4NCiAgICAgICAgICAgICAgICBkdW1wTWV0YVZhbC5kdW1wTWV0YVZhbCA9IChkdW1wTWV0YVZhbC5kdW1wTWV0YVZhbChkdW1wTWV0YVZhbCkpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGdnLmR1bXBNZW1vcnkobWV0YWRhdGFEdW1wZXIuaGV4X28ocmFuZ2Vfc3RhcnQpLCBtZXRhZGF0YUR1bXBlci5oZXhfbyhyYW5nZV9lbmQpLA0KICAgICAgICAgICAgZGF0YVBhdGggLi4gZ2FtZV9wYXRoIC4uICIvZHVtcC8iLCBnZy5EVU1QX1NLSVBfU1lTVEVNX0xJQlMpDQogICAgICAgIGxvY2FsIGZpbGUgPSBpby5vcGVuKGRhdGFQYXRoIC4uIGdhbWVfcGF0aCAuLiAiL2R1bXAvIiAuLiBnZy5nZXRUYXJnZXRQYWNrYWdlKCkgLi4gIi0iIC4uIG1ldGFkYXRhRHVtcGVyLmhleG54KHJhbmdlX3N0YXJ0KSAuLiAiLSIgLi4gbWV0YWRhdGFEdW1wZXIuaGV4bngocmFuZ2VfZW5kKSAuLiAiLmJpbiIsICJyIikNCiAgICAgICAgaWYgZmlsZSA9PSBuaWwgdGhlbg0KICAgICAgICAgICAgOjpjaG9vc2VfZmlsZTo6DQogICAgICAgICAgICBnZy5hbGVydChzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gQWRkaXRpb25hbCBEYXRhIER1bXBlZCDihLnvuI9cblxuVGhlIGZpbGUgbWF5IG5lZWQgdG8gYmUgdHJpbW1lZCwgc2VsZWN0IHRoZSBtb3N0IHJlY2VudCBiaW4gZmlsZSBpbiB0aGUgZGVmYXVsdCBkaXJlY3RvcnkuIikNCiAgICAgICAgICAgIGxvY2FsIGJpbl9maWxlbmFtZSA9IGdnLnByb21wdCh7c2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIFNlbGVjdCBOZXdlc3QgLmJpbiBGaWxlIOKEue+4jyJ9LCB7DQogICAgICAgICAgICAgICAgWzFdID0gZGF0YVBhdGggLi4gZ2FtZV9wYXRoIC4uICIvZHVtcC8iDQogICAgICAgICAgICB9LCB7DQogICAgICAgICAgICAgICAgWzFdID0gImZpbGUiDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgaWYgYmluX2ZpbGVuYW1lID09IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgZ290byBjaG9vc2VfZmlsZQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBzdHJpbmcuZmluZChiaW5fZmlsZW5hbWVbMV0sICIlLmJpbiIpIHRoZW4NCiAgICAgICAgICAgICAgICBsb2NhbCBmaWxlID0gYXNzZXJ0KGlvLm9wZW4oYmluX2ZpbGVuYW1lWzFdLCAiciIpKQ0KICAgICAgICAgICAgICAgIGxvY2FsIGNvbnRlbnQgPSBmaWxlOnJlYWQoIiphIikNCiAgICAgICAgICAgICAgICBmaWxlOmNsb3NlKCkNCiAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZChjb250ZW50LCAiXlx4QUZceDFCXHhCMVx4RkEiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHRyaW1tZWRfY29udGVudCA9IGNvbnRlbnQNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIHRyaW1tZWRfY29udGVudCA9IHN0cmluZy5nc3ViKGNvbnRlbnQsICIuKyhceEFGXHgxQlx4QjFceEZBLispIiwgIiUxIikNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBsb2NhbCBmaWxlID0gaW8ub3BlbihkYXRhUGF0aCAuLiBnYW1lX3BhdGggLi4gIi9kdW1wL2dsb2JhbC1tZXRhZGF0YS5kYXQiLCAidysiKQ0KICAgICAgICAgICAgICAgIGZpbGU6d3JpdGUodHJpbW1lZF9jb250ZW50KQ0KICAgICAgICAgICAgICAgIGZpbGU6Y2xvc2UoKQ0KICAgICAgICAgICAgICAgIGxvY2FsIGZpbGUgPSBpby5vcGVuKGRhdGFQYXRoIC4uIGdhbWVfcGF0aCAuLiAiL2R1bXAvZ2xvYmFsLW1ldGFkYXRhIGR1bXAgYWRkcmVzcy50eHQiLCAidysiKQ0KICAgICAgICAgICAgICAgIGZpbGU6d3JpdGUobWV0YWRhdGFEdW1wZXIuaGV4bngocmFuZ2Vfc3RhcnQpKQ0KICAgICAgICAgICAgICAgIGZpbGU6Y2xvc2UoKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBnZy5hbGVydChzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gRmlsZSBUcmltbWVkIOKEue+4j1xuXG5TYXZlZCB0bzogIiAuLiBkYXRhUGF0aCAuLiBnYW1lX3BhdGggLi4gIi9kdW1wL2dsb2JhbC1tZXRhZGF0YS5kYXQgIikNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgbG9jYWwgbWV0YV9jb250ZW50ID0gZmlsZTpyZWFkKCIqYSIpDQogICAgICAgICAgICBmaWxlOmNsb3NlKCkNCiAgICAgICAgICAgIGxvY2FsIGZpbGUgPSBpby5vcGVuKGRhdGFQYXRoIC4uIGdhbWVfcGF0aCAuLiAiL2R1bXAvZ2xvYmFsLW1ldGFkYXRhLmRhdCIsICJ3KyIpDQogICAgICAgICAgICBmaWxlOndyaXRlKG1ldGFfY29udGVudCkNCiAgICAgICAgICAgIGZpbGU6Y2xvc2UoKQ0KICAgICAgICAgICAgbG9jYWwgZmlsZSA9IGlvLm9wZW4oZGF0YVBhdGggLi4gZ2FtZV9wYXRoIC4uICIvZHVtcC9nbG9iYWwtbWV0YWRhdGEgZHVtcCBhZGRyZXNzLnR4dCIsICJ3KyIpDQogICAgICAgICAgICBmaWxlOndyaXRlKG1ldGFkYXRhRHVtcGVyLmhleG54KHJhbmdlX3N0YXJ0KSkNCiAgICAgICAgICAgIGZpbGU6Y2xvc2UoKQ0KICAgICAgICAgICAgbWV0YWRhdGFEdW1wZXIub3ZlcndyaXRlVmFsdWVzKCkNCiAgICAgICAgICAgIGdnLmFsZXJ0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBEYXRhIER1bXBlZCDihLnvuI9cblxuU2F2ZWQgdG86ICIgLi4gZGF0YVBhdGggLi4gZ2FtZV9wYXRoIC4uICIvZHVtcC9nbG9iYWwtbWV0YWRhdGEuZGF0ICIpDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJbWV0YWRhdGFEdW1wZXIuZ2V0V3JpdGVMb2NhdGlvbigpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBnZXRXcml0ZUxvY2F0aW9uID0gZnVuY3Rpb24oKQ0KICAgICAgICB3aGlsZSAobmlsKSBkbw0KICAgICAgICAgICAgbG9jYWwgZ2V0V3JpdGVMb2NhdGlvblZhbCA9IHt9DQogICAgICAgICAgICBpZiAoZ2V0V3JpdGVMb2NhdGlvblZhbC5nZXRXcml0ZUxvY2F0aW9uVmFsKSB0aGVuDQogICAgICAgICAgICAgICAgZ2V0V3JpdGVMb2NhdGlvblZhbC5nZXRXcml0ZUxvY2F0aW9uVmFsID0gKGdldFdyaXRlTG9jYXRpb25WYWwuZ2V0V3JpdGVMb2NhdGlvblZhbChnZXRXcml0ZUxvY2F0aW9uVmFsKSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgaWYgd3JpdGVfbG9jYXRpb24gPT0gbmlsIHRoZW4NCiAgICAgICAgICAgIHdyaXRlX2xvY2F0aW9uID0gcmFuZ2VfZGF0YVsyXSAtIDE2DQogICAgICAgIGVuZA0KICAgICAgICByZXR1cm4gd3JpdGVfbG9jYXRpb24NCiAgICBlbmQsDQogICAgb3ZlcndyaXRlVmFsdWVzID0gZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCB3bCA9IG1ldGFkYXRhRHVtcGVyLmdldFdyaXRlTG9jYXRpb24oKQ0KICAgICAgICBhZGRyZXNzX2VkaXRfdGFibGUgPSB7DQogICAgICAgICAgICBbMV0gPSB7DQogICAgICAgICAgICAgICAgWyJhZGRyZXNzIl0gPSB3bCwNCiAgICAgICAgICAgICAgICBbImVkaXQiXSA9IDAsDQogICAgICAgICAgICAgICAgWyJ0eXBlIl0gPSBnZy5UWVBFX0RXT1JEDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgWzJdID0gew0KICAgICAgICAgICAgICAgIFsiYWRkcmVzcyJdID0gd2wgKyA0LA0KICAgICAgICAgICAgICAgIFsiZWRpdCJdID0gMCwNCiAgICAgICAgICAgICAgICBbInR5cGUiXSA9IGdnLlRZUEVfRFdPUkQNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBbM10gPSB7DQogICAgICAgICAgICAgICAgWyJhZGRyZXNzIl0gPSB3bCArIDgsDQogICAgICAgICAgICAgICAgWyJlZGl0Il0gPSAwLA0KICAgICAgICAgICAgICAgIFsidHlwZSJdID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIG1ldGFkYXRhRHVtcGVyLndyaXRlVmFsdWVzKCkNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCW1ldGFkYXRhRHVtcGVyLndyaXRlVmFsdWVzKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIHdyaXRlVmFsdWVzID0gZnVuY3Rpb24oKQ0KICAgICAgICB3aGlsZSAobmlsKSBkbw0KICAgICAgICAgICAgbG9jYWwgd3JpdGVWYWx1ZXNWYWwgPSB7fQ0KICAgICAgICAgICAgaWYgKHdyaXRlVmFsdWVzVmFsLndyaXRlVmFsdWVzVmFsKSB0aGVuDQogICAgICAgICAgICAgICAgd3JpdGVWYWx1ZXNWYWwud3JpdGVWYWx1ZXNWYWwgPSAod3JpdGVWYWx1ZXNWYWwud3JpdGVWYWx1ZXNWYWwod3JpdGVWYWx1ZXNWYWwpKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBsb2NhbCB3bCA9IG1ldGFkYXRhRHVtcGVyLmdldFdyaXRlTG9jYXRpb24oKQ0KICAgICAgICBsb2NhbCB0ZW1wX3RhYmxlID0ge30NCiAgICAgICAgaWYgI2FkZHJlc3NfZWRpdF90YWJsZSA9PSA0IHRoZW4NCiAgICAgICAgICAgIHRlbXBfdGFibGVbMV0gPSB7fQ0KICAgICAgICAgICAgdGVtcF90YWJsZVsxXS5hZGRyZXNzID0gd2wNCiAgICAgICAgICAgIHRlbXBfdGFibGVbMV0uZmxhZ3MgPSBhZGRyZXNzX2VkaXRfdGFibGVbMV0udHlwZQ0KICAgICAgICAgICAgdGVtcF90YWJsZVsxXS52YWx1ZSA9IGFkZHJlc3NfZWRpdF90YWJsZVsxXS5lZGl0DQogICAgICAgICAgICB0ZW1wX3RhYmxlWzJdID0ge30NCiAgICAgICAgICAgIHRlbXBfdGFibGVbMl0uYWRkcmVzcyA9IHdsICsgMQ0KICAgICAgICAgICAgdGVtcF90YWJsZVsyXS5mbGFncyA9IGFkZHJlc3NfZWRpdF90YWJsZVsyXS50eXBlDQogICAgICAgICAgICB0ZW1wX3RhYmxlWzJdLnZhbHVlID0gYWRkcmVzc19lZGl0X3RhYmxlWzJdLmVkaXQNCiAgICAgICAgICAgIHRlbXBfdGFibGVbM10gPSB7fQ0KICAgICAgICAgICAgdGVtcF90YWJsZVszXS5hZGRyZXNzID0gd2wgKyAyDQogICAgICAgICAgICB0ZW1wX3RhYmxlWzNdLmZsYWdzID0gYWRkcmVzc19lZGl0X3RhYmxlWzNdLnR5cGUNCiAgICAgICAgICAgIHRlbXBfdGFibGVbM10udmFsdWUgPSBhZGRyZXNzX2VkaXRfdGFibGVbM10uZWRpdA0KICAgICAgICAgICAgdGVtcF90YWJsZVs0XSA9IHt9DQogICAgICAgICAgICB0ZW1wX3RhYmxlWzRdLmFkZHJlc3MgPSB3bCArIDMNCiAgICAgICAgICAgIHRlbXBfdGFibGVbNF0uZmxhZ3MgPSBhZGRyZXNzX2VkaXRfdGFibGVbNF0udHlwZQ0KICAgICAgICAgICAgdGVtcF90YWJsZVs0XS52YWx1ZSA9IGFkZHJlc3NfZWRpdF90YWJsZVs0XS5lZGl0DQogICAgICAgICAgICBnZy5zZXRWYWx1ZXModGVtcF90YWJsZSkNCiAgICAgICAgICAgIGdnLmNvcHlNZW1vcnkod2wsIGFkZHJlc3NfZWRpdF90YWJsZVsxXVsiYWRkcmVzcyJdLCA0KQ0KICAgICAgICAgICAgdGVtcF90YWJsZVsxXS52YWx1ZSA9IDANCiAgICAgICAgICAgIHRlbXBfdGFibGVbMl0udmFsdWUgPSAwDQogICAgICAgICAgICB0ZW1wX3RhYmxlWzNdLnZhbHVlID0gMA0KICAgICAgICAgICAgdGVtcF90YWJsZVs0XS52YWx1ZSA9IDANCiAgICAgICAgICAgIGdnLnNldFZhbHVlcyh0ZW1wX3RhYmxlKQ0KICAgICAgICAgICAgZ2cuc2V0VmFsdWVzKHRlbXBfdGFibGUpDQogICAgICAgIGVuZA0KICAgICAgICBpZiAjYWRkcmVzc19lZGl0X3RhYmxlID09IDIgdGhlbg0KICAgICAgICAgICAgdGVtcF90YWJsZVsxXSA9IHt9DQogICAgICAgICAgICB0ZW1wX3RhYmxlWzFdLmFkZHJlc3MgPSB3bCArIDQNCiAgICAgICAgICAgIHRlbXBfdGFibGVbMV0uZmxhZ3MgPSBhZGRyZXNzX2VkaXRfdGFibGVbMV0udHlwZQ0KICAgICAgICAgICAgdGVtcF90YWJsZVsxXS52YWx1ZSA9IGFkZHJlc3NfZWRpdF90YWJsZVsxXS5lZGl0DQogICAgICAgICAgICB0ZW1wX3RhYmxlWzJdID0ge30NCiAgICAgICAgICAgIHRlbXBfdGFibGVbMl0uYWRkcmVzcyA9IHdsICsgOA0KICAgICAgICAgICAgdGVtcF90YWJsZVsyXS5mbGFncyA9IGFkZHJlc3NfZWRpdF90YWJsZVsyXS50eXBlDQogICAgICAgICAgICB0ZW1wX3RhYmxlWzJdLnZhbHVlID0gYWRkcmVzc19lZGl0X3RhYmxlWzJdLmVkaXQNCiAgICAgICAgICAgIGdnLnNldFZhbHVlcyh0ZW1wX3RhYmxlKQ0KICAgICAgICAgICAgZ2cuY29weU1lbW9yeShtZXRhZGF0YUR1bXBlci5nZXRXcml0ZUxvY2F0aW9uKCkgKyA0LCBhZGRyZXNzX2VkaXRfdGFibGVbMV0uYWRkcmVzcywgOCkNCiAgICAgICAgICAgIHRlbXBfdGFibGVbMV0udmFsdWUgPSAwDQogICAgICAgICAgICB0ZW1wX3RhYmxlWzJdLnZhbHVlID0gMA0KICAgICAgICAgICAgZ2cuc2V0VmFsdWVzKHRlbXBfdGFibGUpDQogICAgICAgICAgICBnZy5zZXRWYWx1ZXModGVtcF90YWJsZSkNCiAgICAgICAgZW5kDQogICAgICAgIGlmICNhZGRyZXNzX2VkaXRfdGFibGUgPT0gMyB0aGVuDQogICAgICAgICAgICB0ZW1wX3RhYmxlWzFdID0ge30NCiAgICAgICAgICAgIHRlbXBfdGFibGVbMV0uYWRkcmVzcyA9IHdsICsgNA0KICAgICAgICAgICAgdGVtcF90YWJsZVsxXS5mbGFncyA9IGFkZHJlc3NfZWRpdF90YWJsZVsxXS50eXBlDQogICAgICAgICAgICB0ZW1wX3RhYmxlWzFdLnZhbHVlID0gYWRkcmVzc19lZGl0X3RhYmxlWzFdLmVkaXQNCiAgICAgICAgICAgIHRlbXBfdGFibGVbMl0gPSB7fQ0KICAgICAgICAgICAgdGVtcF90YWJsZVsyXS5hZGRyZXNzID0gd2wgKyA4DQogICAgICAgICAgICB0ZW1wX3RhYmxlWzJdLmZsYWdzID0gYWRkcmVzc19lZGl0X3RhYmxlWzJdLnR5cGUNCiAgICAgICAgICAgIHRlbXBfdGFibGVbMl0udmFsdWUgPSBhZGRyZXNzX2VkaXRfdGFibGVbMl0uZWRpdA0KICAgICAgICAgICAgdGVtcF90YWJsZVszXSA9IHt9DQogICAgICAgICAgICB0ZW1wX3RhYmxlWzNdLmFkZHJlc3MgPSB3bCArIDEyDQogICAgICAgICAgICB0ZW1wX3RhYmxlWzNdLmZsYWdzID0gYWRkcmVzc19lZGl0X3RhYmxlWzJdLnR5cGUNCiAgICAgICAgICAgIHRlbXBfdGFibGVbM10udmFsdWUgPSBhZGRyZXNzX2VkaXRfdGFibGVbMl0uZWRpdA0KICAgICAgICAgICAgZ2cuc2V0VmFsdWVzKHRlbXBfdGFibGUpDQogICAgICAgICAgICBnZy5jb3B5TWVtb3J5KG1ldGFkYXRhRHVtcGVyLmdldFdyaXRlTG9jYXRpb24oKSArIDQsIGFkZHJlc3NfZWRpdF90YWJsZVsxXS5hZGRyZXNzLCAxMikNCiAgICAgICAgICAgIGdnLnNldFZhbHVlcyh0ZW1wX3RhYmxlKQ0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCW1ldGFkYXRhRHVtcGVyLmR1bXBHbG9iYWxNZXRhZGF0YSgpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBkdW1wR2xvYmFsTWV0YWRhdGEgPSBmdW5jdGlvbigpDQogICAgICAgIHdoaWxlIChuaWwpIGRvDQogICAgICAgICAgICBsb2NhbCBkdW1wR2xvYmFsTWV0YWRhdGFWYWwgPSB7fQ0KICAgICAgICAgICAgaWYgKGR1bXBHbG9iYWxNZXRhZGF0YVZhbC5kdW1wR2xvYmFsTWV0YWRhdGFWYWwpIHRoZW4NCiAgICAgICAgICAgICAgICBkdW1wR2xvYmFsTWV0YWRhdGFWYWwuZHVtcEdsb2JhbE1ldGFkYXRhVmFsID0gKGR1bXBHbG9iYWxNZXRhZGF0YVZhbC5kdW1wR2xvYmFsTWV0YWRhdGFWYWwoZHVtcEdsb2JhbE1ldGFkYXRhVmFsKSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZ2cuc2V0UmFuZ2VzKGdnLlJFR0lPTl9DX0FMTE9DIHwgZ2cuUkVHSU9OX0NfREFUQSB8IGdnLlJFR0lPTl9DX0JTUyB8IGdnLlJFR0lPTl9PVEhFUikNCiAgICAgICAgbWV0YWRhdGFEdW1wZXIubWV0aG9kT25lKCkNCiAgICAgICAgaWYgbWV0YWRhdGFEdW1wZXIuZ21fZHVtcGVkID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgIG1ldGFkYXRhRHVtcGVyLm1ldGhvZFR3bygpDQogICAgICAgIGVuZA0KICAgICAgICBpZiBtZXRhZGF0YUR1bXBlci5nbV9kdW1wZWQgPT0gZmFsc2UgdGhlbg0KICAgICAgICAgICAgbWV0YWRhdGFEdW1wZXIubWV0aG9kVGhyZWUoKQ0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgdXZfYSA9IHt7DQogICAgICAgIFsidmVyc2lvbnMiXSA9IHsiMjAxNyIsICIyMDE4In0sDQogICAgICAgIFsiaGVhZGVycyJdID0geyIyNCIsICIyNzIifQ0KICAgIH0sIHsNCiAgICAgICAgWyJ2ZXJzaW9ucyJdID0geyIyMDE5In0sDQogICAgICAgIFsiaGVhZGVycyJdID0geyIyNCIsICIyNjQifQ0KICAgIH0sIHsNCiAgICAgICAgWyJ2ZXJzaW9ucyJdID0geyIyMDIwIn0sDQogICAgICAgIFsiaGVhZGVycyJdID0geyIyNyIsICIyNTYifQ0KICAgIH19LA0KICAgIGdtX2R1bXBlZCA9IGZhbHNlDQp9DQp0YXJnZXRfcGFja2FnZSA9IGdnLmdldFRhcmdldFBhY2thZ2UoKQ0KbWV0YWRhdGFEdW1wZXIuZHVtcEdsb2JhbE1ldGFkYXRhKCkNCg"
        },
        [12] = {
            file_name = "plugin_bc_il2cpp_edits.lua",
            file_data = "aWwyY3BwRWRpdHMgPSB7DQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWlsMmNwcEVkaXRzLmNyZWF0ZURpcmVjdG9yeSgpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBjcmVhdGVEaXJlY3RvcnkgPSBmdW5jdGlvbigpDQogICAgICAgIGRpcmVjdG9yeV9jcmVhdGVkID0gdHJ1ZQ0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhnZy5nZXRSYW5nZXNMaXN0KCkpIGRvDQogICAgICAgICAgICBpZiB2WyJlbmQiXSAtIHYuc3RhcnQgPCAxMDI0MCB0aGVuDQogICAgICAgICAgICAgICAgaWYgbm90IHN0cmluZy5maW5kKHZbIm5hbWUiXSwgImRlbGV0ZWQiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGNyZWF0ZV9zdGFydCA9IHYuc3RhcnQNCiAgICAgICAgICAgICAgICAgICAgY3JlYXRlX2VuZCA9IHZbImVuZCJdDQogICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGdnLmR1bXBNZW1vcnkoY3JlYXRlX3N0YXJ0LCBjcmVhdGVfZW5kLCBpbDJjcHBFZGl0cy5zYXZlUGF0aCwgZ2cuRFVNUF9TS0lQX1NZU1RFTV9MSUJTKQ0KICAgIGVuZCwNCiAgICBzYXZlUGF0aCA9IHBsdWdpbnNEYXRhUGF0aCAuLiAiYmFkY2FzZV9pbDJjcHBfZWRpdHNfZGF0YS8iLA0KICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC0tIEdsb2JhbCBWYXJpYWJsZXMtLQ0KICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIGNsb2NrcyA9IHsNCiAgICAgICAgWzFdID0gJ/CflaYnLA0KICAgICAgICBbMl0gPSAn8J+VmicsDQogICAgICAgIFszXSA9ICfwn5WlJywNCiAgICAgICAgWzRdID0gJ/CflZknLA0KICAgICAgICBbNV0gPSAn8J+VpCcsDQogICAgICAgIFs2XSA9ICfwn5WYJywNCiAgICAgICAgWzddID0gJ/CflaMnLA0KICAgICAgICBbOF0gPSAn8J+VlycsDQogICAgICAgIFs5XSA9ICfwn5WiJywNCiAgICAgICAgWzEwXSA9ICfwn5WWJywNCiAgICAgICAgWzExXSA9ICfwn5WhJywNCiAgICAgICAgWzEyXSA9ICfwn5WVJywNCiAgICAgICAgWzEzXSA9ICfwn5WgJywNCiAgICAgICAgWzE0XSA9ICfwn5WUJywNCiAgICAgICAgWzE1XSA9ICfwn5WfJywNCiAgICAgICAgWzE2XSA9ICfwn5WTJywNCiAgICAgICAgWzE3XSA9ICfwn5WeJywNCiAgICAgICAgWzE4XSA9ICfwn5WSJywNCiAgICAgICAgWzE5XSA9ICfwn5WdJywNCiAgICAgICAgWzIwXSA9ICfwn5WRJywNCiAgICAgICAgWzIxXSA9ICfwn5WcJywNCiAgICAgICAgWzIyXSA9ICfwn5WQJywNCiAgICAgICAgWzIzXSA9ICfwn5WnJywNCiAgICAgICAgWzI0XSA9ICfwn5WbJw0KICAgIH0sDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWlsMmNwcEVkaXRzLnRpY2tDbG9jaygpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICB0aWNrQ2xvY2sgPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIGNsb2NrX3N0cmluZyA9ICIiDQogICAgICAgIGxvY2FsIGNsb2Nrc190b19zaG93ID0gMTANCiAgICAgICAgbG9jYWwgY2xvY2tfY291bnQgPSAwDQogICAgICAgIHJlcGVhdA0KICAgICAgICAgICAgY2xvY2tfc3RyaW5nID0gY2xvY2tfc3RyaW5nIC4uIGlsMmNwcEVkaXRzLmNsb2Nrc1sxXQ0KICAgICAgICAgICAgY2xvY2tfY291bnQgPSBjbG9ja19jb3VudCArIDENCiAgICAgICAgdW50aWwgKGNsb2NrX2NvdW50ID09IGNsb2Nrc190b19zaG93KQ0KICAgICAgICB0YWJsZS5pbnNlcnQoaWwyY3BwRWRpdHMuY2xvY2tzLCAxLCBpbDJjcHBFZGl0cy5jbG9ja3NbI2lsMmNwcEVkaXRzLmNsb2Nrc10pDQogICAgICAgIHRhYmxlLnJlbW92ZShpbDJjcHBFZGl0cy5jbG9ja3MsICNpbDJjcHBFZGl0cy5jbG9ja3MpDQogICAgICAgIGdnLnRvYXN0KGNsb2NrX3N0cmluZykNCiAgICBlbmQsDQogICAgc3RyaW5nc1N0YXJ0ID0gIjEwOTsxMTU7OTk7MTExOzExNDsxMDg7MTA1Ozk4OzQ2OzEwMDsxMDg7MTA4Ozc3OzExMTsxMDA7MTE3OzEwODsxMDE6OjIwIiwNCiAgICBzdHJpbmdzRW5kID0gIjAwaDswMGg7MH5+MDswfn4wOzB+fjA7MDBoOzB+fjA7MDBoOzB+fjA7MDBoO0ZGaDtGRmg6OjEyIiwNCiAgICByZXZlcnRfdGFibGUgPSB7fSwNCiAgICBjcmVhdGVfcmV2ZXJ0X3RhYmxlID0ge30sDQogICAgY3JlYXRlX2VkaXRfdGFibGUgPSB7fSwNCiAgICBwYXJzZWRfc3RyaW5nc190YWJsZSA9IHt9LA0KICAgIHN0YXJ0ZWQgPSBmYWxzZSwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRWRpdHMuYmNfY3BwX2NoZWNrX2NmZ19maWxlKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIGJjX2NwcF9jaGVja19jZmdfZmlsZSA9IGZ1bmN0aW9uKCkNCiAgICAgICAgcmVydW4gPSBmYWxzZQ0KICAgICAgICBpZiBwY2FsbChpbDJjcHBFZGl0cy5iY19jcHBfY2hlY2tfY2ZnX2ZpbGVfZ2FtZSkgPT0gZmFsc2UgdGhlbg0KICAgICAgICAgICAgaWwyY3BwRWRpdHMuY3JlYXRlRGlyZWN0b3J5KCkNCiAgICAgICAgICAgIGxvY2FsIGZpbGUgPSBpby5vcGVuKGlsMmNwcEVkaXRzLnNhdmVQYXRoIC4uIGdnLmdldFRhcmdldFBhY2thZ2UoKSAuLiAiLmNmZyIsICJ3KyIpDQogICAgICAgICAgICBsb2NhbCBkYXRhX3N0cmluZyA9ICJpbDJjcHBFZGl0cy5zYXZlZEVkaXRzVGFibGUgPSB7fSINCiAgICAgICAgICAgIGZpbGU6d3JpdGUoZGF0YV9zdHJpbmcpDQogICAgICAgICAgICBmaWxlOmNsb3NlKCkNCiAgICAgICAgICAgIHJlcnVuID0gdHJ1ZQ0KICAgICAgICBlbmQNCiAgICAgICAgaWYgcmVydW4gPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICBpbDJjcHBFZGl0cy5iY19jcHBfY2hlY2tfY2ZnX2ZpbGUoKQ0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgYmNfY3BwX2NoZWNrX2NmZ19maWxlX2dhbWUgPSBmdW5jdGlvbigpDQogICAgICAgIGRvZmlsZShpbDJjcHBFZGl0cy5zYXZlUGF0aCAuLiBnZy5nZXRUYXJnZXRQYWNrYWdlKCkgLi4gIi5jZmciKQ0KICAgIGVuZCwNCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC0tIEdldCBHbG9iYWwgTWV0YWRhdGEgU3RyaW5nIFN0YXJ0L0VuZC0tDQogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRWRpdHMuZ2V0UmFuZ2UoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgZ2V0UmFuZ2UgPSBmdW5jdGlvbigpIC0tIGdldF9zdHJpbmdzX3N0YXJ0X2VuZA0KICAgICAgICBnZy5zZXRSYW5nZXMoZ2cuUkVHSU9OX09USEVSKQ0KICAgICAgICBnZy5zZXRWaXNpYmxlKGZhbHNlKQ0KICAgICAgICBnZy50b2FzdChzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gQ29uZmlndXJpbmcgU2NyaXB0IOKEue+4jyIpDQogICAgICAgIGdnLmNsZWFyUmVzdWx0cygpDQogICAgICAgIDo6dHJ5X2NhOjoNCiAgICAgICAgZ2cuc2VhcmNoTnVtYmVyKGlsMmNwcEVkaXRzLnN0cmluZ3NTdGFydCwgZ2cuVFlQRV9CWVRFLCBmYWxzZSwgZ2cuU0lHTl9FUVVBTCwgbmlsLCBuaWwsIDEpDQogICAgICAgIGlmIGdnLmdldFJlc3VsdHNDb3VudCgpID09IDAgdGhlbg0KICAgICAgICAgICAgZ2cuc2V0UmFuZ2VzKGdnLlJFR0lPTl9DX0FMTE9DKQ0KICAgICAgICAgICAgZ290byB0cnlfY2ENCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIHN0YXJ0X3NlYXJjaCA9IGdnLmdldFJlc3VsdHMoMSkNCiAgICAgICAgZ2cuY2xlYXJSZXN1bHRzKCkNCiAgICAgICAgcmFuZ2Vfc3RhcnQgPSBzdGFydF9zZWFyY2hbMV0uYWRkcmVzcw0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhnZy5nZXRSYW5nZXNMaXN0KCkpIGRvDQogICAgICAgICAgICBpZiB2WyJzdGFydCJdIDwgcmFuZ2Vfc3RhcnQgYW5kIHZbImVuZCJdID4gcmFuZ2Vfc3RhcnQgdGhlbg0KICAgICAgICAgICAgICAgIG1ldGFkYXRhX2VuZCA9IHZbImVuZCJdDQogICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZ2cuc2VhcmNoTnVtYmVyKGlsMmNwcEVkaXRzLnN0cmluZ3NFbmQsIGdnLlRZUEVfQllURSwgZmFsc2UsIGdnLlNJR05fRVFVQUwsIHJhbmdlX3N0YXJ0LCBuaWwsIDEpDQogICAgICAgIGxvY2FsIGVuZF9zZWFyY2ggPSBnZy5nZXRSZXN1bHRzKDEpDQogICAgICAgIHJhbmdlX2VuZCA9IGVuZF9zZWFyY2hbMV0uYWRkcmVzcw0KICAgICAgICBnZy5jbGVhclJlc3VsdHMoKQ0KICAgIGVuZCwNCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAtLSBTZWFyY2ggRnVuY3Rpb25zLS0NCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRWRpdHMuY3JlYXRlU2VhcmNoKHNlYXJjaF9zdHJpbmcpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBjcmVhdGVTZWFyY2ggPSBmdW5jdGlvbihzZWFyY2hfc3RyaW5nKQ0KICAgICAgICBieXRlX3NlYXJjaCA9ICIwOyINCiAgICAgICAgZm9yIGMgaW4gc2VhcmNoX3N0cmluZzpnbWF0Y2ggIi4iIGRvDQogICAgICAgICAgICBpZiAjc2VhcmNoX3N0cmluZyA+IDEgdGhlbg0KICAgICAgICAgICAgICAgIGJ5dGVfc2VhcmNoID0gYnl0ZV9zZWFyY2ggLi4gc3RyaW5nLmJ5dGUoYykgLi4gIjsiDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgYnl0ZV9zZWFyY2ggPSBieXRlX3NlYXJjaCAuLiBzdHJpbmcuYnl0ZShjKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBpZiBpbDJjcHBFZGl0cy5zdGFydGVkID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgIGJ5dGVfc2VhcmNoID0gYnl0ZV9zZWFyY2ggLi4gIjAiDQogICAgICAgICAgICBpbDJjcHBFZGl0cy5zdGFydGVkID0gdHJ1ZQ0KICAgICAgICBlbmQNCiAgICAgICAgaWYgI3NlYXJjaF9zdHJpbmcgPiAxIHRoZW4NCiAgICAgICAgICAgIGJ5dGVfc2VhcmNoID0gYnl0ZV9zZWFyY2ggLi4gIjo6IiAuLiAjc2VhcmNoX3N0cmluZyArIDINCiAgICAgICAgZW5kDQogICAgICAgIHJldHVybiBieXRlX3NlYXJjaA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRWRpdHMucmVmaW5lUmVzdWx0cyhzZWFyY2hfc3RyaW5nKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgcmVmaW5lUmVzdWx0cyA9IGZ1bmN0aW9uKHNlYXJjaF9zdHJpbmcpDQogICAgICAgIGxvY2FsIGZpcnN0X3NlYXJjaF9zdHJpbmcgPSAiMDsiIC4uIHN0cmluZy5ieXRlKHN0cmluZy5zdWIoc2VhcmNoX3N0cmluZywgMSwgMSkpIC4uICI6OjIiDQogICAgICAgIGdnLnJlZmluZU51bWJlcihmaXJzdF9zZWFyY2hfc3RyaW5nLCBnZy5UWVBFX0JZVEUpDQogICAgICAgIGxvY2FsIHNlY29uZF9zZWFyY2hfc3RyaW5nID0gc3RyaW5nLmJ5dGUoc3RyaW5nLnN1YihzZWFyY2hfc3RyaW5nLCAxLCAxKSkNCiAgICAgICAgZ2cucmVmaW5lTnVtYmVyKHNlY29uZF9zZWFyY2hfc3RyaW5nLCBnZy5UWVBFX0JZVEUpDQogICAgICAgIGxvY2FsIHNlYXJjaF9yZXN1bHRzID0gZ2cuZ2V0UmVzdWx0cyhnZy5nZXRSZXN1bHRzQ291bnQoKSkNCiAgICAgICAgcmV0dXJuIHNlYXJjaF9yZXN1bHRzWzFdLmFkZHJlc3MNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWlsMmNwcEVkaXRzLnNlYXJjaER1bXAoc2VhcmNoX3N0cmluZykNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIHNlYXJjaER1bXAgPSBmdW5jdGlvbihzZWFyY2hfc3RyaW5nKQ0KICAgICAgICBnZy5zZXRSYW5nZXMoZ2cuUkVHSU9OX09USEVSIHwgZ2cuUkVHSU9OX0NfQUxMT0MpDQogICAgICAgIGlmIHNlYXJjaF9zdHJpbmcgdGhlbg0KICAgICAgICAgICAgZ2cuY2xlYXJSZXN1bHRzKCkNCiAgICAgICAgICAgIGdnLnNlYXJjaE51bWJlcihpbDJjcHBFZGl0cy5jcmVhdGVTZWFyY2goc2VhcmNoX3N0cmluZyksIGdnLlRZUEVfQllURSwgZmFsc2UsIGdnLlNJR05fRVFVQUwsIHJhbmdlX3N0YXJ0LA0KICAgICAgICAgICAgICAgIHJhbmdlX2VuZCkNCiAgICAgICAgICAgIGlmIGdnLmdldFJlc3VsdHNDb3VudCgpID4gMCB0aGVuDQogICAgICAgICAgICAgICAgcmV0dXJuIGlsMmNwcEVkaXRzLnJlZmluZVJlc3VsdHMoc2VhcmNoX3N0cmluZykNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLS0gR2V0IEFsbCBNZXRob2RzIEFuZCBDbGFzc25hbWVzLS0NCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRWRpdHMuc2F2ZURhdGFCYXNlKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIHNhdmVEYXRhQmFzZSA9IGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgZmlsZSA9IGlvLm9wZW4oaWwyY3BwRWRpdHMuc2F2ZVBhdGggLi4gZ2cuZ2V0VGFyZ2V0UGFja2FnZSgpIC4uICJfIiAuLiBnZy5nZXRUYXJnZXRJbmZvKCkudmVyc2lvbkNvZGUgLi4gIl9kYi5sdWEiLCAidysiKQ0KICAgICAgICBmaWxlOndyaXRlKCJpbDJjcHBFZGl0cy5wYXJzZWRfc3RyaW5nc190YWJsZSA9ICIgLi4gdG9zdHJpbmcoaWwyY3BwRWRpdHMucGFyc2VkX3N0cmluZ3NfdGFibGUpKQ0KICAgICAgICBmaWxlOmNsb3NlKCkNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWlsMmNwcEVkaXRzLnNhdmVNZXRob2RUeXBlcygpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBzYXZlTWV0aG9kVHlwZXMgPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIGZpbGUgPSBpby5vcGVuKGlsMmNwcEVkaXRzLnNhdmVQYXRoIC4uIGdnLmdldFRhcmdldFBhY2thZ2UoKSAuLiAiXyIgLi4gZ2cuZ2V0VGFyZ2V0SW5mbygpLnZlcnNpb25Db2RlIC4uICJfbWV0aG9kX3R5cGVzLmx1YSIsICJ3KyIpDQogICAgICAgIGZpbGU6d3JpdGUoImlsMmNwcEVkaXRzLm1ldGhvZF90eXBlcyA9ICIgLi4gdG9zdHJpbmcoaWwyY3BwRWRpdHMubWV0aG9kX3R5cGVzKSkNCiAgICAgICAgZmlsZTpjbG9zZSgpDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglpbDJjcHBFZGl0cy5nZXRNZXRob2RzKG1ldGhvZF9uYW1lLCBnZXRfZmlyc3QpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBnZXRNZXRob2RzID0gZnVuY3Rpb24obWV0aG9kX25hbWUsIGdldF9maXJzdCkNCiAgICAgICAgd2hpbGUgKG5pbCkgZG8NCiAgICAgICAgICAgIGxvY2FsIGdldE1ldGhvZHNWYWwgPSB7fQ0KICAgICAgICAgICAgaWYgKGdldE1ldGhvZHNWYWwuZ2V0TWV0aG9kc1ZhbCkgdGhlbg0KICAgICAgICAgICAgICAgIGdldE1ldGhvZHNWYWwuZ2V0TWV0aG9kc1ZhbCA9IChnZXRNZXRob2RzVmFsLmdldE1ldGhvZHNWYWwoZ2V0TWV0aG9kc1ZhbCkpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGlmIGlsMmNwcEVkaXRzLmFyY2gueDY0IHRoZW4NCiAgICAgICAgICAgIHBfb2Zmc2V0ID0gMTYNCiAgICAgICAgICAgIHBfb2Zmc2V0MiA9IDgNCiAgICAgICAgICAgIGZsYWdfdHlwZSA9IGdnLlRZUEVfUVdPUkQNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgcF9vZmZzZXQgPSA4DQogICAgICAgICAgICBwX29mZnNldDIgPSA0DQogICAgICAgICAgICBmbGFnX3R5cGUgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgIGVuZA0KICAgICAgICBpZiBtZXRob2RfbmFtZSB0aGVuDQogICAgICAgICAgICBsb2NhbCBjZm91bmQgPSBmYWxzZQ0KICAgICAgICAgICAgbWV0aG9kX25hbWVfYWRkcmVzcyA9IGlsMmNwcEVkaXRzLnNlYXJjaER1bXAobWV0aG9kX25hbWUpDQogICAgICAgICAgICBnZy5jbGVhclJlc3VsdHMoKQ0KICAgICAgICAgICAgZ2cuc2V0UmFuZ2VzKGdnLlJFR0lPTl9DX0FMTE9DIHwgZ2cuUkVHSU9OX0NfSEVBUCkNCiAgICAgICAgICAgIGlmIGdldF9maXJzdCA9PSB0cnVlIGFuZCBtZXRob2RfbmFtZV9hZGRyZXNzIH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgZ2cuc2VhcmNoTnVtYmVyKG1ldGhvZF9uYW1lX2FkZHJlc3MsIGZsYWdfdHlwZSwgbmlsLCBuaWwsIG5pbCwgbmlsLCAxKQ0KICAgICAgICAgICAgZWxzZWlmIG1ldGhvZF9uYW1lX2FkZHJlc3Mgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICBnZy5zZWFyY2hOdW1iZXIobWV0aG9kX25hbWVfYWRkcmVzcywgZmxhZ190eXBlKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBsb2NhbCByZXN1bHRzID0gZ2cuZ2V0UmVzdWx0cyhnZy5nZXRSZXN1bHRzQ291bnQoKSkNCiAgICAgICAgICAgIGxvY2FsIG1ldGhvZHNfZm91bmQgPSB7fQ0KICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMocmVzdWx0cykgZG8NCiAgICAgICAgICAgICAgICBsb2NhbCBnZXRfY2xhc3NfcG9pbnRlcl8xID0ge30NCiAgICAgICAgICAgICAgICBnZXRfY2xhc3NfcG9pbnRlcl8xWzFdID0ge30NCiAgICAgICAgICAgICAgICBnZXRfY2xhc3NfcG9pbnRlcl8xWzFdLmFkZHJlc3MgPSB2LmFkZHJlc3MgKyBwX29mZnNldDINCiAgICAgICAgICAgICAgICBnZXRfY2xhc3NfcG9pbnRlcl8xWzFdLmZsYWdzID0gZmxhZ190eXBlDQogICAgICAgICAgICAgICAgZ2V0X2NsYXNzX3BvaW50ZXJfMSA9IGdnLmdldFZhbHVlcyhnZXRfY2xhc3NfcG9pbnRlcl8xKQ0KICAgICAgICAgICAgICAgIGxvY2FsIGdldF9jbGFzc19wb2ludGVyXzIgPSB7fQ0KICAgICAgICAgICAgICAgIGdldF9jbGFzc19wb2ludGVyXzJbMV0gPSB7fQ0KICAgICAgICAgICAgICAgIGdldF9jbGFzc19wb2ludGVyXzJbMV0uYWRkcmVzcyA9IGdldF9jbGFzc19wb2ludGVyXzFbMV0udmFsdWUgKyBwX29mZnNldA0KICAgICAgICAgICAgICAgIGdldF9jbGFzc19wb2ludGVyXzJbMV0uZmxhZ3MgPSBmbGFnX3R5cGUNCiAgICAgICAgICAgICAgICBnZXRfY2xhc3NfcG9pbnRlcl8yID0gZ2cuZ2V0VmFsdWVzKGdldF9jbGFzc19wb2ludGVyXzIpDQogICAgICAgICAgICAgICAgbG9jYWwgZ2V0X2NsYXNzX3N0YXJ0ID0ge30NCiAgICAgICAgICAgICAgICBnZXRfY2xhc3Nfc3RhcnRbMV0gPSB7fQ0KICAgICAgICAgICAgICAgIGdldF9jbGFzc19zdGFydFsxXS5hZGRyZXNzID0gZ2V0X2NsYXNzX3BvaW50ZXJfMlsxXS52YWx1ZQ0KICAgICAgICAgICAgICAgIGdldF9jbGFzc19zdGFydFsxXS5mbGFncyA9IGdnLlRZUEVfQllURQ0KICAgICAgICAgICAgICAgIGdnLmxvYWRSZXN1bHRzKGdldF9jbGFzc19zdGFydCkNCiAgICAgICAgICAgICAgICBnZXRfY2xhc3Nfc3RhcnQgPSBnZy5nZXRWYWx1ZXMoZ2V0X2NsYXNzX3N0YXJ0KQ0KICAgICAgICAgICAgICAgIGxvY2FsIGdldF9jbGFzcyA9IHt9DQogICAgICAgICAgICAgICAgbG9jYWwgb2Zmc2V0ID0gMA0KICAgICAgICAgICAgICAgIGxvY2FsIGNvdW50ID0gMQ0KICAgICAgICAgICAgICAgIHJlcGVhdA0KICAgICAgICAgICAgICAgICAgICBnZXRfY2xhc3NbY291bnRdID0ge30NCiAgICAgICAgICAgICAgICAgICAgZ2V0X2NsYXNzW2NvdW50XS5hZGRyZXNzID0gZ2V0X2NsYXNzX3BvaW50ZXJfMlsxXS52YWx1ZSArIG9mZnNldA0KICAgICAgICAgICAgICAgICAgICBnZXRfY2xhc3NbY291bnRdLmZsYWdzID0gZ2cuVFlQRV9CWVRFDQogICAgICAgICAgICAgICAgICAgIGNvdW50ID0gY291bnQgKyAxDQogICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IG9mZnNldCArIDENCiAgICAgICAgICAgICAgICB1bnRpbCAoY291bnQgPT0gMTAwKQ0KICAgICAgICAgICAgICAgIGdldF9jbGFzcyA9IGdnLmdldFZhbHVlcyhnZXRfY2xhc3MpDQogICAgICAgICAgICAgICAgbG9jYWwgY2xhc3NfbmFtZSA9ICIiDQogICAgICAgICAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBwYWlycyhnZXRfY2xhc3MpIGRvDQogICAgICAgICAgICAgICAgICAgIGlmIHZhbHVlLnZhbHVlID49IDAgYW5kIHZhbHVlLnZhbHVlIDw9IDI1NSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBjbGFzc19uYW1lID0gY2xhc3NfbmFtZSAuLiBzdHJpbmcuY2hhcih2YWx1ZS52YWx1ZSkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIHZhbHVlLnZhbHVlID09IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQoY2xhc3NfbmFtZSwgIiAiKSBvciANCgkJCQkJc3RyaW5nLmZpbmQoY2xhc3NfbmFtZSwgIg4iKSBvciANCgkJCQkJc3RyaW5nLmZpbmQoY2xhc3NfbmFtZSwgIgwiKSBvcg0KICAgICAgICAgICAgICAgICAgICBzdHJpbmcuZmluZChjbGFzc19uYW1lLCAiXHJcbiIpIG9yIA0KCQkJCQlzdHJpbmcuZmluZChjbGFzc19uYW1lLCAiXHIiKSBvciANCgkJCQkJc3RyaW5nLmZpbmQoY2xhc3NfbmFtZSwgIlxuIikgb3INCiAgICAgICAgICAgICAgICAgICAgc3RyaW5nLmZpbmQoY2xhc3NfbmFtZSwgIhciKSBvciANCgkJCQkJc3RyaW5nLmZpbmQoY2xhc3NfbmFtZSwgJyInKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGNsYXNzX25hbWUgPSAiIg0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmICNjbGFzc19uYW1lID4gMSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGNmb3VuZCA9IHRydWUNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBsb2NhbCBnZXRfaWwyY3BwX2FkZHJlc3MgPSB7fQ0KICAgICAgICAgICAgICAgIGdldF9pbDJjcHBfYWRkcmVzc1sxXSA9IHt9DQogICAgICAgICAgICAgICAgZ2V0X2lsMmNwcF9hZGRyZXNzWzFdLmFkZHJlc3MgPSB2LmFkZHJlc3MgLSBwX29mZnNldA0KICAgICAgICAgICAgICAgIGdldF9pbDJjcHBfYWRkcmVzc1sxXS5mbGFncyA9IGZsYWdfdHlwZQ0KICAgICAgICAgICAgICAgIGdldF9pbDJjcHBfYWRkcmVzcyA9IGdnLmdldFZhbHVlcyhnZXRfaWwyY3BwX2FkZHJlc3MpDQogICAgICAgICAgICAgICAgaWwyY3BwX2FkZHJlc3MgPSBnZXRfaWwyY3BwX2FkZHJlc3NbMV0udmFsdWUNCiAgICAgICAgICAgICAgICBsb2NhbCBnZXRfbWV0aG9kX3R5cGVfMSA9IHt9DQogICAgICAgICAgICAgICAgZ2V0X21ldGhvZF90eXBlXzFbMV0gPSB7fQ0KICAgICAgICAgICAgICAgIGdldF9tZXRob2RfdHlwZV8xWzFdLmFkZHJlc3MgPSB2LmFkZHJlc3MgKyBwX29mZnNldA0KICAgICAgICAgICAgICAgIGdldF9tZXRob2RfdHlwZV8xWzFdLmZsYWdzID0gZmxhZ190eXBlDQogICAgICAgICAgICAgICAgZ2V0X21ldGhvZF90eXBlXzEgPSBnZy5nZXRWYWx1ZXMoZ2V0X21ldGhvZF90eXBlXzEpDQogICAgICAgICAgICAgICAgbG9jYWwgZ2V0X21ldGhvZF90eXBlXzIgPSB7fQ0KICAgICAgICAgICAgICAgIGdldF9tZXRob2RfdHlwZV8yWzFdID0ge30NCiAgICAgICAgICAgICAgICBnZXRfbWV0aG9kX3R5cGVfMlsxXS5hZGRyZXNzID0gZ2V0X21ldGhvZF90eXBlXzFbMV0udmFsdWUNCiAgICAgICAgICAgICAgICBnZXRfbWV0aG9kX3R5cGVfMlsxXS5mbGFncyA9IGZsYWdfdHlwZQ0KICAgICAgICAgICAgICAgIGdldF9tZXRob2RfdHlwZV8yID0gZ2cuZ2V0VmFsdWVzKGdldF9tZXRob2RfdHlwZV8yKQ0KICAgICAgICAgICAgICAgIGxvY2FsIG1ldGhvZF90eXBlID0gZ2V0X21ldGhvZF90eXBlXzJbMV0udmFsdWUNCiAgICAgICAgICAgICAgICBpZiAjdG9zdHJpbmcobWV0aG9kX3R5cGUpID4gOCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGdldF9tZXRob2RfdHlwZV8yID0ge30NCiAgICAgICAgICAgICAgICAgICAgZ2V0X21ldGhvZF90eXBlXzJbMV0gPSB7fQ0KICAgICAgICAgICAgICAgICAgICBnZXRfbWV0aG9kX3R5cGVfMlsxXS5hZGRyZXNzID0gZ2V0X21ldGhvZF90eXBlXzFbMV0udmFsdWUgKyA0DQogICAgICAgICAgICAgICAgICAgIGdldF9tZXRob2RfdHlwZV8yWzFdLmZsYWdzID0gZmxhZ190eXBlDQogICAgICAgICAgICAgICAgICAgIGdldF9tZXRob2RfdHlwZV8yID0gZ2cuZ2V0VmFsdWVzKGdldF9tZXRob2RfdHlwZV8yKQ0KICAgICAgICAgICAgICAgICAgICBtZXRob2RfdHlwZSA9IGdldF9tZXRob2RfdHlwZV8yWzFdLnZhbHVlDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgaWwyY3BwRWRpdHMubWV0aG9kX3R5cGVzW3Rvc3RyaW5nKG1ldGhvZF90eXBlKV0gdGhlbg0KICAgICAgICAgICAgICAgICAgICBtZXRob2RfdHlwZSA9IGlsMmNwcEVkaXRzLm1ldGhvZF90eXBlc1t0b3N0cmluZyhtZXRob2RfdHlwZSldDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgbWV0aG9kX3R5cGUgPT0gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGNmb3VuZCA9IGZhbHNlDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgbWV0aG9kc19mb3VuZFsjbWV0aG9kc19mb3VuZCArIDFdID0ge30NCiAgICAgICAgICAgICAgICBtZXRob2RzX2ZvdW5kWyNtZXRob2RzX2ZvdW5kXS5jbGFzc19uYW1lID0gY2xhc3NfbmFtZQ0KICAgICAgICAgICAgICAgIG1ldGhvZHNfZm91bmRbI21ldGhvZHNfZm91bmRdLm1ldGhvZF9uYW1lID0gbWV0aG9kX25hbWUNCiAgICAgICAgICAgICAgICBtZXRob2RzX2ZvdW5kWyNtZXRob2RzX2ZvdW5kXS5pbDJjcHBfYWRkcmVzcyA9IGlsMmNwcF9hZGRyZXNzDQogICAgICAgICAgICAgICAgbWV0aG9kc19mb3VuZFsjbWV0aG9kc19mb3VuZF0ubWV0aG9kX3R5cGUgPSBtZXRob2RfdHlwZQ0KICAgICAgICAgICAgICAgIGlmIG5vdCBnZXRfZmlyc3QgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpbDJjcHBFZGl0cy5zZXREdW1wTWV0aG9kKG1ldGhvZF9uYW1lLCBtZXRob2RfdHlwZSwgY2xhc3NfbmFtZSkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWYgbm90IGdldF9maXJzdCB0aGVuDQogICAgICAgICAgICAgICAgaWwyY3BwRWRpdHMuc2F2ZURhdGFCYXNlKCkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgOjpub3RfZm91bmQ6Og0KICAgICAgICAgICAgaWYgY2ZvdW5kID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgIGdnLnRvYXN0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyAiIC4uICNtZXRob2RzX2ZvdW5kIC4uICIgbWV0aG9kKHMpIGZvdW5kIGZvciB0aGUgc3RyaW5nICIgLi4gbWV0aG9kX25hbWUgLi4gIiDihLnvuI8iKQ0KICAgICAgICAgICAgICAgIHJldHVybiBtZXRob2RzX2ZvdW5kDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgOjpub3RfZm91bmQ6Og0KICAgICAgICAgICAgICAgIGdnLnRvYXN0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBObyBSZXN1bHRzIOKEue+4j1xuTm8gbWV0aG9kcyB3ZXJlIGZvdW5kIGZvciB0aGF0IHN0cmluZywgaXQgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIHRoZSBkYXRhYmFzZS4iKQ0KICAgICAgICAgICAgICAgIGlsMmNwcEVkaXRzLnJlbW92ZUZyb21EYXRhQmFzZShtZXRob2RfbmFtZSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWlsMmNwcEVkaXRzLnNldER1bXBNZXRob2QobWV0aG9kX25hbWUsIG1ldGhvZF90eXBlLCBjbGFzc19uYW1lKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgc2V0RHVtcE1ldGhvZCA9IGZ1bmN0aW9uKG1ldGhvZF9uYW1lLCBtZXRob2RfdHlwZSwgY2xhc3NfbmFtZSkNCiAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoaWwyY3BwRWRpdHMucGFyc2VkX3N0cmluZ3NfdGFibGUpIGRvDQogICAgICAgICAgICBpZiB2LmlsMmNwcF9zdHJpbmcgPT0gbWV0aG9kX25hbWUgdGhlbg0KICAgICAgICAgICAgICAgIGlsMmNwcEVkaXRzLnBhcnNlZF9zdHJpbmdzX3RhYmxlW2ldLm1ldGhvZF90eXBlID0gbWV0aG9kX3R5cGUNCiAgICAgICAgICAgICAgICBpZiBpbDJjcHBFZGl0cy5wYXJzZWRfc3RyaW5nc190YWJsZVtpXS5jbGFzc19uYW1lcyB0aGVuDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGZvdW5kID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBwYWlycyhpbDJjcHBFZGl0cy5wYXJzZWRfc3RyaW5nc190YWJsZVtpXS5jbGFzc19uYW1lcykgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHZhbHVlID09IGNsYXNzX25hbWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBmb3VuZCA9PSBmYWxzZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpbDJjcHBFZGl0cy5wYXJzZWRfc3RyaW5nc190YWJsZVtpXS5jbGFzc19uYW1lc1sjaWwyY3BwRWRpdHMucGFyc2VkX3N0cmluZ3NfdGFibGVbaV0uY2xhc3NfbmFtZXMgKyAxXSA9IGNsYXNzX25hbWUNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBpbDJjcHBFZGl0cy5wYXJzZWRfc3RyaW5nc190YWJsZVtpXS5jbGFzc19uYW1lcyA9IHt9DQogICAgICAgICAgICAgICAgICAgIGlsMmNwcEVkaXRzLnBhcnNlZF9zdHJpbmdzX3RhYmxlW2ldLmNsYXNzX25hbWVzWyNpbDJjcHBFZGl0cy5wYXJzZWRfc3RyaW5nc190YWJsZVtpXS5jbGFzc19uYW1lcyArIDFdID0gY2xhc3NfbmFtZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRWRpdHMuZ2V0Qm9vbEVkaXQoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgZ2V0Qm9vbEVkaXQgPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIGFybTdFZGl0ID0gew0KICAgICAgICAgICAgaXNUcnVlID0geyJ+QSBNT1YgUjAsICMxIiwgIn5BIEJYIExSIn0sDQogICAgICAgICAgICBpc0ZhbHNlID0geyJ+QSBNT1YgUjAsICMwIiwgIn5BIEJYIExSIn0NCiAgICAgICAgfQ0KICAgICAgICBsb2NhbCBhcm04RWRpdCA9IHsNCiAgICAgICAgICAgIGlzVHJ1ZSA9IHsifkE4IE1PViBXMCwgIzEiLCAifkE4IFJFVCJ9LA0KICAgICAgICAgICAgaXNGYWxzZSA9IHsifkE4IE1PViBXMCwgV1pSIiwgIn5BOCBSRVQifQ0KICAgICAgICB9DQogICAgICAgIGxvY2FsIG1lbnUgPSBnZy5jaG9pY2UoeyJUcnVlIiwgIkZhbHNlIn0pDQogICAgICAgIGlmIG1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgIGlmIG1lbnUgPT0gMSB0aGVuDQogICAgICAgICAgICAgICAgcmV0dXJuIHthcm03RWRpdC5pc1RydWUsIGFybThFZGl0LmlzVHJ1ZX0NCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWYgbWVudSA9PSAyIHRoZW4NCiAgICAgICAgICAgICAgICByZXR1cm4ge2FybTdFZGl0LmlzRmFsc2UsIGFybThFZGl0LmlzRmFsc2V9DQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglpbDJjcHBFZGl0cy5nZXRJbnRFZGl0KCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIGdldEludEVkaXQgPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIGVkaXRzX2FybTcgPSB7fQ0KICAgICAgICBsb2NhbCBlZGl0c19hcm04ID0ge30NCiAgICAgICAgOjpzZXRfdmFsOjoNCiAgICAgICAgbG9jYWwgbWVudSA9IGdnLnByb21wdCh7ImVudGVyIG51bWJlciAtMjU1IHRvIDY1NTM1ICJ9LCB7bmlsfSwgeyJudW1iZXIifSkNCiAgICAgICAgaWYgbWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgaWYgdG9udW1iZXIobWVudVsxXSkgPCAtMjU2IG9yIHRvbnVtYmVyKG1lbnVbMV0pID4gNjU1MzUgdGhlbg0KICAgICAgICAgICAgICAgIGdnLmFsZXJ0KCLihLnvuI8gU2V0IEEgVmFsaWQgTnVtYmVyIOKEue+4j1xuXG5TZXQgYSB2YWxpZCBudW1iZXIgZnJvbSAtMjU1IHRvIDY1NTM1IikNCiAgICAgICAgICAgICAgICBnb3RvIHNldF92YWwNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWYgdG9udW1iZXIobWVudVsxXSkgPT0gMCB0aGVuDQogICAgICAgICAgICAgICAgZWRpdHNfYXJtOFsxXSA9ICJ+QTggTU9WIFcwLCBXWlIiDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgZWRpdHNfYXJtOFsxXSA9ICJ+QTggTU9WIFcwLCAjIiAuLiBtZW51WzFdDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVkaXRzX2FybThbMl0gPSAifkE4IFJFVCINCiAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKG1lbnVbMV0sICJbLV0iKSB0aGVuDQogICAgICAgICAgICAgICAgZWRpdHNfYXJtN1sxXSA9ICJ+QSBNVk4gUjAsICMiIC4uIHN0cmluZy5nc3ViKG1lbnVbMV0sICJbLV0iLCAiIikNCiAgICAgICAgICAgICAgICBlZGl0c19hcm03WzJdID0gIn5BIEJYIExSIg0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIGVkaXRzX2FybTdbMV0gPSAifkEgTU9WVyBSMCwgIyIgLi4gbWVudVsxXQ0KICAgICAgICAgICAgICAgIGVkaXRzX2FybTdbMl0gPSAifkEgQlggTFIiDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIHJldHVybiB7ZWRpdHNfYXJtNywgZWRpdHNfYXJtOH0NCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglpbDJjcHBFZGl0cy5nZXRDb21wbGV4RmxvYXRFZGl0KHRhcmdldCwgbWV0aG9kX3R5cGUpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBnZXRDb21wbGV4RmxvYXRFZGl0ID0gZnVuY3Rpb24odGFyZ2V0LCBtZXRob2RfdHlwZSkNCiAgICAgICAgd2hpbGUgKG5pbCkgZG8NCiAgICAgICAgICAgIGxvY2FsIGdldENvbXBsZXhGbG9hdEVkaXRWYWwgPSB7fQ0KICAgICAgICAgICAgaWYgKGdldENvbXBsZXhGbG9hdEVkaXRWYWwuZ2V0Q29tcGxleEZsb2F0RWRpdFZhbCkgdGhlbg0KICAgICAgICAgICAgICAgIGdldENvbXBsZXhGbG9hdEVkaXRWYWwuZ2V0Q29tcGxleEZsb2F0RWRpdFZhbCA9IChnZXRDb21wbGV4RmxvYXRFZGl0VmFsLmdldENvbXBsZXhGbG9hdEVkaXRWYWwoZ2V0Q29tcGxleEZsb2F0RWRpdFZhbCkpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIHRhcmdldCA9IHRvbnVtYmVyKHRhcmdldCkNCiAgICAgICAgbG9jYWwgZmxvYXRfZWRpdHNfYXJtNyA9IHt9DQogICAgICAgIGxvY2FsIGZsb2F0X2VkaXRzX2FybTggPSB7fQ0KICAgICAgICBpZiB0YXJnZXQgPD0gNjU1MzUgYW5kIHRhcmdldCA+PSAwIHRoZW4NCiAgICAgICAgICAgIGlmIG1ldGhvZF90eXBlID09ICJmbG9hdCIgdGhlbg0KICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybTdbMV0gPSAifkEgTU9WVyBSMCwgIyIgLi4gdGFyZ2V0DQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtN1syXSA9ICIxMDBBMDBFRXIiIC0tIFZNT1YgUzAsIFIwDQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtN1szXSA9ICJDMDBBQjhFRXIiIC0tIFZDVlQuRjMyLlMzMiBTMCwgUzANCiAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm03WzRdID0gIjEwMEExMEVFciIgLS0gVk1PViBSMCwgUzANCiAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm03WzVdID0gIjFFRkYyRkUxciIgLS0gQlggTFINCiAgICAgICAgICAgICAgICBpZiB0YXJnZXQgPT0gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybThbMV0gPSAifkE4IE1PViBXMCwgV1pSIg0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtOFsxXSA9ICJ+QTggTU9WIFcwLCAjIiAuLiB0YXJnZXQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm04WzJdID0gIjAwMDAyNzFFciIgLS0gRk1PViBTMCwgVzANCiAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm04WzNdID0gIjAwRDgyMTVFciIgLS0gU0NWVEYgUzAsIFMwDQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtOFs0XSA9ICIwMDAwMjYxRXIiIC0tIEZNT1YgVzAsIFMwDQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtOFs1XSA9ICJDMDAzNUZENnIiIC0tIFJFVA0KICAgICAgICAgICAgZWxzZWlmIG1ldGhvZF90eXBlID09ICJkb3VibGUiIHRoZW4NCiAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm03WzFdID0gIn5BIE1PVlcgUjAsICMiIC4uIHRhcmdldA0KICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybTdbMl0gPSAifkEgVk1PViBTMCwgUjAiDQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtN1szXSA9ICJ+QSBWQ1ZULkY2NC5VMzIgRDAsIFMwIg0KICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybTdbNF0gPSAifkEgVk1PViBSMCwgUjEsIEQwIg0KICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybTdbNV0gPSAiMUVGRjJGRTFyIiAtLSBCWCBMUg0KICAgICAgICAgICAgICAgIGlmIHRhcmdldCA9PSAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtOFsxXSA9ICJ+QTggTU9WIFcwLCBXWlIiDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm04WzFdID0gIn5BOCBNT1YgVzAsICMiIC4uIHRhcmdldA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybThbMl0gPSAifkE4IFNDVlRGIEQwLCBXMCINCiAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm04WzNdID0gIkMwMDM1RkQ2ciIgLS0gUkVUDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGlmIHRhcmdldCA8PSAxMzEwNzIgYW5kIHRhcmdldCA+PSA2NTUzNyB0aGVuDQogICAgICAgICAgICBmbG9hdF92YWxfMiA9IHRhcmdldCAtIDY1NTM1DQogICAgICAgICAgICBpZiBtZXRob2RfdHlwZSA9PSAiZmxvYXQiIHRoZW4NCiAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm03WzFdID0gIn5BIE1PVlcgUjAsICM2NTUzNSINCiAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm03WzJdID0gIn5BIE1PVlcgUjEsICMiIC4uIGZsb2F0X3ZhbF8yDQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtN1szXSA9ICIwMTAwODBFMHIiIC0tIEFERCBSMCwgUjAsIFIxDQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtN1s0XSA9ICIxMDBBMDBFRXIiIC0tIFZNT1YgUzAsIFIwDQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtN1s1XSA9ICJDMDBBQjhFRXIiIC0tIFZDVlQuRjMyLlMzMiBTMCwgUzANCiAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm03WzZdID0gIjEwMEExMEVFciIgLS0gVk1PViBSMCwgUzANCiAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm03WzddID0gIjFFRkYyRkUxciIgLS0gQlggTFINCiAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm04WzFdID0gIn5BOCBNT1YgVzAsICM2NTUzNSINCiAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm04WzJdID0gIn5BOCBNT1YgVzEsICMiIC4uIGZsb2F0X3ZhbF8yDQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtOFszXSA9ICIwMDAwMDEwQnIiIC0tIEFERCBXMCwgVzAsIFcxDQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtOFs0XSA9ICIwMDAwMjcxRXIiIC0tIEZNT1YgUzAsIFcwDQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtOFs1XSA9ICIwMEQ4MjE1RXIiIC0tIFNDVlRGIFMwLCBTMA0KICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybThbNl0gPSAiMDAwMDI2MUVyIiAtLSBGTU9WIFcwLCBTMA0KICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybThbN10gPSAiQzAwMzVGRDZyIiAtLSBSRVQNCiAgICAgICAgICAgIGVsc2VpZiBtZXRob2RfdHlwZSA9PSAiZG91YmxlIiB0aGVuDQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtN1sxXSA9ICJ+QSBNT1ZXIFIwLCAjNjU1MzUiDQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtN1syXSA9ICJ+QSBNT1ZXIFIxLCAgIyIgLi4gZmxvYXRfdmFsXzINCiAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm03WzNdID0gIn5BIEFERCBSMCwgUjAsIFIxIg0KICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybTdbNF0gPSAifkEgVk1PViBTMCwgUjAiDQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtN1s1XSA9ICJ+QSBWQ1ZULkY2NC5VMzIgRDAsIFMwIg0KICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybTdbNl0gPSAifkEgVk1PViBSMCwgUjEsIEQwIg0KICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybTdbN10gPSAiMUVGRjJGRTFyIiAtLSBCWCBMUg0KICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybThbMV0gPSAifkE4IE1PViBXMCwgIzY1NTM1Ig0KICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybThbMl0gPSAifkE4IE1PViBXMSwgICMiIC4uIGZsb2F0X3ZhbF8yDQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtOFszXSA9ICJ+QTggQUREIFcwLCBXMCwgVzEiDQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtOFs0XSA9ICJ+QTggU0NWVEYgRDAsIFcwIg0KICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybThbNV0gPSAiQzAwMzVGRDZyIiAtLSBSRVQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgaWYgdGFyZ2V0ID4gMTMxMDcyIGFuZCB0YXJnZXQgPCA0Mjk1MDMyODQgdGhlbg0KICAgICAgICAgICAgZm9yIGkgPSAyLCA2NTUzNiBkbw0KICAgICAgICAgICAgICAgIHJlbSA9IHRhcmdldCAlIGkNCiAgICAgICAgICAgICAgICBtdWx0ID0gaQ0KICAgICAgICAgICAgICAgIHN1Yl90b3RhbCA9IHJlbSAqIG11bHQNCiAgICAgICAgICAgICAgICBhZGRfdG8gPSB0YXJnZXQgLSBzdWJfdG90YWwNCiAgICAgICAgICAgICAgICBpZiBhZGRfdG8gPD0gNjU1MzYgYW5kIGFkZF90byA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBtZXRob2RfdHlwZSA9PSAiZmxvYXQiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybTdbMV0gPSAifkEgTU9WVyBSMCwgIyIgLi4gcmVtDQogICAgICAgICAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm03WzJdID0gIn5BIE1PVlcgUjEsICMiIC4uIG11bHQNCiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybTdbM10gPSAiOTAwMTAwRTByIiAtLSBNVUwgUjAsIFIwLCBSMQ0KICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtN1s0XSA9ICJ+QSBNT1ZXIFIxLCAjIiAuLiBhZGRfdG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybTdbNV0gPSAiMDEwMDgwRTByIiAtLSBBREQgUjAsIFIwLCBSMQ0KICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtN1s2XSA9ICIxMDBBMDBFRXIiIC0tIFZNT1YgUzAsIFIwDQogICAgICAgICAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm03WzddID0gIkMwMEFCOEVFciIgLS0gVkNWVC5GMzIuUzMyIFMwLCBTMA0KICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtN1s4XSA9ICIxMDBBMTBFRXIiIC0tIFZNT1YgUjAsIFMwDQogICAgICAgICAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm03WzldID0gIjFFRkYyRkUxciIgLS0gQlggTFINCiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybThbMV0gPSAifkE4IE1PViBXMCwgIyIgLi4gcmVtDQogICAgICAgICAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm04WzJdID0gIn5BOCBNT1YgVzEsICMiIC4uIG11bHQNCiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybThbM10gPSAiMDA3QzAxMUJyIiAtLSBNVUwgVzAsIFcwLCBXMQ0KICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtOFs0XSA9ICJ+QTggTU9WIFcxLCAjIiAuLiBhZGRfdG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybThbNV0gPSAiMDAwMDAxMEJyIiAtLSBBREQgVzAsIFcwLCBXMQ0KICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtOFs2XSA9ICIwMDAwMjcxRXIiIC0tIEZNT1YgUzAsIFcwDQogICAgICAgICAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm04WzddID0gIjAwRDgyMTVFciIgLS0gU0NWVEYgUzAsIFMwDQogICAgICAgICAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm04WzhdID0gIjAwMDAyNjFFciIgLS0gRk1PViBXMCwgUzANCiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybThbOV0gPSAiQzAwMzVGRDZyIiAtLSBSRVQNCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIG1ldGhvZF90eXBlID09ICJkb3VibGUiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybTdbMV0gPSAifkEgTU9WVyBSMCwgIyIgLi4gcmVtDQogICAgICAgICAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm03WzJdID0gIn5BIE1PVlcgUjEsICAjIiAuLiBtdWx0DQogICAgICAgICAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm03WzNdID0gIn5BIE1VTCBSMCwgUjAsIFIxIg0KICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtN1s0XSA9ICJ+QSBNT1ZXIFIxLCAgIyIgLi4gYWRkX3RvDQogICAgICAgICAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm03WzVdID0gIn5BIEFERCBSMSwgUjAsIFIxIg0KICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtN1s2XSA9ICJ+QSBWTU9WIFMwLCBSMCINCiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybTdbN10gPSAifkEgVkNWVC5GNjQuVTMyIEQwLCBTMCINCiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybTdbOF0gPSAifkEgVk1PViBSMCwgUjEsIEQwIg0KICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtN1s5XSA9ICIxRUZGMkZFMXIiIC0tIEJYIExSDQogICAgICAgICAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm04WzFdID0gIn5BOCBNT1YgVzAsICMiIC4uIHJlbQ0KICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtOFsyXSA9ICJ+QTggTU9WIFcxLCAgIyIgLi4gbXVsdA0KICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtOFszXSA9ICJ+QTggTVVMIFcwLCBXMCwgVzEiDQogICAgICAgICAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm04WzRdID0gIn5BOCBNT1YgVzEsICAjIiAuLiBhZGRfdG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybThbNV0gPSAifkE4IEFERCBXMCwgVzAsIFcxIg0KICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtOFs2XSA9ICJ+QTggU0NWVEYgRDAsIFcwIg0KICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtOFs3XSA9ICJDMDAzNUZENnIiIC0tIFJFVA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWYgdGFyZ2V0ID4gNDI5NTAzMjgzIHRoZW4NCiAgICAgICAgICAgICAgICBnZy5hbGVydCgi4pqg77iPIFZhbHVlIGlzIHRvbyBoaWdoLCBzZXQgbG93ZXIgdGhhbiA0Mjk1MDMyODMg4pqg77iPIikNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWYgdGFyZ2V0IDwgMCB0aGVuDQogICAgICAgICAgICAgICAgZ2cuYWxlcnQoIuKaoO+4jyBWYWx1ZSBpcyB0b28gbG93LCBzZXQgdG8gMCBvciBoaWdoZXIg4pqg77iPIikNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgaWYgZmxvYXRfZWRpdHNfYXJtNyBhbmQgZmxvYXRfZWRpdHNfYXJtOCB0aGVuDQogICAgICAgICAgICByZXR1cm4ge2Zsb2F0X2VkaXRzX2FybTcsIGZsb2F0X2VkaXRzX2FybTh9DQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRWRpdHMuc2ltcGxlRmxvYXRzVGFibGUNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIHNpbXBsZUZsb2F0c1RhYmxlID0gew0KICAgICAgICBbIkFSTTciXSA9IHt7DQogICAgICAgICAgICBbImhleF9lZGl0cyJdID0gIjAxMDFBMEUzciIsDQogICAgICAgICAgICBbImZsb2F0X3ZhbHVlIl0gPSAyDQogICAgICAgIH0sIHsNCiAgICAgICAgICAgIFsiaGV4X2VkaXRzIl0gPSAiNDEwNEEwRTNyIiwNCiAgICAgICAgICAgIFsiZmxvYXRfdmFsdWUiXSA9IDgNCiAgICAgICAgfSwgew0KICAgICAgICAgICAgWyJoZXhfZWRpdHMiXSA9ICI0MjA0QTBFM3IiLA0KICAgICAgICAgICAgWyJmbG9hdF92YWx1ZSJdID0gMzINCiAgICAgICAgfSwgew0KICAgICAgICAgICAgWyJoZXhfZWRpdHMiXSA9ICI0MzA0QTBFM3IiLA0KICAgICAgICAgICAgWyJmbG9hdF92YWx1ZSJdID0gMTI4DQogICAgICAgIH0sIHsNCiAgICAgICAgICAgIFsiaGV4X2VkaXRzIl0gPSAiMTEwM0EwRTNyIiwNCiAgICAgICAgICAgIFsiZmxvYXRfdmFsdWUiXSA9IDUxMg0KICAgICAgICB9LCB7DQogICAgICAgICAgICBbImhleF9lZGl0cyJdID0gIjQ1MDRBMEUzciIsDQogICAgICAgICAgICBbImZsb2F0X3ZhbHVlIl0gPSAyMDQ4DQogICAgICAgIH0sIHsNCiAgICAgICAgICAgIFsiaGV4X2VkaXRzIl0gPSAiNDYwNEEwRTNyIiwNCiAgICAgICAgICAgIFsiZmxvYXRfdmFsdWUiXSA9IDgxOTINCiAgICAgICAgfSwgew0KICAgICAgICAgICAgWyJoZXhfZWRpdHMiXSA9ICI0NzA0QTBFM3IiLA0KICAgICAgICAgICAgWyJmbG9hdF92YWx1ZSJdID0gMzI3NjgNCiAgICAgICAgfSwgew0KICAgICAgICAgICAgWyJoZXhfZWRpdHMiXSA9ICIxMjAzQTBFM3IiLA0KICAgICAgICAgICAgWyJmbG9hdF92YWx1ZSJdID0gMTMxMDcyDQogICAgICAgIH0sIHsNCiAgICAgICAgICAgIFsiaGV4X2VkaXRzIl0gPSAiNDkwNEEwRTNyIiwNCiAgICAgICAgICAgIFsiZmxvYXRfdmFsdWUiXSA9IDUyNDI4OA0KICAgICAgICB9LCB7DQogICAgICAgICAgICBbImhleF9lZGl0cyJdID0gIjA1MDJBMEUzciIsDQogICAgICAgICAgICBbImZsb2F0X3ZhbHVlIl0gPSA4NTg5OTM0NTkyDQogICAgICAgIH0sIHsNCiAgICAgICAgICAgIFsiaGV4X2VkaXRzIl0gPSAiNTEwNEEwRTNyIiwNCiAgICAgICAgICAgIFsiZmxvYXRfdmFsdWUiXSA9IDM0MzU5NzM4MzY4DQogICAgICAgIH0sIHsNCiAgICAgICAgICAgIFsiaGV4X2VkaXRzIl0gPSAiNTIwNEEwRTNyIiwNCiAgICAgICAgICAgIFsiZmxvYXRfdmFsdWUiXSA9IDEzNzQzODk1MzQ3Mg0KICAgICAgICB9LCB7DQogICAgICAgICAgICBbImhleF9lZGl0cyJdID0gIjUzMDRBMEUzciIsDQogICAgICAgICAgICBbImZsb2F0X3ZhbHVlIl0gPSA1NDk3NTU4MTM4ODgNCiAgICAgICAgfSwgew0KICAgICAgICAgICAgWyJoZXhfZWRpdHMiXSA9ICIxNTAzQTBFM3IiLA0KICAgICAgICAgICAgWyJmbG9hdF92YWx1ZSJdID0gMjE5OTAyMzI1NTU1Mg0KICAgICAgICB9LCB7DQogICAgICAgICAgICBbImhleF9lZGl0cyJdID0gIjU1MDRBMEUzciIsDQogICAgICAgICAgICBbImZsb2F0X3ZhbHVlIl0gPSA4Nzk2MDkzMDIyMjA4DQogICAgICAgIH0sIHsNCiAgICAgICAgICAgIFsiaGV4X2VkaXRzIl0gPSAiNTYwNEEwRTNyIiwNCiAgICAgICAgICAgIFsiZmxvYXRfdmFsdWUiXSA9IDM1MTg0MzcyMDg4ODMyDQogICAgICAgIH0sIHsNCiAgICAgICAgICAgIFsiaGV4X2VkaXRzIl0gPSAiNTcwNEEwRTNyIiwNCiAgICAgICAgICAgIFsiZmxvYXRfdmFsdWUiXSA9IDE0MDczNzQ4ODM1NTMyOA0KICAgICAgICB9LCB7DQogICAgICAgICAgICBbImhleF9lZGl0cyJdID0gIjE2MDNBMEUzciIsDQogICAgICAgICAgICBbImZsb2F0X3ZhbHVlIl0gPSA1NjI5NDk5NTM0MjEzMTINCiAgICAgICAgfSwgew0KICAgICAgICAgICAgWyJoZXhfZWRpdHMiXSA9ICI1OTA0QTBFM3IiLA0KICAgICAgICAgICAgWyJmbG9hdF92YWx1ZSJdID0gMjI1MTc5OTgxMzY4NTI0OA0KICAgICAgICB9LCB7DQogICAgICAgICAgICBbImhleF9lZGl0cyJdID0gIjA2MDJBMEUzciIsDQogICAgICAgICAgICBbImZsb2F0X3ZhbHVlIl0gPSAzNjg5MzQ4ODE0NzQxOTEwMzAwMA0KICAgICAgICB9fSwNCiAgICAgICAgWyJBUk04Il0gPSB7ew0KICAgICAgICAgICAgWyJoZXhfZWRpdHMiXSA9ICIwMDAwQTg1MnIiLA0KICAgICAgICAgICAgWyJmbG9hdF92YWx1ZSJdID0gMg0KICAgICAgICB9LCB7DQogICAgICAgICAgICBbImhleF9lZGl0cyJdID0gIjAwMjBBODUyciIsDQogICAgICAgICAgICBbImZsb2F0X3ZhbHVlIl0gPSA4DQogICAgICAgIH0sIHsNCiAgICAgICAgICAgIFsiaGV4X2VkaXRzIl0gPSAiMDA0MEE4NTJyIiwNCiAgICAgICAgICAgIFsiZmxvYXRfdmFsdWUiXSA9IDMyDQogICAgICAgIH0sIHsNCiAgICAgICAgICAgIFsiaGV4X2VkaXRzIl0gPSAiMDA2MEE4NTJyIiwNCiAgICAgICAgICAgIFsiZmxvYXRfdmFsdWUiXSA9IDEyOA0KICAgICAgICB9LCB7DQogICAgICAgICAgICBbImhleF9lZGl0cyJdID0gIjAwODBBODUyciIsDQogICAgICAgICAgICBbImZsb2F0X3ZhbHVlIl0gPSA1MTINCiAgICAgICAgfSwgew0KICAgICAgICAgICAgWyJoZXhfZWRpdHMiXSA9ICIwMEEwQTg1MnIiLA0KICAgICAgICAgICAgWyJmbG9hdF92YWx1ZSJdID0gMjA0OA0KICAgICAgICB9LCB7DQogICAgICAgICAgICBbImhleF9lZGl0cyJdID0gIjAwQzBBODUyciIsDQogICAgICAgICAgICBbImZsb2F0X3ZhbHVlIl0gPSA4MTkyDQogICAgICAgIH0sIHsNCiAgICAgICAgICAgIFsiaGV4X2VkaXRzIl0gPSAiMDBFMEE4NTJyIiwNCiAgICAgICAgICAgIFsiZmxvYXRfdmFsdWUiXSA9IDMyNzY4DQogICAgICAgIH0sIHsNCiAgICAgICAgICAgIFsiaGV4X2VkaXRzIl0gPSAiMDAwMEE5NTJyIiwNCiAgICAgICAgICAgIFsiZmxvYXRfdmFsdWUiXSA9IDEzMTA3Mg0KICAgICAgICB9LCB7DQogICAgICAgICAgICBbImhleF9lZGl0cyJdID0gIjAwMjBBOTUyciIsDQogICAgICAgICAgICBbImZsb2F0X3ZhbHVlIl0gPSA1MjQyODgNCiAgICAgICAgfSwgew0KICAgICAgICAgICAgWyJoZXhfZWRpdHMiXSA9ICIwMDAwQUE1MnIiLA0KICAgICAgICAgICAgWyJmbG9hdF92YWx1ZSJdID0gODU4OTkzNDU5Mg0KICAgICAgICB9LCB7DQogICAgICAgICAgICBbImhleF9lZGl0cyJdID0gIjAwMjBBQTUyciIsDQogICAgICAgICAgICBbImZsb2F0X3ZhbHVlIl0gPSAzNDM1OTczODM2OA0KICAgICAgICB9LCB7DQogICAgICAgICAgICBbImhleF9lZGl0cyJdID0gIjAwNDBBQTUyciIsDQogICAgICAgICAgICBbImZsb2F0X3ZhbHVlIl0gPSAxMzc0Mzg5NTM0NzINCiAgICAgICAgfSwgew0KICAgICAgICAgICAgWyJoZXhfZWRpdHMiXSA9ICIwMDYwQUE1MnIiLA0KICAgICAgICAgICAgWyJmbG9hdF92YWx1ZSJdID0gNTQ5NzU1ODEzODg4DQogICAgICAgIH0sIHsNCiAgICAgICAgICAgIFsiaGV4X2VkaXRzIl0gPSAiMDA4MEFBNTJyIiwNCiAgICAgICAgICAgIFsiZmxvYXRfdmFsdWUiXSA9IDIxOTkwMjMyNTU1NTINCiAgICAgICAgfSwgew0KICAgICAgICAgICAgWyJoZXhfZWRpdHMiXSA9ICIwMEEwQUE1MnIiLA0KICAgICAgICAgICAgWyJmbG9hdF92YWx1ZSJdID0gODc5NjA5MzAyMjIwOA0KICAgICAgICB9LCB7DQogICAgICAgICAgICBbImhleF9lZGl0cyJdID0gIjAwQzBBQTUyciIsDQogICAgICAgICAgICBbImZsb2F0X3ZhbHVlIl0gPSAzNTE4NDM3MjA4ODgzMg0KICAgICAgICB9LCB7DQogICAgICAgICAgICBbImhleF9lZGl0cyJdID0gIjAwRTBBQTUyciIsDQogICAgICAgICAgICBbImZsb2F0X3ZhbHVlIl0gPSAxNDA3Mzc0ODgzNTUzMjgNCiAgICAgICAgfSwgew0KICAgICAgICAgICAgWyJoZXhfZWRpdHMiXSA9ICIwMDAwQUI1MnIiLA0KICAgICAgICAgICAgWyJmbG9hdF92YWx1ZSJdID0gNTYyOTQ5OTUzNDIxMzEyDQogICAgICAgIH0sIHsNCiAgICAgICAgICAgIFsiaGV4X2VkaXRzIl0gPSAiMDAyMEFCNTJyIiwNCiAgICAgICAgICAgIFsiZmxvYXRfdmFsdWUiXSA9IDIyNTE3OTk4MTM2ODUyNDgNCiAgICAgICAgfSwgew0KICAgICAgICAgICAgWyJoZXhfZWRpdHMiXSA9ICIwMDAwQUM1MnIiLA0KICAgICAgICAgICAgWyJmbG9hdF92YWx1ZSJdID0gMzY4OTM0ODgxNDc0MTkxMDMwMDANCiAgICAgICAgfX0NCiAgICB9LA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglpbDJjcHBFZGl0cy5nZXRTaW1wbGVGbG9hdEVkaXQoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgZ2V0U2ltcGxlRmxvYXRFZGl0ID0gZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBlZGl0c19hcm03ID0ge30NCiAgICAgICAgbG9jYWwgZWRpdHNfYXJtOCA9IHt9DQogICAgICAgIGxvY2FsIG1lbnVfdGFibGUgPSB7fQ0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhpbDJjcHBFZGl0cy5zaW1wbGVGbG9hdHNUYWJsZVsiQVJNNyJdKSBkbw0KICAgICAgICAgICAgbWVudV90YWJsZVsjbWVudV90YWJsZSArIDFdID0gdi5mbG9hdF92YWx1ZQ0KICAgICAgICBlbmQNCiAgICAgICAgbG9jYWwgbWVudSA9IGdnLmNob2ljZShtZW51X3RhYmxlLCBuaWwsICLihLnvuI8gU2VsZWN0IEZsb2F0IFZhbHVlIOKEue+4jyIpDQogICAgICAgIGlmIG1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgIGVkaXRzX2FybTdbMV0gPSBpbDJjcHBFZGl0cy5zaW1wbGVGbG9hdHNUYWJsZVsiQVJNNyJdW21lbnVdLmhleF9lZGl0cw0KICAgICAgICAgICAgZWRpdHNfYXJtN1syXSA9ICJ+QSBCWCBMUiINCiAgICAgICAgICAgIGVkaXRzX2FybThbMV0gPSBpbDJjcHBFZGl0cy5zaW1wbGVGbG9hdHNUYWJsZVsiQVJNOCJdW21lbnVdLmhleF9lZGl0cw0KICAgICAgICAgICAgZWRpdHNfYXJtOFsyXSA9ICJ+QTggUkVUIg0KICAgICAgICAgICAgcmV0dXJuIHtlZGl0c19hcm03LCBlZGl0c19hcm04fQ0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLS0gQ3JlYXRlIEVkaXQtLQ0KICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIGxhc3Rfc2VhcmNoID0gIiIsDQogICAgbGFzdF9zZWFyY2hfMiA9ICIiLA0KICAgIGNhc2Vfc2Vuc2l0aXZlID0gdHJ1ZSwNCiAgICBhbGxfdGVybXMgPSB0cnVlLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglpbDJjcHBFZGl0cy5jcmVhdGVFZGl0KCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIGNyZWF0ZUVkaXQgPSBmdW5jdGlvbihtZXRob2RfbmFtZSwgZGJzZWFyY2gsIHNlYXJjaF90ZXJtXzIpDQogICAgICAgIHdoaWxlIChuaWwpIGRvDQogICAgICAgICAgICBsb2NhbCBjcmVhdGVFZGl0VmFsID0ge30NCiAgICAgICAgICAgIGlmIChjcmVhdGVFZGl0VmFsLmNyZWF0ZUVkaXRWYWwpIHRoZW4NCiAgICAgICAgICAgICAgICBjcmVhdGVFZGl0VmFsLmNyZWF0ZUVkaXRWYWwgPSAoY3JlYXRlRWRpdFZhbC5jcmVhdGVFZGl0VmFsKGNyZWF0ZUVkaXRWYWwpKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBpZiBub3QgY2FzZV9zIHRoZW4NCiAgICAgICAgICAgIGNhc2VfcyA9IGlsMmNwcEVkaXRzLmNhc2Vfc2Vuc2l0aXZlDQogICAgICAgIGVuZA0KICAgICAgICBpZiBub3QgYWxsX3QgdGhlbg0KICAgICAgICAgICAgYWxsX3QgPSBpbDJjcHBFZGl0cy5hbGxfdGVybXMNCiAgICAgICAgZW5kDQogICAgICAgIGlmIG5vdCBkYnNlYXJjaCB0aGVuDQogICAgICAgICAgICBkYnNlYXJjaCA9IGZhbHNlDQogICAgICAgIGVuZA0KICAgICAgICBpZiBub3Qgc2VhcmNoX3Rlcm1fMiB0aGVuDQogICAgICAgICAgICBzZWFyY2hfdGVybV8yID0gaWwyY3BwRWRpdHMubGFzdF9zZWFyY2hfMg0KICAgICAgICBlbmQNCiAgICAgICAgaWYgbm90IG1ldGhvZF9uYW1lIHRoZW4NCiAgICAgICAgICAgIG1ldGhvZF9uYW1lID0gaWwyY3BwRWRpdHMubGFzdF9zZWFyY2gNCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIG1lbnUgPSBnZy5wcm9tcHQoe3NjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBFbnRlciBhIG1ldGhvZCBuYW1lLiDihLnvuI9cbkZvciBcInB1YmxpYyBib29sIGdldF9Jc1VubG9ja2VkKCkgeyB9XCIgeW91IHdvdWxkIGVudGVyIFwiZ2V0X0lzVW5sb2NrZWRcIiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTZWFyY2ggRm9yIFN0cmluZyBJbnN0ZWFkIiwgDQoJCQkJCQkJCSJDYXNlIFNlbnNpdGl2ZSIsIA0KCQkJCQkJCQkiTXVzdCBJbmNsdWRlIEFsbCBTZWFyY2ggU3RyaW5ncyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTZWNvbmRhcnkgU2VhcmNoIFN0cmluZyJ9LCANCgkJCQkJCQkJew0KCQkJCQkJCQltZXRob2RfbmFtZSwgDQoJCQkJCQkJCWRic2VhcmNoLCANCgkJCQkJCQkJY2FzZV9zLCANCgkJCQkJCQkJYWxsX3QsIA0KCQkJCQkJCQlzZWFyY2hfdGVybV8yfSwNCgkJCQkJCQkJew0KCQkJCQkJCQkidGV4dCIsIA0KCQkJCQkJCQkiY2hlY2tib3giLCANCgkJCQkJCQkJImNoZWNrYm94IiwgDQoJCQkJCQkJCSJjaGVja2JveCIsIA0KCQkJCQkJCQkidGV4dCJ9KQ0KICAgICAgICBpZiBtZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICBpbDJjcHBFZGl0cy5sYXN0X3NlYXJjaCA9IG1lbnVbMV0NCiAgICAgICAgICAgIGlmIG1lbnVbMl0gPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgbG9jYWwgc2VhcmNoX3Rlcm1fMSA9IG1lbnVbMV0NCiAgICAgICAgICAgICAgICBsb2NhbCBzZWFyY2hfdGVybV8yID0gbWVudVs1XQ0KICAgICAgICAgICAgICAgIGNhc2VfcyA9IG1lbnVbM10NCiAgICAgICAgICAgICAgICBhbGxfdCA9IG1lbnVbNF0NCiAgICAgICAgICAgICAgICBtZW51WzFdID0gaWwyY3BwRWRpdHMuc2VhcmNoRGF0YUJhc2Uoc2VhcmNoX3Rlcm1fMSwgc2VhcmNoX3Rlcm1fMiwgY2FzZV9zLCBhbGxfdCkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgbG9jYWwgbWV0aG9kcyA9IGlsMmNwcEVkaXRzLmdldE1ldGhvZHMobWVudVsxXSkNCiAgICAgICAgICAgIGlmIG1ldGhvZHMgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICBsb2NhbCBtZXRob2RzX21lbnVfaXRlbXMgPSB7fQ0KICAgICAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKG1ldGhvZHMpIGRvDQogICAgICAgICAgICAgICAgICAgIG1ldGhvZHNfbWVudV9pdGVtc1sjbWV0aG9kc19tZW51X2l0ZW1zICsgMV0gPSAi44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iPXG5DbGFzcyBOYW1lOiAiIC4uIHYuY2xhc3NfbmFtZSAuLiAiXG5NZXRob2QgTmFtZTogIiAuLiB2Lm1ldGhvZF9uYW1lIC4uICJcbk1ldGhvZCBUeXBlOiAiIC4uIHYubWV0aG9kX3R5cGUgLi4gIlxu44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iPIg0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGxvY2FsIG1ldGhvZHNfbWVudSA9IGdnLmNob2ljZShtZXRob2RzX21lbnVfaXRlbXMsIG5pbCwNCiAgICAgICAgICAgICAgICAgICAgc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIFNlbGVjdCBtZXRob2QgdG8gZWRpdC4g4oS577iPIikNCiAgICAgICAgICAgICAgICBpZiBtZXRob2RzX21lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgY2xhc3NfbmFtZSA9IG1ldGhvZHNbbWV0aG9kc19tZW51XS5jbGFzc19uYW1lDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIG1ldGhvZF9uYW1lID0gbWV0aG9kc1ttZXRob2RzX21lbnVdLm1ldGhvZF9uYW1lDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGlsMmNwcF9hZGRyZXNzID0gbWV0aG9kc1ttZXRob2RzX21lbnVdLmlsMmNwcF9hZGRyZXNzDQogICAgICAgICAgICAgICAgICAgIGlsMmNwcEVkaXRzLmNyZWF0ZV9lZGl0X3RhYmxlID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NfbmFtZSA9IGNsYXNzX25hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RfbmFtZSA9IG1ldGhvZF9uYW1lDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgOjpzZWxlY3RfZWRpdF90eXBlOjoNCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgbWVudV90eXBlID0geyJib29sIiwgImludCIsICJmbG9hdCIsICJkb3VibGUifQ0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBlZGl0X3R5cGUgPSBnZy5jaG9pY2UobWVudV90eXBlLCBuaWwsDQogICAgICAgICAgICAgICAgICAgICAgICBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2VsZWN0IHR5cGUgb2YgZWRpdCB0byBsb2FkLiDihLnvuI8iKQ0KICAgICAgICAgICAgICAgICAgICBpZiBlZGl0X3R5cGUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGVkaXRfdHlwZSA9PSAxIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0cyA9IGlsMmNwcEVkaXRzLmdldEJvb2xFZGl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZWRpdF90eXBlID09IDIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRzID0gaWwyY3BwRWRpdHMuZ2V0SW50RWRpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGVkaXRfdHlwZSA9PSAzIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBzcGFjZV9saW1pdCA9IGlsMmNwcEVkaXRzLmdldFZhbHVlcyhpbDJjcHBfYWRkcmVzcykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAjc3BhY2VfbGltaXRbMV0gPj0gOSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heF92YWx1ZSA9IDQyOTUwMzI4NA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiAjc3BhY2VfbGltaXRbMV0gPj0gNyB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heF92YWx1ZSA9IDEzMTA3Mg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiAjc3BhY2VfbGltaXRbMV0gPj0gNSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heF92YWx1ZSA9IDY1NTM1DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhfdmFsdWUgPSAwDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbWF4X3ZhbHVlID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDo6c2V0X3ZhbHVlOjoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgc2V0X3ZhbCA9IGdnLnByb21wdCh7IlNldCBmbG9hdCB2YWx1ZSAoTWF4ICIgLi4gbWF4X3ZhbHVlIC4uICIpIn0sIG5pbCwgeyJudW1iZXIifSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgc2V0X3ZhbCB+PSBuaWwgYW5kIHRvbnVtYmVyKHNldF92YWxbMV0pIDw9IG1heF92YWx1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0cyA9IGlsMmNwcEVkaXRzLmdldENvbXBsZXhGbG9hdEVkaXQoc2V0X3ZhbFsxXSwgImZsb2F0IikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIHNldF92YWwgfj0gbmlsIGFuZCB0b251bWJlcihzZXRfdmFsWzFdKSA+IG1heF92YWx1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZy5hbGVydCgidmFsdWUgdG9vIGhpZ2giKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ290byBzZXRfdmFsdWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0cyA9IGlsMmNwcEVkaXRzLmdldFNpbXBsZUZsb2F0RWRpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGVkaXRfdHlwZSA9PSA0IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBzcGFjZV9saW1pdCA9IGlsMmNwcEVkaXRzLmdldFZhbHVlcyhpbDJjcHBfYWRkcmVzcykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAjc3BhY2VfbGltaXRbMV0gPj0gOSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heF92YWx1ZSA9IDQyOTUwMzI4NA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiAjc3BhY2VfbGltaXRbMV0gPj0gNyB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heF92YWx1ZSA9IDEzMTA3Mg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiAjc3BhY2VfbGltaXRbMV0gPj0gNSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heF92YWx1ZSA9IDY1NTM1DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbWF4X3ZhbHVlID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDo6c2V0X3ZhbHVlOjoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgc2V0X3ZhbCA9IGdnLnByb21wdCh7IlNldCBkb3VibGUgdmFsdWUgKE1heCAiIC4uIG1heF92YWx1ZSAuLiAiKSJ9LCBuaWwsIHsibnVtYmVyIn0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNldF92YWwgfj0gbmlsIGFuZCB0b251bWJlcihzZXRfdmFsWzFdKSA8PSBtYXhfdmFsdWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdHMgPSBpbDJjcHBFZGl0cy5nZXRDb21wbGV4RmxvYXRFZGl0KHNldF92YWxbMV0sICJkb3VibGUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgc2V0X3ZhbCB+PSBuaWwgYW5kIHRvbnVtYmVyKHNldF92YWxbMV0pID4gbWF4X3ZhbHVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdnLmFsZXJ0KCJ2YWx1ZSB0b28gaGlnaCIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb3RvIHNldF92YWx1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdnLmFsZXJ0KCJub3QgZW5vdWdoIHJvb20gZm9yIGRvdWJsZSBlZGl0IikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IGVkaXRzIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gc2VsZWN0X2VkaXRfdHlwZQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgbWFraW5nX2VkaXQgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgIDo6ZW50ZXJfbmFtZTo6DQogICAgICAgICAgICAgICAgICAgIGxvY2FsIG5hbWVfbWVudSA9IGdnLnByb21wdCh7c2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIEVudGVyIG5hbWUgZm9yIGVkaXQuIOKEue+4jyJ9LCB7bWV0aG9kX25hbWV9LCB7InRleHQifSkNCiAgICAgICAgICAgICAgICAgICAgaWYgbmFtZV9tZW51ID09IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBnb3RvIGVudGVyX25hbWUNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlsMmNwcEVkaXRzLnNhdmVkRWRpdHNUYWJsZVsjaWwyY3BwRWRpdHMuc2F2ZWRFZGl0c1RhYmxlICsgMV0gPSB7DQogICAgICAgICAgICAgICAgICAgICAgICBlZGl0X25hbWUgPSBuYW1lX21lbnVbMV0sDQogICAgICAgICAgICAgICAgICAgICAgICBjbGFzc19uYW1lID0gY2xhc3NfbmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZF9uYW1lID0gbWV0aG9kX25hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICBhcm03X2VkaXRzID0gZWRpdHNbMV0sDQogICAgICAgICAgICAgICAgICAgICAgICBhcm04X2VkaXRzID0gZWRpdHNbMl0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiBpbDJjcHBFZGl0cy5hcmNoLng2NCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpbDJjcHBFZGl0cy5jcmVhdGVTZXRWYWx1ZXMoaWwyY3BwX2FkZHJlc3MsIGVkaXRzWzJdKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBpbDJjcHBFZGl0cy5jcmVhdGVTZXRWYWx1ZXMoaWwyY3BwX2FkZHJlc3MsIGVkaXRzWzFdKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZ2cuYWxlcnQoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIFZhbHVlIGhhcyBiZWVuIHNldC4g4oS577iPIFxuVGVzdCB0byB2ZXJpZnkgaXQgaXMgd29ya2luZyBhbmQgdGhlbiBwcmVzcyB0aGUgZmxvYXRpbmcgR0cgYnV0dG9uIHRvIGVpdGhlciBTYXZlIG9yIERpc2NhcmQgZWRpdC4iKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRWRpdHMucmVtb3ZlRnJvbURhdGFCYXNlKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIHJlbW92ZUZyb21EYXRhQmFzZSA9IGZ1bmN0aW9uKHN0cmluZ19uYW1lKQ0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhpbDJjcHBFZGl0cy5wYXJzZWRfc3RyaW5nc190YWJsZSkgZG8NCiAgICAgICAgICAgIGlmIHYuaWwyY3BwX3N0cmluZyA9PSBzdHJpbmdfbmFtZSB0aGVuDQogICAgICAgICAgICAgICAgdGFibGUucmVtb3ZlKGlsMmNwcEVkaXRzLnBhcnNlZF9zdHJpbmdzX3RhYmxlLCBpKQ0KICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC0tIFNldCBWYWx1ZXMgRm9yIENyZWF0aW5nIEZ1bmN0aW9uLS0NCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRWRpdHMuY3JlYXRlU2V0VmFsdWVzKGFkZHJlc3MsIGVkaXRzKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgY3JlYXRlU2V0VmFsdWVzID0gZnVuY3Rpb24oYWRkcmVzcywgZWRpdHMpDQogICAgICAgIGxvY2FsIGFkZHJlc3NfdGFibGUgPSB7fQ0KICAgICAgICBsb2NhbCBvZmZzZXQgPSAwDQogICAgICAgIGxvY2FsIGNvdW50ID0gMQ0KICAgICAgICByZXBlYXQNCiAgICAgICAgICAgIGFkZHJlc3NfdGFibGVbY291bnRdID0ge30NCiAgICAgICAgICAgIGFkZHJlc3NfdGFibGVbY291bnRdLmFkZHJlc3MgPSBhZGRyZXNzICsgb2Zmc2V0DQogICAgICAgICAgICBhZGRyZXNzX3RhYmxlW2NvdW50XS5mbGFncyA9IGdnLlRZUEVfRFdPUkQNCiAgICAgICAgICAgIGFkZHJlc3NfdGFibGVbY291bnRdLnZhbHVlID0gZWRpdHNbY291bnRdDQogICAgICAgICAgICBvZmZzZXQgPSBvZmZzZXQgKyA0DQogICAgICAgICAgICBjb3VudCA9IGNvdW50ICsgMQ0KICAgICAgICB1bnRpbCAoY291bnQgPT0gI2VkaXRzICsgMSkNCiAgICAgICAgaWwyY3BwRWRpdHMuY3JlYXRlX3JldmVydF90YWJsZSA9IGdnLmdldFZhbHVlcyhhZGRyZXNzX3RhYmxlKQ0KICAgICAgICBpbDJjcHBFZGl0cy5yZXZlcnRfdGFibGVbI2lsMmNwcEVkaXRzLnNhdmVkRWRpdHNUYWJsZV0gPSBnZy5nZXRWYWx1ZXMoYWRkcmVzc190YWJsZSkNCiAgICAgICAgZ2cuc2V0VmFsdWVzKGFkZHJlc3NfdGFibGUpDQogICAgZW5kLA0KICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC0tIEdldCBDdXJyZW50IFZhbHVlcyBGcm9tIE1lbW9yeS0tDQogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWlsMmNwcEVkaXRzLmdldFZhbHVlcyhhZGRyZXNzKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgZ2V0VmFsdWVzID0gZnVuY3Rpb24oYWRkcmVzcykNCiAgICAgICAgbG9jYWwgbGliX2VkaXRfdGFibGUgPSB7fQ0KICAgICAgICBsb2NhbCBvZmZzZXQgPSAweDANCiAgICAgICAgbG9jYWwgY291bnQgPSAxDQogICAgICAgIHJlcGVhdA0KICAgICAgICAgICAgbGliX2VkaXRfdGFibGVbY291bnRdID0ge30NCiAgICAgICAgICAgIGxpYl9lZGl0X3RhYmxlW2NvdW50XS5hZGRyZXNzID0gYWRkcmVzcyArIG9mZnNldA0KICAgICAgICAgICAgbGliX2VkaXRfdGFibGVbY291bnRdLmZsYWdzID0gZmxhZ190eXBlDQogICAgICAgICAgICBvZmZzZXQgPSBvZmZzZXQgKyAweDQNCiAgICAgICAgICAgIGNvdW50ID0gY291bnQgKyAxDQogICAgICAgIHVudGlsIChjb3VudCA9PSAyMSkNCiAgICAgICAgbG9jYWwgdmFsdWVzID0gZ2cuZ2V0VmFsdWVzKGxpYl9lZGl0X3RhYmxlKQ0KICAgICAgICBsb2NhbCBlZGl0c190YWJsZSA9IHt9DQogICAgICAgIGxvY2FsIGVkaXRfbm90ZXNfdGFibGUgPSB7fQ0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyh2YWx1ZXMpIGRvDQogICAgICAgICAgICBlZGl0X25vdGVzX3RhYmxlWyNlZGl0X25vdGVzX3RhYmxlICsgMV0gPSAiIg0KICAgICAgICAgICAgaWYgaWwyY3BwRWRpdHMuYXJjaC54NjQgdGhlbg0KICAgICAgICAgICAgICAgIGVkaXRzX3RhYmxlWyNlZGl0c190YWJsZSArIDFdID0gIn5BOCAiIC4uIGdnLmRpc2FzbShnZy5BU01fQVJNNjQsIHYuYWRkcmVzcywgdi52YWx1ZSkNCiAgICAgICAgICAgICAgICBpZiBlZGl0c190YWJsZVsjZWRpdHNfdGFibGVdOmZpbmQoIlJFVCIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBlZGl0c190YWJsZVsjZWRpdHNfdGFibGUgKyAxXSA9ICJ+QSAiIC4uIGdnLmRpc2FzbShnZy5BU01fQVJNLCB2LmFkZHJlc3MsIHYudmFsdWUpDQogICAgICAgICAgICAgICAgaWYgZWRpdHNfdGFibGVbI2VkaXRzX3RhYmxlXTpmaW5kKCJCWCIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgcmV0dXJuIHtlZGl0c190YWJsZSwgZWRpdF9ub3Rlc190YWJsZX0NCiAgICBlbmQsDQogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC0tIEZpbmQgTWV0aG9kIEZvciBFbmFibGluZyBTYXZlZCBFZGl0LS0NCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWlsMmNwcEVkaXRzLmZpbmRNZXRob2QobWV0aG9kX25hbWUsIHBhc3NlZF9jbGFzc19uYW1lKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgZmluZE1ldGhvZCA9IGZ1bmN0aW9uKG1ldGhvZF9uYW1lLCBwYXNzZWRfY2xhc3NfbmFtZSkNCiAgICAgICAgd2hpbGUgKG5pbCkgZG8NCiAgICAgICAgICAgIGxvY2FsIGZpbmRNZXRob2RWYWwgPSB7fQ0KICAgICAgICAgICAgaWYgKGZpbmRNZXRob2RWYWwuZmluZE1ldGhvZFZhbCkgdGhlbg0KICAgICAgICAgICAgICAgIGZpbmRNZXRob2RWYWwuZmluZE1ldGhvZFZhbCA9IChmaW5kTWV0aG9kVmFsLmZpbmRNZXRob2RWYWwoZmluZE1ldGhvZFZhbCkpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGlmIGlsMmNwcEVkaXRzLmFyY2gueDY0IHRoZW4NCiAgICAgICAgICAgIHBfb2Zmc2V0ID0gMTYNCiAgICAgICAgICAgIHBfb2Zmc2V0MiA9IDgNCiAgICAgICAgICAgIGZsYWdfdHlwZSA9IGdnLlRZUEVfUVdPUkQNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgcF9vZmZzZXQgPSA4DQogICAgICAgICAgICBwX29mZnNldDIgPSA0DQogICAgICAgICAgICBmbGFnX3R5cGUgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgIGVuZA0KICAgICAgICBtZXRob2RfbmFtZV9hZGRyZXNzID0gaWwyY3BwRWRpdHMuc2VhcmNoRHVtcChtZXRob2RfbmFtZSkNCiAgICAgICAgZ2cuY2xlYXJSZXN1bHRzKCkNCiAgICAgICAgZ2cuc2V0UmFuZ2VzKGdnLlJFR0lPTl9DX0FMTE9DIHwgZ2cuUkVHSU9OX0NfSEVBUCkNCiAgICAgICAgZ2cuc2VhcmNoTnVtYmVyKG1ldGhvZF9uYW1lX2FkZHJlc3MsIGZsYWdfdHlwZSkNCiAgICAgICAgbG9jYWwgcmVzdWx0cyA9IGdnLmdldFJlc3VsdHMoZ2cuZ2V0UmVzdWx0c0NvdW50KCkpDQogICAgICAgIGxvY2FsIG1ldGhvZHNfZm91bmQgPSB7fQ0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhyZXN1bHRzKSBkbw0KICAgICAgICAgICAgbG9jYWwgZ2V0X2NsYXNzX3BvaW50ZXJfMSA9IHt9DQogICAgICAgICAgICBnZXRfY2xhc3NfcG9pbnRlcl8xWzFdID0ge30NCiAgICAgICAgICAgIGdldF9jbGFzc19wb2ludGVyXzFbMV0uYWRkcmVzcyA9IHYuYWRkcmVzcyArIHBfb2Zmc2V0Mg0KICAgICAgICAgICAgZ2V0X2NsYXNzX3BvaW50ZXJfMVsxXS5mbGFncyA9IGZsYWdfdHlwZQ0KICAgICAgICAgICAgZ2V0X2NsYXNzX3BvaW50ZXJfMSA9IGdnLmdldFZhbHVlcyhnZXRfY2xhc3NfcG9pbnRlcl8xKQ0KICAgICAgICAgICAgbG9jYWwgZ2V0X2NsYXNzX3BvaW50ZXJfMiA9IHt9DQogICAgICAgICAgICBnZXRfY2xhc3NfcG9pbnRlcl8yWzFdID0ge30NCiAgICAgICAgICAgIGdldF9jbGFzc19wb2ludGVyXzJbMV0uYWRkcmVzcyA9IGdldF9jbGFzc19wb2ludGVyXzFbMV0udmFsdWUgKyBwX29mZnNldA0KICAgICAgICAgICAgZ2V0X2NsYXNzX3BvaW50ZXJfMlsxXS5mbGFncyA9IGZsYWdfdHlwZQ0KICAgICAgICAgICAgZ2V0X2NsYXNzX3BvaW50ZXJfMiA9IGdnLmdldFZhbHVlcyhnZXRfY2xhc3NfcG9pbnRlcl8yKQ0KICAgICAgICAgICAgbG9jYWwgZ2V0X2NsYXNzX3N0YXJ0ID0ge30NCiAgICAgICAgICAgIGdldF9jbGFzc19zdGFydFsxXSA9IHt9DQogICAgICAgICAgICBnZXRfY2xhc3Nfc3RhcnRbMV0uYWRkcmVzcyA9IGdldF9jbGFzc19wb2ludGVyXzJbMV0udmFsdWUNCiAgICAgICAgICAgIGdldF9jbGFzc19zdGFydFsxXS5mbGFncyA9IGdnLlRZUEVfQllURQ0KICAgICAgICAgICAgZ2cubG9hZFJlc3VsdHMoZ2V0X2NsYXNzX3N0YXJ0KQ0KICAgICAgICAgICAgZ2V0X2NsYXNzX3N0YXJ0ID0gZ2cuZ2V0VmFsdWVzKGdldF9jbGFzc19zdGFydCkNCiAgICAgICAgICAgIGxvY2FsIGdldF9jbGFzcyA9IHt9DQogICAgICAgICAgICBsb2NhbCBvZmZzZXQgPSAwDQogICAgICAgICAgICBsb2NhbCBjb3VudCA9IDENCiAgICAgICAgICAgIHJlcGVhdA0KICAgICAgICAgICAgICAgIGdldF9jbGFzc1tjb3VudF0gPSB7fQ0KICAgICAgICAgICAgICAgIGdldF9jbGFzc1tjb3VudF0uYWRkcmVzcyA9IGdldF9jbGFzc19wb2ludGVyXzJbMV0udmFsdWUgKyBvZmZzZXQNCiAgICAgICAgICAgICAgICBnZXRfY2xhc3NbY291bnRdLmZsYWdzID0gZ2cuVFlQRV9CWVRFDQogICAgICAgICAgICAgICAgY291bnQgPSBjb3VudCArIDENCiAgICAgICAgICAgICAgICBvZmZzZXQgPSBvZmZzZXQgKyAxDQogICAgICAgICAgICB1bnRpbCAoY291bnQgPT0gMTAwKQ0KICAgICAgICAgICAgZ2V0X2NsYXNzID0gZ2cuZ2V0VmFsdWVzKGdldF9jbGFzcykNCiAgICAgICAgICAgIGxvY2FsIGNsYXNzX25hbWUgPSAiIg0KICAgICAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBwYWlycyhnZXRfY2xhc3MpIGRvDQogICAgICAgICAgICAgICAgY2xhc3NfbmFtZSA9IGNsYXNzX25hbWUgLi4gc3RyaW5nLmNoYXIodmFsdWUudmFsdWUpDQogICAgICAgICAgICAgICAgaWYgdmFsdWUudmFsdWUgPT0gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGlmIGNsYXNzX25hbWUgPT0gcGFzc2VkX2NsYXNzX25hbWUgdGhlbg0KICAgICAgICAgICAgICAgIGxvY2FsIGdldF9pbDJjcHBfYWRkcmVzcyA9IHt9DQogICAgICAgICAgICAgICAgZ2V0X2lsMmNwcF9hZGRyZXNzWzFdID0ge30NCiAgICAgICAgICAgICAgICBnZXRfaWwyY3BwX2FkZHJlc3NbMV0uYWRkcmVzcyA9IHYuYWRkcmVzcyAtIHBfb2Zmc2V0DQogICAgICAgICAgICAgICAgZ2V0X2lsMmNwcF9hZGRyZXNzWzFdLmZsYWdzID0gZmxhZ190eXBlDQogICAgICAgICAgICAgICAgZ2V0X2lsMmNwcF9hZGRyZXNzID0gZ2cuZ2V0VmFsdWVzKGdldF9pbDJjcHBfYWRkcmVzcykNCiAgICAgICAgICAgICAgICBpbDJjcHBfYWRkcmVzcyA9IGdldF9pbDJjcHBfYWRkcmVzc1sxXS52YWx1ZQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICByZXR1cm4gaWwyY3BwX2FkZHJlc3MNCiAgICBlbmQsDQogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLS0gU2V0IFZhbHVlcyBGb3IgU2F2ZWQgRWRpdC0tDQogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWlsMmNwcEVkaXRzLnNldFZhbHVlcyhpbmRleCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIHNldFZhbHVlcyA9IGZ1bmN0aW9uKGluZGV4KQ0KICAgICAgICBpZiBpbDJjcHBFZGl0cy5yZXZlcnRfdGFibGVbaW5kZXhdIHRoZW4NCiAgICAgICAgICAgIGdnLnNldFZhbHVlcyhpbDJjcHBFZGl0cy5yZXZlcnRfdGFibGVbaW5kZXhdKQ0KICAgICAgICAgICAgaWwyY3BwRWRpdHMucmV2ZXJ0X3RhYmxlW2luZGV4XSA9IG5pbA0KICAgICAgICAgICAgZ2cudG9hc3QoIuKdjCAiIC4uIGlsMmNwcEVkaXRzLnNhdmVkRWRpdHNUYWJsZVtpbmRleF0uZWRpdF9uYW1lIC4uICIgRGlzYWJsZWQg4p2MIikNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgaWYgaWwyY3BwRWRpdHMuYXJjaC54NjQgdGhlbg0KICAgICAgICAgICAgICAgIGVkaXRzX2FyY2ggPSAiYXJtOF9lZGl0cyINCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBlZGl0c19hcmNoID0gImFybTdfZWRpdHMiDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGxvY2FsIG1ldGhvZF9uYW1lID0gaWwyY3BwRWRpdHMuc2F2ZWRFZGl0c1RhYmxlW2luZGV4XS5tZXRob2RfbmFtZQ0KICAgICAgICAgICAgbG9jYWwgY2xhc3NfbmFtZSA9IGlsMmNwcEVkaXRzLnNhdmVkRWRpdHNUYWJsZVtpbmRleF0uY2xhc3NfbmFtZQ0KICAgICAgICAgICAgbG9jYWwgYWRkcmVzcyA9IGlsMmNwcEVkaXRzLmZpbmRNZXRob2QobWV0aG9kX25hbWUsIGNsYXNzX25hbWUpDQogICAgICAgICAgICBsb2NhbCBlZGl0cyA9IGlsMmNwcEVkaXRzLnNhdmVkRWRpdHNUYWJsZVtpbmRleF1bZWRpdHNfYXJjaF0NCiAgICAgICAgICAgIGxvY2FsIGFkZHJlc3NfdGFibGUgPSB7fQ0KICAgICAgICAgICAgbG9jYWwgb2Zmc2V0ID0gMA0KICAgICAgICAgICAgbG9jYWwgY291bnQgPSAxDQogICAgICAgICAgICByZXBlYXQNCiAgICAgICAgICAgICAgICBhZGRyZXNzX3RhYmxlW2NvdW50XSA9IHt9DQogICAgICAgICAgICAgICAgYWRkcmVzc190YWJsZVtjb3VudF0uYWRkcmVzcyA9IGFkZHJlc3MgKyBvZmZzZXQNCiAgICAgICAgICAgICAgICBhZGRyZXNzX3RhYmxlW2NvdW50XS5mbGFncyA9IGdnLlRZUEVfRFdPUkQNCiAgICAgICAgICAgICAgICBhZGRyZXNzX3RhYmxlW2NvdW50XS52YWx1ZSA9IGVkaXRzW2NvdW50XQ0KICAgICAgICAgICAgICAgIG9mZnNldCA9IG9mZnNldCArIDQNCiAgICAgICAgICAgICAgICBjb3VudCA9IGNvdW50ICsgMQ0KICAgICAgICAgICAgdW50aWwgKGNvdW50ID09ICNlZGl0cyArIDEpDQogICAgICAgICAgICBpbDJjcHBFZGl0cy5yZXZlcnRfdGFibGVbaW5kZXhdID0gZ2cuZ2V0VmFsdWVzKGFkZHJlc3NfdGFibGUpDQogICAgICAgICAgICBnZy5zZXRWYWx1ZXMoYWRkcmVzc190YWJsZSkNCiAgICAgICAgICAgIGdnLnRvYXN0KCLinIUgIiAuLiBpbDJjcHBFZGl0cy5zYXZlZEVkaXRzVGFibGVbaW5kZXhdLmVkaXRfbmFtZSAuLiAiIEVuYWJsZWQg4pyFIikNCg0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLS0gU2F2ZSBFZGl0LS0NCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRWRpdHMuc2F2ZUNvbmZpZygpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBzYXZlQ29uZmlnID0gZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBmaWxlID0gaW8ub3BlbihpbDJjcHBFZGl0cy5zYXZlUGF0aCAuLiBnZy5nZXRUYXJnZXRQYWNrYWdlKCkgLi4gIi5jZmciLCAidysiKQ0KICAgICAgICBmaWxlOndyaXRlKCJpbDJjcHBFZGl0cy5zYXZlZEVkaXRzVGFibGUgPSAiIC4uIHRvc3RyaW5nKGlsMmNwcEVkaXRzLnNhdmVkRWRpdHNUYWJsZSkpDQogICAgICAgIGZpbGU6Y2xvc2UoKQ0KICAgIGVuZCwNCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAtLSBEZWxldGUgRWRpdHMtLQ0KICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglpbDJjcHBFZGl0cy5kZWxldGVFZGl0KCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIGRlbGV0ZUVkaXQgPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIG1lbnVfbmFtZXMgPSB7fQ0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhpbDJjcHBFZGl0cy5zYXZlZEVkaXRzVGFibGUpIGRvDQogICAgICAgICAgICBtZW51X25hbWVzW2ldID0gdi5lZGl0X25hbWUNCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIG1lbnUgPSBnZy5tdWx0aUNob2ljZShtZW51X25hbWVzLCBuaWwsICJTZWxlY3QgZWRpdHMgdG8gZGVsZXRlIikNCiAgICAgICAgaWYgbWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgbG9jYWwgY29uZmlybSA9IGdnLmNob2ljZSh7IuKchSBZZXMgZGVsZXRlIHRoZSBlZGl0cyIsICLinYwgTm8ifSwgbmlsLCBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gQXJlIHlvdSBzdXJlPyDihLlcbkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhlc2UgZWRpdHMsICB0aGlzIGNhbiBub3QgYmUgdW5kb25lPyAiKQ0KICAgICAgICAgICAgaWYgY29uZmlybSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgIGlmIGNvbmZpcm0gPT0gMSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGZvciBrLCB2IGluIHBhaXJzKGlsMmNwcEVkaXRzLnNhdmVkRWRpdHNUYWJsZSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBrZXksIHZhbHVlIGluIHBhaXJzKG1lbnUpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgayA9PSBrZXkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbDJjcHBFZGl0cy5zYXZlZEVkaXRzVGFibGVba10gPSAiZGVsZXRlIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICA6OmdldF9uZXh0OjoNCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgY291bnQgPSAxDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGRvX3VudGlsID0gI2lsMmNwcEVkaXRzLnNhdmVkRWRpdHNUYWJsZSArIDENCiAgICAgICAgICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoaWwyY3BwRWRpdHMuc2F2ZWRFZGl0c1RhYmxlKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgY291bnQgPSBjb3VudCArIDENCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHR5cGUodikgPT0gInN0cmluZyIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLnJlbW92ZShpbDJjcHBFZGl0cy5zYXZlZEVkaXRzVGFibGUsIGkpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgY291bnQgPCBkb191bnRpbCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBnb3RvIGdldF9uZXh0DQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpbDJjcHBFZGl0cy5zYXZlQ29uZmlnKCkNCiAgICAgICAgICAgICAgICAgICAgZ2cudG9hc3QoIuKchSBFZGl0cyBEZWxldGVkIOKchSIpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC0tIEV4cG9ydCBFZGl0cy0tDQogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWlsMmNwcEVkaXRzLmV4cG9ydEVkaXRzKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIGV4cG9ydEVkaXRzID0gZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBtZW51X25hbWVzID0ge30NCiAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoaWwyY3BwRWRpdHMuc2F2ZWRFZGl0c1RhYmxlKSBkbw0KICAgICAgICAgICAgbWVudV9uYW1lc1tpXSA9IHYuZWRpdF9uYW1lDQogICAgICAgIGVuZA0KICAgICAgICBsb2NhbCB0b19leHBvcnQgPSB7fQ0KICAgICAgICBsb2NhbCBtZW51ID0gZ2cubXVsdGlDaG9pY2UobWVudV9uYW1lcywgbmlsLCBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2VsZWN0IGVkaXRzIHRvIGV4cG9ydC4g4oS577iPIikNCiAgICAgICAgaWYgbWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgZm9yIGssIHYgaW4gcGFpcnMobWVudSkgZG8NCiAgICAgICAgICAgICAgICB0b19leHBvcnRbI3RvX2V4cG9ydCArIDFdID0gaWwyY3BwRWRpdHMuc2F2ZWRFZGl0c1RhYmxlW2tdDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGxvY2FsIGZpbGUgPSBpby5vcGVuKGlsMmNwcEVkaXRzLnNhdmVQYXRoIC4uIGdnLmdldFRhcmdldFBhY2thZ2UoKSAuLiAiXyIgLi4gb3MuZGF0ZSgpIC4uICJfZXhwb3J0Lmpzb24iLCAidysiKQ0KICAgICAgICAgICAgaWYgZmlsZSA9PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgIGZpbGUgPQ0KICAgICAgICAgICAgICAgICAgICBpby5vcGVuKGlsMmNwcEVkaXRzLnNhdmVQYXRoIC4uIGdnLmdldFRhcmdldFBhY2thZ2UoKSAuLiAiXyIgLi4gb3MudGltZSgpIC4uICJfZXhwb3J0Lmpzb24iLCAidysiKQ0KICAgICAgICAgICAgICAgIGdnLmFsZXJ0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKchSBFZGl0cyBFeHBvcnRlZCDinIVcblxuIiAuLiBpbDJjcHBFZGl0cy5zYXZlUGF0aCAuLiBnZy5nZXRUYXJnZXRQYWNrYWdlKCkgLi4gIl8iIC4uIG9zLnRpbWUoKSAuLiAiX2V4cG9ydC5qc29uIikNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBnZy5hbGVydChzY3JpcHRfdGl0bGUgLi4gIlxuXG7inIUgRWRpdHMgRXhwb3J0ZWQg4pyFXG5cbiIgLi4gaWwyY3BwRWRpdHMuc2F2ZVBhdGggLi4gZ2cuZ2V0VGFyZ2V0UGFja2FnZSgpIC4uICJfIiAuLiBvcy5kYXRlKCkgLi4gIl9leHBvcnQuanNvbiIpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGZpbGU6d3JpdGUoanNvbi5lbmNvZGUodG9fZXhwb3J0KSkNCiAgICAgICAgICAgIGZpbGU6Y2xvc2UoKQ0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLS0gSW1wb3J0IEVkaXRzLS0NCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRWRpdHMuaW1wb3J0RWRpdHMoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgaW1wb3J0RWRpdHMgPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIG1lbnUgPSBnZy5wcm9tcHQoe3NjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBTZWxlY3QgSlNPTiDihLnvuI8ifSwgew0KICAgICAgICAgICAgWzFdID0gaWwyY3BwRWRpdHMuc2F2ZVBhdGgNCiAgICAgICAgfSwgew0KICAgICAgICAgICAgWzFdID0gImZpbGUiDQogICAgICAgIH0pDQogICAgICAgIGlmIG1lbnUgPT0gbmlsIHRoZW4NCiAgICAgICAgZW5kDQogICAgICAgIGlmIG1lbnUgfj0gbmlsIGFuZCBzdHJpbmcuZmluZChtZW51WzFdLCAiJS5qc29uIikgdGhlbg0KICAgICAgICAgICAgbG9jYWwgZmlsZSA9IGFzc2VydChpby5vcGVuKG1lbnVbMV0sICJyIikpDQogICAgICAgICAgICBsb2NhbCBjb250ZW50ID0gZmlsZTpyZWFkKCIqYSIpDQogICAgICAgICAgICBmaWxlOmNsb3NlKCkNCiAgICAgICAgICAgIGxvY2FsIGltcG9ydF90YWJsZSA9IGpzb24uZGVjb2RlKGNvbnRlbnQpDQogICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhpbXBvcnRfdGFibGUpIGRvDQogICAgICAgICAgICAgICAgaWwyY3BwRWRpdHMuc2F2ZWRFZGl0c1RhYmxlWyNpbDJjcHBFZGl0cy5zYXZlZEVkaXRzVGFibGUgKyAxXSA9IHYNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWwyY3BwRWRpdHMuc2F2ZUNvbmZpZygpDQogICAgICAgICAgICBnZy50b2FzdCgi4pyFIEVkaXRzIEltcG9ydGVkIOKchSIpDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRWRpdHMuY3JlYXRlU2VhcmNoRGF0YUJhc2UoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgY3JlYXRlU2VhcmNoRGF0YUJhc2UgPSBmdW5jdGlvbigpDQogICAgICAgIHN0cmluZ19hZGRyZXNzID0gcmFuZ2Vfc3RhcnQNCiAgICAgICAgY3VycmVudF9zdHJpbmdfYWRkcmVzcyA9IHN0cmluZ19hZGRyZXNzDQogICAgICAgIHN0b3BfYXQgPSByYW5nZV9lbmQgLSByYW5nZV9zdGFydA0KICAgICAgICBtYXhfcHJvYyA9IDEwMDAwMA0KICAgICAgICA6Om5leHRfYmF0Y2g6Og0KICAgICAgICBsb2NhbCBzdHJpbmdzX3RhYmxlID0ge30NCiAgICAgICAgc3RyaW5nX2NvdW50ID0gMQ0KICAgICAgICByZXBlYXQNCiAgICAgICAgICAgIHN0cmluZ3NfdGFibGVbc3RyaW5nX2NvdW50XSA9IHt9DQogICAgICAgICAgICBzdHJpbmdzX3RhYmxlW3N0cmluZ19jb3VudF0uYWRkcmVzcyA9IHN0cmluZ19hZGRyZXNzDQogICAgICAgICAgICBzdHJpbmdzX3RhYmxlW3N0cmluZ19jb3VudF0uZmxhZ3MgPSBnZy5UWVBFX0JZVEUNCiAgICAgICAgICAgIHN0cmluZ19jb3VudCA9IHN0cmluZ19jb3VudCArIDENCiAgICAgICAgICAgIHN0cmluZ19hZGRyZXNzID0gc3RyaW5nX2FkZHJlc3MgKyAxDQogICAgICAgIHVudGlsIChzdHJpbmdfYWRkcmVzcyA9PSByYW5nZV9zdGFydCArIG1heF9wcm9jIG9yIHN0cmluZ19hZGRyZXNzID09IHN0b3BfYXQpDQogICAgICAgIHN0cmluZ3NfdGFibGUgPSBnZy5nZXRWYWx1ZXMoc3RyaW5nc190YWJsZSkNCiAgICAgICAgY3VycmVudF9zdHJpbmcgPSAiIg0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhzdHJpbmdzX3RhYmxlKSBkbw0KICAgICAgICAgICAgaWYgdi52YWx1ZSA9PSAwIHRoZW4NCiAgICAgICAgICAgICAgICBpZiAjY3VycmVudF9zdHJpbmcgPiAyIGFuZCBjdXJyZW50X3N0cmluZzpmaW5kKCJbYS16QS1aMC05XVthLXpBLVowLTldW2EtekEtWjAtOV0iKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKGN1cnJlbnRfc3RyaW5nLCAiICIpIG9yIA0KCQkJCQkJc3RyaW5nLmZpbmQoY3VycmVudF9zdHJpbmcsICIOIikgb3INCiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZy5maW5kKGN1cnJlbnRfc3RyaW5nLCAiDCIpIG9yIA0KCQkJCQkJc3RyaW5nLmZpbmQoY3VycmVudF9zdHJpbmcsICJcclxuIikgb3INCiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZy5maW5kKGN1cnJlbnRfc3RyaW5nLCAiXHIiKSBvciANCgkJCQkJCXN0cmluZy5maW5kKGN1cnJlbnRfc3RyaW5nLCAiXG4iKSBvcg0KICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nLmZpbmQoY3VycmVudF9zdHJpbmcsICIXIikgb3IgDQoJCQkJCQlzdHJpbmcuZmluZChjdXJyZW50X3N0cmluZywgJyInKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIGlsMmNwcEVkaXRzLnBhcnNlZF9zdHJpbmdzX3RhYmxlWyNpbDJjcHBFZGl0cy5wYXJzZWRfc3RyaW5nc190YWJsZSArIDFdID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlsMmNwcF9zdHJpbmcgPSBjdXJyZW50X3N0cmluZw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBjdXJyZW50X3N0cmluZ19hZGRyZXNzID0gdi5hZGRyZXNzICsgMQ0KICAgICAgICAgICAgICAgIGN1cnJlbnRfc3RyaW5nID0gIiINCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBpZiB2LnZhbHVlID49IDAgYW5kIHYudmFsdWUgPD0gMjU1IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgY3VycmVudF9zdHJpbmcgPSBjdXJyZW50X3N0cmluZyAuLiBzdHJpbmcuY2hhcih2LnZhbHVlKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBpZiByYW5nZV9lbmQgLSByYW5nZV9zdGFydCA+IG1heF9wcm9jIHRoZW4NCiAgICAgICAgICAgIGlsMmNwcEVkaXRzLnRpY2tDbG9jaygpDQogICAgICAgICAgICBtYXhfcHJvYyA9IG1heF9wcm9jICsgMTAwMDAwDQogICAgICAgICAgICBnb3RvIG5leHRfYmF0Y2gNCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIGZpbGUgPSBpby5vcGVuKGlsMmNwcEVkaXRzLnNhdmVQYXRoIC4uIGdnLmdldFRhcmdldFBhY2thZ2UoKSAuLiAiXyIgLi4gZ2cuZ2V0VGFyZ2V0SW5mbygpLnZlcnNpb25Db2RlIC4uICJfZGIubHVhIiwgIncrIikNCiAgICAgICAgZmlsZTp3cml0ZSgiaWwyY3BwRWRpdHMucGFyc2VkX3N0cmluZ3NfdGFibGUgPSAiIC4uIHRvc3RyaW5nKGlsMmNwcEVkaXRzLnBhcnNlZF9zdHJpbmdzX3RhYmxlKSkNCiAgICAgICAgZmlsZTpjbG9zZSgpDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglpbDJjcHBFZGl0cy5zZWFyY2hEYXRhQmFzZShzZWFyY2hfdGVybV8xLCBzZWFyY2hfdGVybV8yLCBjYXNlX3MsIGFsbF90KQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgc2VhcmNoRGF0YUJhc2UgPSBmdW5jdGlvbihzZWFyY2hfdGVybV8xLCBzZWFyY2hfdGVybV8yLCBjYXNlX3MsIGFsbF90KQ0KICAgICAgICBpZiAjaWwyY3BwRWRpdHMucGFyc2VkX3N0cmluZ3NfdGFibGUgPT0gMCB0aGVuDQogICAgICAgICAgICBnZy5hbGVydChzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gV2FpdCB3aGlsZSB0aGUgc2VhcmNoIGRhdGFiYXNlIGlzIGNyZWF0ZWQuIOKEue+4jyIpDQogICAgICAgICAgICBpbDJjcHBFZGl0cy5jcmVhdGVTZWFyY2hEYXRhQmFzZSgpDQogICAgICAgIGVuZA0KICAgICAgICBpZiBtZXRob2RfdHlwZXNfcmFuIH49IHRydWUgdGhlbg0KICAgICAgICAgICAgZ2cudG9hc3Qoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIEdldHRpbmcgTWV0aG9kIFR5cGVzIOKEue+4jyIpDQogICAgICAgICAgICBpbDJjcHBFZGl0cy5nZXRNZXRob2RUeXBlcygpDQogICAgICAgIGVuZA0KICAgICAgICBsb2NhbCBzZWFyY2hfcmVzdWx0cyA9IHt9DQogICAgICAgIGxvY2FsIHNlYXJjaF9yZXN1bHRzX21lbnUgPSB7fQ0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhpbDJjcHBFZGl0cy5wYXJzZWRfc3RyaW5nc190YWJsZSkgZG8NCiAgICAgICAgICAgIGlmIChjYXNlX3MgPT0gZmFsc2UgYW5kIGFsbF90ID09IHRydWUgYW5kDQogICAgICAgICAgICAgICAgc3RyaW5nLmZpbmQoc3RyaW5nLmxvd2VyKHYuaWwyY3BwX3N0cmluZyksIHN0cmluZy5sb3dlcihzZWFyY2hfdGVybV8xKSkgYW5kDQogICAgICAgICAgICAgICAgc3RyaW5nLmZpbmQoc3RyaW5nLmxvd2VyKHYuaWwyY3BwX3N0cmluZyksIHN0cmluZy5sb3dlcihzZWFyY2hfdGVybV8yKSkpIG9yDQogICAgICAgICAgICAgICAgKGNhc2VfcyA9PSB0cnVlIGFuZCBhbGxfdCA9PSB0cnVlIGFuZCBzdHJpbmcuZmluZCh2LmlsMmNwcF9zdHJpbmcsIHNlYXJjaF90ZXJtXzEpIGFuZA0KICAgICAgICAgICAgICAgICAgICBzdHJpbmcuZmluZCh2LmlsMmNwcF9zdHJpbmcsIHNlYXJjaF90ZXJtXzIpKSBvcg0KICAgICAgICAgICAgICAgIChjYXNlX3MgPT0gZmFsc2UgYW5kIGFsbF90ID09IGZhbHNlIGFuZA0KICAgICAgICAgICAgICAgICAgICAoc3RyaW5nLmZpbmQoc3RyaW5nLmxvd2VyKHYuaWwyY3BwX3N0cmluZyksIHN0cmluZy5sb3dlcihzZWFyY2hfdGVybV8xKSkgb3INCiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZy5maW5kKHN0cmluZy5sb3dlcih2LmlsMmNwcF9zdHJpbmcpLCBzdHJpbmcubG93ZXIoc2VhcmNoX3Rlcm1fMikpKSkgb3INCiAgICAgICAgICAgICAgICAoY2FzZV9zID09IHRydWUgYW5kIGFsbF90ID09IGZhbHNlIGFuZA0KICAgICAgICAgICAgICAgICAgICAoc3RyaW5nLmZpbmQodi5pbDJjcHBfc3RyaW5nLCBzZWFyY2hfdGVybV8xKSBvciBzdHJpbmcuZmluZCh2LmlsMmNwcF9zdHJpbmcsIHNlYXJjaF90ZXJtXzIpKSkgdGhlbg0KICAgICAgICAgICAgICAgIGxvY2FsIG1lbnVfc3RyaW5nID0gIiINCiAgICAgICAgICAgICAgICBpZiB2LmNsYXNzX25hbWVzIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbWVudV9zdHJpbmcgPSBtZW51X3N0cmluZyAuLiAi4oS5IO+4j0NsYXNzIE5hbWVzOiAiDQogICAgICAgICAgICAgICAgICAgIGZvciBpbmRleCwgdmFsdWUgaW4gcGFpcnModi5jbGFzc19uYW1lcykgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVfc3RyaW5nID0gbWVudV9zdHJpbmcgLi4gdmFsdWUgLi4gIiwgIg0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgbWVudV9zdHJpbmcgPSBtZW51X3N0cmluZyAuLiAiXG4iDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgdi5tZXRob2RfdHlwZSBhbmQgdi5jbGFzc19uYW1lcyB0aGVuDQogICAgICAgICAgICAgICAgICAgIG1lbnVfc3RyaW5nID0gbWVudV9zdHJpbmcgLi4gIuKEue+4jyBNZXRob2QgTmFtZTogIiAuLiB2LmlsMmNwcF9zdHJpbmcgLi4gIlxuIg0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgbWVudV9zdHJpbmcgPSBtZW51X3N0cmluZyAuLiAi4p2TICIgLi4gdi5pbDJjcHBfc3RyaW5nIC4uICIg4p2TXG4iDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgdi5tZXRob2RfdHlwZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIG1lbnVfc3RyaW5nID0gbWVudV9zdHJpbmcgLi4gIuKEue+4jyBNZXRob2QgVHlwZTogIiAuLiB2Lm1ldGhvZF90eXBlIC4uICJcbiINCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBzZWFyY2hfcmVzdWx0c1sjc2VhcmNoX3Jlc3VsdHMgKyAxXSA9IHYuaWwyY3BwX3N0cmluZw0KICAgICAgICAgICAgICAgIHNlYXJjaF9yZXN1bHRzX21lbnVbI3NlYXJjaF9yZXN1bHRzX21lbnUgKyAxXSA9IG1lbnVfc3RyaW5nDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIHNlYXJjaF9yZXN1bHRzX21lbnVbI3NlYXJjaF9yZXN1bHRzX21lbnUgKyAxXSA9ICJQcm9jZXNzIGFsbCBzZWFyY2ggcmVzdWx0cyINCiAgICAgICAgbG9jYWwgbWVudSA9IGdnLmNob2ljZShzZWFyY2hfcmVzdWx0c19tZW51LCBuaWwsDQogICAgICAgICAgICBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2VsZWN0IGEgc3RyaW5nIHRvIGZpbmQgbWV0aG9kcyBmb3IuIOKEue+4jyIpDQogICAgICAgIGlmIG1lbnUgPT0gI3NlYXJjaF9yZXN1bHRzX21lbnUgdGhlbg0KICAgICAgICAgICAgbG9jYWwgY29uZmlybSA9IGdnLmNob2ljZSh7IuKchSBZZXMiLCAi4p2MIE5vIn0sIG5pbCwgc2NyaXB0X3RpdGxlIC4uDQogICAgICAgICAgICAgICAgIlxuXG7ihLnvuI8gQ29uZmlybSBQcm9jZXNzIEFsbCDihLnvuI9cblRoaXMgY2FuIHRha2UgYSBsb25nIHRpbWUgd2l0aCBhIGxhcmdlIG51bWJlciBvZiByZXN1bHRzLiBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gY29udGludWU/IikNCiAgICAgICAgICAgIGlmIGNvbmZpcm0gPT0gMSB0aGVuDQogICAgICAgICAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBwYWlycyhzZWFyY2hfcmVzdWx0cykgZG8NCiAgICAgICAgICAgICAgICAgICAgaWwyY3BwRWRpdHMuZ2V0TWV0aG9kcyh2YWx1ZSkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBnZy5hbGVydChzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gRG9uZSBQcm9jZXNzaW5nIEFsbCDihLnvuI8iKQ0KICAgICAgICAgICAgICAgIGlsMmNwcEVkaXRzLmNhc2Vfc2Vuc2l0aXZlID0gY2FzZV9zDQogICAgICAgICAgICAgICAgaWwyY3BwRWRpdHMuYWxsX3Rlcm1zID0gYWxsX3QNCiAgICAgICAgICAgICAgICBpbDJjcHBFZGl0cy5jcmVhdGVFZGl0KHNlYXJjaF90ZXJtXzEsIHRydWUsIHNlYXJjaF90ZXJtXzIpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgcmV0dXJuIHNlYXJjaF9yZXN1bHRzW21lbnVdDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRWRpdHMuYWJvdXQoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgYWJvdXQgPSBmdW5jdGlvbigpDQogICAgICAgIGdnLmFsZXJ0KHNjcmlwdF90aXRsZSAuLiBbWw0KDQoNCuKEue+4jyBBYm91dCBTY3JpcHQg4oS577iPDQoNClRoaXMgc2NyaXB0IGFsbG93cyB1c2VycyB0byBjcmVhdGUgSWwyQ3BwIGVkaXRzIGJ5IG1ldGhvZCBuYW1lLCB0aGlzIG1lYW5zIG5vIG9mZnNldHMgYXJlIG5lZWRlZC4gQXMgbG9uZyBhcyBtZXRob2QgbmFtZXMgYXJlIG5vdCBjaGFuZ2VkIGluIHRoZSBnYW1lIHRoZSBlZGl0cyB3aWxsIGNvbnRpbnVlIHdvcmtpbmcgZXZlbiBhZnRlciBhIGdhbWUgdXBkYXRlcy4NCg0K4p6VIENyZWF0ZSBFZGl0DQpIZXJlIHlvdSB3aWxsIGVudGVyIGEga25vd24gbWV0aG9kIG5hbWUgb3Igc2VhcmNoIGZvciBhIG1ldGhvZCBuYW1lIGFuZCBjcmVhdGUgYW4gZWRpdCBmb3IgaXQuIEVkaXRzIHlvdSBjcmVhdGUgZm9yIGEgZ2FtZSBhcmUgYWRkZWQgdG8gdGhlIG1haW4gbWVudSBhYm92ZSB0aGlzIG1lbnUgaXRlbS4NCg0K4qS077iPIEltcG9ydCBFZGl0cw0KSGVyZSB5b3UgY2FuIGltcG9ydCBlZGl0cyBjcmVhdGVkIGFuZCBleHBvcnRlZCBieSBvdGhlciB1c2VycyBvZiB0aGlzIHNjcmlwdC4NCiANCuKkte+4jyBFeHBvcnQgRWRpdHMNCkhlcmUgeW91IGNhbiBleHBvcnQgZWRpdHMgeW91IGhhdmUgY3JlYXRlZCB0byBzaGFyZSB0aGVtIHdpdGggb3RoZXIgdXNlcnMgb2YgdGhlIHNjcmlwdC4NCg0K8J+Xke+4jyBEZWxldGUgRWRpdA0KSGVyZSB5b3UgY2FuIGRlbGV0ZSBlZGl0cyBmb3IgYSBnYW1lIGFuZCByZW1vdmUgdGhlbSBmcm9tIHRoZSBtYWluIG1lbnUuDQpdXSkNCiAgICBlbmQsDQogICAgY2hlY2tfZGIgPSBmdW5jdGlvbigpDQogICAgICAgIGRvZmlsZShpbDJjcHBFZGl0cy5zYXZlUGF0aCAuLiBnZy5nZXRUYXJnZXRQYWNrYWdlKCkgLi4gIl8iIC4uIGdnLmdldFRhcmdldEluZm8oKS52ZXJzaW9uQ29kZSAuLiAiX2RiLmx1YSIpDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglpbDJjcHBFZGl0cy5ob21lKHBhc3NlZF9kYXRhKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgaG9tZSA9IGZ1bmN0aW9uKHBhc3NlZF9kYXRhKQ0KICAgICAgICBwbHVnaW5NYW5hZ2VyLnJldHVybkhvbWUgPSB0cnVlDQogICAgICAgIHBsdWdpbk1hbmFnZXIucmV0dXJuUGx1Z2luVGFibGUgPSAiaWwyY3BwRWRpdHMiDQogICAgICAgIGlmIHBhc3NlZF9kYXRhIHRoZW4NCiAgICAgICAgICAgIGlsMmNwcEVkaXRzLmNyZWF0ZUVkaXQocGFzc2VkX2RhdGEpDQogICAgICAgIGVsc2VpZiBtYWtpbmdfZWRpdCA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgIGxvY2FsIG1lbnUgPSBnZy5jaG9pY2UoeyLinIUgU2F2ZSBFZGl0IiwgIvCfl5HvuI8gRGlzY2FyZCBFZGl0In0sIG5pbCwgc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIFNhdmUgb3IgRGlzY2FyZCBlZGl0LiDihLnvuI8iKQ0KICAgICAgICAgICAgaWYgbWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgIGlmIG1lbnUgPT0gMSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlsMmNwcEVkaXRzLnNhdmVDb25maWcoKQ0KICAgICAgICAgICAgICAgICAgICBtYWtpbmdfZWRpdCA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIGdnLnRvYXN0KCLinIUgRWRpdCBzYXZlZCDinIUiKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIG1lbnUgPT0gMiB0aGVuDQogICAgICAgICAgICAgICAgICAgIGdnLnNldFZhbHVlcyhpbDJjcHBFZGl0cy5jcmVhdGVfcmV2ZXJ0X3RhYmxlKQ0KICAgICAgICAgICAgICAgICAgICB0YWJsZS5yZW1vdmUoaWwyY3BwRWRpdHMuc2F2ZWRFZGl0c1RhYmxlLCAjaWwyY3BwRWRpdHMuc2F2ZWRFZGl0c1RhYmxlKQ0KICAgICAgICAgICAgICAgICAgICBtYWtpbmdfZWRpdCA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIGdnLnRvYXN0KCLwn5eR77iPIEVkaXQgZGlzY2FyZGVkIPCfl5HvuI8iKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlsMmNwcEVkaXRzLmhvbWUoKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIGxvY2FsIG1lbnVfbmFtZXMgPSB7fQ0KICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoaWwyY3BwRWRpdHMuc2F2ZWRFZGl0c1RhYmxlKSBkbw0KICAgICAgICAgICAgICAgIGlmIGlsMmNwcEVkaXRzLnJldmVydF90YWJsZVtpXSB0aGVuDQogICAgICAgICAgICAgICAgICAgIG1lbnVfbmFtZXNbaV0gPSAi4pyFICIgLi4gdi5lZGl0X25hbWUNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIG1lbnVfbmFtZXNbaV0gPSAi4pa277iPICIgLi4gdi5lZGl0X25hbWUNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgbWVudV9uYW1lc1sjbWVudV9uYW1lcyArIDFdID0gIuKelSBDcmVhdGUgRWRpdCINCiAgICAgICAgICAgIG1lbnVfbmFtZXNbI21lbnVfbmFtZXMgKyAxXSA9ICLipLTvuI8gSW1wb3J0IEVkaXRzIg0KICAgICAgICAgICAgbWVudV9uYW1lc1sjbWVudV9uYW1lcyArIDFdID0gIuKkte+4jyBFeHBvcnQgRWRpdHMiDQogICAgICAgICAgICBtZW51X25hbWVzWyNtZW51X25hbWVzICsgMV0gPSAi8J+Xke+4jyBEZWxldGUgRWRpdCINCiAgICAgICAgICAgIG1lbnVfbmFtZXNbI21lbnVfbmFtZXMgKyAxXSA9ICLihLnvuI8gQWJvdXQgU2NyaXB0Ig0KICAgICAgICAgICAgbWVudV9uYW1lc1sjbWVudV9uYW1lcyArIDFdID0gIuKdjCBFeGl0IFNjcmlwdCINCiAgICAgICAgICAgIGxvY2FsIG1lbnUgPSBnZy5jaG9pY2UobWVudV9uYW1lcywgbmlsLCBzY3JpcHRfdGl0bGUpDQogICAgICAgICAgICBpZiBtZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgaWYgbWVudSA9PSAjbWVudV9uYW1lcyB0aGVuDQogICAgICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIucmV0dXJuSG9tZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIC0tIHBsdWdpbk1hbmFnZXIuaG9tZSgpDQogICAgICAgICAgICAgICAgZWxzZWlmIG1lbnUgPT0gI21lbnVfbmFtZXMgLSAxIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWwyY3BwRWRpdHMuYWJvdXQoKQ0KICAgICAgICAgICAgICAgIGVsc2VpZiBtZW51ID09ICNtZW51X25hbWVzIC0gMiB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlsMmNwcEVkaXRzLmRlbGV0ZUVkaXQoKQ0KICAgICAgICAgICAgICAgICAgICBpbDJjcHBFZGl0cy5ob21lKCkNCiAgICAgICAgICAgICAgICBlbHNlaWYgbWVudSA9PSAjbWVudV9uYW1lcyAtIDMgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpbDJjcHBFZGl0cy5leHBvcnRFZGl0cygpDQogICAgICAgICAgICAgICAgICAgIGlsMmNwcEVkaXRzLmhvbWUoKQ0KICAgICAgICAgICAgICAgIGVsc2VpZiBtZW51ID09ICNtZW51X25hbWVzIC0gNCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlsMmNwcEVkaXRzLmltcG9ydEVkaXRzKCkNCiAgICAgICAgICAgICAgICAgICAgaWwyY3BwRWRpdHMuaG9tZSgpDQogICAgICAgICAgICAgICAgZWxzZWlmIG1lbnUgPT0gI21lbnVfbmFtZXMgLSA1IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgcmVzdWx0LCBlcnJvciA9IHBjYWxsKGlsMmNwcEVkaXRzLmNyZWF0ZUVkaXQpDQogICAgICAgICAgICAgICAgICAgIGlmIHJlc3VsdCA9PSBmYWxzZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBnZy5hbGVydChlcnJvcikNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBpbDJjcHBFZGl0cy5zZXRWYWx1ZXMobWVudSkNCiAgICAgICAgICAgICAgICAgICAgaWwyY3BwRWRpdHMuaG9tZSgpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIGdldF9tZXRob2Rfc2VhcmNoZXMgPSB7eyJib29sIiwgIlN5c3RlbS5JQ29udmVydGlibGUuVG9Cb29sZWFuIn0sIA0KCQkJCQkJCXsiY2hhciIsICJTeXN0ZW0uSUNvbnZlcnRpYmxlLlRvQ2hhciJ9LA0KCQkJCQkJCXsic2J5dGUiLCAiU3lzdGVtLklDb252ZXJ0aWJsZS5Ub1NCeXRlIn0sDQoJCQkJCQkJeyJieXRlIiwgIlN5c3RlbS5JQ29udmVydGlibGUuVG9CeXRlIn0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyJzaG9ydCIsICJTeXN0ZW0uSUNvbnZlcnRpYmxlLlRvSW50MTYifSwgDQoJCQkJCQkJeyJ1c2hvcnQiLCAiU3lzdGVtLklDb252ZXJ0aWJsZS5Ub1VJbnQxNiJ9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsiaW50IiwgIlN5c3RlbS5JQ29udmVydGlibGUuVG9JbnQzMiJ9LCANCgkJCQkJCQl7InVpbnQiLCAiU3lzdGVtLklDb252ZXJ0aWJsZS5Ub1VJbnQzMiJ9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsibG9uZyIsICJTeXN0ZW0uSUNvbnZlcnRpYmxlLlRvSW50NjQifSwgDQoJCQkJCQkJeyJ1bG9uZyIsICJTeXN0ZW0uSUNvbnZlcnRpYmxlLlRvVUludDY0In0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyJmbG9hdCIsICJTeXN0ZW0uSUNvbnZlcnRpYmxlLlRvU2luZ2xlIn0sIA0KCQkJCQkJCXsiZG91YmxlIiwgIlN5c3RlbS5JQ29udmVydGlibGUuVG9Eb3VibGUifSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IkRlY2ltYWwiLCAiU3lzdGVtLklDb252ZXJ0aWJsZS5Ub0RlY2ltYWwifSwgDQoJCQkJCQkJeyJEYXRlVGltZSIsICJTeXN0ZW0uSUNvbnZlcnRpYmxlLlRvRGF0ZVRpbWUifSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7InZvaWQiLCAiR2V0T2JqZWN0RGF0YSJ9fSwNCiAgICBtZXRob2RfdHlwZXMgPSB7fSwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRWRpdHMuY2hlY2tNZXRob2RUeXBlcygpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBjaGVja01ldGhvZFR5cGVzID0gZnVuY3Rpb24oKQ0KICAgICAgICBkb2ZpbGUoaWwyY3BwRWRpdHMuc2F2ZVBhdGggLi4gZ2cuZ2V0VGFyZ2V0UGFja2FnZSgpIC4uICJfIiAuLiBnZy5nZXRUYXJnZXRJbmZvKCkudmVyc2lvbkNvZGUgLi4gIl9tZXRob2RfdHlwZXMubHVhIikNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWlsMmNwcEVkaXRzLmdldE1ldGhvZFR5cGVzKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIGdldE1ldGhvZFR5cGVzID0gZnVuY3Rpb24oKQ0KICAgICAgICBpZiBwY2FsbChpbDJjcHBFZGl0cy5jaGVja01ldGhvZFR5cGVzKSA9PSBmYWxzZSB0aGVuDQogICAgICAgICAgICBtZXRob2RfdHlwZXNfcmFuID0gdHJ1ZQ0KICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoaWwyY3BwRWRpdHMuZ2V0X21ldGhvZF9zZWFyY2hlcykgZG8NCiAgICAgICAgICAgICAgICBpbDJjcHBFZGl0cy50aWNrQ2xvY2soKQ0KICAgICAgICAgICAgICAgIGxvY2FsIG1ldGhvZHMgPSBpbDJjcHBFZGl0cy5nZXRNZXRob2RzKHZbMl0sIHRydWUpDQogICAgICAgICAgICAgICAgaWYgI21ldGhvZHMgPiAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWwyY3BwRWRpdHMubWV0aG9kX3R5cGVzW3Rvc3RyaW5nKG1ldGhvZHNbMV0ubWV0aG9kX3R5cGUpXSA9IHZbMV0NCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWwyY3BwRWRpdHMuc2F2ZU1ldGhvZFR5cGVzKCkNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIGFyY2ggPSBnZy5nZXRUYXJnZXRJbmZvKCksDQogICAgc2F2ZWRFZGl0c1RhYmxlID0ge30NCn0NCg0KcGNhbGwoaWwyY3BwRWRpdHMuY2hlY2tfZGIpDQppbDJjcHBFZGl0cy5iY19jcHBfY2hlY2tfY2ZnX2ZpbGUoKQ0KaWwyY3BwRWRpdHMuZ2V0UmFuZ2UoKQ0KaWYgcGNhbGwoaWwyY3BwRWRpdHMuY2hlY2tNZXRob2RUeXBlcykgPT0gZmFsc2UgdGhlbg0KICAgIGlsMmNwcEVkaXRzLmdldE1ldGhvZFR5cGVzKCkNCmVuZA0KDQpwbHVnaW5NYW5hZ2VyLnJldHVybkhvbWUgPSB0cnVlDQpwbHVnaW5NYW5hZ2VyLnJldHVyblBsdWdpblRhYmxlID0gImlsMmNwcEVkaXRzIg0KZ2cuYWxlcnQoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIFBsdWdpbiBsb2FkZWQsIGlmIGxhdW5jaGVkIGRpcmVjdGx5IHByZXNzIHRoZSBmbG9hdGluZyBbU3hdIGJ1dHRvbiB0byBvcGVuIHRoZSBtZW51LiDihLnvuI8iKQ0K"
        },
		[13] = {
            file_name = "plugin_bc_script_creator.lua",
            file_data = "c2NyaXB0Q3JlYXRvciA9IHsNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJc2NyaXB0Q3JlYXRvci5ob21lKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIGhvbWUgPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIG1lbnUgPSBnZy5jaG9pY2UoeyLwn4aVIENyZWF0ZSBTY3JpcHQgRnVuY3Rpb24iLCANCgkJCQkJCQkJIuKelSBBZGQgRWRpdCBUbyBGdW5jdGlvbiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICLinpYgUmVtb3ZlIEVkaXQgRnJvbSBGdW5jdGlvbiIsIA0KCQkJCQkJCQki4piwIE1lbnUgRWRpdG9yIiwgDQoJCQkJCQkJCSLwn5SkIFNldCBTY3JpcHQgVGl0bGUiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAi8J+SviBFeHBvcnQgc2NyaXB0IiwgDQoJCQkJCQkJCSLinYwgRXhpdCJ9LCANCgkJCQkJCQkJbmlsLA0KCQkJCQkJCQlzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2NyaXB0IENyZWF0b3Ig4oS577iPIikNCiAgICAgICAgaWYgbWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgaWYgbWVudSA9PSAxIHRoZW4NCiAgICAgICAgICAgICAgICBzY3JpcHRDcmVhdG9yLmNyZWF0ZUZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgICBzY3JpcHRDcmVhdG9yLmhvbWUoKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBtZW51ID09IDIgdGhlbg0KICAgICAgICAgICAgICAgIHNjcmlwdENyZWF0b3IuYWRkRWRpdFRvRnVuY3Rpb24oKQ0KICAgICAgICAgICAgICAgIHNjcmlwdENyZWF0b3IuaG9tZSgpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGlmIG1lbnUgPT0gMyB0aGVuDQogICAgICAgICAgICAgICAgc2NyaXB0Q3JlYXRvci5yZW1vdmVFZGl0RnJvbUZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgICBzY3JpcHRDcmVhdG9yLmhvbWUoKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBtZW51ID09IDQgdGhlbg0KICAgICAgICAgICAgICAgIHNjcmlwdENyZWF0b3IubWVudUVkaXRvcigpDQogICAgICAgICAgICAgICAgc2NyaXB0Q3JlYXRvci5ob21lKCkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWYgbWVudSA9PSA1IHRoZW4NCiAgICAgICAgICAgICAgICBzY3JpcHRDcmVhdG9yLm5hbWVTY3JpcHQoKQ0KICAgICAgICAgICAgICAgIHNjcmlwdENyZWF0b3IuaG9tZSgpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGlmIG1lbnUgPT0gNiB0aGVuDQogICAgICAgICAgICAgICAgc2NyaXB0Q3JlYXRvci5leHBvcnRTY3JpcHQoKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBtZW51ID09IDcgdGhlbg0KICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIucmV0dXJuSG9tZSA9IGZhbHNlDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglzY3JpcHRDcmVhdG9yLm5hbWVTY3JpcHQoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgbmFtZVNjcmlwdCA9IGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgbWVudSA9IGdnLnByb21wdCh7c2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIEVudGVyIGEgdGl0bGUgZm9yIHlvdXIgc2NyaXB0LiDihLnvuI8ifSwgbmlsLCB7InRleHQifSkNCiAgICAgICAgaWYgbWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgc2NyaXB0Q3JlYXRvci5zY3JpcHROYW1lID0gbWVudVsxXQ0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCXNjcmlwdENyZWF0b3IuY3JlYXRlRnVuY3Rpb24oKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgY3JlYXRlRnVuY3Rpb24gPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIG1lbnVfaXRlbXMgPSBzY3JpcHRDcmVhdG9yLmdldEVkaXRzTWVudSgpDQogICAgICAgIGlmICNtZW51X2l0ZW1zID4gMCB0aGVuDQogICAgICAgICAgICBsb2NhbCBtZW51ID0gZ2cubXVsdGlDaG9pY2UobWVudV9pdGVtcykNCiAgICAgICAgICAgIGlmIG1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICBsb2NhbCBmdW5jdGlvbkVkaXRzID0ge30NCiAgICAgICAgICAgICAgICBmb3IgaywgdiBpbiBwYWlycyhtZW51KSBkbw0KICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbkVkaXRzWyNmdW5jdGlvbkVkaXRzICsgMV0gPSBzY3JpcHRDcmVhdG9yLmFsbEVkaXRzW2tdDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgbG9jYWwgbmFtZU1lbnUgPSBnZy5wcm9tcHQoe3NjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBFbnRlciBhIG5hbWUgZm9yIHlvdXIgZnVuY3Rpb24uIOKEue+4jyJ9LCBuaWwsIHsidGV4dCJ9KQ0KICAgICAgICAgICAgICAgIGlmIG5hbWVNZW51IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgc2NyaXB0Q3JlYXRvci5zY3JpcHRGdW5jdGlvbnNbI3NjcmlwdENyZWF0b3Iuc2NyaXB0RnVuY3Rpb25zICsgMV0gPSB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZW51X25hbWUgPSBuYW1lTWVudVsxXSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRzID0gZnVuY3Rpb25FZGl0cw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGdnLnRvYXN0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBGdW5jdGlvbiBDcmVhdGVkIOKEue+4jyIpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgZ2cuYWxlcnQoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIExvYWQgdGhlIHBsdWdpbnMgeW91IHdhbnQgdG8gY3JlYXRlIHlvdXIgc2NyaXB0IGZyb20gZmlyc3QuIOKEue+4jyIpDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJc2NyaXB0Q3JlYXRvci5hZGRFZGl0VG9GdW5jdGlvbigpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBhZGRFZGl0VG9GdW5jdGlvbiA9IGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgbWVudSA9IGdnLmNob2ljZShzY3JpcHRDcmVhdG9yLmdldEZ1bmN0aW9uc01lbnUoKSwgbmlsLA0KICAgICAgICAgICAgc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIFNlbGVjdCBmdW5jdGlvbiB0byBhZGQgZWRpdCB0by4g4oS577iPIikNCiAgICAgICAgaWYgbWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgbG9jYWwgZWRpdHNNZW51ID0gZ2cubXVsdGlDaG9pY2Uoc2NyaXB0Q3JlYXRvci5nZXRFZGl0c01lbnUoKSkNCiAgICAgICAgICAgIGlmIGVkaXRzTWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgIGZvciBrLCB2IGluIHBhaXJzKGVkaXRzTWVudSkgZG8NCiAgICAgICAgICAgICAgICAgICAgc2NyaXB0Q3JlYXRvci5zY3JpcHRGdW5jdGlvbnNbbWVudV0uZWRpdHNbI3NjcmlwdENyZWF0b3Iuc2NyaXB0RnVuY3Rpb25zW21lbnVdLmVkaXRzICsgMV0gPSBzY3JpcHRDcmVhdG9yLmFsbEVkaXRzW2tdDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZ2cudG9hc3Qoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIEVkaXQgQWRkZWQgVG8gRnVuY3Rpb24g4oS577iPIikNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCXNjcmlwdENyZWF0b3IucmVtb3ZlRWRpdEZyb21GdW5jdGlvbigpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICByZW1vdmVFZGl0RnJvbUZ1bmN0aW9uID0gZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBtZW51ID0gZ2cuY2hvaWNlKHNjcmlwdENyZWF0b3IuZ2V0RnVuY3Rpb25zTWVudSgpLCBuaWwsDQogICAgICAgICAgICBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2VsZWN0IGZ1bmN0aW9uIHRvIHJlbW92ZSBlZGl0IGZyb20uIOKEue+4jyIpDQogICAgICAgIGlmIG1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgIGxvY2FsIGZ1bmN0aW9uRWRpdHMgPSB7fQ0KICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoc2NyaXB0Q3JlYXRvci5zY3JpcHRGdW5jdGlvbnNbbWVudV0uZWRpdHMpIGRvDQogICAgICAgICAgICAgICAgZnVuY3Rpb25FZGl0c1tpXSA9IHYuZWRpdF9uYW1lDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGxvY2FsIGVkaXRNZW51ID0gZ2cuY2hvaWNlKGZ1bmN0aW9uRWRpdHMsIG5pbCwNCiAgICAgICAgICAgICAgICBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2VsZWN0IGVkaXQgdG8gcmVtb3ZlIGZyb20gZnVuY3Rpb24uIOKEue+4jyIpDQogICAgICAgICAgICBpZiBlZGl0TWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgIHRhYmxlLnJlbW92ZShzY3JpcHRDcmVhdG9yLnNjcmlwdEZ1bmN0aW9uc1ttZW51XS5lZGl0cywgZWRpdE1lbnUpDQogICAgICAgICAgICAgICAgZ2cudG9hc3Qoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIEVkaXQgUmVtb3ZlZCBGcm9tIEZ1bmN0aW9uIOKEue+4jyIpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglzY3JpcHRDcmVhdG9yLmdldEVkaXRzTWVudSgpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBnZXRFZGl0c01lbnUgPSBmdW5jdGlvbigpDQogICAgICAgIHNjcmlwdENyZWF0b3IuYWxsRWRpdHMgPSB7fQ0KICAgICAgICBsb2NhbCBtZW51TmFtZXMgPSB7fQ0KICAgICAgICBpZiBpbDJjcHBFZGl0cyB0aGVuDQogICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhpbDJjcHBFZGl0cy5zYXZlZEVkaXRzVGFibGUpIGRvDQogICAgICAgICAgICAgICAgc2NyaXB0Q3JlYXRvci5hbGxFZGl0c1sjc2NyaXB0Q3JlYXRvci5hbGxFZGl0cyArIDFdID0gdg0KICAgICAgICAgICAgICAgIG1lbnVOYW1lc1sjbWVudU5hbWVzICsgMV0gPSB2LmVkaXRfbmFtZSAuLiAiKG1ldGhvZCBlZGl0KSINCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgaWYgaWwyY3BwRmllbGRzIHRoZW4NCiAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKGlsMmNwcEZpZWxkcy5zYXZlZEVkaXRzVGFibGUpIGRvDQogICAgICAgICAgICAgICAgc2NyaXB0Q3JlYXRvci5hbGxFZGl0c1sjc2NyaXB0Q3JlYXRvci5hbGxFZGl0cyArIDFdID0gdg0KICAgICAgICAgICAgICAgIG1lbnVOYW1lc1sjbWVudU5hbWVzICsgMV0gPSB2LmVkaXRfbmFtZSAuLiAiKGZpZWxkIGVkaXQpIg0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBpZiBzdGF0aWNWYWx1ZUZpbmRlciBhbmQgI3N0YXRpY1ZhbHVlRmluZGVyLnNhdmVkRWRpdHNUYWJsZSA+IDAgdGhlbg0KICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoc3RhdGljVmFsdWVGaW5kZXIuc2F2ZWRFZGl0c1RhYmxlKSBkbw0KICAgICAgICAgICAgICAgIHNjcmlwdENyZWF0b3IuYWxsRWRpdHNbI3NjcmlwdENyZWF0b3IuYWxsRWRpdHMgKyAxXSA9IHYuZWRpdF90YWJsZQ0KICAgICAgICAgICAgICAgIG1lbnVOYW1lc1sjbWVudU5hbWVzICsgMV0gPSB2LmVkaXRfdGFibGUuZWRpdF9uYW1lIC4uICIoc3RhdGljIHZhbHVlIHNlYXJjaCBlZGl0KSINCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgcmV0dXJuIG1lbnVOYW1lcw0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJc2NyaXB0Q3JlYXRvci5hbGxFZGl0cygpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBhbGxFZGl0cyA9IHt9LA0KICAgIHNjcmlwdEZ1bmN0aW9ucyA9IHt9LA0KICAgIGdldEZ1bmN0aW9uc01lbnUgPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIG1lbnVOYW1lcyA9IHt9DQogICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHNjcmlwdENyZWF0b3Iuc2NyaXB0RnVuY3Rpb25zKSBkbw0KICAgICAgICAgICAgbWVudU5hbWVzWyNtZW51TmFtZXMgKyAxXSA9IHYubWVudV9uYW1lDQogICAgICAgIGVuZA0KICAgICAgICByZXR1cm4gbWVudU5hbWVzDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglzY3JpcHRDcmVhdG9yLm1lbnVFZGl0b3JSZW1vdmUoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgbWVudUVkaXRvclJlbW92ZSA9IGZ1bmN0aW9uKGN1cnJlbnRfaW5kZXgpDQogICAgICAgIDo6Y29uZmlybTo6DQogICAgICAgIGxvY2FsIGNvbmZpcm1fbWVudSA9IGdnLmNob2ljZSh7IuKchSBZZXMgKERlbGV0ZSBmdW5jdGlvbikiLCAi4p2MIE5vIGdldCBtZSBvdXQgb2YgaGVyZS4ifSwgbmlsLCBzY3JpcHRfdGl0bGUgLi4gIlxuXG7imqDvuI8gV2FybmluZyDimqDvuI9cblxuWW91IGFyZSBhYm91dCB0byBkZWxldGUgdGhpcyBmdW5jdGlvbiBmcm9tIHlvdXIgc2NyaXB0LlxuXG5EbyB5b3Ugd2lzaCB0byBjb250aW51ZT8iKQ0KICAgICAgICBpZiBjb25maXJtX21lbnUgPT0gbmlsIHRoZW4NCiAgICAgICAgICAgIGdvdG8gY29uZmlybQ0KICAgICAgICBlbHNlDQogICAgICAgICAgICBpZiBjb25maXJtX21lbnUgPT0gMSB0aGVuDQogICAgICAgICAgICAgICAgdGFibGUucmVtb3ZlKHNjcmlwdENyZWF0b3Iuc2NyaXB0RnVuY3Rpb25zLCBjdXJyZW50X2luZGV4KQ0KICAgICAgICAgICAgICAgIGdnLnRvYXN0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBGdW5jdGlvbiBEZWxldGVkIOKEue+4jyIpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglzY3JpcHRDcmVhdG9yLm1lbnVFZGl0b3JNb3ZlVXAoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgbWVudUVkaXRvck1vdmVVcCA9IGZ1bmN0aW9uKGN1cnJlbnRfaW5kZXgpDQogICAgICAgIGxvY2FsIHRlbXBfaW5kZXggPSAjc2NyaXB0Q3JlYXRvci5zY3JpcHRGdW5jdGlvbnMgKyAyDQogICAgICAgIHNjcmlwdENyZWF0b3Iuc2NyaXB0RnVuY3Rpb25zW3RlbXBfaW5kZXhdID0gc2NyaXB0Q3JlYXRvci5zY3JpcHRGdW5jdGlvbnNbY3VycmVudF9pbmRleCAtIDFdDQogICAgICAgIHNjcmlwdENyZWF0b3Iuc2NyaXB0RnVuY3Rpb25zW2N1cnJlbnRfaW5kZXggLSAxXSA9IHNjcmlwdENyZWF0b3Iuc2NyaXB0RnVuY3Rpb25zW2N1cnJlbnRfaW5kZXhdDQogICAgICAgIHNjcmlwdENyZWF0b3Iuc2NyaXB0RnVuY3Rpb25zW2N1cnJlbnRfaW5kZXhdID0gc2NyaXB0Q3JlYXRvci5zY3JpcHRGdW5jdGlvbnNbdGVtcF9pbmRleF0NCiAgICAgICAgc2NyaXB0Q3JlYXRvci5zY3JpcHRGdW5jdGlvbnNbdGVtcF9pbmRleF0gPSBuaWwNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCXNjcmlwdENyZWF0b3IubWVudUVkaXRvck1vdmVEb3duKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIG1lbnVFZGl0b3JNb3ZlRG93biA9IGZ1bmN0aW9uKGN1cnJlbnRfaW5kZXgpDQogICAgICAgIGxvY2FsIHRlbXBfaW5kZXggPSAjc2NyaXB0Q3JlYXRvci5zY3JpcHRGdW5jdGlvbnMgKyAyDQogICAgICAgIHNjcmlwdENyZWF0b3Iuc2NyaXB0RnVuY3Rpb25zW3RlbXBfaW5kZXhdID0gc2NyaXB0Q3JlYXRvci5zY3JpcHRGdW5jdGlvbnNbY3VycmVudF9pbmRleCArIDFdDQogICAgICAgIHNjcmlwdENyZWF0b3Iuc2NyaXB0RnVuY3Rpb25zW2N1cnJlbnRfaW5kZXggKyAxXSA9IHNjcmlwdENyZWF0b3Iuc2NyaXB0RnVuY3Rpb25zW2N1cnJlbnRfaW5kZXhdDQogICAgICAgIHNjcmlwdENyZWF0b3Iuc2NyaXB0RnVuY3Rpb25zW2N1cnJlbnRfaW5kZXhdID0gc2NyaXB0Q3JlYXRvci5zY3JpcHRGdW5jdGlvbnNbdGVtcF9pbmRleF0NCiAgICAgICAgc2NyaXB0Q3JlYXRvci5zY3JpcHRGdW5jdGlvbnNbdGVtcF9pbmRleF0gPSBuaWwNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCXNjcmlwdENyZWF0b3IubWVudUVkaXRvclJlbmFtZSgpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBtZW51RWRpdG9yUmVuYW1lID0gZnVuY3Rpb24oY3VycmVudF9pbmRleCkNCiAgICAgICAgbG9jYWwgbWVudSA9IGdnLnByb21wdCh7c2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIEVkaXQgRnVuY3Rpb24gTmFtZSDihLnvuI8ifSwge3NjcmlwdENyZWF0b3Iuc2NyaXB0RnVuY3Rpb25zW2N1cnJlbnRfaW5kZXhdLm1lbnVfbmFtZX0sIHsidGV4dCJ9KQ0KICAgICAgICBpZiBtZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICBzY3JpcHRDcmVhdG9yLnNjcmlwdEZ1bmN0aW9uc1tjdXJyZW50X2luZGV4XS5tZW51X25hbWUgPSBtZW51WzFdDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJc2NyaXB0Q3JlYXRvci5tZW51RWRpdG9yKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIG1lbnVFZGl0b3IgPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIG1lbnUgPSBnZy5jaG9pY2Uoc2NyaXB0Q3JlYXRvci5nZXRGdW5jdGlvbnNNZW51KCksIG5pbCwNCiAgICAgICAgICAgIHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBTZWxlY3Qgc2NyaXB0IG1lbnUgaXRlbS4g4oS577iPIikNCiAgICAgICAgaWYgbWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgbG9jYWwgZG9XaXRoTWVudSA9IGdnLmNob2ljZSh7IuKshu+4jyBNb3ZlIFVwIiwgDQoJCQkJCQkJCQkJICAi4qyH77iPIE1vdmUgRG93biIsIA0KCQkJCQkJCQkJCSAgIvCfl5HvuI8gUmVtb3ZlIEZ1bmN0aW9uIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICLwn5OdIEVkaXQgRnVuY3Rpb24gTmFtZSIsIA0KCQkJCQkJCQkJCSAgIvCflJkgQmFjayBUbyBNZW51IEVkaXRvciJ9LCANCgkJCQkJCQkJCQkgIG5pbCwgDQoJCQkJCQkJCQkJICBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gIiAuLiBzY3JpcHRDcmVhdG9yLnNjcmlwdEZ1bmN0aW9uc1ttZW51XS5tZW51X25hbWUgLi4gIiDihLnvuI8iKQ0KICAgICAgICAgICAgaWYgZG9XaXRoTWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgIGlmIGRvV2l0aE1lbnUgPT0gMSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHNjcmlwdENyZWF0b3IubWVudUVkaXRvck1vdmVVcChtZW51KQ0KICAgICAgICAgICAgICAgICAgICBzY3JpcHRDcmVhdG9yLm1lbnVFZGl0b3IoKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIGRvV2l0aE1lbnUgPT0gMiB0aGVuDQogICAgICAgICAgICAgICAgICAgIHNjcmlwdENyZWF0b3IubWVudUVkaXRvck1vdmVEb3duKG1lbnUpDQogICAgICAgICAgICAgICAgICAgIHNjcmlwdENyZWF0b3IubWVudUVkaXRvcigpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgZG9XaXRoTWVudSA9PSAzIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgc2NyaXB0Q3JlYXRvci5tZW51RWRpdG9yUmVtb3ZlKG1lbnUpDQogICAgICAgICAgICAgICAgICAgIHNjcmlwdENyZWF0b3IubWVudUVkaXRvcigpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgZG9XaXRoTWVudSA9PSA0IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgc2NyaXB0Q3JlYXRvci5tZW51RWRpdG9yUmVuYW1lKG1lbnUpDQogICAgICAgICAgICAgICAgICAgIHNjcmlwdENyZWF0b3IubWVudUVkaXRvcigpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgZG9XaXRoTWVudSA9PSA1IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgc2NyaXB0Q3JlYXRvci5tZW51RWRpdG9yKCkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCXNjcmlwdENyZWF0b3IuZXhwb3J0U2NyaXB0KHNjcmlwdE5hbWUpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBleHBvcnRTY3JpcHQgPSBmdW5jdGlvbihzY3JpcHROYW1lKQ0KICAgICAgICA6OmNoZWNrX25hbWU6Og0KICAgICAgICBpZiBub3Qgc2NyaXB0Q3JlYXRvci5zY3JpcHROYW1lIHRoZW4NCiAgICAgICAgICAgIHNjcmlwdENyZWF0b3IubmFtZVNjcmlwdCgpDQogICAgICAgICAgICBnb3RvIGNoZWNrX25hbWUNCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIHNjcmlwdEV4cG9ydFRhYmxlID0gew0KCQkJJ3NjcmlwdF90aXRsZSA9ICInIC4uIHNjcmlwdENyZWF0b3Iuc2NyaXB0TmFtZSAuLiAnIicsDQoJCQknc2NyaXB0RnVuY3Rpb25zID0gJyAuLiB0b3N0cmluZyhzY3JpcHRDcmVhdG9yLnNjcmlwdEZ1bmN0aW9ucyksIAoJCQknZW1vamlzID0ge30nLA0KCQkJJ2ZvciBpLHYgaW4gcGFpcnMgKHNjcmlwdEZ1bmN0aW9ucykgZG8nLCAKCQkJJ2Vtb2ppc1tpXSA9ICLwn5SYIicsIAoJCQknZW5kJywNCgkJCSdyZXZlcnRfdGFibGUgPSB7fScsIAoJCQknYXJjaCA9IGdnLmdldFRhcmdldEluZm8oKScsDQoJCQknc3RyaW5nc1N0YXJ0ID0gIjEwOTsxMTU7OTk7MTExOzExNDsxMDg7MTA1Ozk4OzQ2OzEwMDsxMDg7MTA4Ozc3OzExMTsxMDA7MTE3OzEwODsxMDE6OjIwIicsDQoJCQknc3RyaW5nc0VuZCA9ICIwMGg7MDBoOzB+fjA7MH5+MDswfn4wOzAwaDswfn4wOzAwaDswfn4wOzAwaDtGRmg7RkZoOjoxMiInLA0KCQkJJ2Z1bmN0aW9uIGdldFJhbmdlKCknLCAKCQkJJyAgICBnZy5zZXRSYW5nZXMoZ2cuUkVHSU9OX09USEVSKScsDQoJCQknICAgIGdnLnNldFZpc2libGUoZmFsc2UpJywNCgkJCScgICAgZ2cudG9hc3Qoc2NyaXB0X3RpdGxlIC4uICJcXG5cXG7ihLnvuI8gQ29uZmlndXJpbmcgU2NyaXB0IOKEue+4jyIpJywNCgkJCScgICAgZ2cuY2xlYXJSZXN1bHRzKCknLCAKCQkJJyAgICA6OnRyeV9jYTo6JywNCgkJCScgICAgZ2cuc2VhcmNoTnVtYmVyKHN0cmluZ3NTdGFydCwgZ2cuVFlQRV9CWVRFLCBmYWxzZSwgZ2cuU0lHTl9FUVVBTCwgbmlsLCBuaWwsIDEpJywNCgkJCScgICAgaWYgZ2cuZ2V0UmVzdWx0c0NvdW50KCkgPT0gMCB0aGVuJywgCgkJCScgICAgICAgIGdnLnNldFJhbmdlcyhnZy5SRUdJT05fQ19BTExPQyknLA0KCQkJJyAgICAgICAgZ290byB0cnlfY2EnLCAKCQkJJyAgICBlbmQnLCAKCQkJJyAgICBsb2NhbCBzdGFydF9zZWFyY2ggPSBnZy5nZXRSZXN1bHRzKDEpJywNCgkJCScgICAgZ2cuY2xlYXJSZXN1bHRzKCknLCAKCQkJJyAgICByYW5nZV9zdGFydCA9IHN0YXJ0X3NlYXJjaFsxXS5hZGRyZXNzJywNCgkJCScgICAgZm9yIGksIHYgaW4gcGFpcnMoZ2cuZ2V0UmFuZ2VzTGlzdCgpKSBkbycsDQoJCQknICAgICAgICBpZiB2WyJzdGFydCJdIDwgcmFuZ2Vfc3RhcnQgYW5kIHZbImVuZCJdID4gcmFuZ2Vfc3RhcnQgdGhlbicsDQoJCQknICAgICAgICAgICAgbWV0YWRhdGFfZW5kID0gdlsiZW5kIl0nLCAKCQkJJyAgICAgICAgICAgIGJyZWFrJywgCgkJCScgICAgICAgIGVuZCcsIAoJCQknICAgIGVuZCcsDQoJCQknICAgIGdnLnNlYXJjaE51bWJlcihzdHJpbmdzRW5kLCBnZy5UWVBFX0JZVEUsIGZhbHNlLCBnZy5TSUdOX0VRVUFMLCByYW5nZV9zdGFydCwgbmlsLCAxKScsDQoJCQknICAgIGxvY2FsIGVuZF9zZWFyY2ggPSBnZy5nZXRSZXN1bHRzKDEpJywgCgkJCScgICAgcmFuZ2VfZW5kID0gZW5kX3NlYXJjaFsxXS5hZGRyZXNzJywNCgkJCScgICAgZ2cuY2xlYXJSZXN1bHRzKCknLCAKCQkJJ2VuZCcsDQoJCQknZnVuY3Rpb24gc2V0TWV0aG9kVmFsdWVzKGZ1bmN0aW9uX2luZGV4LCBlZGl0X2luZGV4KScsDQoJCQknICAgIGlmIHJldmVydF90YWJsZVtmdW5jdGlvbl9pbmRleF0gYW5kIHJldmVydF90YWJsZVtmdW5jdGlvbl9pbmRleF1bZWRpdF9pbmRleF0gdGhlbicsDQoJCQknICAgICAgICBnZy5zZXRWYWx1ZXMocmV2ZXJ0X3RhYmxlW2Z1bmN0aW9uX2luZGV4XVtlZGl0X2luZGV4XSknLA0KCQkJJyAgICAgICAgcmV2ZXJ0X3RhYmxlW2Z1bmN0aW9uX2luZGV4XVtlZGl0X2luZGV4XSA9IG5pbCcsDQoJCQknICAgICAgICBnZy50b2FzdCgi4p2MICIgLi4gc2NyaXB0RnVuY3Rpb25zW2Z1bmN0aW9uX2luZGV4XS5tZW51X25hbWUgLi4gIiBEaXNhYmxlZCDinYwiKScsDQoJCQknICAgIGVsc2UnLCAKCQkJJyAgICAgICAgaWYgYXJjaC54NjQgdGhlbicsIAoJCQknICAgICAgICAgICAgZWRpdHNfYXJjaCA9ICJhcm04X2VkaXRzIicsDQoJCQknICAgICAgICBlbHNlJywgCgkJCScgICAgICAgICAgICBlZGl0c19hcmNoID0gImFybTdfZWRpdHMiJywgCgkJCScgICAgICAgIGVuZCcsDQoJCQknICAgICAgICBsb2NhbCBtZXRob2RfbmFtZSA9IHNjcmlwdEZ1bmN0aW9uc1tmdW5jdGlvbl9pbmRleF0uZWRpdHNbZWRpdF9pbmRleF0ubWV0aG9kX25hbWUnLA0KCQkJJyAgICAgICAgbG9jYWwgY2xhc3NfbmFtZSA9IHNjcmlwdEZ1bmN0aW9uc1tmdW5jdGlvbl9pbmRleF0uZWRpdHNbZWRpdF9pbmRleF0uY2xhc3NfbmFtZScsDQoJCQknICAgICAgICBsb2NhbCBhZGRyZXNzZXMgPSBmaW5kTWV0aG9kKG1ldGhvZF9uYW1lLCBjbGFzc19uYW1lKScsDQoJCQknICAgICAgICBsb2NhbCBlZGl0cyA9IHNjcmlwdEZ1bmN0aW9uc1tmdW5jdGlvbl9pbmRleF0uZWRpdHNbZWRpdF9pbmRleF1bZWRpdHNfYXJjaF0nLA0KCQkJJyAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoYWRkcmVzc2VzKSBkbycsIAoJCQknICAgICAgICAgICAgbG9jYWwgYWRkcmVzc190YWJsZSA9IHt9JywNCgkJCScgICAgICAgICAgICBsb2NhbCBvZmZzZXQgPSAwJywgCgkJCScgICAgICAgICAgICBsb2NhbCBjb3VudCA9IDEnLCAKCQkJJyAgICAgICAgICAgIHJlcGVhdCcsDQoJCQknICAgICAgICAgICAgICAgIGFkZHJlc3NfdGFibGVbY291bnRdID0ge30nLA0KCQkJJyAgICAgICAgICAgICAgICBhZGRyZXNzX3RhYmxlW2NvdW50XS5hZGRyZXNzID0gdiArIG9mZnNldCcsDQoJCQknICAgICAgICAgICAgICAgIGFkZHJlc3NfdGFibGVbY291bnRdLmZsYWdzID0gZ2cuVFlQRV9EV09SRCcsDQoJCQknICAgICAgICAgICAgICAgIGFkZHJlc3NfdGFibGVbY291bnRdLnZhbHVlID0gZWRpdHNbY291bnRdJywNCgkJCScgICAgICAgICAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0ICsgNCcsIAoJCQknICAgICAgICAgICAgICAgIGNvdW50ID0gY291bnQgKyAxJywNCgkJCScgICAgICAgICAgICB1bnRpbCAoY291bnQgPT0gI2VkaXRzICsgMSknLA0KCQkJJyAgICAgICAgICAgIGlmIG5vdCByZXZlcnRfdGFibGVbZnVuY3Rpb25faW5kZXhdIHRoZW4nLA0KCQkJJyAgICAgICAgICAgICAgICByZXZlcnRfdGFibGVbZnVuY3Rpb25faW5kZXhdID0ge30nLCAKCQkJJyAgICAgICAgICAgIGVuZCcsDQoJCQknICAgICAgICAgICAgaWYgbm90IHJldmVydF90YWJsZVtmdW5jdGlvbl9pbmRleF1bZWRpdF9pbmRleF0gdGhlbicsDQoJCQknICAgICAgICAgICAgICAgIHJldmVydF90YWJsZVtmdW5jdGlvbl9pbmRleF1bZWRpdF9pbmRleF0gPSB7fScsIAoJCQknICAgICAgICAgICAgZW5kJywNCgkJCScgICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhnZy5nZXRWYWx1ZXMoYWRkcmVzc190YWJsZSkpIGRvJywNCgkJCScgICAgICAgICAgICAgICAgcmV2ZXJ0X3RhYmxlW2Z1bmN0aW9uX2luZGV4XVtlZGl0X2luZGV4XVsjcmV2ZXJ0X3RhYmxlW2Z1bmN0aW9uX2luZGV4XVtlZGl0X2luZGV4XSArIDFdID0gdicsDQoJCQknICAgICAgICAgICAgZW5kJywgCgkJCScgICAgICAgICAgICBnZy5zZXRWYWx1ZXMoYWRkcmVzc190YWJsZSknLCAKCQkJJyAgICAgICAgZW5kJywNCgkJCScgICAgICAgIGdnLnRvYXN0KCLinIUgIiAuLiBzY3JpcHRGdW5jdGlvbnNbZnVuY3Rpb25faW5kZXhdLm1lbnVfbmFtZSAuLiAiIEVuYWJsZWQg4pyFIiknLA0KCQkJJyAgICBlbmQnLCAKCQkJJ2VuZCcsIAoJCQknZnVuY3Rpb24gaG9tZSgpJywgCgkJCScgICAgbG9jYWwgbWVudU5hbWVzID0ge30nLA0KCQkJJyAgICBmb3IgaSwgdiBpbiBwYWlycyhzY3JpcHRGdW5jdGlvbnMpIGRvJywNCgkJCScgICAgICAgIG1lbnVOYW1lc1tpXSA9IGVtb2ppc1tpXS4uIiAiLi4gdi5tZW51X25hbWUnLCAKCQkJJyAgICBlbmQnLA0KCQkJJyAgICBtZW51TmFtZXNbI21lbnVOYW1lcyArMV0gPSAi4p2MIEV4aXQiJywNCgkJCScgICAgbG9jYWwgbWVudSA9IGdnLmNob2ljZShtZW51TmFtZXMsbmlsLHNjcmlwdF90aXRsZSknLCAKCQkJJyAgICBpZiBtZW51IH49IG5pbCB0aGVuJywNCgkJCScgICAgICAgIGlmIG1lbnUgPT0gI21lbnVOYW1lcyB0aGVuJywgCgkJCScgICAgICAgICAgICBvcy5leGl0KCknLCAKCQkJJyAgICAgICAgZWxzZScsDQoJCQknICAgICAgICAgICAgc2V0VmFsdWVzKG1lbnUpJywgCgkJCScgICAgICAgIGVuZCcsIAoJCQknICAgIGVuZCcsIAoJCQknZW5kJywNCgkJCSdmdW5jdGlvbiBzZXRWYWx1ZXMoZnVuY3Rpb25faW5kZXgpJywgCgkJCScgICAgaWYgZW1vamlzW2Z1bmN0aW9uX2luZGV4XSA9PSAi8J+UmCIgdGhlbicsDQoJCQknICAgICAgICBlbW9qaXNbZnVuY3Rpb25faW5kZXhdID0gIuKchSIgJywgCgkJCScgICAgZWxzZScsDQoJCQknICAgICAgICBlbW9qaXNbZnVuY3Rpb25faW5kZXhdID0gIvCflJgiICcsIAoJCQknICAgIGVuZCcsDQoJCQknICAgIGZvciBpLCB2IGluIHBhaXJzKHNjcmlwdEZ1bmN0aW9uc1tmdW5jdGlvbl9pbmRleF0uZWRpdHMpIGRvJywNCgkJCScgICAgICAgIGlmIHYubWV0aG9kX25hbWUgdGhlbicsIAoJCQknICAgICAgICAgICAgc2V0TWV0aG9kVmFsdWVzKGZ1bmN0aW9uX2luZGV4LCBpKScsDQoJCQknICAgICAgICBlbHNlaWYgdi5maWVsZF9uYW1lIHRoZW4nLA0KCQkJJyAgICAgICAgICAgIHNldEZpZWxkVmFsdWVzKHYsZnVuY3Rpb25faW5kZXgsIGkpJywgCgkJCScgICAgICAgIGVsc2UnLA0KCQkJJyAgICAgICAgICAgIHNldFNWRlZhbHVlcyh2LGZ1bmN0aW9uX2luZGV4LCBpKScsIAoJCQknICAgICAgICBlbmQnLCAKCQkJJyAgICBlbmQnLCAKCQkJJ2VuZCcsDQoJCQknZnVuY3Rpb24gZmluZE1ldGhvZChtZXRob2RfbmFtZSwgcGFzc2VkX2NsYXNzX25hbWUpJywgCgkJCScgICAgaWYgYXJjaC54NjQgdGhlbicsDQoJCQknICAgICAgICBwX29mZnNldCA9IDE2JywgCgkJCScgICAgICAgIHBfb2Zmc2V0MiA9IDgnLA0KCQkJJyAgICAgICAgZmxhZ190eXBlID0gZ2cuVFlQRV9RV09SRCcsIAoJCQknICAgIGVsc2UnLCAKCQkJJyAgICAgICAgcF9vZmZzZXQgPSA4JywNCgkJCScgICAgICAgIHBfb2Zmc2V0MiA9IDQnLCAKCQkJJyAgICAgICAgZmxhZ190eXBlID0gZ2cuVFlQRV9EV09SRCcsIAoJCQknICAgIGVuZCcsDQoJCQknICAgIG1ldGhvZF9uYW1lX2FkZHJlc3MgPSBzZWFyY2hEdW1wKG1ldGhvZF9uYW1lKScsIAoJCQknICAgIGdnLmNsZWFyUmVzdWx0cygpJywNCgkJCScgICAgZ2cuc2V0UmFuZ2VzKGdnLlJFR0lPTl9DX0FMTE9DIHwgZ2cuUkVHSU9OX0NfSEVBUCknLA0KCQkJJyAgICBnZy5zZWFyY2hOdW1iZXIobWV0aG9kX25hbWVfYWRkcmVzcywgZmxhZ190eXBlKScsDQoJCQknICAgIGxvY2FsIHJlc3VsdHMgPSBnZy5nZXRSZXN1bHRzKGdnLmdldFJlc3VsdHNDb3VudCgpKScsDQoJCQknICAgIGxvY2FsIG1ldGhvZHNfZm91bmQgPSB7fScsIAoJCQknICAgIGxvY2FsIGlsMmNwcF9hZGRyZXNzZXMgPSB7fScsDQoJCQknICAgIGZvciBpLCB2IGluIHBhaXJzKHJlc3VsdHMpIGRvJywgCgkJCScgICAgICAgIGxvY2FsIGdldF9jbGFzc19wb2ludGVyXzEgPSB7fScsDQoJCQknICAgICAgICBnZXRfY2xhc3NfcG9pbnRlcl8xWzFdID0ge30nLA0KCQkJJyAgICAgICAgZ2V0X2NsYXNzX3BvaW50ZXJfMVsxXS5hZGRyZXNzID0gdi5hZGRyZXNzICsgcF9vZmZzZXQyJywNCgkJCScgICAgICAgIGdldF9jbGFzc19wb2ludGVyXzFbMV0uZmxhZ3MgPSBmbGFnX3R5cGUnLA0KCQkJJyAgICAgICAgZ2V0X2NsYXNzX3BvaW50ZXJfMSA9IGdnLmdldFZhbHVlcyhnZXRfY2xhc3NfcG9pbnRlcl8xKScsDQoJCQknICAgICAgICBsb2NhbCBnZXRfY2xhc3NfcG9pbnRlcl8yID0ge30nLCAKCQkJJyAgICAgICAgZ2V0X2NsYXNzX3BvaW50ZXJfMlsxXSA9IHt9JywNCgkJCScgICAgICAgIGdldF9jbGFzc19wb2ludGVyXzJbMV0uYWRkcmVzcyA9IGdldF9jbGFzc19wb2ludGVyXzFbMV0udmFsdWUgKyBwX29mZnNldCcsDQoJCQknICAgICAgICBnZXRfY2xhc3NfcG9pbnRlcl8yWzFdLmZsYWdzID0gZmxhZ190eXBlJywNCgkJCScgICAgICAgIGdldF9jbGFzc19wb2ludGVyXzIgPSBnZy5nZXRWYWx1ZXMoZ2V0X2NsYXNzX3BvaW50ZXJfMiknLA0KCQkJJyAgICAgICAgbG9jYWwgZ2V0X2NsYXNzX3N0YXJ0ID0ge30nLCAKCQkJJyAgICAgICAgZ2V0X2NsYXNzX3N0YXJ0WzFdID0ge30nLA0KCQkJJyAgICAgICAgZ2V0X2NsYXNzX3N0YXJ0WzFdLmFkZHJlc3MgPSBnZXRfY2xhc3NfcG9pbnRlcl8yWzFdLnZhbHVlJywNCgkJCScgICAgICAgIGdldF9jbGFzc19zdGFydFsxXS5mbGFncyA9IGdnLlRZUEVfQllURScsDQoJCQknICAgICAgICBnZy5sb2FkUmVzdWx0cyhnZXRfY2xhc3Nfc3RhcnQpJywNCgkJCScgICAgICAgIGdldF9jbGFzc19zdGFydCA9IGdnLmdldFZhbHVlcyhnZXRfY2xhc3Nfc3RhcnQpJywNCgkJCScgICAgICAgIGxvY2FsIGdldF9jbGFzcyA9IHt9JywgCgkJCScgICAgICAgIGxvY2FsIG9mZnNldCA9IDAnLA0KCQkJJyAgICAgICAgbG9jYWwgY291bnQgPSAxJywgCgkJCScgICAgICAgIHJlcGVhdCcsIAoJCQknICAgICAgICAgICAgZ2V0X2NsYXNzW2NvdW50XSA9IHt9JywNCgkJCScgICAgICAgICAgICBnZXRfY2xhc3NbY291bnRdLmFkZHJlc3MgPSBnZXRfY2xhc3NfcG9pbnRlcl8yWzFdLnZhbHVlICsgb2Zmc2V0JywNCgkJCScgICAgICAgICAgICBnZXRfY2xhc3NbY291bnRdLmZsYWdzID0gZ2cuVFlQRV9CWVRFJywgCgkJCScgICAgICAgICAgICBjb3VudCA9IGNvdW50ICsgMScsDQoJCQknICAgICAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0ICsgMScsIAoJCQknICAgICAgICB1bnRpbCAoY291bnQgPT0gMTAwKScsDQoJCQknICAgICAgICBnZXRfY2xhc3MgPSBnZy5nZXRWYWx1ZXMoZ2V0X2NsYXNzKScsIAoJCQknICAgICAgICBsb2NhbCBjbGFzc19uYW1lID0gIiInLA0KCQkJJyAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBwYWlycyhnZXRfY2xhc3MpIGRvJywNCgkJCScgICAgICAgICAgICBjbGFzc19uYW1lID0gY2xhc3NfbmFtZSAuLiBzdHJpbmcuY2hhcih2YWx1ZS52YWx1ZSknLA0KCQkJJyAgICAgICAgICAgIGlmIHZhbHVlLnZhbHVlID09IDAgdGhlbicsIAoJCQknICAgICAgICAgICAgICAgIGJyZWFrJywgCgkJCScgICAgICAgICAgICBlbmQnLA0KCQkJJyAgICAgICAgZW5kJywgCgkJCScgICAgICAgIGlmIGNsYXNzX25hbWUgPT0gcGFzc2VkX2NsYXNzX25hbWUgdGhlbicsDQoJCQknICAgICAgICAgICAgbG9jYWwgZ2V0X2lsMmNwcF9hZGRyZXNzID0ge30nLA0KCQkJJyAgICAgICAgICAgIGdldF9pbDJjcHBfYWRkcmVzc1sxXSA9IHt9JywNCgkJCScgICAgICAgICAgICBnZXRfaWwyY3BwX2FkZHJlc3NbMV0uYWRkcmVzcyA9IHYuYWRkcmVzcyAtIHBfb2Zmc2V0JywNCgkJCScgICAgICAgICAgICBnZXRfaWwyY3BwX2FkZHJlc3NbMV0uZmxhZ3MgPSBmbGFnX3R5cGUnLA0KCQkJJyAgICAgICAgICAgIGdldF9pbDJjcHBfYWRkcmVzcyA9IGdnLmdldFZhbHVlcyhnZXRfaWwyY3BwX2FkZHJlc3MpJywNCgkJCScgICAgICAgICAgICBpbDJjcHBfYWRkcmVzc2VzWyNpbDJjcHBfYWRkcmVzc2VzICsgMV0gPSBnZXRfaWwyY3BwX2FkZHJlc3NbMV0udmFsdWUnLA0KCQkJJyAgICAgICAgZW5kJywgCgkJCScgICAgZW5kJywgCgkJCScgICAgcmV0dXJuIGlsMmNwcF9hZGRyZXNzZXMnLCAKCQkJJ2VuZCcsDQoJCQknZnVuY3Rpb24gcmVmaW5lUmVzdWx0cyhzZWFyY2hfc3RyaW5nKScsDQoJCQknICAgIGxvY2FsIGZpcnN0X3NlYXJjaF9zdHJpbmcgPSAiMDsiIC4uIHN0cmluZy5ieXRlKHN0cmluZy5zdWIoc2VhcmNoX3N0cmluZywgMSwgMSkpIC4uICI6OjIiJywNCgkJCScgICAgZ2cucmVmaW5lTnVtYmVyKGZpcnN0X3NlYXJjaF9zdHJpbmcsIGdnLlRZUEVfQllURSknLA0KCQkJJyAgICBsb2NhbCBzZWNvbmRfc2VhcmNoX3N0cmluZyA9IHN0cmluZy5ieXRlKHN0cmluZy5zdWIoc2VhcmNoX3N0cmluZywgMSwgMSkpJywNCgkJCScgICAgZ2cucmVmaW5lTnVtYmVyKHNlY29uZF9zZWFyY2hfc3RyaW5nLCBnZy5UWVBFX0JZVEUpJywNCgkJCScgICAgbG9jYWwgc2VhcmNoX3Jlc3VsdHMgPSBnZy5nZXRSZXN1bHRzKGdnLmdldFJlc3VsdHNDb3VudCgpKScsDQoJCQknICAgIHJldHVybiBzZWFyY2hfcmVzdWx0c1sxXS5hZGRyZXNzJywgCgkJCSdlbmQnLCAKCQkJJ2Z1bmN0aW9uIHNlYXJjaER1bXAoc2VhcmNoX3N0cmluZyknLA0KCQkJJyAgICBnZy5zZXRSYW5nZXMoZ2cuUkVHSU9OX09USEVSIHwgZ2cuUkVHSU9OX0NfQUxMT0MpJywgCgkJCScgICAgaWYgc2VhcmNoX3N0cmluZyB0aGVuJywNCgkJCScgICAgICAgIGdnLmNsZWFyUmVzdWx0cygpJywNCgkJCScgICAgICAgIGdnLnNlYXJjaE51bWJlcihjcmVhdGVTZWFyY2goc2VhcmNoX3N0cmluZyksIGdnLlRZUEVfQllURSwgZmFsc2UsIGdnLlNJR05fRVFVQUwsIHJhbmdlX3N0YXJ0LCByYW5nZV9lbmQpJywNCgkJCScgICAgICAgIGlmIGdnLmdldFJlc3VsdHNDb3VudCgpID4gMCB0aGVuJywNCgkJCScgICAgICAgICAgICByZXR1cm4gcmVmaW5lUmVzdWx0cyhzZWFyY2hfc3RyaW5nKScsIAoJCQknICAgICAgICBlbmQnLCAKCQkJJyAgICBlbmQnLCAKCQkJJ2VuZCcsDQoJCQknZnVuY3Rpb24gY3JlYXRlU2VhcmNoKHNlYXJjaF9zdHJpbmcpJywgCgkJCScgICAgbG9jYWwgYnl0ZV9zZWFyY2ggPSAiMDsiJywNCgkJCScgICAgZm9yIGMgaW4gc2VhcmNoX3N0cmluZzpnbWF0Y2ggIi4iIGRvJywNCgkJCScgICAgICAgIGJ5dGVfc2VhcmNoID0gYnl0ZV9zZWFyY2ggLi4gc3RyaW5nLmJ5dGUoYykgLi4gIjsiJywgCgkJCScgICAgZW5kJywNCgkJCScgICAgYnl0ZV9zZWFyY2ggPSBieXRlX3NlYXJjaCAuLiAiMDo6IiAuLiAjc2VhcmNoX3N0cmluZyArIDInLA0KCQkJJyAgICByZXR1cm4gYnl0ZV9zZWFyY2gnLCAKCQkJJ2VuZCcsIAoJCQknZnVuY3Rpb24gZl9oZXgobiknLA0KCQkJJyAgICByZXR1cm4gIjB4IiAuLiBzdHJpbmcuZm9ybWF0KCIleCIsIG4pJywgCgkJCSdlbmQnLA0KCQkJJ2Z1bmN0aW9uIHNldEZpZWxkVmFsdWVzKHNhdmVkX2VkaXRfdGFibGUsZnVuY3Rpb25faW5kZXgsIGVkaXRfaW5kZXgpJywNCgkJCScJaWYgcmV2ZXJ0X3RhYmxlW2Z1bmN0aW9uX2luZGV4XSBhbmQgcmV2ZXJ0X3RhYmxlW2Z1bmN0aW9uX2luZGV4XVtlZGl0X2luZGV4XSB0aGVuJywNCgkJCScgICAgICAgIGdnLnNldFZhbHVlcyhyZXZlcnRfdGFibGVbZnVuY3Rpb25faW5kZXhdW2VkaXRfaW5kZXhdKScsDQoJCQknICAgICAgICByZXZlcnRfdGFibGVbZnVuY3Rpb25faW5kZXhdW2VkaXRfaW5kZXhdID0gbmlsJywNCgkJCScgICAgICAgIGdnLnRvYXN0KCLinYwgIiAuLiBzY3JpcHRGdW5jdGlvbnNbZnVuY3Rpb25faW5kZXhdLm1lbnVfbmFtZSAuLiAiIERpc2FibGVkIOKdjCIpJywNCgkJCScgICAgZWxzZScsIAoJCQknICAgIGxvY2FsIHN0cmluZ19hZGRyZXNzID0ge30nLCAKCQkJJyAgICBsb2NhbCBjbGFzc19oZWFkZXJzID0ge30nLA0KCQkJJyAgICAJbG9jYWwgZ2V0X251bWJlcl9vZl9maWVsZHMgPSB7fScsIAoJCQknICAgIGxvY2FsIGZpcnN0X2ZpZWxkX2FkZHJlc3MgPSB7fScsDQoJCQknICAgIAlsb2NhbCBmaWVsZF9kYXRhID0gIiInLCAKCQkJJyAgICBsb2NhbCBmaWVsZF9uYW1lX3BvaW50ZXIgPSAiIicsDQoJCQknICAgIAlsb2NhbCB0eXBlX3BvaW50ZXIgPSAiIicsIAoJCQknICAgIGxvY2FsIGNsYXNzX3BvaW50ZXIgPSAiIicsDQoJCQknICAgIAlsb2NhbCBmaWVsZF9vZmZzZXQgPSAiIicsIAoJCQknICAgIGxvY2FsIGN1cnJlbnRfYWRkcmVzcyA9ICIiJywNCgkJCScgICAgCWxvY2FsIGdldF9maWVsZF9uYW1lID0ge30nLCAKCQkJJyAgICBsb2NhbCBvZmZzZXQgPSAwJywgCgkJCScgICAgbG9jYWwgY291bnQgPSAxJywNCgkJCScgICAgCWxvY2FsIGZpZWxkX2RhdGEgPSB7fScsIAoJCQknICAgIGxvY2FsIGZpZWxkX25hbWUgPSAiIicsIAoJCQknICAgIGxvY2FsIGdldF90eXBlID0ge30nLA0KCQkJJyAgICAJbG9jYWwgZmllbGRfdHlwZSA9IHt9JywgCgkJCScgICAgbG9jYWwgcG9pbnRlcnNfdG9faW5zdGFuY2VzID0ge30nLA0KCQkJJyAgICAJaWYgbm90IGNsYXNzIHRoZW4nLCAKCQkJJyAgICAgICAgY2xhc3MgPSAiIicsIAoJCQknICAgIGVuZCcsIAoJCQknICAgIGlmIGFyY2gueDY0IHRoZW4nLA0KCQkJJyAgICAJICAgIGZsYWdfdHlwZSA9IGdnLlRZUEVfUVdPUkQnLCAKCQkJJyAgICBlbHNlJywNCgkJCScgICAgICAgIGZsYWdfdHlwZSA9IGdnLlRZUEVfRFdPUkQnLCAKCQkJJyAgICAJZW5kJywgCgkJCScgICAgZ2cuY2xlYXJMaXN0KCknLA0KCQkJJyAgICB3b3JraW5nX2NsYXNzID0gc2F2ZWRfZWRpdF90YWJsZS5jbGFzc19uYW1lJywNCgkJCScgICAgCWdnLnNldFJhbmdlcyhnZy5SRUdJT05fT1RIRVIpJywgCgkJCScgICAgZ2cuY2xlYXJSZXN1bHRzKCknLA0KCQkJJyAgICAJZ2cuc2VhcmNoTnVtYmVyKGNyZWF0ZVNlYXJjaChzYXZlZF9lZGl0X3RhYmxlLmNsYXNzX25hbWUpLCBnZy5UWVBFX0JZVEUsIGZhbHNlLCBnZy5TSUdOX0VRVUFMLCByYW5nZV9zdGFydCwnLA0KCQkJJyAgICAJICAgIHJhbmdlX2VuZCknLCAKCQkJJyAgICBzdHJpbmdfYWRkcmVzcyA9IGdnLmdldFJlc3VsdHMoMSwgMSknLA0KCQkJJyAgICAJaWYgZ2cuZ2V0UmVzdWx0c0NvdW50KCkgPT0gMCB0aGVuJywgCgkJCScgICAgICAgIG5vbmVfZm91bmQgPSB0cnVlJywNCgkJCScgICAgCSAgICBnb3RvIG5vbmUnLCAKCQkJJyAgICBlbmQnLCAKCQkJJyAgICBzdHJpbmdfYWRkcmVzcyA9IHN0cmluZ19hZGRyZXNzWzFdLmFkZHJlc3MnLA0KCQkJJyAgICAJZ2cuY2xlYXJSZXN1bHRzKCknLCAKCQkJJyAgICBnZy5zZXRSYW5nZXMoZ2cuUkVHSU9OX0NfQUxMT0MpJywNCgkJCScgICAgCWdnLnNlYXJjaE51bWJlcihzdHJpbmdfYWRkcmVzcywgZmxhZ190eXBlKScsDQoJCQknICAgIAljbGFzc19oZWFkZXJzID0gZ2cuZ2V0UmVzdWx0cyhnZy5nZXRSZXN1bHRzQ291bnQoKSknLA0KCQkJJyAgICAJaWYgZ2cuZ2V0UmVzdWx0c0NvdW50KCkgPT0gMCB0aGVuJywgCgkJCScgICAgICAgIG5vbmVfZm91bmQgPSB0cnVlJywNCgkJCScgICAgCSAgICBnb3RvIG5vbmUnLCAKCQkJJyAgICBlbmQnLCAKCQkJJyAgICBmb3IgaSwgdiBpbiBwYWlycyhjbGFzc19oZWFkZXJzKSBkbycsDQoJCQknICAgIAkgICAgaWYgYXJjaC54NjQgdGhlbicsDQoJCQknICAgIAkgICAgICAgIGNsYXNzX2hlYWRlcnNbaV0uYWRkcmVzcyA9IGNsYXNzX2hlYWRlcnNbaV0uYWRkcmVzcyAtIDE2JywNCgkJCScgICAgCSAgICBlbHNlJywNCgkJCScgICAgCSAgICAgICAgY2xhc3NfaGVhZGVyc1tpXS5hZGRyZXNzID0gY2xhc3NfaGVhZGVyc1tpXS5hZGRyZXNzIC0gOCcsDQoJCQknICAgICAgICBlbmQnLCAKCQkJJyAgICAJZW5kJywgCgkJCScgICAgZ2cuc2V0UmFuZ2VzKGdnLlJFR0lPTl9BTk9OWU1PVVMpJywNCgkJCScgICAgCWdnLmxvYWRSZXN1bHRzKGNsYXNzX2hlYWRlcnMpJywgCgkJCScgICAgZ2cuc2VhcmNoUG9pbnRlcigwKScsDQoJCQknICAgIAlpbnN0YW5jZV9oZWFkZXJzID0gZ2cuZ2V0UmVzdWx0cyhnZy5nZXRSZXN1bHRzQ291bnQoKSknLA0KCQkJJyAgICAJaWYgZ2cuZ2V0UmVzdWx0c0NvdW50KCkgPT0gMCB0aGVuJywgCgkJCScgICAgICAgIG5vbmVfZm91bmQgPSB0cnVlJywNCgkJCScgICAgCSAgICBnb3RvIG5vbmUnLCAKCQkJJyAgICBlbmQnLCAKCQkJJyAgICBjbGFzc19oZWFkZXIgPSBpbnN0YW5jZV9oZWFkZXJzWzFdLnZhbHVlJywNCgkJCScgICAgCWZpcnN0X2ZpZWxkX2FkZHJlc3MgPSB7fScsIAoJCQknICAgIGZpcnN0X2ZpZWxkX2FkZHJlc3NbMV0gPSB7fScsDQoJCQknICAgIAlpZiBhcmNoLng2NCB0aGVuJywNCgkJCScgICAgCSAgICBmaXJzdF9maWVsZF9hZGRyZXNzWzFdLmFkZHJlc3MgPSBjbGFzc19oZWFkZXIgKyAweDgwJywgCgkJCScgICAgZWxzZScsDQoJCQknICAgIAkgICAgZmlyc3RfZmllbGRfYWRkcmVzc1sxXS5hZGRyZXNzID0gY2xhc3NfaGVhZGVyICsgMHg0MCcsIAoJCQknICAgIGVuZCcsDQoJCQknICAgIAlmaXJzdF9maWVsZF9hZGRyZXNzWzFdLmZsYWdzID0gZmxhZ190eXBlJywNCgkJCScgICAgCWZpcnN0X2ZpZWxkX2FkZHJlc3MgPSBnZy5nZXRWYWx1ZXMoZmlyc3RfZmllbGRfYWRkcmVzcyknLA0KCQkJJyAgICAJZmlyc3RfZmllbGRfYWRkcmVzcyA9IGZpcnN0X2ZpZWxkX2FkZHJlc3NbMV0udmFsdWUnLCAKCQkJJyAgICBpZiBhcmNoLng2NCB0aGVuJywNCgkJCScgICAgCSAgICBnZXRfbnVtX2ZpZWxkc19zdGFydCA9IGZpcnN0X2ZpZWxkX2FkZHJlc3MgKyAyNCcsDQoJCQknICAgIAkgICAgZ2V0X251bV9maWVsZHNfb2Zmc2V0ID0gMzInLCAKCQkJJyAgICBlbHNlJywNCgkJCScgICAgCSAgICBnZXRfbnVtX2ZpZWxkc19zdGFydCA9IGZpcnN0X2ZpZWxkX2FkZHJlc3MgKyAxMicsDQoJCQknICAgIAkgICAgZ2V0X251bV9maWVsZHNfb2Zmc2V0ID0gMjAnLCAKCQkJJyAgICBlbmQnLCAKCQkJJyAgICBudW1fb2Zmc2V0ID0gMCcsDQoJCQknICAgIAludW1fZmllbGRfZGF0YSA9IHt9JywgCgkJCScgICAgZm9yIGkgPSAxLCAxMDAwIGRvJywNCgkJCScgICAgCSAgICBudW1fZmllbGRfZGF0YVtpXSA9IHt9JywNCgkJCScgICAgCSAgICBudW1fZmllbGRfZGF0YVtpXS5hZGRyZXNzID0gZ2V0X251bV9maWVsZHNfc3RhcnQgKyBudW1fb2Zmc2V0JywNCgkJCScgICAgCSAgICBudW1fZmllbGRfZGF0YVtpXS5mbGFncyA9IGdnLlRZUEVfRFdPUkQnLA0KCQkJJyAgICAJICAgIG51bV9vZmZzZXQgPSBudW1fb2Zmc2V0ICsgZ2V0X251bV9maWVsZHNfb2Zmc2V0JywgCgkJCScgICAgZW5kJywNCgkJCScgICAgCW51bV9maWVsZF9kYXRhID0gZ2cuZ2V0VmFsdWVzKG51bV9maWVsZF9kYXRhKScsIAoJCQknICAgIGZpZWxkX2NvdW50ZXIgPSAwJywNCgkJCScgICAgCWxhc3RfZmllbGRfb2Zmc2V0ID0gMCcsIAoJCQknICAgIGZvciBpLCB2IGluIHBhaXJzKG51bV9maWVsZF9kYXRhKSBkbycsDQoJCQknICAgIAkgICAgaWYgdi52YWx1ZSA+PSBsYXN0X2ZpZWxkX29mZnNldCBvciB2LnZhbHVlID09IDAgdGhlbicsDQoJCQknICAgIAkgICAgICAgIGlmIHYudmFsdWUgPj0gbGFzdF9maWVsZF9vZmZzZXQgdGhlbicsDQoJCQknICAgIAkgICAgICAgICAgICBsYXN0X2ZpZWxkX29mZnNldCA9IHYudmFsdWUnLCAKCQkJJyAgICAgICAgICAgIGVuZCcsDQoJCQknICAgIAkgICAgICAgIGZpZWxkX2NvdW50ZXIgPSBmaWVsZF9jb3VudGVyICsgMScsIAoJCQknICAgICAgICBlbHNlJywNCgkJCScgICAgICAgICAgICBicmVhaycsIAoJCQknICAgIAkgICAgZW5kJywgCgkJCScgICAgZW5kJywgCgkJCScgICAgZmllbGRfZGF0YSA9ICIiJywNCgkJCScgICAgZmllbGRfbmFtZV9wb2ludGVyID0gIiInLCAKCQkJJyAgICAJdHlwZV9wb2ludGVyID0gIiInLCAKCQkJJyAgICBjbGFzc19wb2ludGVyID0gIiInLA0KCQkJJyAgICBmaWVsZF9vZmZzZXQgPSAiIicsIAoJCQknICAgIAlmaWVsZHMgPSB7fScsIAoJCQknICAgIG51bWJlcl9vZl9maWVsZHMgPSBmaWVsZF9jb3VudGVyJywNCgkJCScgICAgCWN1cnJlbnRfYWRkcmVzcyA9IGZpcnN0X2ZpZWxkX2FkZHJlc3MnLCAKCQkJJyAgICBmb3IgaSA9IDEsIG51bWJlcl9vZl9maWVsZHMgZG8nLA0KCQkJJyAgICAJICAgIGlmIGFyY2gueDY0IHRoZW4nLCAKCQkJJyAgICAgICAgICAgIGZpZWxkX2RhdGEgPSB7fScsDQoJCQknICAgIAkgICAgICAgIGZpZWxkX2RhdGFbMV0gPSB7fScsDQoJCQknICAgIAkgICAgICAgIGZpZWxkX2RhdGFbMV0uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcycsDQoJCQknICAgIAkgICAgICAgIGZpZWxkX2RhdGFbMV0uZmxhZ3MgPSBnZy5UWVBFX1FXT1JEJywNCgkJCScgICAgCSAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNCcsDQoJCQknICAgIAkgICAgICAgIGZpZWxkX2RhdGFbMl0gPSB7fScsDQoJCQknICAgIAkgICAgICAgIGZpZWxkX2RhdGFbMl0uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcycsDQoJCQknICAgIAkgICAgICAgIGZpZWxkX2RhdGFbMl0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEJywNCgkJCScgICAgCSAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNCcsDQoJCQknICAgIAkgICAgICAgIGZpZWxkX2RhdGFbM10gPSB7fScsDQoJCQknICAgIAkgICAgICAgIGZpZWxkX2RhdGFbM10uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcycsDQoJCQknICAgIAkgICAgICAgIGZpZWxkX2RhdGFbM10uZmxhZ3MgPSBnZy5UWVBFX1FXT1JEJywNCgkJCScgICAgCSAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNCcsDQoJCQknICAgIAkgICAgICAgIGZpZWxkX2RhdGFbNF0gPSB7fScsDQoJCQknICAgIAkgICAgICAgIGZpZWxkX2RhdGFbNF0uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcycsDQoJCQknICAgIAkgICAgICAgIGZpZWxkX2RhdGFbNF0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEJywNCgkJCScgICAgCSAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNCcsDQoJCQknICAgIAkgICAgICAgIGZpZWxkX2RhdGFbNV0gPSB7fScsDQoJCQknICAgIAkgICAgICAgIGZpZWxkX2RhdGFbNV0uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcycsDQoJCQknICAgIAkgICAgICAgIGZpZWxkX2RhdGFbNV0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEJywNCgkJCScgICAgCSAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNCcsDQoJCQknICAgIAkgICAgICAgIGZpZWxkX2RhdGFbNl0gPSB7fScsDQoJCQknICAgIAkgICAgICAgIGZpZWxkX2RhdGFbNl0uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcycsDQoJCQknICAgIAkgICAgICAgIGZpZWxkX2RhdGFbNl0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEJywNCgkJCScgICAgCSAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNCcsDQoJCQknICAgIAkgICAgICAgIGZpZWxkX2RhdGFbN10gPSB7fScsDQoJCQknICAgIAkgICAgICAgIGZpZWxkX2RhdGFbN10uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcycsDQoJCQknICAgIAkgICAgICAgIGZpZWxkX2RhdGFbN10uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEJywNCgkJCScgICAgCSAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNCcsDQoJCQknICAgIAkgICAgICAgIGZpZWxkX2RhdGFbOF0gPSB7fScsDQoJCQknICAgIAkgICAgICAgIGZpZWxkX2RhdGFbOF0uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcycsDQoJCQknICAgIAkgICAgICAgIGZpZWxkX2RhdGFbOF0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEJywNCgkJCScgICAgCSAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNCcsDQoJCQknICAgIAkgICAgICAgIGZpZWxkX2RhdGEgPSBnZy5nZXRWYWx1ZXMoZmllbGRfZGF0YSknLA0KCQkJJyAgICAJICAgICAgICBmaWVsZF9uYW1lX3BvaW50ZXIgPSBmaWVsZF9kYXRhWzFdLnZhbHVlJywNCgkJCScgICAgCSAgICAgICAgdHlwZV9wb2ludGVyID0gZmllbGRfZGF0YVszXS52YWx1ZScsDQoJCQknICAgIAkgICAgICAgIGNsYXNzX3BvaW50ZXIgPSBmaWVsZF9kYXRhWzVdLnZhbHVlJywNCgkJCScgICAgCSAgICAgICAgZmllbGRfb2Zmc2V0ID0gZmllbGRfZGF0YVs3XS52YWx1ZScsIAoJCQknICAgICAgICBlbHNlJywNCgkJCScgICAgCSAgICAgICAgZmllbGRfZGF0YSA9IHt9JywgCgkJCScgICAgICAgICAgICBmaWVsZF9kYXRhWzFdID0ge30nLA0KCQkJJyAgICAJICAgICAgICBmaWVsZF9kYXRhWzFdLmFkZHJlc3MgPSBjdXJyZW50X2FkZHJlc3MnLA0KCQkJJyAgICAJICAgICAgICBmaWVsZF9kYXRhWzFdLmZsYWdzID0gZ2cuVFlQRV9EV09SRCcsDQoJCQknICAgIAkgICAgICAgIGN1cnJlbnRfYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcyArIDQnLA0KCQkJJyAgICAJICAgICAgICBmaWVsZF9kYXRhWzJdID0ge30nLA0KCQkJJyAgICAJICAgICAgICBmaWVsZF9kYXRhWzJdLmFkZHJlc3MgPSBjdXJyZW50X2FkZHJlc3MnLA0KCQkJJyAgICAJICAgICAgICBmaWVsZF9kYXRhWzJdLmZsYWdzID0gZ2cuVFlQRV9EV09SRCcsDQoJCQknICAgIAkgICAgICAgIGN1cnJlbnRfYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcyArIDQnLA0KCQkJJyAgICAJICAgICAgICBmaWVsZF9kYXRhWzNdID0ge30nLA0KCQkJJyAgICAJICAgICAgICBmaWVsZF9kYXRhWzNdLmFkZHJlc3MgPSBjdXJyZW50X2FkZHJlc3MnLA0KCQkJJyAgICAJICAgICAgICBmaWVsZF9kYXRhWzNdLmZsYWdzID0gZ2cuVFlQRV9EV09SRCcsDQoJCQknICAgIAkgICAgICAgIGN1cnJlbnRfYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcyArIDQnLA0KCQkJJyAgICAJICAgICAgICBmaWVsZF9kYXRhWzRdID0ge30nLA0KCQkJJyAgICAJICAgICAgICBmaWVsZF9kYXRhWzRdLmFkZHJlc3MgPSBjdXJyZW50X2FkZHJlc3MnLA0KCQkJJyAgICAJICAgICAgICBmaWVsZF9kYXRhWzRdLmZsYWdzID0gZ2cuVFlQRV9EV09SRCcsDQoJCQknICAgIAkgICAgICAgIGN1cnJlbnRfYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcyArIDQnLA0KCQkJJyAgICAJICAgICAgICBmaWVsZF9kYXRhWzVdID0ge30nLA0KCQkJJyAgICAJICAgICAgICBmaWVsZF9kYXRhWzVdLmFkZHJlc3MgPSBjdXJyZW50X2FkZHJlc3MnLA0KCQkJJyAgICAJICAgICAgICBmaWVsZF9kYXRhWzVdLmZsYWdzID0gZ2cuVFlQRV9EV09SRCcsDQoJCQknICAgIAkgICAgICAgIGN1cnJlbnRfYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcyArIDQnLA0KCQkJJyAgICAJICAgICAgICBmaWVsZF9kYXRhID0gZ2cuZ2V0VmFsdWVzKGZpZWxkX2RhdGEpJywNCgkJCScgICAgCSAgICAgICAgZmllbGRfbmFtZV9wb2ludGVyID0gZmllbGRfZGF0YVsxXS52YWx1ZScsDQoJCQknICAgIAkgICAgICAgIHR5cGVfcG9pbnRlciA9IGZpZWxkX2RhdGFbMl0udmFsdWUnLA0KCQkJJyAgICAJICAgICAgICBjbGFzc19wb2ludGVyID0gZmllbGRfZGF0YVszXS52YWx1ZScsDQoJCQknICAgIAkgICAgICAgIGZpZWxkX29mZnNldCA9IGZpZWxkX2RhdGFbNF0udmFsdWUnLCAKCQkJJyAgICAgICAgZW5kJywNCgkJCScgICAgCSAgICBnZXRfZmllbGRfbmFtZSA9IHt9JywgCgkJCScgICAgICAgIG9mZnNldCA9IDAnLCAKCQkJJyAgICAgICAgY291bnQgPSAxJywNCgkJCScgICAgCSAgICByZXBlYXQnLCAKCQkJJyAgICAgICAgICAgIGdldF9maWVsZF9uYW1lW2NvdW50XSA9IHt9JywNCgkJCScgICAgCSAgICAgICAgZ2V0X2ZpZWxkX25hbWVbY291bnRdLmFkZHJlc3MgPSBmaWVsZF9uYW1lX3BvaW50ZXIgKyBvZmZzZXQnLA0KCQkJJyAgICAJICAgICAgICBnZXRfZmllbGRfbmFtZVtjb3VudF0uZmxhZ3MgPSBnZy5UWVBFX0JZVEUnLA0KCQkJJyAgICAJICAgICAgICBjb3VudCA9IGNvdW50ICsgMScsIAoJCQknICAgICAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0ICsgMScsDQoJCQknICAgIAkgICAgdW50aWwgKGNvdW50ID09IDEwMCknLA0KCQkJJyAgICAJICAgIGdldF9maWVsZF9uYW1lID0gZ2cuZ2V0VmFsdWVzKGdldF9maWVsZF9uYW1lKScsIAoJCQknICAgICAgICBmaWVsZF9uYW1lID0gIiInLA0KCQkJJyAgICAJICAgIGZvciBpbmRleCwgdmFsdWUgaW4gcGFpcnMoZ2V0X2ZpZWxkX25hbWUpIGRvJywNCgkJCScgICAgCSAgICAgICAgaWYgdmFsdWUudmFsdWUgPj0gMCBhbmQgdmFsdWUudmFsdWUgPD0gMjU1IHRoZW4nLA0KCQkJJyAgICAJICAgICAgICAgICAgZmllbGRfbmFtZSA9IGZpZWxkX25hbWUgLi4gc3RyaW5nLmNoYXIodmFsdWUudmFsdWUpJywNCgkJCScgICAgCSAgICAgICAgZW5kJywgCgkJCScgICAgICAgICAgICBpZiB2YWx1ZS52YWx1ZSA9PSAwIHRoZW4nLCAKCQkJJyAgICAgICAgICAgICAgICBicmVhaycsDQoJCQknICAgIAkgICAgICAgIGVuZCcsIAoJCQknICAgICAgICBlbmQnLCAKCQkJJyAgICAgICAgZ2V0X3R5cGUgPSB7fScsDQoJCQknICAgIAkgICAgZ2V0X3R5cGVbMV0gPSB7fScsIAoJCQknICAgICAgICBnZXRfdHlwZVsxXS5hZGRyZXNzID0gdHlwZV9wb2ludGVyJywNCgkJCScgICAgCSAgICBnZXRfdHlwZVsxXS5mbGFncyA9IGdnLlRZUEVfRFdPUkQnLA0KCQkJJyAgICAJICAgIGZpZWxkX3R5cGUgPSBnZy5nZXRWYWx1ZXMoZ2V0X3R5cGUpJywNCgkJCScgICAgCSAgICBmaWVsZF90eXBlID0gZmllbGRfdHlwZVsxXS52YWx1ZScsDQoJCQknICAgIAkgICAgdmFsdWVfdHlwZSA9IHNhdmVkX2VkaXRfdGFibGUudmFsdWVfdHlwZScsDQoJCQknICAgIAkgICAgaWYgdmFsdWVfdHlwZSBhbmQgZmllbGRfb2Zmc2V0IGFuZCBzdHJpbmcuZmluZChmaWVsZF9uYW1lLCAiW0EtWmEtel0iKSB0aGVuJywNCgkJCScgICAgCSAgICAgICAgdHlwZV9tZW51ID0gIj8iIC4uIGZpZWxkX3R5cGUgLi4gIj8iJywNCgkJCScgICAgCSAgICAgICAgdHlwZV9tZW51ID0gdmFsdWVfdHlwZScsIAoJCQknICAgICAgICAgICAgZmllbGRzWyNmaWVsZHMgKyAxXSA9IHsnLA0KCQkJJyAgICAJICAgICAgICAgICAgZmllbGRfbmFtZSA9IGZpZWxkX25hbWUsJywNCgkJCScgICAgCSAgICAgICAgICAgIGZpZWxkX29mZnNldCA9IGZfaGV4KGZpZWxkX29mZnNldCksJywNCgkJCScgICAgCSAgICAgICAgICAgIGZpZWxkX3R5cGUgPSB2YWx1ZV90eXBlLCcsIAoJCQknICAgICAgICAgICAgICAgIHR5cGVfbWVudSA9IHR5cGVfbWVudScsDQoJCQknICAgIAkgICAgICAgIH0nLCAKCQkJJyAgICAJICAgIGVuZCcsIAoJCQknICAgIAllbmQnLA0KCQkJJyAgICAJZ2cubG9hZFJlc3VsdHMoaW5zdGFuY2VfaGVhZGVycyknLCAKCQkJJyAgICAJZ2cuc2VhcmNoUG9pbnRlcigwKScsDQoJCQknICAgIAlwb2ludGVyc190b19pbnN0YW5jZXMgPSBnZy5nZXRSZXN1bHRzKGdnLmdldFJlc3VsdHNDb3VudCgpKScsDQoJCQknICAgIAlzb3J0ZWRfaW5zdGFuY2VfaGVhZGVycyA9IHt9JywgCgkJCScgICAgCWFkZGVkX2hlYWRlcnMgPSB7fScsDQoJCQknICAgIAlmb3IgaSwgdiBpbiBwYWlycyhwb2ludGVyc190b19pbnN0YW5jZXMpIGRvJywNCgkJCScgICAgCSAgICBpZiBub3QgYWRkZWRfaGVhZGVyc1t2LnZhbHVlXSB0aGVuJywNCgkJCScgICAgCSAgICAgICAgYWRkZWRfaGVhZGVyc1t2LnZhbHVlXSA9IHYudmFsdWUnLA0KCQkJJyAgICAJICAgICAgICB0YWJsZS5pbnNlcnQoc29ydGVkX2luc3RhbmNlX2hlYWRlcnMsIHYpJywgCgkJCScgICAgCSAgICBlbmQnLCAKCQkJJyAgICAJZW5kJywNCgkJCScgICAgCWdnLmxvYWRSZXN1bHRzKHNvcnRlZF9pbnN0YW5jZV9oZWFkZXJzKScsDQoJCQknICAgIAlzb3J0ZWRfaW5zdGFuY2VfaGVhZGVycyA9IGdnLmdldFJlc3VsdHMoZ2cuZ2V0UmVzdWx0c0NvdW50KCkpJywNCgkJCScgICAgCWZvciBpLCB2IGluIHBhaXJzKGZpZWxkcykgZG8nLA0KCQkJJyAgICAJICAgIGlmIHNhdmVkX2VkaXRfdGFibGUuZmllbGRfbmFtZSA9PSB2LmZpZWxkX25hbWUgdGhlbicsDQoJCQknICAgIAkgICAgICAgIGVkaXRfb2Zmc2V0ID0gdi5maWVsZF9vZmZzZXQnLCAKCQkJJyAgICAJICAgICAgICBlZGl0X3R5cGUgPSB2LmZpZWxkX3R5cGUnLA0KCQkJJyAgICAJICAgIGVuZCcsIAoJCQknICAgIAllbmQnLCAKCQkJJyAgICAJbG9hZF9maWVsZF92YWx1ZXMgPSB7fScsDQoJCQknICAgIAlmb3IgaSwgdiBpbiBwYWlycyhzb3J0ZWRfaW5zdGFuY2VfaGVhZGVycykgZG8nLA0KCQkJJyAgICAJICAgIGxvYWRfZmllbGRfdmFsdWVzW2ldID0gdicsDQoJCQknICAgIAkgICAgbG9hZF9maWVsZF92YWx1ZXNbaV0uYWRkcmVzcyA9IHYudmFsdWUgKyBlZGl0X29mZnNldCcsDQoJCQknICAgIAkgICAgbG9hZF9maWVsZF92YWx1ZXNbaV0uZmxhZ3MgPSBlZGl0X3R5cGUnLCAKCQkJJyAgICAJZW5kJywNCgkJCScgICAgCWdnLmFkZExpc3RJdGVtcyhsb2FkX2ZpZWxkX3ZhbHVlcyknLA0KCQkJJyAgICAJaWYgbm90IHJldmVydF90YWJsZVtmdW5jdGlvbl9pbmRleF0gdGhlbicsDQoJCQknICAgIAkgICAgICAgICAgICByZXZlcnRfdGFibGVbZnVuY3Rpb25faW5kZXhdID0ge30nLCAKCQkJJyAgICAJICAgICAgICBlbmQnLA0KCQkJJyAgICAJICAgICAgICBpZiBub3QgcmV2ZXJ0X3RhYmxlW2Z1bmN0aW9uX2luZGV4XVtlZGl0X2luZGV4XSB0aGVuJywNCgkJCScgICAgCSAgICAgICAgICAgIHJldmVydF90YWJsZVtmdW5jdGlvbl9pbmRleF1bZWRpdF9pbmRleF0gPSB7fScsIAoJCQknICAgIAkgICAgICAgIGVuZCcsDQoJCQknICAgIAkgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKGdnLmdldExpc3RJdGVtcygpKSBkbycsDQoJCQknICAgIAkgICAgICAgICAgICByZXZlcnRfdGFibGVbZnVuY3Rpb25faW5kZXhdW2VkaXRfaW5kZXhdWyNyZXZlcnRfdGFibGVbZnVuY3Rpb25faW5kZXhdW2VkaXRfaW5kZXhdICsgMV0gPSB2JywNCgkJCScgICAgCSAgICAgICAgZW5kJywgCgkJCScgICAgCWlmIHNhdmVkX2VkaXRfdGFibGUuZWRpdF90eXBlID09ICJlZGl0X2FsbF94NCIgdGhlbicsDQoJCQknICAgIAkgICAgbG9jYWwgc2F2ZV9saXN0X2FsbCA9IGdnLmdldExpc3RJdGVtcygpJywNCgkJCScgICAgCSAgICBmb3IgaSwgdiBpbiBwYWlycyhzYXZlX2xpc3RfYWxsKSBkbycsDQoJCQknICAgIAkgICAgICAgIHNhdmVfbGlzdF9hbGxbaV0uYWRkcmVzcyA9IHNhdmVfbGlzdF9hbGxbaV0uYWRkcmVzcyArIDQnLA0KCQkJJyAgICAJICAgICAgICBzYXZlX2xpc3RfYWxsW2ldLnZhbHVlID0gc2F2ZWRfZWRpdF90YWJsZS5lZGl0X3ZhbHVlIC4uICJYNCInLA0KCQkJJyAgICAJICAgICAgICBzYXZlX2xpc3RfYWxsW2ldLmZyZWV6ZSA9IHNhdmVkX2VkaXRfdGFibGUuZnJlZXplJywgCgkJCScgICAgCSAgICBlbmQnLA0KCQkJJyAgICAJICAgIGdnLmFkZExpc3RJdGVtcyhzYXZlX2xpc3RfYWxsKScsDQoJCQknICAgIAllbHNlaWYgc2F2ZWRfZWRpdF90YWJsZS5lZGl0X3R5cGUgPT0gImVkaXRfaW5kZXhlcyIgdGhlbicsDQoJCQknICAgIAkgICAgbG9jYWwgc2F2ZV9saXN0X2FsbCA9IGdnLmdldExpc3RJdGVtcygpJywNCgkJCScgICAgCSAgICBmb3IgaSwgdiBpbiBwYWlycyhzYXZlZF9lZGl0X3RhYmxlLmVkaXRfaW5kZXhlcykgZG8nLA0KCQkJJyAgICAJICAgICAgICBzYXZlX2xpc3RfYWxsW3ZdLnZhbHVlID0gc2F2ZWRfZWRpdF90YWJsZS5lZGl0X3ZhbHVlJywNCgkJCScgICAgCSAgICAgICAgc2F2ZV9saXN0X2FsbFtpXS5mcmVlemUgPSBzYXZlZF9lZGl0X3RhYmxlLmZyZWV6ZScsIAoJCQknICAgIAkgICAgZW5kJywNCgkJCScgICAgCSAgICBnZy5hZGRMaXN0SXRlbXMoc2F2ZV9saXN0X2FsbCknLA0KCQkJJyAgICAJZWxzZWlmIHNhdmVkX2VkaXRfdGFibGUuZWRpdF90eXBlID09ICJlZGl0X2FsbF90aGF0X2VxdWFsIiB0aGVuJywNCgkJCScgICAgCSAgICBsb2NhbCBzYXZlX2xpc3RfYWxsID0gZ2cuZ2V0TGlzdEl0ZW1zKCknLA0KCQkJJyAgICAJICAgIGZvciBpLCB2IGluIHBhaXJzKHNhdmVfbGlzdF9hbGwpIGRvJywNCgkJCScgICAgCSAgICAgICAgaWYgdi52YWx1ZSA9PSBzYXZlZF9lZGl0X3RhYmxlLm11c3RfZXF1YWwgdGhlbicsDQoJCQknICAgIAkgICAgICAgICAgICBzYXZlX2xpc3RfYWxsW2ldLnZhbHVlID0gc2F2ZWRfZWRpdF90YWJsZS5lZGl0X3ZhbHVlJywNCgkJCScgICAgCSAgICAgICAgICAgIHNhdmVfbGlzdF9hbGxbaV0uZnJlZXplID0gc2F2ZWRfZWRpdF90YWJsZS5mcmVlemUnLA0KCQkJJyAgICAJICAgICAgICBlbmQnLCAKCQkJJyAgICAJICAgIGVuZCcsIAoJCQknICAgIAkgICAgZ2cuYWRkTGlzdEl0ZW1zKHNhdmVfbGlzdF9hbGwpJywNCgkJCScgICAgCWVsc2VpZiBzYXZlZF9lZGl0X3RhYmxlLmVkaXRfdHlwZSA9PSAiZWRpdF9hbGwiIHRoZW4nLA0KCQkJJyAgICAJICAgIGxvY2FsIHNhdmVfbGlzdF9hbGwgPSBnZy5nZXRMaXN0SXRlbXMoKScsDQoJCQknICAgIAkgICAgZm9yIGksIHYgaW4gcGFpcnMoc2F2ZV9saXN0X2FsbCkgZG8nLA0KCQkJJyAgICAJICAgICAgICBzYXZlX2xpc3RfYWxsW2ldLnZhbHVlID0gc2F2ZWRfZWRpdF90YWJsZS5lZGl0X3ZhbHVlJywNCgkJCScgICAgCSAgICAgICAgc2F2ZV9saXN0X2FsbFtpXS5mcmVlemUgPSBzYXZlZF9lZGl0X3RhYmxlLmZyZWV6ZScsIAoJCQknICAgIAkgICAgZW5kJywNCgkJCScgICAgCSAgICBnZy5hZGRMaXN0SXRlbXMoc2F2ZV9saXN0X2FsbCknLCAKCQkJJyAgICAJZW5kJywgCgkJCScgICAgCWZpZWxkcyA9IHt9JywNCgkJCScgICAgCTo6bm9uZTo6JywgCgkJCScgICAgCWlmIG5vbmVfZm91bmQgPT0gdHJ1ZSB0aGVuJywNCgkJCScgICAgCSAgICBnZy5hbGVydChzY3JpcHRfdGl0bGUgLi4gIlxcblxcbuKEue+4jyBObyBDbGFzcyBJbnN0YW5jZXMgRm91bmQg4oS577iPIiknLA0KCQkJJyAgICAJICAgIG5vbmVfZm91bmQgPSBmYWxzZScsIAoJCQknICAgIAllbHNlJywNCgkJCScgICAgCSAgICBnZy50b2FzdChzY3JpcHRfdGl0bGUgLi4gIlxcblxcbuKEue+4jyBFZGl0cyBNYWRlIOKEue+4jyIpJywNCgkJCScgICAgCSAgICBob21lKCknLCAKCQkJJyAgICAJZW5kJywgCgkJCScgICAgZW5kJywgCgkJCSdlbmQnLA0KCQkJJ2Z1bmN0aW9uIHNldFNWRlZhbHVlcyhlZGl0X3RhYmxlLGZ1bmN0aW9uX2luZGV4LCBlZGl0X2luZGV4KScsDQoJCQknICAgIGxvY2FsIHNlYXJjaF90YWJsZSA9IGVkaXRfdGFibGUuc2VhcmNoX3RhYmxlJywNCgkJCScgICAgbG9jYWwgc2VhcmNoRmxhZyA9IGVkaXRfdGFibGUuZmxhZ3MnLA0KCQkJJyAgICBsb2NhbCBzZWFyY2hSYW5nZSA9IGVkaXRfdGFibGUuc2VhcmNoX3JhbmdlJywNCgkJCScgICAgbG9jYWwgb2Zmc2V0ID0gZWRpdF90YWJsZS5vZmZzZXQnLCAKCQkJJyAgICBsb2NhbCBlZGl0X3RvID0gZWRpdF90YWJsZS5lZGl0JywNCgkJCScgICAgbG9jYWwgZWRpdF90b19mbGFncyA9IGVkaXRfdGFibGUuZWRpdF9mbGFncycsDQoJCQknICAgIGxvY2FsIGVkaXRfbmFtZSA9IGVkaXRfdGFibGUuZWRpdF9uYW1lJywNCgkJCScgICAgbG9jYWwgZXhwZWN0ZWRfcmFuZ2UgPSBlZGl0X3RhYmxlLmV4cGVjdGVkX3JhbmdlJywNCgkJCScgICAgbG9jYWwgZnJlZXplID0gZWRpdF90YWJsZS5mcmVlemUnLCAKCQkJJyAgICBsb2NhbCBzZWFyY2hTdHJpbmcgPSAiIicsDQoJCQknICAgIGZvciBpLCB2IGluIGlwYWlycyhzZWFyY2hfdGFibGUpIGRvJywgCgkJCScgICAgICAgIGlmIGkgPCAjc2VhcmNoX3RhYmxlIHRoZW4nLA0KCQkJJyAgICAgICAgICAgIHNlYXJjaFN0cmluZyA9IHNlYXJjaFN0cmluZyAuLiB2IC4uICI7IicsIAoJCQknICAgICAgICBlbmQnLCAKCQkJJyAgICBlbmQnLA0KCQkJJyAgICBzZWFyY2hTdHJpbmcgPSBzZWFyY2hTdHJpbmcgLi4gIjo6IiAuLiBzZWFyY2hSYW5nZScsDQoJCQknICAgIGdnLnNldFJhbmdlcyhnZy5nZXRSYW5nZXMoKSknLCAKCQkJJyAgICBnZy5jbGVhclJlc3VsdHMoKScsDQoJCQknICAgIGdnLnNlYXJjaE51bWJlcihzZWFyY2hTdHJpbmcsIHNlYXJjaEZsYWcpJywgCgkJCScgICAgcmVwZWF0JywNCgkJCScgICAgICAgIHRhYmxlLnJlbW92ZShzZWFyY2hfdGFibGUsICNzZWFyY2hfdGFibGUpJywNCgkJCScgICAgICAgIGxvY2FsIHJlZmluZVN0cmluZyA9ICIiJywgCgkJCScgICAgICAgIGZvciBpLCB2IGluIGlwYWlycyhzZWFyY2hfdGFibGUpIGRvJywNCgkJCScgICAgICAgICAgICByZWZpbmVTdHJpbmcgPSByZWZpbmVTdHJpbmcgLi4gdicsDQoJCQknICAgICAgICAgICAgaWYgI3NlYXJjaF90YWJsZSA+IDEgdGhlbicsDQoJCQknICAgICAgICAgICAgICAgIHJlZmluZVN0cmluZyA9IHJlZmluZVN0cmluZyAuLiAiOyInLCAKCQkJJyAgICAgICAgICAgIGVuZCcsDQoJCQknICAgICAgICBlbmQnLCAKCQkJJyAgICAgICAgaWYgI3NlYXJjaF90YWJsZSA+IDEgdGhlbicsDQoJCQknICAgICAgICAgICAgcmVmaW5lU3RyaW5nID0gcmVmaW5lU3RyaW5nIC4uICI6OiInLCAKCQkJJyAgICAgICAgZW5kJywNCgkJCScgICAgICAgIGdnLnJlZmluZU51bWJlcihyZWZpbmVTdHJpbmcsIHNlYXJjaEZsYWcpJywNCgkJCScgICAgdW50aWwgKCNzZWFyY2hfdGFibGUgPT0gMCknLA0KCQkJJyAgICBsb2NhbCByZXN1bHRzID0gZ2cuZ2V0UmVzdWx0cyhnZy5nZXRSZXN1bHRzQ291bnQoKSknLA0KCQkJJyAgICBmb3IgaSwgdiBpbiBwYWlycyhyZXN1bHRzKSBkbycsDQoJCQknICAgICAgICByZXN1bHRzW2ldLmFkZHJlc3MgPSByZXN1bHRzW2ldLmFkZHJlc3MgKyBvZmZzZXQnLA0KCQkJJyAgICAgICAgcmVzdWx0c1tpXS5mbGFncyA9IGVkaXRfdG9fZmxhZ3MnLCAKCQkJJyAgICBlbmQnLCAKCQkJJyAgICBnZy5sb2FkUmVzdWx0cyhyZXN1bHRzKScsDQoJCQknICAgIGlmIGV4cGVjdGVkX3JhbmdlIH49IG5pbCB0aGVuJywNCgkJCScgICAgICAgIGdnLnJlZmluZU51bWJlcihleHBlY3RlZF9yYW5nZSAsIGVkaXRfdG9fZmxhZ3MpJywgCgkJCScgICAgZW5kJywNCgkJCScgICAgbG9jYWwgcmVzdWx0cyA9IGdnLmdldFJlc3VsdHMoZ2cuZ2V0UmVzdWx0c0NvdW50KCkpJywNCgkJCScgICAgZm9yIGksIHYgaW4gaXBhaXJzKHJlc3VsdHMpIGRvJywgCgkJCScgICAgICAgIHYudmFsdWUgPSBlZGl0X3RvJywNCgkJCScgICAgICAgIHYuZnJlZXplID0gZnJlZXplJywgCgkJCScgICAgZW5kJywgCgkJCScgICAgaWYgZnJlZXplID09IHRydWUgdGhlbicsDQoJCQknICAgICAgICBnZy5hZGRMaXN0SXRlbXMocmVzdWx0cyknLCAKCQkJJyAgICBlbHNlJywgCgkJCScgICAgICAgIGdnLnNldFZhbHVlcyhyZXN1bHRzKScsDQoJCQknICAgIGVuZCcsIAoJCQknICAgIGdnLnRvYXN0KCLinIUgIiAuLiBlZGl0X25hbWUgLi4gIiDinIUiKScsIAoJCQknZW5kJywNCgkJCSduZWVkVG9Db25maWd1cmUgPSBmYWxzZScsIAoJCQknZm9yIGksdiBpbiBwYWlycyAoc2NyaXB0RnVuY3Rpb25zKSBkbycsDQoJCQknICAgZm9yIGluZGV4LHZhbHVlIGluIHBhaXJzICh2LmVkaXRzKSBkbycsDQoJCQknICAgICAgIGlmIHYubWV0aG9kX25hbWUgb3Igdi5maWVsZF9uYW1lIHRoZW4nLCAKCQkJJyAgICAgICBuZWVkVG9Db25maWd1cmUgPSB0cnVlJywNCgkJCScgICAgICAgZW5kJywgCgkJCScgICBlbmQnLCAKCQkJJ2VuZCcsIAoJCQknaWYgbmVlZFRvQ29uZmlndXJlID09IHRydWUgdGhlbicsIAoJCQknICAgZ2V0UmFuZ2UoKScsDQoJCQknZW5kJywgCgkJCSdob21lKCknLA0KCQkJJ3ByaW50KCLip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5oiKScsDQoJCQkncHJpbnQoIuKnmuKnmuKnmiAgICAgICAgICAgU2NyaXB0IENyZWF0ZWQgV2l0aCIpJywNCgkJCSdwcmludCgi4qea4qea4qeaICDwn6ewICBCYWRDYXNlXCdzIFRvb2xib3gg8J+nsCIpJywgCgkJCSdwcmludCgi4qea4qea4qeaIiknLA0KCQkJJ3ByaW50KCLip5rip5rip5oiKScsIAoJCQkncHJpbnQoIuKnmuKnmuKnmiAgICAgICAgICAgICAgICAgICAgICAgV2Vic2l0ZSIpJywNCgkJCSdwcmludCgi4qea4qea4qeaICAgICAgICAgICAgICAgICAgIEJhZENhc2Uub3JnIiknLCAKCQkJJ3ByaW50KCLip5rip5rip5oiKScsDQoJCQkncHJpbnQoIuKnmuKnmuKnmiAgICAgICAgICAgICAgICBUZWxlZ3JhbSBHcm91cCIpJywNCgkJCSdwcmludCgi4qea4qea4qeaICAgIHQubWUvQmFkQ2FzZURvdE9yZ1N1cHBvcnQiKScsIAoJCQkncHJpbnQoIuKnmuKnmuKnmiIpJywNCgkJCSdwcmludCgi4qea4qea4qeaICAgICAgICAgICAgRG9uYXRlIFdpdGggUGF5UGFsIiknLA0KCQkJJ3ByaW50KCLip5rip5rip5ogICAgICBwYXlwYWwubWUvQmFkQ2FzZURvdE9yZyIpJywgCgkJCSdwcmludCgi4qea4qea4qeaIiknLA0KCQkJJ3ByaW50KCLip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5oiKScsDQoJCQknd2hpbGUgdHJ1ZSBkbycsIAoJCQknICAgIGlmIGdnLmlzVmlzaWJsZSgpIHRoZW4nLCAKCQkJJyAgICAgICAgZ2cuc2V0VmlzaWJsZShmYWxzZSknLA0KCQkJJyAgICAgICAgaG9tZSgpJywgCgkJCScgICAgZW5kJywgCgkJCScgICAgZ2cuc2xlZXAoMTAwKScsIAoJCQknZW5kJw0KCQl9DQogICAgICAgIGxvY2FsIGZpbmFsX3NjcmlwdF9zdHJpbmcgPSAiIg0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhzY3JpcHRFeHBvcnRUYWJsZSkgZG8NCiAgICAgICAgICAgIGZpbmFsX3NjcmlwdF9zdHJpbmcgPSBmaW5hbF9zY3JpcHRfc3RyaW5nIC4uIHYgLi4gIlxuIg0KICAgICAgICBlbmQNCiAgICAgICAgZHVtcEhhbmRsZXIuY3JlYXRlRGlyZWN0b3J5KCkNCiAgICAgICAgZmlsZSA9IGlvLm9wZW4oZGF0YVBhdGggLi4gZ2FtZV9wYXRoIC4uICIvc2NyaXB0cy8iIC4uIGdnLmdldFRhcmdldFBhY2thZ2UoKSAuLiAiLiIgLi4gc2NyaXB0Q3JlYXRvci5nZXRUaW1lc3RhbXAoKSAuLiAiLmx1YSIsICJ3KyIpDQogICAgICAgIGZpbGU6d3JpdGUoZmluYWxfc2NyaXB0X3N0cmluZykNCiAgICAgICAgZmlsZTpjbG9zZSgpDQogICAgICAgIGdnLmFsZXJ0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBTY3JpcHQgZXhwb3J0ZWQgdG8gIiAuLiBkYXRhUGF0aCAuLiBnYW1lX3BhdGggLi4gIi9zY3JpcHRzLyDihLnvuI8iKQ0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJc2NyaXB0Q3JlYXRvci5nZXRUaW1lc3RhbXAoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgZ2V0VGltZXN0YW1wID0gZnVuY3Rpb24oKQ0KICAgICAgICByZXR1cm4gb3MuZGF0ZSgiJWJfJWRfJVlfJUguJU0iKQ0KICAgIGVuZA0KfQ0KDQpwbHVnaW5NYW5hZ2VyLnJldHVybkhvbWUgPSB0cnVlDQpwbHVnaW5NYW5hZ2VyLnJldHVyblBsdWdpblRhYmxlID0gInNjcmlwdENyZWF0b3IiDQpzY3JpcHRDcmVhdG9yLmhvbWUoKQ0K"
        },
        [14] = {
            file_name = "plugin_bc_static_value_finder.lua",
            file_data = "aWYgcGx1Z2luTWFuYWdlci5pbnN0YWxsaW5nUGx1Z2luID09IHRydWUgdGhlbg0KICAgIHBsdWdpbk1hbmFnZXIuaW5zdGFsbGluZ1BsdWdpbk5hbWUgPSAiU3RhdGljIFZhbHVlIEZpbmRlciINCiAgICBwbHVnaW5NYW5hZ2VyLmluc3RhbGxpbmdQbHVnaW5UYWJsZSA9ICJzdGF0aWNWYWx1ZUZpbmRlciINCmVsc2UNCiAgICBzdGF0aWNWYWx1ZUZpbmRlciA9IHsNCiAgICAgICAgZHdvcmRUYWJsZSA9IHt9LA0KICAgICAgICBxd29yZFRhYmxlID0ge30sDQogICAgICAgIGZsb2F0VGFibGUgPSB7fSwNCiAgICAgICAgZG91YmxlVGFibGUgPSB7fSwNCiAgICAgICAgeG9yVGFibGUgPSB7fSwNCiAgICAgICAgZGVzaXJlZFZhbHVlID0ge30sDQogICAgICAgIGdldEFib3ZlID0gZnVuY3Rpb24oYWRkcmVzcywgcmFuZ2UpDQogICAgICAgICAgICBsb2NhbCB2YWx1ZXMgPSByYW5nZSAvIDQNCiAgICAgICAgICAgIGxvY2FsIHN0YXJ0QWRkcmVzcyA9IGFkZHJlc3MgLSByYW5nZQ0KICAgICAgICAgICAgZm9yIGkgPSAxLCB2YWx1ZXMgZG8NCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5kd29yZFRhYmxlWyNzdGF0aWNWYWx1ZUZpbmRlci5kd29yZFRhYmxlICsgMV0gPSB7DQogICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgPSBzdGFydEFkZHJlc3MsDQogICAgICAgICAgICAgICAgICAgIGZsYWdzID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBzdGFydEFkZHJlc3MgPSBzdGFydEFkZHJlc3MgKyA0DQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kLA0KICAgICAgICBnZXRVbmRlciA9IGZ1bmN0aW9uKGFkZHJlc3MsIHJhbmdlKQ0KICAgICAgICAgICAgbG9jYWwgc3RhcnRBZGRyZXNzID0gYWRkcmVzcyArIDQNCiAgICAgICAgICAgIGxvY2FsIHZhbHVlcyA9IHJhbmdlIC8gNA0KICAgICAgICAgICAgZm9yIGkgPSAxLCB2YWx1ZXMgZG8NCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5kd29yZFRhYmxlWyNzdGF0aWNWYWx1ZUZpbmRlci5kd29yZFRhYmxlICsgMV0gPSB7DQogICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgPSBzdGFydEFkZHJlc3MsDQogICAgICAgICAgICAgICAgICAgIGZsYWdzID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBzdGFydEFkZHJlc3MgPSBzdGFydEFkZHJlc3MgKyA0DQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kLA0KICAgICAgICBnZXRPdGhlclR5cGVzID0gZnVuY3Rpb24oKQ0KICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIuZHdvcmRUYWJsZU9yaWdpbmFsID0gZ2cuZ2V0VmFsdWVzKHN0YXRpY1ZhbHVlRmluZGVyLmR3b3JkVGFibGUpDQogICAgICAgICAgICBmb3IgaSwgdiBpbiBpcGFpcnMoc3RhdGljVmFsdWVGaW5kZXIuZHdvcmRUYWJsZSkgZG8NCiAgICAgICAgICAgICAgICBsb2NhbCB0ZW1wX3ZhciA9IHN0YXRpY1ZhbHVlRmluZGVyLmR3b3JkVGFibGVbaV0NCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5xd29yZFRhYmxlW2ldID0gdGVtcF92YXINCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5xd29yZFRhYmxlW2ldLmZsYWdzID0gZ2cuVFlQRV9RV09SRA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5xd29yZFRhYmxlID0gZ2cuZ2V0VmFsdWVzKHN0YXRpY1ZhbHVlRmluZGVyLnF3b3JkVGFibGUpDQogICAgICAgICAgICBmb3IgaSwgdiBpbiBpcGFpcnMoc3RhdGljVmFsdWVGaW5kZXIuZHdvcmRUYWJsZSkgZG8NCiAgICAgICAgICAgICAgICBsb2NhbCB0ZW1wX3ZhciA9IHN0YXRpY1ZhbHVlRmluZGVyLmR3b3JkVGFibGVbaV0NCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5mbG9hdFRhYmxlW2ldID0gdGVtcF92YXINCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5mbG9hdFRhYmxlW2ldLmZsYWdzID0gZ2cuVFlQRV9GTE9BVA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5mbG9hdFRhYmxlID0gZ2cuZ2V0VmFsdWVzKHN0YXRpY1ZhbHVlRmluZGVyLmZsb2F0VGFibGUpDQogICAgICAgICAgICBmb3IgaSwgdiBpbiBpcGFpcnMoc3RhdGljVmFsdWVGaW5kZXIuZHdvcmRUYWJsZSkgZG8NCiAgICAgICAgICAgICAgICBsb2NhbCB0ZW1wX3ZhciA9IHN0YXRpY1ZhbHVlRmluZGVyLmR3b3JkVGFibGVbaV0NCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5kb3VibGVUYWJsZVtpXSA9IHRlbXBfdmFyDQogICAgICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIuZG91YmxlVGFibGVbaV0uZmxhZ3MgPSBnZy5UWVBFX0RPVUJMRQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5kb3VibGVUYWJsZSA9IGdnLmdldFZhbHVlcyhzdGF0aWNWYWx1ZUZpbmRlci5kb3VibGVUYWJsZSkNCiAgICAgICAgICAgIGZvciBpLCB2IGluIGlwYWlycyhzdGF0aWNWYWx1ZUZpbmRlci5kd29yZFRhYmxlKSBkbw0KICAgICAgICAgICAgICAgIGxvY2FsIHRlbXBfdmFyID0gc3RhdGljVmFsdWVGaW5kZXIuZHdvcmRUYWJsZVtpXQ0KICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLnhvclRhYmxlW2ldID0gdGVtcF92YXINCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci54b3JUYWJsZVtpXS5mbGFncyA9IGdnLlRZUEVfWE9SDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLnhvclRhYmxlID0gZ2cuZ2V0VmFsdWVzKHN0YXRpY1ZhbHVlRmluZGVyLnhvclRhYmxlKQ0KICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIuZHdvcmRUYWJsZSA9IGdnLmdldFZhbHVlcyhzdGF0aWNWYWx1ZUZpbmRlci5kd29yZFRhYmxlT3JpZ2luYWwpDQogICAgICAgIGVuZCwNCiAgICAgICAgc2VhcmNoRm9yVmFsdWVzID0gZnVuY3Rpb24oc2V0TmFtZSkNCiAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLmRlc2lyZWRWYWx1ZSA9IGdnLmdldFNlbGVjdGVkUmVzdWx0cygpDQogICAgICAgICAgICBsb2NhbCBlZGl0X3R5cGUgPSBzdGF0aWNWYWx1ZUZpbmRlci5kZXNpcmVkVmFsdWVbMV0uZmxhZ3MNCiAgICAgICAgICAgIGlmICNzdGF0aWNWYWx1ZUZpbmRlci5kZXNpcmVkVmFsdWUgfj0gMSB0aGVuDQogICAgICAgICAgICAgICAgZ2cuYWxlcnQoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIFNlbGVjdCB0aGUgZGVzaXJlZCB2YWx1ZSBpbiB5b3VyIHNlYXJjaCByZXN1bHRzIGZpcnN0IOKEue+4jyIpDQogICAgICAgICAgICAgICAgZ290byBkb25lDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGxvY2FsIG1lbnVfcmFuZ2UgPSA1MA0KICAgICAgICAgICAgbG9jYWwgbWVudV9hYm92ZSA9IHRydWUNCiAgICAgICAgICAgIGxvY2FsIG1lbnVfdW5kZXIgPSBmYWxzZQ0KICAgICAgICAgICAgbG9jYWwgbWVudSA9IHt9DQogICAgICAgICAgICBsb2NhbCBlZGl0X2luZGV4ID0gMA0KICAgICAgICAgICAgaWYgc3RhdGljVmFsdWVGaW5kZXIuc2V0dGluZ3MgdGhlbg0KICAgICAgICAgICAgICAgIG1lbnVbMV0gPSBzdGF0aWNWYWx1ZUZpbmRlci5zZXR0aW5ncy5yYW5nZQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIG1lbnUgPSBnZy5wcm9tcHQoeyJSYW5nZSIsICJFeHBlY3RlZCBWYWx1ZSBSYW5nZSAoT3B0aW9uYWwpXG5FeGFtcGxlOiAxfjEwMCJ9LCB7bWVudV9yYW5nZSwgbmlsfSwgeyJudW1iZXIiLCAibnVtYmVyIn0pDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGlmIG1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICBsb2NhbCByYW5nZSA9IG1lbnVbMV0NCiAgICAgICAgICAgICAgICBsb2NhbCBleHBlY3RlZFZhbHVlUmFuZ2UgPSBtZW51WzJdDQogICAgICAgICAgICAgICAgbG9jYWwgZml4ZWRSYW5nZSA9IHJhbmdlICUgNA0KICAgICAgICAgICAgICAgIGZpeGVkUmFuZ2UgPSByYW5nZSAtIGZpeGVkUmFuZ2UNCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5nZXRBYm92ZShzdGF0aWNWYWx1ZUZpbmRlci5kZXNpcmVkVmFsdWVbMV0uYWRkcmVzcywgZml4ZWRSYW5nZSkNCiAgICAgICAgICAgICAgICBlZGl0X2luZGV4ID0gI3N0YXRpY1ZhbHVlRmluZGVyLmR3b3JkVGFibGUgKyAxDQogICAgICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIuZ2V0VW5kZXIoc3RhdGljVmFsdWVGaW5kZXIuZGVzaXJlZFZhbHVlWzFdLmFkZHJlc3MsIGZpeGVkUmFuZ2UpDQogICAgICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIuZ2V0T3RoZXJUeXBlcygpDQogICAgICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXJbc2V0TmFtZV0gPSB7DQogICAgICAgICAgICAgICAgICAgIGR3b3JkID0gc3RhdGljVmFsdWVGaW5kZXIuZHdvcmRUYWJsZSwNCiAgICAgICAgICAgICAgICAgICAgcXdvcmQgPSBzdGF0aWNWYWx1ZUZpbmRlci5xd29yZFRhYmxlLA0KICAgICAgICAgICAgICAgICAgICBmbG9hdCA9IHN0YXRpY1ZhbHVlRmluZGVyLmZsb2F0VGFibGUsDQogICAgICAgICAgICAgICAgICAgIGRvdWJsZSA9IHN0YXRpY1ZhbHVlRmluZGVyLmRvdWJsZVRhYmxlLA0KICAgICAgICAgICAgICAgICAgICB4b3IgPSBzdGF0aWNWYWx1ZUZpbmRlci54b3JUYWJsZQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBsb2NhbCBmaWxlID0gaW8ub3BlbihzdGF0aWNWYWx1ZUZpbmRlci5zYXZlUGF0aCAuLiAiLyIgLi4gZ2cuZ2V0VGFyZ2V0UGFja2FnZSgpIC4uIHNldE5hbWUgLi4gIi5sdWEiLCAidysiKQ0KICAgICAgICAgICAgICAgIGlmIG5vdCBleHBlY3RlZFZhbHVlUmFuZ2UgdGhlbg0KICAgICAgICAgICAgICAgICAgICBleHBlY3RlZFZhbHVlUmFuZ2UgPSBzdGF0aWNWYWx1ZUZpbmRlci5zZXR0aW5ncy5leHBlY3RlZF9yYW5nZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGZpbGU6d3JpdGUoInN0YXRpY1ZhbHVlRmluZGVyLiIgLi4gc2V0TmFtZSAuLiAiID0gIiAuLiB0b3N0cmluZyhzdGF0aWNWYWx1ZUZpbmRlcltzZXROYW1lXSkgLi4gIlxuc3RhdGljVmFsdWVGaW5kZXIuc2V0dGluZ3MgPSB7cmFuZ2UgPSAiIC4uIGZpeGVkUmFuZ2UgLi4gIiwgZmxhZ3MgPSAiIC4uIGVkaXRfdHlwZSAuLiAiLCBpbmRleCA9ICIgLi4gZWRpdF9pbmRleCAuLiAiLCBleHBlY3RlZF9yYW5nZSA9ICciIC4uIGV4cGVjdGVkVmFsdWVSYW5nZSAuLiAiJ30iKQ0KICAgICAgICAgICAgICAgIGZpbGU6Y2xvc2UoKQ0KICAgICAgICAgICAgICAgIGlmIHN0YXRpY1ZhbHVlRmluZGVyLmNsb3NlR2FtZUFmdGVyU2VhcmNoID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICBnZy5hbGVydChzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gUmVzdGFydCB0aGUgZ2FtZSwgZmluZCB5b3VyIHZhbHVlIGFnYWluIGFuZCBydW4gdGhlIG5leHQgc2VhcmNoLiDihLnvuI8iKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICA6OmRvbmU6Og0KICAgICAgICBlbmQsDQogICAgICAgIGNyZWF0ZURpcmVjdG9yeSA9IGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGRpcmVjdG9yeV9jcmVhdGVkID0gdHJ1ZQ0KICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoZ2cuZ2V0UmFuZ2VzTGlzdCgpKSBkbw0KICAgICAgICAgICAgICAgIGlmIHZbImVuZCJdIC0gdi5zdGFydCA8IDEwMjQwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHN0cmluZy5maW5kKHZbIm5hbWUiXSwgImRlbGV0ZWQiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVfc3RhcnQgPSB2LnN0YXJ0DQogICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVfZW5kID0gdlsiZW5kIl0NCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBnZy5kdW1wTWVtb3J5KGNyZWF0ZV9zdGFydCwgY3JlYXRlX2VuZCwgc3RhdGljVmFsdWVGaW5kZXIuc2F2ZVBhdGgsIGdnLkRVTVBfU0tJUF9TWVNURU1fTElCUykNCiAgICAgICAgICAgIGxvY2FsIGZpbGUgPSBpby5vcGVuKHN0YXRpY1ZhbHVlRmluZGVyLnNhdmVQYXRoIC4uICIvY3JlYXRlZCIsICJ3KyIpDQogICAgICAgICAgICBmaWxlOndyaXRlKCJjcmVhdGVkIikNCiAgICAgICAgICAgIGZpbGU6Y2xvc2UoKQ0KICAgICAgICBlbmQsDQogICAgICAgIGNoZWNrRmlsZSA9IGZ1bmN0aW9uKGZpbGVuYW1lKQ0KICAgICAgICAgICAgbG9jYWwgZmlsZSA9IGFzc2VydChpby5vcGVuKGZpbGVuYW1lLCAiciIpKQ0KICAgICAgICAgICAgbG9jYWwgY29udGVudCA9IGZpbGU6cmVhZCgiKmEiKQ0KICAgICAgICAgICAgZmlsZTpjbG9zZSgpDQogICAgICAgIGVuZCwNCiAgICAgICAgbG9hZEZpbGUgPSBmdW5jdGlvbihmaWxlbmFtZSkNCiAgICAgICAgICAgIGRvZmlsZShmaWxlbmFtZSkNCiAgICAgICAgZW5kLA0KICAgICAgICBzYXZlUGF0aCA9IHBsdWdpbnNEYXRhUGF0aCAuLiAiYmFkY2FzZV9zdGF0aWNfdmFsdWVfZmluZGVyLyIsDQogICAgICAgIHN0YXJ0T3ZlciA9IGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLnNldHRpbmdzID0gbmlsDQogICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5zZXRPbmUgPSB7fQ0KICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIuc2V0VHdvID0ge30NCiAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLnNldFRocmVlID0ge30NCiAgICAgICAgICAgIHBjYWxsKG9zLnJlbW92ZSwgc3RhdGljVmFsdWVGaW5kZXIuc2F2ZVBhdGggLi4gIi8iIC4uIGdnLmdldFRhcmdldFBhY2thZ2UoKSAuLiAic2V0T25lLmx1YSIpDQogICAgICAgICAgICBwY2FsbChvcy5yZW1vdmUsIHN0YXRpY1ZhbHVlRmluZGVyLnNhdmVQYXRoIC4uICIvIiAuLiBnZy5nZXRUYXJnZXRQYWNrYWdlKCkgLi4gInNldFR3by5sdWEiKQ0KICAgICAgICAgICAgcGNhbGwob3MucmVtb3ZlLCBzdGF0aWNWYWx1ZUZpbmRlci5zYXZlUGF0aCAuLiAiLyIgLi4gZ2cuZ2V0VGFyZ2V0UGFja2FnZSgpIC4uICJzZXRUaHJlZS5sdWEiKQ0KICAgICAgICBlbmQsDQogICAgICAgIGNsb3NlR2FtZUFmdGVyU2VhcmNoID0gZmFsc2UsDQogICAgICAgIGRvaW5nRmlyc3RTZWFyY2ggPSBmYWxzZSwNCiAgICAgICAgZG9pbmdTZWNvbmRTZWFyY2ggPSBmYWxzZSwNCiAgICAgICAgc2V0T25lID0ge30sDQogICAgICAgIHNldFR3byA9IHt9LA0KICAgICAgICBzZXRUaHJlZSA9IHt9LA0KICAgICAgICBjb21wYXJlU2V0cyA9IGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGZvciBpLCB2IGluIGlwYWlycyhzdGF0aWNWYWx1ZUZpbmRlci5zZXRPbmUuZHdvcmQpIGRvDQogICAgICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIubWF0Y2hlc1RhYmxlW2ldID0ge30gLS0gcmVtb3ZlIGZvciBvdGhlcnMNCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5tYXRjaGVzVGFibGVbaV0uZHdvcmQgPSB7fQ0KICAgICAgICAgICAgICAgIGxvY2FsIG1hdGNoZXMgPSB7fQ0KICAgICAgICAgICAgICAgIGlmIHYudmFsdWUgPT0gc3RhdGljVmFsdWVGaW5kZXIuc2V0VHdvLmR3b3JkW2ldLnZhbHVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5vbmVfYW5kX3R3byA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5vbmVfYW5kX3R3b192YWx1ZSA9IHYudmFsdWUNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIG1hdGNoZXMub25lX2FuZF90d28gPSBmYWxzZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIHYudmFsdWUgPT0gc3RhdGljVmFsdWVGaW5kZXIuc2V0VGhyZWUuZHdvcmRbaV0udmFsdWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLm9uZV9hbmRfdGhyZWUgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgIG1hdGNoZXMub25lX2FuZF90aHJlZV92YWx1ZSA9IHYudmFsdWUNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIG1hdGNoZXMub25lX2FuZF90aHJlZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgc3RhdGljVmFsdWVGaW5kZXIuc2V0VGhyZWUuZHdvcmRbaV0udmFsdWUgPT0gc3RhdGljVmFsdWVGaW5kZXIuc2V0VHdvLmR3b3JkW2ldLnZhbHVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy50d29fYW5kX3RocmVlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLnR3b19hbmRfdGhyZWVfdmFsdWUgPSB2LnZhbHVlDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLnR3b19hbmRfdGhyZWUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLm1hdGNoZXNUYWJsZVtpXS5kd29yZCA9IG1hdGNoZXMNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZm9yIGksIHYgaW4gaXBhaXJzKHN0YXRpY1ZhbHVlRmluZGVyLnNldE9uZS5xd29yZCkgZG8NCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5tYXRjaGVzVGFibGVbaV0ucXdvcmQgPSB7fQ0KICAgICAgICAgICAgICAgIGxvY2FsIG1hdGNoZXMgPSB7fQ0KICAgICAgICAgICAgICAgIGlmIHYudmFsdWUgPT0gc3RhdGljVmFsdWVGaW5kZXIuc2V0VHdvLnF3b3JkW2ldLnZhbHVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5vbmVfYW5kX3R3byA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5vbmVfYW5kX3R3b192YWx1ZSA9IHYudmFsdWUNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIG1hdGNoZXMub25lX2FuZF90d28gPSBmYWxzZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIHYudmFsdWUgPT0gc3RhdGljVmFsdWVGaW5kZXIuc2V0VGhyZWUucXdvcmRbaV0udmFsdWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLm9uZV9hbmRfdGhyZWUgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgIG1hdGNoZXMub25lX2FuZF90aHJlZV92YWx1ZSA9IHYudmFsdWUNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIG1hdGNoZXMub25lX2FuZF90aHJlZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgc3RhdGljVmFsdWVGaW5kZXIuc2V0VGhyZWUucXdvcmRbaV0udmFsdWUgPT0gc3RhdGljVmFsdWVGaW5kZXIuc2V0VHdvLnF3b3JkW2ldLnZhbHVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy50d29fYW5kX3RocmVlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLnR3b19hbmRfdGhyZWVfdmFsdWUgPSB2LnZhbHVlDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLnR3b19hbmRfdGhyZWUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLm1hdGNoZXNUYWJsZVtpXS5xd29yZCA9IG1hdGNoZXMNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZm9yIGksIHYgaW4gaXBhaXJzKHN0YXRpY1ZhbHVlRmluZGVyLnNldE9uZS5mbG9hdCkgZG8NCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5tYXRjaGVzVGFibGVbaV0uZmxvYXQgPSB7fQ0KICAgICAgICAgICAgICAgIGxvY2FsIG1hdGNoZXMgPSB7fQ0KICAgICAgICAgICAgICAgIGlmIHYudmFsdWUgPT0gc3RhdGljVmFsdWVGaW5kZXIuc2V0VHdvLmZsb2F0W2ldLnZhbHVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5vbmVfYW5kX3R3byA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5vbmVfYW5kX3R3b192YWx1ZSA9IHYudmFsdWUNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIG1hdGNoZXMub25lX2FuZF90d28gPSBmYWxzZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIHYudmFsdWUgPT0gc3RhdGljVmFsdWVGaW5kZXIuc2V0VGhyZWUuZmxvYXRbaV0udmFsdWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLm9uZV9hbmRfdGhyZWUgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgIG1hdGNoZXMub25lX2FuZF90aHJlZV92YWx1ZSA9IHYudmFsdWUNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIG1hdGNoZXMub25lX2FuZF90aHJlZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgc3RhdGljVmFsdWVGaW5kZXIuc2V0VGhyZWUuZmxvYXRbaV0udmFsdWUgPT0gc3RhdGljVmFsdWVGaW5kZXIuc2V0VHdvLmZsb2F0W2ldLnZhbHVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy50d29fYW5kX3RocmVlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLnR3b19hbmRfdGhyZWVfdmFsdWUgPSB2LnZhbHVlDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLnR3b19hbmRfdGhyZWUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLm1hdGNoZXNUYWJsZVtpXS5mbG9hdCA9IG1hdGNoZXMNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZm9yIGksIHYgaW4gaXBhaXJzKHN0YXRpY1ZhbHVlRmluZGVyLnNldE9uZS5kb3VibGUpIGRvDQogICAgICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIubWF0Y2hlc1RhYmxlW2ldLmRvdWJsZSA9IHt9DQogICAgICAgICAgICAgICAgbG9jYWwgbWF0Y2hlcyA9IHt9DQogICAgICAgICAgICAgICAgaWYgdi52YWx1ZSA9PSBzdGF0aWNWYWx1ZUZpbmRlci5zZXRUd28uZG91YmxlW2ldLnZhbHVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5vbmVfYW5kX3R3byA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5vbmVfYW5kX3R3b192YWx1ZSA9IHYudmFsdWUNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIG1hdGNoZXMub25lX2FuZF90d28gPSBmYWxzZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIHYudmFsdWUgPT0gc3RhdGljVmFsdWVGaW5kZXIuc2V0VGhyZWUuZG91YmxlW2ldLnZhbHVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5vbmVfYW5kX3RocmVlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLm9uZV9hbmRfdGhyZWVfdmFsdWUgPSB2LnZhbHVlDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLm9uZV9hbmRfdGhyZWUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIHN0YXRpY1ZhbHVlRmluZGVyLnNldFRocmVlLmRvdWJsZVtpXS52YWx1ZSA9PSBzdGF0aWNWYWx1ZUZpbmRlci5zZXRUd28uZG91YmxlW2ldLnZhbHVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy50d29fYW5kX3RocmVlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLnR3b19hbmRfdGhyZWVfdmFsdWUgPSB2LnZhbHVlDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLnR3b19hbmRfdGhyZWUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLm1hdGNoZXNUYWJsZVtpXS5kb3VibGUgPSBtYXRjaGVzDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGZvciBpLCB2IGluIGlwYWlycyhzdGF0aWNWYWx1ZUZpbmRlci5zZXRPbmUueG9yKSBkbw0KICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLm1hdGNoZXNUYWJsZVtpXS54b3IgPSB7fQ0KICAgICAgICAgICAgICAgIGxvY2FsIG1hdGNoZXMgPSB7fQ0KICAgICAgICAgICAgICAgIGlmIHYudmFsdWUgPT0gc3RhdGljVmFsdWVGaW5kZXIuc2V0VHdvLnhvcltpXS52YWx1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIG1hdGNoZXMub25lX2FuZF90d28gPSB0cnVlDQogICAgICAgICAgICAgICAgICAgIG1hdGNoZXMub25lX2FuZF90d29fdmFsdWUgPSB2LnZhbHVlDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLm9uZV9hbmRfdHdvID0gZmFsc2UNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBpZiB2LnZhbHVlID09IHN0YXRpY1ZhbHVlRmluZGVyLnNldFRocmVlLnhvcltpXS52YWx1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIG1hdGNoZXMub25lX2FuZF90aHJlZSA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5vbmVfYW5kX3RocmVlX3ZhbHVlID0gdi52YWx1ZQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5vbmVfYW5kX3RocmVlID0gZmFsc2UNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBpZiBzdGF0aWNWYWx1ZUZpbmRlci5zZXRUaHJlZS54b3JbaV0udmFsdWUgPT0gc3RhdGljVmFsdWVGaW5kZXIuc2V0VHdvLnhvcltpXS52YWx1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIG1hdGNoZXMudHdvX2FuZF90aHJlZSA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy50d29fYW5kX3RocmVlX3ZhbHVlID0gdi52YWx1ZQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy50d29fYW5kX3RocmVlID0gZmFsc2UNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5tYXRjaGVzVGFibGVbaV0ueG9yID0gbWF0Y2hlcw0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5pc0NvbXBhcmluZyA9IHRydWUNCiAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLmNyZWF0ZUVkaXQoKQ0KICAgICAgICBlbmQsDQogICAgICAgIG1hdGNoZXNUYWJsZSA9IHt9LA0KICAgICAgICBpc0NvbXBhcmluZyA9IGZhbHNlLA0KICAgICAgICBjcmVhdGVFZGl0ID0gZnVuY3Rpb24oKQ0KICAgICAgICAgICAgbG9jYWwgZmlyc3RfbWF0Y2ggPSAwDQogICAgICAgICAgICBsb2NhbCBmaXJzdF9tYXRjaF90eXBlID0gIiINCiAgICAgICAgICAgIGxvY2FsIGxhc3RfbWF0Y2ggPSAwDQogICAgICAgICAgICBsb2NhbCBzZWFyY2hfdGFibGUgPSB7fQ0KICAgICAgICAgICAgZm9yIGksIHYgaW4gaXBhaXJzKHN0YXRpY1ZhbHVlRmluZGVyLm1hdGNoZXNUYWJsZSkgZG8NCiAgICAgICAgICAgICAgICBpZiB2LmR3b3JkLm9uZV9hbmRfdHdvID09IHRydWUgYW5kIHYuZHdvcmQub25lX2FuZF90aHJlZSA9PSB0cnVlIGFuZCB2LmR3b3JkLnR3b19hbmRfdGhyZWUgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHNob3VsZF9hZGQgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgIGlmIGZpcnN0X21hdGNoID09IDAgYW5kIHZhbHVlID09IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgc2hvdWxkX2FkZCA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBmaXJzdF9tYXRjaCA9PSAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0X21hdGNoID0gaQ0KICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RfbWF0Y2hfdHlwZSA9ICJkd29yZCINCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIHNob3VsZF9hZGQgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YWx1ZSA9IHYuZHdvcmQub25lX2FuZF90d29fdmFsdWUNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGZpcnN0X21hdGNoX3R5cGUgfj0gImR3b3JkIiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZSAuLiAiRCINCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdmFsdWUgfj0gc2VhcmNoX3RhYmxlWyNzZWFyY2hfdGFibGUgLSAxXSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3RhYmxlWyNzZWFyY2hfdGFibGUgKyAxXSA9IHZhbHVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdF9tYXRjaCA9IGkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbHNlaWYgdi5mbG9hdC5vbmVfYW5kX3R3byA9PSB0cnVlIGFuZCB2LmZsb2F0Lm9uZV9hbmRfdGhyZWUgPT0gdHJ1ZSBhbmQgdi5mbG9hdC50d29fYW5kX3RocmVlID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBzaG91bGRfYWRkID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICBpZiBmaXJzdF9tYXRjaCA9PSAwIGFuZCB2YWx1ZSA9PSAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZF9hZGQgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZmlyc3RfbWF0Y2ggPT0gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBmaXJzdF9tYXRjaCA9IGkNCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0X21hdGNoX3R5cGUgPSAiZmxvYXQiDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBzaG91bGRfYWRkID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFsdWUgPSB2LmZsb2F0Lm9uZV9hbmRfdHdvX3ZhbHVlDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBmaXJzdF9tYXRjaF90eXBlIH49ICJmbG9hdCIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgLi4gIkYiDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHZhbHVlIH49IHNlYXJjaF90YWJsZVsjc2VhcmNoX3RhYmxlIC0gMV0gdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaF90YWJsZVsjc2VhcmNoX3RhYmxlICsgMV0gPSB2YWx1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RfbWF0Y2ggPSBpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZWxzZWlmIHYucXdvcmQub25lX2FuZF90d28gPT0gdHJ1ZSBhbmQgdi5xd29yZC5vbmVfYW5kX3RocmVlID09IHRydWUgYW5kIHYucXdvcmQudHdvX2FuZF90aHJlZSA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgc2hvdWxkX2FkZCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgaWYgZmlyc3RfbWF0Y2ggPT0gMCBhbmQgdmFsdWUgPT0gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBzaG91bGRfYWRkID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGZpcnN0X21hdGNoID09IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RfbWF0Y2ggPSBpDQogICAgICAgICAgICAgICAgICAgICAgICBmaXJzdF9tYXRjaF90eXBlID0gInF3b3JkIg0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgc2hvdWxkX2FkZCA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhbHVlID0gdi5xd29yZC5vbmVfYW5kX3R3b192YWx1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZmlyc3RfbWF0Y2hfdHlwZSB+PSAicXdvcmQiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlIC4uICJRIg0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBpZiB2YWx1ZSB+PSBzZWFyY2hfdGFibGVbI3NlYXJjaF90YWJsZSAtIDFdIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hfdGFibGVbI3NlYXJjaF90YWJsZSArIDFdID0gdmFsdWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0X21hdGNoID0gaQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVsc2VpZiB2Lnhvci5vbmVfYW5kX3R3byA9PSB0cnVlIGFuZCB2Lnhvci5vbmVfYW5kX3RocmVlID09IHRydWUgYW5kIHYueG9yLnR3b19hbmRfdGhyZWUgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHNob3VsZF9hZGQgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgIGlmIGZpcnN0X21hdGNoID09IDAgYW5kIHZhbHVlID09IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgc2hvdWxkX2FkZCA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBmaXJzdF9tYXRjaCA9PSAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0X21hdGNoID0gaQ0KICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RfbWF0Y2hfdHlwZSA9ICJ4b3IiDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBzaG91bGRfYWRkID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFsdWUgPSB2Lnhvci5vbmVfYW5kX3R3b192YWx1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZmlyc3RfbWF0Y2hfdHlwZSB+PSAieG9yIiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZSAuLiAiWCINCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdmFsdWUgfj0gc2VhcmNoX3RhYmxlWyNzZWFyY2hfdGFibGUgLSAxXSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3RhYmxlWyNzZWFyY2hfdGFibGUgKyAxXSA9IHZhbHVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdF9tYXRjaCA9IGkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBpZiAjc2VhcmNoX3RhYmxlID09IDY0IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWYgI3NlYXJjaF90YWJsZSA+IDIgdGhlbg0KICAgICAgICAgICAgICAgIGxvY2FsIHNhdmVfdG9fdGFibGUgPSB7fQ0KICAgICAgICAgICAgICAgIHNhdmVfdG9fdGFibGUuc2VhcmNoX3RhYmxlID0ge30NCiAgICAgICAgICAgICAgICBsb2NhbCBtZW51X2NoZWNrYm94ZXMgPSB7fQ0KICAgICAgICAgICAgICAgIGxvY2FsIG1lbnVfdHJ1ZSA9IHt9DQogICAgICAgICAgICAgICAgbG9jYWwgbWVudV9pdGVtcyA9IHt9DQogICAgICAgICAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBpcGFpcnMoc2VhcmNoX3RhYmxlKSBkbw0KICAgICAgICAgICAgICAgICAgICBsb2NhbCB0ZW1wX3ZhbHVlID0gdmFsdWUNCiAgICAgICAgICAgICAgICAgICAgc2F2ZV90b190YWJsZS5zZWFyY2hfdGFibGVbaW5kZXhdID0gdGVtcF92YWx1ZQ0KICAgICAgICAgICAgICAgICAgICBtZW51X2NoZWNrYm94ZXNbaW5kZXhdID0gImNoZWNrYm94Ig0KICAgICAgICAgICAgICAgICAgICBtZW51X3RydWVbaW5kZXhdID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICBpZiBpbmRleCA9PSAxIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVfaXRlbXNbaW5kZXhdID0gdGVtcF92YWx1ZSAuLiAiIChNdXN0IEluY2x1ZGUpIg0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBtZW51X2l0ZW1zW2luZGV4XSA9IHRlbXBfdmFsdWUNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgbG9jYWwgY3VzdG9taXplU2VhcmNoTWVudSA9IGdnLnByb21wdChtZW51X2l0ZW1zLCBtZW51X3RydWUsIG1lbnVfY2hlY2tib3hlcykNCiAgICAgICAgICAgICAgICBpZiBjdXN0b21pemVTZWFyY2hNZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHRlbXBfc2VhcmNoX3RhYmxlID0ge30NCiAgICAgICAgICAgICAgICAgICAgZm9yIGksIHYgaW4gaXBhaXJzKHNlYXJjaF90YWJsZSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGN1c3RvbWl6ZVNlYXJjaE1lbnVbaV0gPT0gdHJ1ZSBvciBpID09IDEgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHRlbXBfdmFsdWUgPSB2DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcF9zZWFyY2hfdGFibGVbI3RlbXBfc2VhcmNoX3RhYmxlICsgMV0gPSB2DQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIHNlYXJjaF90YWJsZSA9IHRlbXBfc2VhcmNoX3RhYmxlDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgbG9jYWwgc2VhcmNoUmFuZ2UgPSBsYXN0X21hdGNoIC0gZmlyc3RfbWF0Y2gNCiAgICAgICAgICAgICAgICBzZWFyY2hSYW5nZSA9IHNlYXJjaFJhbmdlICogNCArIDUNCiAgICAgICAgICAgICAgICBsb2NhbCBzZWFyY2hTdHJpbmcgPSAiIg0KICAgICAgICAgICAgICAgIGZvciBpLCB2IGluIGlwYWlycyhzZWFyY2hfdGFibGUpIGRvDQogICAgICAgICAgICAgICAgICAgIHNlYXJjaFN0cmluZyA9IHNlYXJjaFN0cmluZyAuLiB2IC4uICI7Ig0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIHNlYXJjaFN0cmluZyA9IHNlYXJjaFN0cmluZyAuLiAiOjoiIC4uIHNlYXJjaFJhbmdlDQogICAgICAgICAgICAgICAgZ2cuY29weVRleHQoc2VhcmNoU3RyaW5nKQ0KICAgICAgICAgICAgICAgIGxvY2FsIGdnX2ZsYWdzID0gew0KICAgICAgICAgICAgICAgICAgICBbImRvdWJsZSJdID0gZ2cuVFlQRV9ET1VCTEUsDQogICAgICAgICAgICAgICAgICAgIFsiZHdvcmQiXSA9IGdnLlRZUEVfRFdPUkQsDQogICAgICAgICAgICAgICAgICAgIFsiZmxvYXQiXSA9IGdnLlRZUEVfRkxPQVQsDQogICAgICAgICAgICAgICAgICAgIFsicXdvcmQiXSA9IGdnLlRZUEVfUVdPUkQsDQogICAgICAgICAgICAgICAgICAgIFsieG9yIl0gPSBnZy5UWVBFX1hPUg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBsb2NhbCBzZWFyY2hGbGFnID0gZ2dfZmxhZ3NbZmlyc3RfbWF0Y2hfdHlwZV0NCiAgICAgICAgICAgICAgICBnZy5zZXRSYW5nZXMoZ2cuZ2V0UmFuZ2VzKCkpDQogICAgICAgICAgICAgICAgZ2cuY2xlYXJSZXN1bHRzKCkNCiAgICAgICAgICAgICAgICBnZy5zZWFyY2hOdW1iZXIoc2VhcmNoU3RyaW5nLCBzZWFyY2hGbGFnKQ0KICAgICAgICAgICAgICAgIHJlcGVhdA0KICAgICAgICAgICAgICAgICAgICB0YWJsZS5yZW1vdmUoc2VhcmNoX3RhYmxlLCAjc2VhcmNoX3RhYmxlKQ0KICAgICAgICAgICAgICAgICAgICBsb2NhbCByZWZpbmVTdHJpbmcgPSAiIg0KICAgICAgICAgICAgICAgICAgICBmb3IgaSwgdiBpbiBpcGFpcnMoc2VhcmNoX3RhYmxlKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgcmVmaW5lU3RyaW5nID0gcmVmaW5lU3RyaW5nIC4uIHYNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICNzZWFyY2hfdGFibGUgPiAxIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZpbmVTdHJpbmcgPSByZWZpbmVTdHJpbmcgLi4gIjsiDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmICNzZWFyY2hfdGFibGUgPiAxIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHJlZmluZVN0cmluZyA9IHJlZmluZVN0cmluZyAuLiAiOjoiDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBnZy5yZWZpbmVOdW1iZXIocmVmaW5lU3RyaW5nLCBzZWFyY2hGbGFnKQ0KICAgICAgICAgICAgICAgIHVudGlsICgjc2VhcmNoX3RhYmxlID09IDApDQogICAgICAgICAgICAgICAgbG9jYWwgcmVzdWx0cyA9IGdnLmdldFJlc3VsdHMoZ2cuZ2V0UmVzdWx0c0NvdW50KCkpDQogICAgICAgICAgICAgICAgbG9jYWwgb2Zmc2V0ID0gMA0KICAgICAgICAgICAgICAgIGxvY2FsIGV4cG9ydF9vZmZzZXQgPSAwDQogICAgICAgICAgICAgICAgaWYgc3RhdGljVmFsdWVGaW5kZXIuc2V0dGluZ3MuaW5kZXggPiBmaXJzdF9tYXRjaCB0aGVuDQogICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IHN0YXRpY1ZhbHVlRmluZGVyLnNldHRpbmdzLmluZGV4IC0gZmlyc3RfbWF0Y2gNCiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0ICogNA0KICAgICAgICAgICAgICAgICAgICBleHBvcnRfb2Zmc2V0ID0gb2Zmc2V0DQogICAgICAgICAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHJlc3VsdHMpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzW2ldLmFkZHJlc3MgPSByZXN1bHRzW2ldLmFkZHJlc3MgKyBvZmZzZXQNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHNbaV0uZmxhZ3MgPSBzdGF0aWNWYWx1ZUZpbmRlci5zZXR0aW5ncy5mbGFncw0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IGZpcnN0X21hdGNoIC0gc3RhdGljVmFsdWVGaW5kZXIuc2V0dGluZ3MuaW5kZXgNCiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0ICogNCArIDQNCiAgICAgICAgICAgICAgICAgICAgZXhwb3J0X29mZnNldCA9IHRvbnVtYmVyKCItIiAuLiBvZmZzZXQpDQogICAgICAgICAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHJlc3VsdHMpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzW2ldLmFkZHJlc3MgPSByZXN1bHRzW2ldLmFkZHJlc3MgLSBvZmZzZXQNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHNbaV0uZmxhZ3MgPSBzdGF0aWNWYWx1ZUZpbmRlci5zZXR0aW5ncy5mbGFncw0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBnZy5sb2FkUmVzdWx0cyhyZXN1bHRzKQ0KICAgICAgICAgICAgICAgIGlmIHN0YXRpY1ZhbHVlRmluZGVyLnNldHRpbmdzLmV4cGVjdGVkX3JhbmdlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZ2cucmVmaW5lTnVtYmVyKHN0YXRpY1ZhbHVlRmluZGVyLnNldHRpbmdzLmV4cGVjdGVkX3JhbmdlLCBzdGF0aWNWYWx1ZUZpbmRlci5zZXR0aW5ncy5mbGFncykNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBsb2NhbCByZXN1bHRzID0gZ2cuZ2V0UmVzdWx0cyhnZy5nZXRSZXN1bHRzQ291bnQoKSkNCiAgICAgICAgICAgICAgICBsb2NhbCBtZW51ID0gZ2cucHJvbXB0KHtzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gQ3JlYXRlIEVkaXQg4oS577iPXG5TZXQgbmFtZSBmb3IgZWRpdDoiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTZXQgdmFsdWUgdG86IiwgDQoJCQkJCQkJCQkJIkZyZWV6ZSB2YWx1ZToiLCANCgkJCQkJCQkJCQkiWDQgZWRpdCAoT25seSBTZWxlY3QgT25lKSIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlg4IGVkaXQgKE9ubHkgU2VsZWN0IE9uZSkifSwNCgkJCQkJCQkJCQl7DQoJCQkJCQkJCQkJIkVkaXQgIiAuLiAjc3RhdGljVmFsdWVGaW5kZXIuc2F2ZWRFZGl0c1RhYmxlICsgMSwgDQoJCQkJCQkJCQkJcmVzdWx0c1sxXS52YWx1ZSwgDQoJCQkJCQkJCQkJZmFsc2UsIA0KCQkJCQkJCQkJCWZhbHNlLCANCgkJCQkJCQkJCQlmYWxzZX0sDQoJCQkJCQkJCQkJew0KCQkJCQkJCQkJCSJ0ZXh0IiwgDQoJCQkJCQkJCQkJIm51bWJlciIsIA0KCQkJCQkJCQkJCSJjaGVja2JveCIsIA0KCQkJCQkJCQkJCSJjaGVja2JveCIsIA0KCQkJCQkJCQkJCSJjaGVja2JveCJ9KQ0KICAgICAgICAgICAgICAgIGlmIG1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgcHJlcF9lZGl0ID0gbWVudVsyXQ0KICAgICAgICAgICAgICAgICAgICBpZiBtZW51WzRdID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgcHJlcF9lZGl0ID0gcHJlcF9lZGl0IC4uICJYNCINCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIG1lbnVbNV0gPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBwcmVwX2VkaXQgPSBwcmVwX2VkaXQgLi4gIlg4Ig0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMocmVzdWx0cykgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHNbaV0udmFsdWUgPSBwcmVwX2VkaXQNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1lbnVbM10gPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0c1tpXS5mcmVlemUgPSBtZW51WzNdDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIG1lbnVbM10gPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBnZy5hZGRMaXN0SXRlbXMocmVzdWx0cykNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGdnLnNldFZhbHVlcyhyZXN1bHRzKQ0KICAgICAgICAgICAgICAgICAgICBzYXZlX3RvX3RhYmxlLmVkaXRfbmFtZSA9IG1lbnVbMV0NCiAgICAgICAgICAgICAgICAgICAgc2F2ZV90b190YWJsZS5vZmZzZXQgPSBleHBvcnRfb2Zmc2V0DQogICAgICAgICAgICAgICAgICAgIHNhdmVfdG9fdGFibGUuc2VhcmNoX3JhbmdlID0gc2VhcmNoUmFuZ2UNCiAgICAgICAgICAgICAgICAgICAgc2F2ZV90b190YWJsZS5mbGFncyA9IHNlYXJjaEZsYWcNCiAgICAgICAgICAgICAgICAgICAgc2F2ZV90b190YWJsZS5lZGl0ID0gcHJlcF9lZGl0DQogICAgICAgICAgICAgICAgICAgIHNhdmVfdG9fdGFibGUuZWRpdF9mbGFncyA9IHN0YXRpY1ZhbHVlRmluZGVyLnNldHRpbmdzLmZsYWdzDQogICAgICAgICAgICAgICAgICAgIHNhdmVfdG9fdGFibGUuZnJlZXplID0gbWVudVszXQ0KICAgICAgICAgICAgICAgICAgICBzYXZlX3RvX3RhYmxlLmV4cGVjdGVkX3JhbmdlID0gc3RhdGljVmFsdWVGaW5kZXIuc2V0dGluZ3MuZXhwZWN0ZWRfcmFuZ2UNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5zYXZlZEVkaXRzVGFibGVbI3N0YXRpY1ZhbHVlRmluZGVyLnNhdmVkRWRpdHNUYWJsZSArIDFdID0gew0KICAgICAgICAgICAgICAgICAgICBlZGl0X3RhYmxlID0gc2F2ZV90b190YWJsZSwNCiAgICAgICAgICAgICAgICAgICAgc2V0T25lID0gc3RhdGljVmFsdWVGaW5kZXIuc2V0T25lLA0KICAgICAgICAgICAgICAgICAgICBzZXRUd28gPSBzdGF0aWNWYWx1ZUZpbmRlci5zZXRUd28sDQogICAgICAgICAgICAgICAgICAgIHNldFRocmVlID0gc3RhdGljVmFsdWVGaW5kZXIuc2V0VGhyZWUsDQogICAgICAgICAgICAgICAgICAgIHNldHRpbmdzID0gc3RhdGljVmFsdWVGaW5kZXIuc2V0dGluZ3MNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIubWFraW5nRWRpdCA9IHRydWUNCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5pc0NvbXBhcmluZyA9IGZhbHNlDQogICAgICAgICAgICAgICAgZ2cuYWxlcnQoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIFZhbHVlIGhhcyBiZWVuIHNldC4g4oS577iPIFxuVGVzdCB0byB2ZXJpZnkgaXQgaXMgd29ya2luZyBhbmQgdGhlbiBwcmVzcyB0aGUgZmxvYXRpbmcgR0cgYnV0dG9uIHRvIGVpdGhlciBTYXZlIG9yIERpc2NhcmQgZWRpdC4iKQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIGdnLmFsZXJ0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBOb3QgZW5vdWdoIHN0YXRpYyB2YWx1ZXMgd2VyZSBmb3VuZCB0byBjcmVhdGUgYSBzZWFyY2gsIHN0YXJ0b3ZlciBhbmQgdXNlciBhIGxhcmdlciByYW5nZS4g4oS577iPIikNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQsDQogICAgICAgIG1ha2luZ0VkaXQgPSBmYWxzZSwNCiAgICAgICAgY3VycmVudEVkaXQgPSB7fSwNCiAgICAgICAgc2F2ZUNvbmZpZyA9IGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGxvY2FsIGZpbGUgPSBpby5vcGVuKHN0YXRpY1ZhbHVlRmluZGVyLnNhdmVQYXRoIC4uICIvIiAuLiBnZy5nZXRUYXJnZXRQYWNrYWdlKCkgLi4gIi5jZmciLCAidysiKQ0KICAgICAgICAgICAgZmlsZTp3cml0ZSgic3RhdGljVmFsdWVGaW5kZXIuc2F2ZWRFZGl0c1RhYmxlID0gIiAuLiB0b3N0cmluZyhzdGF0aWNWYWx1ZUZpbmRlci5zYXZlZEVkaXRzVGFibGUpKQ0KICAgICAgICAgICAgZmlsZTpjbG9zZSgpDQogICAgICAgIGVuZCwNCiAgICAgICAgY2hlY2tDb25maWdGaWxlR2FtZSA9IGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGRvZmlsZShzdGF0aWNWYWx1ZUZpbmRlci5zYXZlUGF0aCAuLiAiLyIgLi4gZ2cuZ2V0VGFyZ2V0UGFja2FnZSgpIC4uICIuY2ZnIikNCiAgICAgICAgZW5kLA0KICAgICAgICBjb21wYXJlTWVudSA9IGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGlmIG5vdCBzdGF0aWNWYWx1ZUZpbmRlci5zZXRPbmUuZHdvcmQgdGhlbg0KICAgICAgICAgICAgICAgIGxvY2FsIG1lbnUgPSBnZy5jaG9pY2UoeyLwn5SNIFJ1biBGaXJzdCBTZWFyY2gifSwgbmlsLCBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2VsZWN0IHRoZSBkZXNpcmVkIHZhbHVlIGluIHlvdXIgc2VhcmNoIHJlc3VsdHMgYW5kIHJ1biB0aGUgc2VhcmNoLiDihLnvuI8iKQ0KICAgICAgICAgICAgICAgIGlmIG1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIuY2xvc2VHYW1lQWZ0ZXJTZWFyY2ggPSB0cnVlDQogICAgICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLmRvaW5nRmlyc3RTZWFyY2ggPSB0cnVlDQogICAgICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLnNlYXJjaEZvclZhbHVlcygic2V0T25lIikNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2VpZiBzdGF0aWNWYWx1ZUZpbmRlci5kb2luZ1NlY29uZFNlYXJjaCA9PSB0cnVlIG9yIHN0YXRpY1ZhbHVlRmluZGVyLmRvaW5nRmlyc3RTZWFyY2ggPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgZ2cuYWxlcnQoInJlc3RhcnQgdGhlIGdhbWUgYW5kIHJ1biB0aGUgbmV4dCBzZWFyY2giKQ0KICAgICAgICAgICAgZWxzZWlmIG5vdCBzdGF0aWNWYWx1ZUZpbmRlci5zZXRUd28uZHdvcmQgdGhlbg0KICAgICAgICAgICAgICAgIGxvY2FsIG1lbnUgPSBnZy5jaG9pY2UoeyLwn5SNIFJ1biBTZWNvbmQgU2VhcmNoIiwgIvCfl5HvuI8gU3RhcnQgT3ZlciJ9LCBuaWwsIHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBTZWxlY3QgdGhlIGRlc2lyZWQgdmFsdWUgaW4geW91ciBzZWFyY2ggcmVzdWx0cyBhbmQgcnVuIHRoZSBzZWFyY2ggb3Igc3RhcnQgb3Zlci4g4oS577iPIikNCiAgICAgICAgICAgICAgICBpZiBtZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIG1lbnUgPT0gMSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5jbG9zZUdhbWVBZnRlclNlYXJjaCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLmRvaW5nU2Vjb25kU2VhcmNoID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIuc2VhcmNoRm9yVmFsdWVzKCJzZXRUd28iKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgbWVudSA9PSAyIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLnN0YXJ0T3ZlcigpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZWxzZWlmIG5vdCBzdGF0aWNWYWx1ZUZpbmRlci5zZXRUaHJlZS5kd29yZCB0aGVuDQogICAgICAgICAgICAgICAgbG9jYWwgbWVudSA9IGdnLmNob2ljZSh7IvCflI0gUnVuIFRoaXJkIFNlYXJjaCIsICLwn5eR77iPIFN0YXJ0IE92ZXIifSwgbmlsLCBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2VsZWN0IHRoZSBkZXNpcmVkIHZhbHVlIGluIHlvdXIgc2VhcmNoIHJlc3VsdHMgYW5kIHJ1biB0aGUgc2VhcmNoIG9yIHN0YXJ0IG92ZXIuIOKEue+4jyIpDQogICAgICAgICAgICAgICAgaWYgbWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBtZW51ID09IDEgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIuc2VhcmNoRm9yVmFsdWVzKCJzZXRUaHJlZSIpDQogICAgICAgICAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5ob21lKCkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIG1lbnUgPT0gMiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5zdGFydE92ZXIoKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBsb2NhbCBtZW51ID0gZ2cuY2hvaWNlKHsi8J+UjSBSZVJ1biBUaGlyZCBTZWFyY2giLCANCgkJCQkJCQkJCQki4p6VIENyZWF0ZSBTZWFyY2ggYW5kIEVkaXQiLCANCgkJCQkJCQkJCQki8J+Xke+4jyBTdGFydCBPdmVyIn0sDQoJCQkJCQkJCQkJbmlsLCANCgkJCQkJCQkJCQlzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gQ3JlYXRlIHNlYXJjaCBhbmQgZWRpdCBvciBzdGFydCBvdmVyLiDihLnvuI8iKQ0KICAgICAgICAgICAgICAgIGlmIG1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgbWVudSA9PSAxIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLnNldFRocmVlID0ge30NCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLnNlYXJjaEZvclZhbHVlcygic2V0VGhyZWUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIuaG9tZSgpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBtZW51ID09IDIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIuY29tcGFyZVNldHMoKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgbWVudSA9PSAzIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLnN0YXJ0T3ZlcigpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCwNCiAgICAgICAgaG9tZSA9IGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGlmIHN0YXRpY1ZhbHVlRmluZGVyLm1ha2luZ0VkaXQgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgbG9jYWwgbWVudSA9IGdnLmNob2ljZSh7IuKchSBTYXZlIEVkaXQiLCANCgkJCQkJCQkJCQki8J+Xke+4jyBEaXNjYXJkIEVkaXQifSwgDQoJCQkJCQkJCQkJbmlsLA0KCQkJCQkJCQkJCXNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBTYXZlIG9yIERpc2NhcmQgZWRpdC4g4oS577iPIikNCiAgICAgICAgICAgICAgICBpZiBtZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIG1lbnUgPT0gMSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5zYXZlQ29uZmlnKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLm1ha2luZ0VkaXQgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgZ2cudG9hc3QoIuKchSBFZGl0IHNhdmVkIOKchSIpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBtZW51ID09IDIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUucmVtb3ZlKHN0YXRpY1ZhbHVlRmluZGVyLnNhdmVkRWRpdHNUYWJsZSwgI3N0YXRpY1ZhbHVlRmluZGVyLnNhdmVkRWRpdHNUYWJsZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLm1ha2luZ0VkaXQgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgZ2cudG9hc3QoIvCfl5HvuI8gRWRpdCBkaXNjYXJkZWQg8J+Xke+4jyIpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5ob21lKCkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2VpZiBzdGF0aWNWYWx1ZUZpbmRlci5zZXRPbmUuZHdvcmQgdGhlbg0KICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLmNvbXBhcmVNZW51KCkNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBsb2NhbCBtZW51X2l0ZW1zID0ge30NCiAgICAgICAgICAgICAgICBmb3IgaSwgdiBpbiBpcGFpcnMoc3RhdGljVmFsdWVGaW5kZXIuc2F2ZWRFZGl0c1RhYmxlKSBkbw0KICAgICAgICAgICAgICAgICAgICBtZW51X2l0ZW1zW2ldID0gIuKWtu+4jyAiIC4uIHYuZWRpdF90YWJsZS5lZGl0X25hbWUNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBtZW51X2l0ZW1zWyNtZW51X2l0ZW1zICsgMV0gPSAi8J+UjSBGaW5kIFN0YXRpYyBWYWx1ZXMiDQogICAgICAgICAgICAgICAgbWVudV9pdGVtc1sjbWVudV9pdGVtcyArIDFdID0gIvCfm6DvuI8gRml4IFNhdmVkIFNlYXJjaC9FZGl0Ig0KICAgICAgICAgICAgICAgIG1lbnVfaXRlbXNbI21lbnVfaXRlbXMgKyAxXSA9ICLwn5eR77iPIERlbGV0ZSBTYXZlZCBFZGl0Ig0KICAgICAgICAgICAgICAgIG1lbnVfaXRlbXNbI21lbnVfaXRlbXMgKyAxXSA9ICLinYwgRXhpdCINCiAgICAgICAgICAgICAgICBsb2NhbCBtZW51ID0gZ2cuY2hvaWNlKG1lbnVfaXRlbXMsIG5pbCwgc2NyaXB0X3RpdGxlIC4uICJcblxuU3RhdGljIFZhbHVlIEZpbmRlciIpDQogICAgICAgICAgICAgICAgaWYgbWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBtZW51ID09ICNtZW51X2l0ZW1zIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIucmV0dXJuSG9tZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBtZW51ID09ICNtZW51X2l0ZW1zIC0gMSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5kZWxldGVFZGl0KCkNCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIG1lbnUgPT0gI21lbnVfaXRlbXMgLSAyIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLmZpeFNlYXJjaEVkaXQoKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlaWYgbWVudSA9PSAjbWVudV9pdGVtcyAtIDMgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIuY29tcGFyZU1lbnUoKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5kb0VkaXQobWVudSkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kLA0KICAgICAgICBkb0VkaXQgPSBmdW5jdGlvbihlZGl0X2luZGV4KQ0KICAgICAgICAgICAgbG9jYWwgc2VhcmNoX3RhYmxlID0gc3RhdGljVmFsdWVGaW5kZXIuc2F2ZWRFZGl0c1RhYmxlW2VkaXRfaW5kZXhdLmVkaXRfdGFibGUuc2VhcmNoX3RhYmxlDQogICAgICAgICAgICBsb2NhbCBzZWFyY2hGbGFnID0gc3RhdGljVmFsdWVGaW5kZXIuc2F2ZWRFZGl0c1RhYmxlW2VkaXRfaW5kZXhdLmVkaXRfdGFibGUuZmxhZ3MNCiAgICAgICAgICAgIGxvY2FsIHNlYXJjaFJhbmdlID0gc3RhdGljVmFsdWVGaW5kZXIuc2F2ZWRFZGl0c1RhYmxlW2VkaXRfaW5kZXhdLmVkaXRfdGFibGUuc2VhcmNoX3JhbmdlDQogICAgICAgICAgICBsb2NhbCBvZmZzZXQgPSBzdGF0aWNWYWx1ZUZpbmRlci5zYXZlZEVkaXRzVGFibGVbZWRpdF9pbmRleF0uZWRpdF90YWJsZS5vZmZzZXQNCiAgICAgICAgICAgIGxvY2FsIGVkaXRfdG8gPSBzdGF0aWNWYWx1ZUZpbmRlci5zYXZlZEVkaXRzVGFibGVbZWRpdF9pbmRleF0uZWRpdF90YWJsZS5lZGl0DQogICAgICAgICAgICBsb2NhbCBlZGl0X3RvX2ZsYWdzID0gc3RhdGljVmFsdWVGaW5kZXIuc2F2ZWRFZGl0c1RhYmxlW2VkaXRfaW5kZXhdLmVkaXRfdGFibGUuZWRpdF9mbGFncw0KICAgICAgICAgICAgbG9jYWwgZWRpdF9uYW1lID0gc3RhdGljVmFsdWVGaW5kZXIuc2F2ZWRFZGl0c1RhYmxlW2VkaXRfaW5kZXhdLmVkaXRfdGFibGUuZWRpdF9uYW1lDQogICAgICAgICAgICBsb2NhbCBmcmVlemUgPSBzdGF0aWNWYWx1ZUZpbmRlci5zYXZlZEVkaXRzVGFibGVbZWRpdF9pbmRleF0uZWRpdF90YWJsZS5mcmVlemUNCiAgICAgICAgICAgIGxvY2FsIGV4cGVjdGVkX3JhbmdlID0gc3RhdGljVmFsdWVGaW5kZXIuc2F2ZWRFZGl0c1RhYmxlW2VkaXRfaW5kZXhdLmVkaXRfdGFibGUuZXhwZWN0ZWRfcmFuZ2UNCiAgICAgICAgICAgIGxvY2FsIHNlYXJjaFN0cmluZyA9ICIiDQogICAgICAgICAgICBsb2NhbCB0ZW1wX3NlYXJjaF90YWJsZSA9IHt9DQogICAgICAgICAgICBmb3IgaSwgdiBpbiBpcGFpcnMoc2VhcmNoX3RhYmxlKSBkbw0KICAgICAgICAgICAgICAgIGxvY2FsIHRlbXBfdmFsID0gdg0KICAgICAgICAgICAgICAgIHRlbXBfc2VhcmNoX3RhYmxlW2ldID0gdGVtcF92YWwNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZm9yIGksIHYgaW4gaXBhaXJzKHRlbXBfc2VhcmNoX3RhYmxlKSBkbw0KICAgICAgICAgICAgICAgIHNlYXJjaFN0cmluZyA9IHNlYXJjaFN0cmluZyAuLiB2IC4uICI7Ig0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBzZWFyY2hTdHJpbmcgPSBzZWFyY2hTdHJpbmcgLi4gIjo6IiAuLiBzZWFyY2hSYW5nZQ0KICAgICAgICAgICAgZ2cuc2V0UmFuZ2VzKGdnLmdldFJhbmdlcygpKQ0KICAgICAgICAgICAgZ2cuY2xlYXJSZXN1bHRzKCkNCiAgICAgICAgICAgIGdnLnNlYXJjaE51bWJlcihzZWFyY2hTdHJpbmcsIHNlYXJjaEZsYWcpDQogICAgICAgICAgICByZXBlYXQNCiAgICAgICAgICAgICAgICB0YWJsZS5yZW1vdmUodGVtcF9zZWFyY2hfdGFibGUsICN0ZW1wX3NlYXJjaF90YWJsZSkNCiAgICAgICAgICAgICAgICBsb2NhbCByZWZpbmVTdHJpbmcgPSAiIg0KICAgICAgICAgICAgICAgIGZvciBpLCB2IGluIGlwYWlycyh0ZW1wX3NlYXJjaF90YWJsZSkgZG8NCiAgICAgICAgICAgICAgICAgICAgcmVmaW5lU3RyaW5nID0gcmVmaW5lU3RyaW5nIC4uIHYNCiAgICAgICAgICAgICAgICAgICAgaWYgI3RlbXBfc2VhcmNoX3RhYmxlID4gMSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICByZWZpbmVTdHJpbmcgPSByZWZpbmVTdHJpbmcgLi4gIjsiDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmICN0ZW1wX3NlYXJjaF90YWJsZSA+IDEgdGhlbg0KICAgICAgICAgICAgICAgICAgICByZWZpbmVTdHJpbmcgPSByZWZpbmVTdHJpbmcgLi4gIjo6Ig0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGdnLnJlZmluZU51bWJlcihyZWZpbmVTdHJpbmcsIHNlYXJjaEZsYWcpDQogICAgICAgICAgICB1bnRpbCAoI3RlbXBfc2VhcmNoX3RhYmxlID09IDApDQogICAgICAgICAgICBsb2NhbCByZXN1bHRzID0gZ2cuZ2V0UmVzdWx0cyhnZy5nZXRSZXN1bHRzQ291bnQoKSkNCiAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHJlc3VsdHMpIGRvDQogICAgICAgICAgICAgICAgcmVzdWx0c1tpXS5hZGRyZXNzID0gcmVzdWx0c1tpXS5hZGRyZXNzICsgb2Zmc2V0DQogICAgICAgICAgICAgICAgcmVzdWx0c1tpXS5mbGFncyA9IGVkaXRfdG9fZmxhZ3MNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZ2cubG9hZFJlc3VsdHMocmVzdWx0cykNCiAgICAgICAgICAgIGlmIGV4cGVjdGVkX3JhbmdlIHRoZW4NCiAgICAgICAgICAgICAgICBnZy5yZWZpbmVOdW1iZXIoZXhwZWN0ZWRfcmFuZ2UsIGVkaXRfdG9fZmxhZ3MpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGxvY2FsIHJlc3VsdHMgPSBnZy5nZXRSZXN1bHRzKGdnLmdldFJlc3VsdHNDb3VudCgpKQ0KICAgICAgICAgICAgZm9yIGksIHYgaW4gaXBhaXJzKHJlc3VsdHMpIGRvDQogICAgICAgICAgICAgICAgdi52YWx1ZSA9IGVkaXRfdG8NCiAgICAgICAgICAgICAgICB2LmZyZWV6ZSA9IGZyZWV6ZQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBmcmVlemUgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgZ2cuYWRkTGlzdEl0ZW1zKHJlc3VsdHMpDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgZ2cuc2V0VmFsdWVzKHJlc3VsdHMpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGdnLnRvYXN0KCLinIUgIiAuLiBlZGl0X25hbWUgLi4gIiDinIUiKQ0KICAgICAgICBlbmQsDQogICAgICAgIGZpeFNlYXJjaEVkaXQgPSBmdW5jdGlvbigpDQogICAgICAgICAgICBsb2NhbCBtZW51X2l0ZW1zID0ge30NCiAgICAgICAgICAgIGZvciBpLCB2IGluIGlwYWlycyhzdGF0aWNWYWx1ZUZpbmRlci5zYXZlZEVkaXRzVGFibGUpIGRvDQogICAgICAgICAgICAgICAgbWVudV9pdGVtc1tpXSA9ICLilrbvuI8gIiAuLiB2LmVkaXRfdGFibGUuZWRpdF9uYW1lDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGxvY2FsIG1lbnUgPSBnZy5jaG9pY2UobWVudV9pdGVtcywgbmlsLCBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2VsZWN0IFNlYXJjaC9FZGl0IHRvIGZpeC4g4oS577iPIikNCiAgICAgICAgICAgIGlmIG1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5zZXR0aW5ncyA9IHN0YXRpY1ZhbHVlRmluZGVyLnNhdmVkRWRpdHNUYWJsZVttZW51XS5zZXR0aW5ncw0KICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLnNldE9uZSA9IHN0YXRpY1ZhbHVlRmluZGVyLnNhdmVkRWRpdHNUYWJsZVttZW51XS5zZXRPbmUNCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5zZXRUd28gPSBzdGF0aWNWYWx1ZUZpbmRlci5zYXZlZEVkaXRzVGFibGVbbWVudV0uc2V0VHdvDQogICAgICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIuc2V0VGhyZWUgPSB7fQ0KICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLmNsb3NlR2FtZUFmdGVyU2VhcmNoID0gZmFsc2UNCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5jb21wYXJlTWVudSgpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kLA0KICAgICAgICBkZWxldGVFZGl0ID0gZnVuY3Rpb24oKQ0KICAgICAgICAgICAgbG9jYWwgbWVudV9pdGVtcyA9IHt9DQogICAgICAgICAgICBmb3IgaSwgdiBpbiBpcGFpcnMoc3RhdGljVmFsdWVGaW5kZXIuc2F2ZWRFZGl0c1RhYmxlKSBkbw0KICAgICAgICAgICAgICAgIG1lbnVfaXRlbXNbaV0gPSAi4pa277iPICIgLi4gdi5lZGl0X3RhYmxlLmVkaXRfbmFtZQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBsb2NhbCBtZW51ID0gZ2cubXVsdGlDaG9pY2UobWVudV9pdGVtcywgbmlsLA0KICAgICAgICAgICAgICAgIHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBTZWxlY3QgU2VhcmNoL0VkaXRzIHRvIGRlbGV0ZS4g4oS577iPIikNCiAgICAgICAgICAgIGlmIG1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICBsb2NhbCBjb25maXJtID0gZ2cuY2hvaWNlKHsi4pyFIFllcyBkZWxldGUgdGhlIGVkaXRzIiwgDQoJCQkJCQkJCQkJCSLinYwgTm8ifSwgDQoJCQkJCQkJCQkJCW5pbCwgDQoJCQkJCQkJCQkJCXNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBBcmUgeW91IHN1cmU/IOKEuVxuQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGVzZSBlZGl0cywgdGhpcyBjYW4gbm90IGJlIHVuZG9uZT8gIikNCiAgICAgICAgICAgICAgICBpZiBjb25maXJtIH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIGNvbmZpcm0gPT0gMSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgaywgdiBpbiBwYWlycyhzdGF0aWNWYWx1ZUZpbmRlci5zYXZlZEVkaXRzVGFibGUpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gcGFpcnMobWVudSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgayA9PSBrZXkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIuc2F2ZWRFZGl0c1RhYmxlW2tdID0gImRlbGV0ZSINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIDo6Z2V0X25leHQ6Og0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgY291bnQgPSAxDQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBkb191bnRpbCA9ICNzdGF0aWNWYWx1ZUZpbmRlci5zYXZlZEVkaXRzVGFibGUgKyAxDQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhzdGF0aWNWYWx1ZUZpbmRlci5zYXZlZEVkaXRzVGFibGUpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQgPSBjb3VudCArIDENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB0eXBlKHYpID09ICJzdHJpbmciIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUucmVtb3ZlKHN0YXRpY1ZhbHVlRmluZGVyLnNhdmVkRWRpdHNUYWJsZSwgaSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgY291bnQgPCBkb191bnRpbCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ290byBnZXRfbmV4dA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5zYXZlQ29uZmlnKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGdnLnRvYXN0KCLinIUgRWRpdHMgRGVsZXRlZCDinIUiKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICB9DQoNCiAgICBpZiBwY2FsbChzdGF0aWNWYWx1ZUZpbmRlci5jaGVja0ZpbGUsIHN0YXRpY1ZhbHVlRmluZGVyLnNhdmVQYXRoIC4uICIvY3JlYXRlZCIpID09IGZhbHNlIHRoZW4NCiAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIuY3JlYXRlRGlyZWN0b3J5KCkNCiAgICBlbmQNCiAgICBpZiBwY2FsbChzdGF0aWNWYWx1ZUZpbmRlci5jaGVja0NvbmZpZ0ZpbGVHYW1lKSA9PSBmYWxzZSB0aGVuDQogICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLnNhdmVkRWRpdHNUYWJsZSA9IHt9DQogICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLnNhdmVDb25maWcoKQ0KICAgIGVuZA0KDQogICAgaWYgcGNhbGwoc3RhdGljVmFsdWVGaW5kZXIuY2hlY2tGaWxlLCBzdGF0aWNWYWx1ZUZpbmRlci5zYXZlUGF0aCAuLiAiLyIgLi4gZ2cuZ2V0VGFyZ2V0UGFja2FnZSgpIC4uICJzZXRPbmUubHVhIikgPT0gZmFsc2UgdGhlbg0KICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5jbG9zZUdhbWVBZnRlclNlYXJjaCA9IHRydWUNCiAgICBlbmQNCg0KICAgIHBjYWxsKHN0YXRpY1ZhbHVlRmluZGVyLmxvYWRGaWxlLCBzdGF0aWNWYWx1ZUZpbmRlci5zYXZlUGF0aCAuLiAiLyIgLi4gZ2cuZ2V0VGFyZ2V0UGFja2FnZSgpIC4uICJzZXRPbmUubHVhIikNCiAgICBwY2FsbChzdGF0aWNWYWx1ZUZpbmRlci5sb2FkRmlsZSwgc3RhdGljVmFsdWVGaW5kZXIuc2F2ZVBhdGggLi4gIi8iIC4uIGdnLmdldFRhcmdldFBhY2thZ2UoKSAuLiAic2V0VHdvLmx1YSIpDQogICAgcGNhbGwoc3RhdGljVmFsdWVGaW5kZXIubG9hZEZpbGUsIHN0YXRpY1ZhbHVlRmluZGVyLnNhdmVQYXRoIC4uICIvIiAuLiBnZy5nZXRUYXJnZXRQYWNrYWdlKCkgLi4gInNldFRocmVlLmx1YSIpDQoNCiAgICBwbHVnaW5NYW5hZ2VyLnJldHVybkhvbWUgPSB0cnVlDQogICAgcGx1Z2luTWFuYWdlci5yZXR1cm5QbHVnaW5UYWJsZSA9ICJzdGF0aWNWYWx1ZUZpbmRlciINCiAgICBzdGF0aWNWYWx1ZUZpbmRlci5ob21lKCkNCmVuZA0K"
        }
    },
    installToolbox = function()
        directory_created = true
        for i, v in pairs(gg.getRangesList()) do
            if v["end"] - v.start < 10240 then
                if not string.find(v["name"], "deleted") then
                    create_start = v.start
                    create_end = v["end"]
                    break
                end
            end
        end
        gg.dumpMemory(create_start, create_end, dataPath, gg.DUMP_SKIP_SYSTEM_LIBS)
        gg.dumpMemory(create_start, create_end, pluginsDataPath, gg.DUMP_SKIP_SYSTEM_LIBS)
        gg.dumpMemory(create_start, create_end, configDataPath, gg.DUMP_SKIP_SYSTEM_LIBS)
        for i, v in pairs(toolboxInstaller.filesTable) do
            toolboxInstaller.writeFile(v.file_name, toolboxInstaller.decodeBase64(v.file_data))
        end
    end,
    writeFile = function(file_name, file_data)
        file = io.open(pluginsDataPath .. file_name, "w+")
        file:write(file_data)
        file:close()
    end,
    checkInstall = function()
        local file = assert(io.open(configDataPath .. "plugin_manager.json", "r"))
        local content = file:read("*a")
        file:close()
    end,
    decodeBase64 = function(s)
        local bs = {
            [0] =   'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P',
            'Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f',
            'g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v',
            'w','x','y','z','0','1','2','3','4','5','6','7','8','9','+','/',
        }
        local invBs1 = {}
        local invBs2 = {}
        local invBs3 = {}
        local invBs4 = {}
        for i = 0, 63 do
            invBs1[bs[i]] = i << 18
            invBs2[bs[i]] = i << 12
            invBs3[bs[i]] = i << 6
            invBs4[bs[i]] = i
        end
        local char = string.char
        local sub = string.sub
        local len = #s
        if len % 4 ~= 0 then
            s = s .. string.rep('=', 4 - (len % 4))
        end
        local pad = s:sub(-2)
        if pad == '==' then
            pad = 'AA'
        elseif pad:sub(-1) == '=' then
            pad = 'A'
        else
            pad = ''
        end
        if #pad > 0 then
            s = s:sub(1, #s - #pad) .. pad
        end
        s = s:gsub('....', function(block)
            local n = invBs1[block:sub(1, 1)] + invBs2[block:sub(2, 2)] + invBs3[block:sub(3, 3)] +
                          invBs4[block:sub(4, 4)]
            return char((n >> 16) & 255, (n >> 8) & 255, n & 255)
        end)
        if #pad == 0 then
            return s
        end
        return s:sub(1, #s - #pad)
    end,
    updateToolbox = function()
        local should_compare
        local download_all
        
        if toolboxInstaller.githubSHAs then
            should_compare = true
        else
            download_all = true
        end
        local githubTree = gg.makeRequest("https://api.github.com/repos/BadCaseDotOrg/badcases-toolbox/git/trees/74981be136e5000c128ac75db908a9503618507b").content
        githubTree = json.decode(githubTree)
        for i,v in ipairs (githubTree["tree"]) do
            local download 
            if should_compare == true then
                if toolboxInstaller.githubSHAs["tree"][i].sha ~= v.sha then
                    download = true
                end
            end
            if download_all == true then
                download = true
            end 
            if download == true then
                if v.path:find("%.lua$") then
                    gg.toast(script_title.."\n\nUpdating "..v.path)
                    local githubBlob = gg.makeRequest(v.url).content
                    githubBlob = json.decode(githubBlob)
                    local updatedPluginData = toolboxInstaller.decodeBase64(githubBlob["content"]:gsub("%\n",""))
                    toolboxInstaller.writeFile(v.path, updatedPluginData)
                end
            end
        end
        toolboxInstaller.githubSHAs = githubTree
        file = io.open(configDataPath .. "githubTree.json", "w+")
        file:write(json.encode(toolboxInstaller.githubSHAs))
        file:close()
    end,
    checkUpdates = function()
        local file = assert(io.open(configDataPath .. "githubTree.json", "r"))
        local content = file:read("*a")
        file:close()
        toolboxInstaller.githubSHAs = json.decode(content)
    end,
}

if pcall(toolboxInstaller.checkInstall) == false then
    toolboxInstaller.installToolbox()
end
pcall(toolboxInstaller.checkUpdates)

local updateMenu = gg.choice({"✅ Yes", "❌ No"},nil,script_title.."\n\nDo you want to check GitHub for updates?")
if updateMenu ~= nil then
    if updateMenu == 1 then
        toolboxInstaller.updateToolbox()
    end
end

dofile(pluginsDataPath .. "toolbox_core.lua")
