--
-- json.lua
--
-- Copyright (c) 2019 rxi
--
-- Permission is hereby granted, free of charge, to any person obtaining a copy of
-- this software and associated documentation files (the "Software"), to deal in
-- the Software without restriction, including without limitation the rights to
-- use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies
-- of the Software, and to permit persons to whom the Software is furnished to do
-- so, subject to the following conditions:
--
-- The above copyright notice and this permission notice shall be included in all
-- copies or substantial portions of the Software.
--
-- THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
-- IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
-- FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
-- AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
-- LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
-- OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
-- SOFTWARE.
--
json = {
    _version = "0.1.2"
}

-------------------------------------------------------------------------------
-- Encode
-------------------------------------------------------------------------------

local encode

local escape_char_map = {
    ["\\"] = "\\\\",
    ["\""] = "\\\"",
    ["\b"] = "\\b",
    ["\f"] = "\\f",
    ["\n"] = "\\n",
    ["\r"] = "\\r",
    ["\t"] = "\\t"
}

local escape_char_map_inv = {
    ["\\/"] = "/"
}
for k, v in pairs(escape_char_map) do
    escape_char_map_inv[v] = k
end

local function escape_char(c)
    return escape_char_map[c] or string.format("\\u%04x", c:byte())
end

local function encode_nil(val)
    return "null"
end

local function encode_table(val, stack)
    local res = {}
    stack = stack or {}

    -- Circular reference?
    if stack[val] then
        error("circular reference")
    end

    stack[val] = true

    if rawget(val, 1) ~= nil or next(val) == nil then
        -- Treat as array -- check keys are valid and it is not sparse
        local n = 0
        for k in pairs(val) do
            if type(k) ~= "number" then
                error("invalid table: mixed or invalid key types")
            end
            n = n + 1
        end
        if n ~= #val then
            error("invalid table: sparse array")
        end
        -- Encode
        for i, v in ipairs(val) do
            table.insert(res, encode(v, stack))
        end
        stack[val] = nil
        return "[" .. table.concat(res, ",") .. "]"

    else
        -- Treat as an object
        for k, v in pairs(val) do
            if type(k) ~= "string" then
                error("invalid table: mixed or invalid key types")
            end
            table.insert(res, encode(k, stack) .. ":" .. encode(v, stack))
        end
        stack[val] = nil
        return "{" .. table.concat(res, ",") .. "}"
    end
end

local function encode_string(val)
    return '"' .. val:gsub('[%z\1-\31\\"]', escape_char) .. '"'
end

local function encode_number(val)
    -- Check for NaN, -inf and inf
    if val ~= val or val <= -math.huge or val >= math.huge then
        error("unexpected number value '" .. tostring(val) .. "'")
    end
    return string.format("%.14g", val)
end

local type_func_map = {
    ["nil"] = encode_nil,
    ["table"] = encode_table,
    ["string"] = encode_string,
    ["number"] = encode_number,
    ["boolean"] = tostring
}

encode = function(val, stack)
    local t = type(val)
    local f = type_func_map[t]
    if f then
        return f(val, stack)
    end
    error("unexpected type '" .. t .. "'")
end

function json.encode(val)
    return (encode(val))
end

-------------------------------------------------------------------------------
-- Decode
-------------------------------------------------------------------------------

local parse

local function create_set(...)
    local res = {}
    for i = 1, select("#", ...) do
        res[select(i, ...)] = true
    end
    return res
end

local space_chars = create_set(" ", "\t", "\r", "\n")
local delim_chars = create_set(" ", "\t", "\r", "\n", "]", "}", ",")
local escape_chars = create_set("\\", "/", '"', "b", "f", "n", "r", "t", "u")
local literals = create_set("true", "false", "null")

local literal_map = {
    ["true"] = true,
    ["false"] = false,
    ["null"] = nil
}

local function next_char(str, idx, set, negate)
    for i = idx, #str do
        if set[str:sub(i, i)] ~= negate then
            return i
        end
    end
    return #str + 1
end

local function decode_error(str, idx, msg)
    local line_count = 1
    local col_count = 1
    for i = 1, idx - 1 do
        col_count = col_count + 1
        if str:sub(i, i) == "\n" then
            line_count = line_count + 1
            col_count = 1
        end
    end
    error(string.format("%s at line %d col %d", msg, line_count, col_count))
end

local function codepoint_to_utf8(n)
    -- http://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&id=iws-appendixa
    local f = math.floor
    if n <= 0x7f then
        return string.char(n)
    elseif n <= 0x7ff then
        return string.char(f(n / 64) + 192, n % 64 + 128)
    elseif n <= 0xffff then
        return string.char(f(n / 4096) + 224, f(n % 4096 / 64) + 128, n % 64 + 128)
    elseif n <= 0x10ffff then
        return string.char(f(n / 262144) + 240, f(n % 262144 / 4096) + 128, f(n % 4096 / 64) + 128, n % 64 + 128)
    end
    error(string.format("invalid unicode codepoint '%x'", n))
end

local function parse_unicode_escape(s)
    local n1 = tonumber(s:sub(3, 6), 16)
    local n2 = tonumber(s:sub(9, 12), 16)
    -- Surrogate pair?
    if n2 then
        return codepoint_to_utf8((n1 - 0xd800) * 0x400 + (n2 - 0xdc00) + 0x10000)
    else
        return codepoint_to_utf8(n1)
    end
end

local function parse_string(str, i)
    local has_unicode_escape = false
    local has_surrogate_escape = false
    local has_escape = false
    local last
    for j = i + 1, #str do
        local x = str:byte(j)

        if x < 32 then
            decode_error(str, j, "control character in string")
        end

        if last == 92 then -- "\\" (escape char)
            if x == 117 then -- "u" (unicode escape sequence)
                local hex = str:sub(j + 1, j + 5)
                if not hex:find("%x%x%x%x") then
                    decode_error(str, j, "invalid unicode escape in string")
                end
                if hex:find("^[dD][89aAbB]") then
                    has_surrogate_escape = true
                else
                    has_unicode_escape = true
                end
            else
                local c = string.char(x)
                if not escape_chars[c] then
                    decode_error(str, j, "invalid escape char '" .. c .. "' in string")
                end
                has_escape = true
            end
            last = nil

        elseif x == 34 then -- '"' (end of string)
            local s = str:sub(i + 1, j - 1)
            if has_surrogate_escape then
                s = s:gsub("\\u[dD][89aAbB]..\\u....", parse_unicode_escape)
            end
            if has_unicode_escape then
                s = s:gsub("\\u....", parse_unicode_escape)
            end
            if has_escape then
                s = s:gsub("\\.", escape_char_map_inv)
            end
            return s, j + 1

        else
            last = x
        end
    end
    decode_error(str, i, "expected closing quote for string")
end

local function parse_number(str, i)
    local x = next_char(str, i, delim_chars)
    local s = str:sub(i, x - 1)
    local n = tonumber(s)
    if not n then
        decode_error(str, i, "invalid number '" .. s .. "'")
    end
    return n, x
end

local function parse_literal(str, i)
    local x = next_char(str, i, delim_chars)
    local word = str:sub(i, x - 1)
    if not literals[word] then
        decode_error(str, i, "invalid literal '" .. word .. "'")
    end
    return literal_map[word], x
end

local function parse_array(str, i)
    local res = {}
    local n = 1
    i = i + 1
    while 1 do
        local x
        i = next_char(str, i, space_chars, true)
        -- Empty / end of array?
        if str:sub(i, i) == "]" then
            i = i + 1
            break
        end
        -- Read token
        x, i = parse(str, i)
        res[n] = x
        n = n + 1
        -- Next token
        i = next_char(str, i, space_chars, true)
        local chr = str:sub(i, i)
        i = i + 1
        if chr == "]" then
            break
        end
        if chr ~= "," then
            decode_error(str, i, "expected ']' or ','")
        end
    end
    return res, i
end

local function parse_object(str, i)
    local res = {}
    i = i + 1
    while 1 do
        local key, val
        i = next_char(str, i, space_chars, true)
        -- Empty / end of object?
        if str:sub(i, i) == "}" then
            i = i + 1
            break
        end
        -- Read key
        if str:sub(i, i) ~= '"' then
            decode_error(str, i, "expected string for key")
        end
        key, i = parse(str, i)
        -- Read ':' delimiter
        i = next_char(str, i, space_chars, true)
        if str:sub(i, i) ~= ":" then
            decode_error(str, i, "expected ':' after key")
        end
        i = next_char(str, i + 1, space_chars, true)
        -- Read value
        val, i = parse(str, i)
        -- Set
        res[key] = val
        -- Next token
        i = next_char(str, i, space_chars, true)
        local chr = str:sub(i, i)
        i = i + 1
        if chr == "}" then
            break
        end
        if chr ~= "," then
            decode_error(str, i, "expected '}' or ','")
        end
    end
    return res, i
end

local char_func_map = {
    ['"'] = parse_string,
    ["0"] = parse_number,
    ["1"] = parse_number,
    ["2"] = parse_number,
    ["3"] = parse_number,
    ["4"] = parse_number,
    ["5"] = parse_number,
    ["6"] = parse_number,
    ["7"] = parse_number,
    ["8"] = parse_number,
    ["9"] = parse_number,
    ["-"] = parse_number,
    ["t"] = parse_literal,
    ["f"] = parse_literal,
    ["n"] = parse_literal,
    ["["] = parse_array,
    ["{"] = parse_object
}

parse = function(str, idx)
    local chr = str:sub(idx, idx)
    local f = char_func_map[chr]
    if f then
        return f(str, idx)
    end
    decode_error(str, idx, "unexpected character '" .. chr .. "'")
end

function json.decode(str)
    if type(str) ~= "string" then
        error("expected argument of type string, got " .. type(str))
    end
    local res, idx = parse(str, next_char(str, 1, space_chars, true))
    idx = next_char(str, idx, space_chars, true)
    if idx <= #str then
        decode_error(str, idx, "trailing garbage")
    end
    return res
end

-- â€-------------------------
-- End of json.lua
----------------------------
script_title = "ðŸ§° BadCase's Toolbox ðŸ§°\nGame: " .. gg.getTargetInfo().label .. "\nPackage: " .. gg.getTargetPackage()
dataPath = gg.EXT_STORAGE .. "/BC_DATA/"
pluginsDataPath = gg.EXT_STORAGE .. "/BC_DATA/plugins/"
configDataPath = gg.EXT_STORAGE .. "/BC_DATA/config/"
toolboxInstaller = {
    filesTable = {
        [1] = {
            file_name = "toolbox_core.lua",
            file_data = "LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQotLS0tU2VsZWN0IExpYiBTdGFydC0tLS0NCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KZnVuY3Rpb24gc2VsZWN0X2xpYigpDQogICAgbG9jYWwgbGliX25hbWVfZ2VuX3NjcmlwdCA9IHt9DQogICAgbG9jYWwgbGliX3NlbGVjdG9yID0ge30NCiAgICBsb2NhbCBsaWJfc2VsZWN0b3Jfc3RhcnQgPSB7fQ0KICAgIGxvY2FsIGxpYl9zZWxlY3Rvcl9lbmQgPSB7fQ0KICAgIGxvY2FsIGNoZWNrX2xpYnMgPSBnZy5nZXRSYW5nZXNMaXN0KCkNCiAgICBmb3IgaywgdiBpbiBwYWlycyhjaGVja19saWJzKSBkbw0KICAgICAgICBpZiBzdHJpbmcubWF0Y2goY2hlY2tfbGlic1trXVsibmFtZSJdLCAiJS5kYXQiKSBvcg0KICAgICAgICAgICAgc3RyaW5nLm1hdGNoKGNoZWNrX2xpYnNba11bIm5hbWUiXSwgIiVbc3RhY2slXSIpIG9yDQogICAgICAgICAgICBzdHJpbmcubWF0Y2goY2hlY2tfbGlic1trXVsibmFtZSJdLCAiL3ZlbmRvci8iKSBvcg0KICAgICAgICAgICAgc3RyaW5nLm1hdGNoKGNoZWNrX2xpYnNba11bIm5hbWUiXSwgIi9zeXN0ZW0vIikgb3INCiAgICAgICAgICAgIHN0cmluZy5tYXRjaChjaGVja19saWJzW2tdWyJuYW1lIl0sICIvZGV2LyIpIG9yDQogICAgICAgICAgICBzdHJpbmcubWF0Y2goY2hlY2tfbGlic1trXVsibmFtZSJdLCAiJVtoZWFwJV0iKSBvcg0KICAgICAgICAgICAgc3RyaW5nLm1hdGNoKGNoZWNrX2xpYnNba11bIm5hbWUiXSwgIiUuYXJ0Iikgb3INCiAgICAgICAgICAgIHN0cmluZy5tYXRjaChjaGVja19saWJzW2tdWyJuYW1lIl0sICJhbm9uX2lub2RlOiIpIG9yDQogICAgICAgICAgICBzdHJpbmcubWF0Y2goY2hlY2tfbGlic1trXVsibmFtZSJdLCAiZGVsZXRlZCIpIG9yDQogICAgICAgICAgICBzdHJpbmcubWF0Y2goY2hlY2tfbGlic1trXVsibmFtZSJdLCAiYW5vbjoiKSBvcg0KICAgICAgICAgICAgc3RyaW5nLm1hdGNoKGNoZWNrX2xpYnNba11bIm5hbWUiXSwgIiUudHRmIikgb3INCiAgICAgICAgICAgIHN0cmluZy5tYXRjaChjaGVja19saWJzW2tdWyJuYW1lIl0sICIuIikgPT0gbmlsIHRoZW4NCiAgICAgICAgICAgIGNoZWNrX2xpYnNba10gPSBuaWwNCiAgICAgICAgZWxzZWlmIGNoZWNrX2xpYnNba11bIm5hbWUiXTpmaW5kKCIuc28kIikgb3IgY2hlY2tfbGlic1trXVsibmFtZSJdOmZpbmQoIi5hcGskIikgIHRoZW4NCiAgICAgICAgICAgIGdldF9zaXplX2FycmF5ID0ge30NCiAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKGNoZWNrX2xpYnNba10pIGRvDQogICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGdldF9zaXplX2FycmF5LCB2KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBsb2NhbCBmaWxlX3NpemUgPSB0b251bWJlcihnZXRfc2l6ZV9hcnJheVsxXSkgLSB0b251bWJlcihnZXRfc2l6ZV9hcnJheVs2XSkNCiAgICAgICAgICAgIGxvY2FsIGZpbGVfc3RhcnQgPSB0b251bWJlcihnZXRfc2l6ZV9hcnJheVs2XSkNCiAgICAgICAgICAgIGxvY2FsIGZpbGVfZW5kID0gdG9udW1iZXIoZ2V0X3NpemVfYXJyYXlbMV0pDQogICAgICAgICAgICBpZiBmaWxlX3NpemUgPCA1MTIwMDAwIHRoZW4NCiAgICAgICAgICAgICAgICBjaGVja19saWJzW2tdID0gbmlsDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgbG9jYWwgZGl2aWRlX2J5ID0gIjEwMjQwMDAiDQogICAgICAgICAgICAgICAgbG9jYWwgc2l6ZV9tYXRoID0gdG9udW1iZXIoZmlsZV9zaXplKSAvIHRvbnVtYmVyKGRpdmlkZV9ieSkNCiAgICAgICAgICAgICAgICBsb2NhbCBzaXplX2Rpc3BsYXkgPSBzaXplX21hdGggLi4gIk1CIg0KICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChsaWJfbmFtZV9nZW5fc2NyaXB0LCBjaGVja19saWJzW2tdWyJuYW1lIl0pDQogICAgICAgICAgICAgICAgbG9jYWwgZmxpYm5hbWUgPSBjaGVja19saWJzW2tdWyJuYW1lIl0NCiAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2WyJuYW1lIl0sICJsaWJpbDJjcHAuc28iKSBvciBzdHJpbmcuZmluZCh2WyJuYW1lIl0sICJzcGxpdF9jb25maWcuYXJtZWFiaV92N2EuYXBrIikgb3INCiAgICAgICAgICAgICAgICAgICAgc3RyaW5nLmZpbmQodlsibmFtZSJdLCAic3BsaXRfY29uZmlnLmFybTY0X3Y4YS5hcGsiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIG1lbnVfc3RyaW5nID0gIuOAsO+4j+OAsO+4j+OAsO+4j+OAsO+4j+OAsO+4j+OAsO+4j+OAsO+4j+OAsO+4j+OAsO+4j+OAsO+4j+OAsO+4j+OAsO+4j1xuTmFtZTogIiAuLg0KICAgICAgICAgICAgICAgICAgICAgICAgdlsibmFtZSJdIC4uICJcblJhbmdlOiAiIC4uIHYuc3RhdGUgLi4gIlxuU3RhcnQgQWRkcmVzczogIiAuLg0KICAgICAgICAgICAgICAgICAgICAgICAgaGV4X28oZ2V0X3NpemVfYXJyYXlbNl0pIC4uICJcbkVuZCBBZGRyZXNzOiAiIC4uIGhleF9vKGdldF9zaXplX2FycmF5WzFdKSAuLg0KICAgICAgICAgICAgICAgICAgICAgICAgIlxuU2l6ZTogIiAuLiBzaXplX2Rpc3BsYXkgLi4gIlxu44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iPIg0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgbWVudV9zdHJpbmcgPSAi4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBXG5OYW1lOiAiIC4uIHZbIm5hbWUiXSAuLiAiXG5SYW5nZTogIiAuLiB2LnN0YXRlIC4uDQogICAgICAgICAgICAgICAgICAgICAgICAiXG5TdGFydCBBZGRyZXNzOiAiIC4uIGhleF9vKGdldF9zaXplX2FycmF5WzZdKSAuLiAiXG5FbmQgQWRkcmVzczogIiAuLg0KICAgICAgICAgICAgICAgICAgICAgICAgaGV4X28oZ2V0X3NpemVfYXJyYXlbMV0pIC4uICJcblNpemU6ICIgLi4gc2l6ZV9kaXNwbGF5IC4uICJcbuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSINCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZChmbGlibmFtZSwgIi0iKSBhbmQgc3RyaW5nLmZpbmQoZmxpYm5hbWUsICI9PSIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgbGliX3NlYXJjaCA9IHN0cmluZy5maW5kKGZsaWJuYW1lLCAiLSIpDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGxpYl9zZWFyY2gyID0gc3RyaW5nLmZpbmQoZmxpYm5hbWUsICI9PSIpDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGxpYm5hbWVfcGFydDEgPSBzdHJpbmcuc3ViKGZsaWJuYW1lLCAxLCBsaWJfc2VhcmNoIC0gMSkNCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgbGlibmFtZV9wYXJ0MiA9IHN0cmluZy5zdWIoZmxpYm5hbWUsIGxpYl9zZWFyY2gyICsgMikNCiAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGxpYl9zZWxlY3RvciwgbWVudV9zdHJpbmcpDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQobGliX3NlbGVjdG9yLCBtZW51X3N0cmluZykNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQobGliX3NlbGVjdG9yX3N0YXJ0LCBmaWxlX3N0YXJ0KQ0KICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChsaWJfc2VsZWN0b3JfZW5kLCBmaWxlX2VuZCkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCiAgICA6OnNlbGVjdF9saWI6Og0KICAgIGxvY2FsIGggPSBnZy5jaG9pY2UobGliX3NlbGVjdG9yLCBuaWwsIHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBTZWxlY3QgbGliaWwyY3BwLnNvIExpYnJhcnkg4oS577iPIikNCiAgICBpZiBoID09IG5pbCB0aGVuDQogICAgICAgIGdvdG8gc2VsZWN0X2xpYg0KICAgIGVsc2UNCiAgICAgICAgbG9jYWwgbGliX25hbWUgPSBsaWJfbmFtZV9nZW5fc2NyaXB0W2hdDQogICAgICAgIGZvciBzdHIgaW4gc3RyaW5nLmdtYXRjaChsaWJfbmFtZSwgIihbXi9dKykiKSBkbw0KICAgICAgICAgICAgZml4ZWRfbGliX25hbWUgPSBzdHINCiAgICAgICAgZW5kDQogICAgICAgIEJBU0VBRERSID0gbGliX3NlbGVjdG9yX3N0YXJ0W2hdDQogICAgICAgIGlmIGxpYl9zZWxlY3RvcltoICsgMl0gYW5kIHN0cmluZy5nc3ViKGxpYl9zZWxlY3RvcltoXSwgIiguK3NvICkuKyIsICIlMSIpID09IHN0cmluZy5nc3ViKGxpYl9zZWxlY3RvcltoICsgMl0sICIoLitzbyApLisiLCAiJTEiKSB0aGVuDQogICAgICAgICAgICBFTkRBRERSID0gbGliX3NlbGVjdG9yX2VuZFtoICsgMl0NCiAgICAgICAgZWxzZWlmIHN0cmluZy5nc3ViKGxpYl9zZWxlY3RvcltoXSwgIiguK3NvICkuKyIsICIlMSIpID09IHN0cmluZy5nc3ViKGxpYl9zZWxlY3RvcltoICsgMV0sICIoLitzbyApLisiLCAiJTEiKSB0aGVuDQogICAgICAgICAgICBFTkRBRERSID0gbGliX3NlbGVjdG9yX2VuZFtoICsgMV0NCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgRU5EQUREUiA9IGxpYl9zZWxlY3Rvcl9lbmRbaF0NCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgZ2cudG9hc3QoIuKchSAiIC4uIGZpeGVkX2xpYl9uYW1lIC4uICIgU2VsZWN0ZWQg4pyFIikNCiAgICA6OmVuZF9zZWxlY3Q6Og0KZW5kDQoNCmZ1bmN0aW9uIGhleF9vKG4pDQogICAgcmV0dXJuICIweCIgLi4gc3RyaW5nLnVwcGVyKHN0cmluZy5mb3JtYXQoIiV4IiwgbikpDQplbmQNCg0KZnVuY3Rpb24gaGV4bngobikNCiAgICByZXR1cm4gc3RyaW5nLmZvcm1hdCgiJVgiLCBuKQ0KZW5kDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLS0tLS1TZWxlY3QgTGliIEVuZC0tLS0tDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0Kc2NyaXB0X3RpdGxlID0gIvCfp7AgQmFkQ2FzZSdzIFRvb2xib3gg8J+nsFxuR2FtZTogIiAuLiBnZy5nZXRUYXJnZXRJbmZvKCkubGFiZWwgLi4gIlxuUGFja2FnZTogIiAuLiBnZy5nZXRUYXJnZXRQYWNrYWdlKCkNCmRhdGFQYXRoID0gZ2cuRVhUX1NUT1JBR0UgLi4gIi9CQ19EQVRBLyINCnBsdWdpbnNEYXRhUGF0aCA9IGdnLkVYVF9TVE9SQUdFIC4uICIvQkNfREFUQS9wbHVnaW5zLyINCmNvbmZpZ0RhdGFQYXRoID0gZ2cuRVhUX1NUT1JBR0UgLi4gIi9CQ19EQVRBL2NvbmZpZy8iDQphcmNoID0gZ2cuZ2V0VGFyZ2V0SW5mbygpDQpnYW1lX3BhdGggPSBnZy5nZXRUYXJnZXRQYWNrYWdlKCkNCmR1bXBfY3NfdGFibGUgPSB7fQ0KYmNfdG9vbGJveF9tZXRob2RfdHlwZXMgPSB7fQ0KYmNfdG9vbGJveF9tZXRob2RfdHlwZXNfYWxsID0ge30NCnNhdmVfZHVtcCA9IGZhbHNlDQpkdW1wSGFuZGxlciA9IHsNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJZHVtcEhhbmRsZXIuY3JlYXRlRGlyZWN0b3J5KCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAgLS0NCiAgICBjcmVhdGVEaXJlY3RvcnkgPSBmdW5jdGlvbigpDQogICAgICAgIGRpcmVjdG9yeV9jcmVhdGVkID0gdHJ1ZQ0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhnZy5nZXRSYW5nZXNMaXN0KCkpIGRvDQogICAgICAgICAgICBpZiB2WyJlbmQiXSAtIHYuc3RhcnQgPCAxMDI0MCB0aGVuDQogICAgICAgICAgICAgICAgaWYgbm90IHN0cmluZy5maW5kKHZbIm5hbWUiXSwgImRlbGV0ZWQiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGNyZWF0ZV9zdGFydCA9IHYuc3RhcnQNCiAgICAgICAgICAgICAgICAgICAgY3JlYXRlX2VuZCA9IHZbImVuZCJdDQogICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGdnLmR1bXBNZW1vcnkoY3JlYXRlX3N0YXJ0LCBjcmVhdGVfZW5kLCBkYXRhUGF0aCAuLiBnYW1lX3BhdGggLi4gIi8iLCBnZy5EVU1QX1NLSVBfU1lTVEVNX0xJQlMpDQogICAgICAgIGdnLmR1bXBNZW1vcnkoY3JlYXRlX3N0YXJ0LCBjcmVhdGVfZW5kLCBkYXRhUGF0aCAuLiBnYW1lX3BhdGggLi4gIi9zY3JpcHRzLyIsIGdnLkRVTVBfU0tJUF9TWVNURU1fTElCUykNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWR1bXBIYW5kbGVyLmltcG9ydER1bXAoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dICAtLQ0KICAgIGltcG9ydER1bXAgPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIHN0YXJ0VGltZSA9IG9zLnRpbWUoKQ0KICAgICAgICBsb2NhbCBmaWxlTmFtZSA9IGdnLnByb21wdCh7ICLihLnvuI8gU2VsZWN0IER1bXAuY3Mg4oS577iPIiB9LCBuaWwsIHsgImZpbGUiIH0pDQogICAgICAgIGlmIGZpbGVOYW1lIH49IG5pbCB0aGVuDQogICAgICAgICAgICBsb2NhbCB0ZW1wRHVtcFRhYmxlID0ge30NCiAgICAgICAgICAgIGxvY2FsIGZpbGUgPSBhc3NlcnQoaW8ub3BlbihmaWxlTmFtZVsxXSwgInIiKSkNCiAgICAgICAgICAgIGxvY2FsIGNvbnRlbnQgPSBmaWxlOnJlYWQoIiphIikNCiAgICAgICAgICAgIGZpbGU6Y2xvc2UoKQ0KICAgICAgICAgICAgbG9jYWwgZGVsaW1pdGVyID0gIlxuIg0KICAgICAgICAgICAgZm9yIG1hdGNoIGluIChjb250ZW50IC4uIGRlbGltaXRlcik6Z21hdGNoKCIoLi0pIiAuLiBkZWxpbWl0ZXIpIGRvDQogICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHRlbXBEdW1wVGFibGUsIG1hdGNoKTsNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgbG9jYWwgdGVtcF9kdW1wX2NzX3RhYmxlID0ge30NCiAgICAgICAgICAgIGlmIHRlbXBEdW1wVGFibGVbMV06ZmluZCgiLyUqIikgdGhlbg0KICAgICAgICAgICAgICAgIGxvY2FsIGN1cnJlbnRfbmFtZXNwYWNlID0gIkdsb2JhbCINCiAgICAgICAgICAgICAgICBsb2NhbCBjYXB0dXJpbmdfZmllbGRzID0gZmFsc2UNCiAgICAgICAgICAgICAgICBsb2NhbCBjYXB0dXJpbmdfZW51bXMgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIGxvY2FsIGNhcHR1cmluZ19tZXRob2RzID0gZmFsc2UNCiAgICAgICAgICAgICAgICBsb2NhbCBjYXB0dXJpbmdfcHJvcGVydGllcyA9IGZhbHNlDQogICAgICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnModGVtcER1bXBUYWJsZSkgZG8NCiAgICAgICAgICAgICAgICAgICAgaWYgdjpmaW5kKCJebmFtZXNwYWNlIC4rIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9uYW1lc3BhY2UgPSB2OmdzdWIoIl5uYW1lc3BhY2UgKC4rKSIsICIlMSIpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiB2OmZpbmQoIgkuKyBjbGFzcyAuKyAvLyBUeXBlRGVmSW5kZXguKyIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfY2xhc3MgPSB2OmdzdWIoIiguKykgLy8gLisiLCAiJTEiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHRlbXBfZHVtcF9jc190YWJsZSwgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzID0gY3VycmVudF9jbGFzcywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2UgPSBjdXJyZW50X25hbWVzcGFjZQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIHY6ZmluZCgiLisgY2xhc3MgLisgLy8gVHlwZURlZkluZGV4LisiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50X25hbWVzcGFjZSA9ICJHbG9iYWwiDQogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50X2NsYXNzID0gdjpnc3ViKCIoLispIC8vIC4rIiwgIiUxIikNCiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydCh0ZW1wX2R1bXBfY3NfdGFibGUsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcyA9IGN1cnJlbnRfY2xhc3MsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlID0gY3VycmVudF9uYW1lc3BhY2UNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiB2OmZpbmQoIgkuKyBzdHJ1Y3QgLisgLy8gVHlwZURlZkluZGV4LisiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50X2NsYXNzID0gdjpnc3ViKCIoLispIC8vIC4rIiwgIiUxIikNCiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydCh0ZW1wX2R1bXBfY3NfdGFibGUsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgPSBjdXJyZW50X2NsYXNzLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZSA9IGN1cnJlbnRfbmFtZXNwYWNlDQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICBlbHNlaWYgdjpmaW5kKCIuKyBzdHJ1Y3QgLisgLy8gVHlwZURlZkluZGV4LisiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50X25hbWVzcGFjZSA9ICJHbG9iYWwiDQogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50X2NsYXNzID0gdjpnc3ViKCIoLispIC8vIC4rIiwgIiUxIikNCiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydCh0ZW1wX2R1bXBfY3NfdGFibGUsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgPSBjdXJyZW50X2NsYXNzLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZSA9IGN1cnJlbnRfbmFtZXNwYWNlDQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICBlbHNlaWYgdjpmaW5kKCIJLisgZW51bSAuKyAvLyBUeXBlRGVmSW5kZXguKyIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfY2xhc3MgPSB2OmdzdWIoIiguKykgLy8gLisiLCAiJTEiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgY2FwdHVyaW5nX2VudW1zID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHRlbXBfZHVtcF9jc190YWJsZSwgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudW0gPSBjdXJyZW50X2NsYXNzLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZSA9IGN1cnJlbnRfbmFtZXNwYWNlDQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGVtcF9kdW1wX2NzX3RhYmxlWyN0ZW1wX2R1bXBfY3NfdGFibGVdLmZpZWxkcyA9IHt9DQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiB2OmZpbmQoIi4rIGVudW0gLisgLy8gVHlwZURlZkluZGV4LisiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50X25hbWVzcGFjZSA9ICJHbG9iYWwiDQogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50X2NsYXNzID0gdjpnc3ViKCIoLispIC8vIC4rIiwgIiUxIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmluZ19lbnVtcyA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydCh0ZW1wX2R1bXBfY3NfdGFibGUsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnVtID0gY3VycmVudF9jbGFzcywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2UgPSBjdXJyZW50X25hbWVzcGFjZQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBfZHVtcF9jc190YWJsZVsjdGVtcF9kdW1wX2NzX3RhYmxlXS5maWVsZHMgPSB7fQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgY2FwdHVyaW5nX2ZpZWxkcyA9PSB0cnVlIGFuZCAodjpmaW5kKCJ9Iikgb3IgdjpmaW5kKCIvLyBbQS1aXSIpKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJpbmdfZmllbGRzID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIHY6ZmluZCgiLy8gRmllbGRzIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgY2FwdHVyaW5nX2ZpZWxkcyA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBfZHVtcF9jc190YWJsZVsjdGVtcF9kdW1wX2NzX3RhYmxlXS5maWVsZHMgPSB7fQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgY2FwdHVyaW5nX21ldGhvZHMgPT0gdHJ1ZSBhbmQgdjpmaW5kKCJ9IikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgY2FwdHVyaW5nX21ldGhvZHMgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgdjpmaW5kKCIvLyBNZXRob2RzIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgY2FwdHVyaW5nX21ldGhvZHMgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgdGVtcF9kdW1wX2NzX3RhYmxlWyN0ZW1wX2R1bXBfY3NfdGFibGVdLm1ldGhvZHMgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBfZHVtcF9jc190YWJsZVsjdGVtcF9kdW1wX2NzX3RhYmxlXS5tZXRob2RzID0ge30NCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgY2FwdHVyaW5nX2VudW1zID09IHRydWUgYW5kIHY6ZmluZCgifSIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmluZ19lbnVtcyA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBjYXB0dXJpbmdfcHJvcGVydGllcyA9PSB0cnVlIGFuZCB2OmZpbmQoIi8vIFtBLVpdIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgY2FwdHVyaW5nX3Byb3BlcnRpZXMgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgdjpmaW5kKCIvLyBQcm9wZXJ0aWVzIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgY2FwdHVyaW5nX3Byb3BlcnRpZXMgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgdGVtcF9kdW1wX2NzX3RhYmxlWyN0ZW1wX2R1bXBfY3NfdGFibGVdLm1ldGhvZHMgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBfZHVtcF9jc190YWJsZVsjdGVtcF9kdW1wX2NzX3RhYmxlXS5tZXRob2RzID0ge30NCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgY2FwdHVyaW5nX3Byb3BlcnRpZXMgPT0gdHJ1ZSBhbmQgdjpmaW5kKCJDb21waWxlckdlbmVyYXRlZCIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZF9uYW1lX2dldCA9IHY6Z3N1YigiKC4rICkoLispIHsuKyIsICIlMWdldF8lMigpIHsgfSIpDQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RfdHlwZV9nZXQgPSB2OmdzdWIoIi4rICguKykgKC4rIHspLisiLCAiJTEiKTpnc3ViKCJbPj8lWyVdXSIsICIiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kX29mZnNldF9nZXQgPSB2OmdzdWIoIi4rfSAvLyAoLispIiwgIiUxIik6Z3N1YigiKC4rKS0uKyAuKyIsICIlMSIpDQogICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQodGVtcF9kdW1wX2NzX3RhYmxlWyN0ZW1wX2R1bXBfY3NfdGFibGVdLm1ldGhvZHMsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Rfb2Zmc2V0ID0gbWV0aG9kX29mZnNldF9nZXQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kX25hbWUgPSBtZXRob2RfbmFtZV9nZXQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kX3R5cGUgPSBtZXRob2RfdHlwZV9nZXQNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RfbmFtZV9zZXQgPSB2OmdzdWIoIiguKyApKC4rKSAoLispIHsuKyIsICIlMXZvaWQgc2V0XyUzKCUyIHZhbHVlKSB7IH0iKQ0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kX3R5cGVfc2V0ID0gInZvaWQiDQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Rfb2Zmc2V0X3NldCA9IHY6Z3N1YigiLit9IC8vICguKykiLCAiJTEiKTpnc3ViKCIuKy0uKyAoLispLS4rIiwgIiUxIikNCiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydCh0ZW1wX2R1bXBfY3NfdGFibGVbI3RlbXBfZHVtcF9jc190YWJsZV0ubWV0aG9kcywgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZF9vZmZzZXQgPSBtZXRob2Rfb2Zmc2V0X3NldCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RfbmFtZSA9IG1ldGhvZF9uYW1lX3NldCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RfdHlwZSA9IG1ldGhvZF90eXBlX3NldA0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGNhcHR1cmluZ19wcm9wZXJ0aWVzID09IHRydWUgYW5kIHY6ZmluZCgieyBnZXQ7IH0iKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RfbmFtZV9nZXQgPSB2OmdzdWIoIiguKyApKC4rKSB7LisiLCAiJTFnZXRfJTIoKSB7IH0iKQ0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kX3R5cGVfZ2V0ID0gdjpnc3ViKCIuKyAoLispICguKyB7KS4rIiwgIiUxIik6Z3N1YigiWz4/JVslXV0iLCAiIikNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZF9vZmZzZXRfZ2V0ID0gdjpnc3ViKCIuK30gLy8gKC4rKSIsICIlMSIpOmdzdWIoIiguKyktLisiLCAiJTEiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHRlbXBfZHVtcF9jc190YWJsZVsjdGVtcF9kdW1wX2NzX3RhYmxlXS5tZXRob2RzLCB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kX29mZnNldCA9IG1ldGhvZF9vZmZzZXRfZ2V0LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZF9uYW1lID0gbWV0aG9kX25hbWVfZ2V0LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZF90eXBlID0gbWV0aG9kX3R5cGVfZ2V0DQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICBlbHNlaWYgY2FwdHVyaW5nX3Byb3BlcnRpZXMgPT0gdHJ1ZSBhbmQgdjpmaW5kKCJ7IHNldDsgfSIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZF9uYW1lX3NldCA9IHY6Z3N1YigiKC4rICkoLispICguKykgey4rIiwgIiUxdm9pZCBzZXRfJTMoJTIgdmFsdWUpIHsgfSIpDQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RfdHlwZV9zZXQgPSAidm9pZCINCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZF9vZmZzZXRfc2V0ID0gdjpnc3ViKCIuK30gLy8gKC4rKSIsICIlMSIpOmdzdWIoIiguKyktLisiLCAiJTEiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHRlbXBfZHVtcF9jc190YWJsZVsjdGVtcF9kdW1wX2NzX3RhYmxlXS5tZXRob2RzLCB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kX29mZnNldCA9IG1ldGhvZF9vZmZzZXRfc2V0LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZF9uYW1lID0gbWV0aG9kX25hbWVfc2V0LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZF90eXBlID0gbWV0aG9kX3R5cGVfc2V0DQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgY2FwdHVyaW5nX21ldGhvZHMgPT0gdHJ1ZSBhbmQgdjpmaW5kKCIlKTsgLy8gMHgiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBtZXRob2Rfb2Zmc2V0ID0gdjpnc3ViKCIuKy8vICguKyktLisiLCAiJTEiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgbWV0aG9kX25hbWUgPSB2OmdzdWIoIiguKyk7LisiLCAiJTEiKTpnc3ViKCIJIiwgIiIpDQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBtZXRob2RfdHlwZSA9ICIiDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBtZXRob2RfbmFtZTpmaW5kKCIgc3RhdGljICIpIG9yIG1ldGhvZF9uYW1lOmZpbmQoIiBvdmVycmlkZSAiKSBvcg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZF9uYW1lOmZpbmQoIiBpbnRlcm5hbCAiKSBvciBtZXRob2RfbmFtZTpmaW5kKCIgdmlydHVhbCAiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kX3R5cGUgPSBtZXRob2RfbmFtZTpnc3ViKCIuKyAuKyAoLispIC4rJSguKyIsICIlMSIpOmdzdWIoIlsJKiVbJV1dIiwgIiIpOmdzdWIoIls+LF0iLCAiIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RfdHlwZSA9IG1ldGhvZF9uYW1lOmdzdWIoIi4rICguKykgLislKC4rIiwgIiUxIik6Z3N1YigiWwkqJVslXV0iLCAiIik6Z3N1YigiWz4sXSIsICIiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQodGVtcF9kdW1wX2NzX3RhYmxlWyN0ZW1wX2R1bXBfY3NfdGFibGVdLm1ldGhvZHMsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Rfb2Zmc2V0ID0gbWV0aG9kX29mZnNldCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RfbmFtZSA9IG1ldGhvZF9uYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZF90eXBlID0gbWV0aG9kX3R5cGUNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBjYXB0dXJpbmdfZW51bXMgPT0gdHJ1ZSBhbmQgdjpmaW5kKCJbQS1aYS16MC05XSsgPSIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGVudW1fdmFsdWUgPSB2OmdzdWIoIi4rID0gKC4rKSIsICIlMSIpOmdzdWIoIiwiLCAiIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGVudW1fbmFtZSA9IHY6Z3N1YigiKFtBLVphLXpdKykgPSAuKyIsICIlMSIpOmdzdWIoIgkiLCAiIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGVudW1fdHlwZSA9ICIiDQogICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQodGVtcF9kdW1wX2NzX3RhYmxlWyN0ZW1wX2R1bXBfY3NfdGFibGVdLmZpZWxkcywgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudW1fdHlwZSA9IGVudW1fdHlwZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnVtX3ZhbHVlID0gZW51bV92YWx1ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnVtX25hbWUgPSBlbnVtX25hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBjYXB0dXJpbmdfZmllbGRzID09IHRydWUgYW5kIHY6ZmluZCgiOyAvLyAweCIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGZpZWxkX3R5cGUgPSAiIg0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZmllbGRfb2Zmc2V0ID0gIiINCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGZpZWxkX25hbWUgPSAiIg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjpmaW5kKCIgc3RhdGljICIpIG9yIHY6ZmluZCgiIHJlYWRvbmx5ICIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF90eXBlID0gdjpnc3ViKCIuKyAuKyAoLispIC4rOyAvLyAweC4rIiwgIiUxIik6Z3N1YigiWwkqJVslXV0iLCAiIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF9vZmZzZXQgPSB2OmdzdWIoIi4rIC4rIC4rIC4rOyAvLyAoMHguKykiLCAiJTEiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX25hbWUgPSB2OmdzdWIoIi4rIC4rIC4rICguKyk7IC8vIDB4LisiLCAiJTEiKTpnc3ViKCIJIiwgIiIpDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfdHlwZSA9IHY6Z3N1YigiLisgKC4rKSAuKzsgLy8gMHguKyIsICIlMSIpOmdzdWIoIlsJKiVbJV1dIiwgIiIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfb2Zmc2V0ID0gdjpnc3ViKCIuKyAuKyAuKzsgLy8gKDB4LispIiwgIiUxIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF9uYW1lID0gdjpnc3ViKCIuKyAuKyAoLispOyAvLyAweC4rIiwgIiUxIik6Z3N1YigiCSIsICIiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQodGVtcF9kdW1wX2NzX3RhYmxlWyN0ZW1wX2R1bXBfY3NfdGFibGVdLmZpZWxkcywgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX3R5cGUgPSBmaWVsZF90eXBlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX29mZnNldCA9IGZpZWxkX29mZnNldCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF9uYW1lID0gZmllbGRfbmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnModGVtcER1bXBUYWJsZSkgZG8NCiAgICAgICAgICAgICAgICAgICAgaWYgdjpmaW5kKCIgTmFtZXNwYWNlOiIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmluZyA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJpbmdfZmllbGRzID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmluZ19tZXRob2RzID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRlbXBEdW1wVGFibGVbaSArIDFdOmZpbmQoIi4rIGNsYXNzIC4rIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmluZyA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wX2R1bXBfY3NfdGFibGVbI3RlbXBfZHVtcF9jc190YWJsZSArIDFdID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2UgPSB0ZW1wRHVtcFRhYmxlW2ldLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcyA9IHRlbXBEdW1wVGFibGVbaSArIDFdDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIHRlbXBEdW1wVGFibGVbaSArIDFdOmZpbmQoIi4rIHN0cnVjdCAuKyIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJpbmcgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcF9kdW1wX2NzX3RhYmxlWyN0ZW1wX2R1bXBfY3NfdGFibGUgKyAxXSA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlID0gdGVtcER1bXBUYWJsZVtpXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0ID0gdGVtcER1bXBUYWJsZVtpICsgMV0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgdGVtcER1bXBUYWJsZVtpICsgMV06ZmluZCgiLisgZW51bSAuKyIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJpbmcgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcF9kdW1wX2NzX3RhYmxlWyN0ZW1wX2R1bXBfY3NfdGFibGUgKyAxXSA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlID0gdGVtcER1bXBUYWJsZVtpXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bSA9IHRlbXBEdW1wVGFibGVbaSArIDFdDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBjYXB0dXJpbmcgPT0gdHJ1ZSBhbmQgdjpmaW5kKCIvLyBNZXRob2RzIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgdGVtcF9kdW1wX2NzX3RhYmxlWyN0ZW1wX2R1bXBfY3NfdGFibGVdLm1ldGhvZHMgPSB7fQ0KICAgICAgICAgICAgICAgICAgICAgICAgY2FwdHVyaW5nX21ldGhvZHMgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJpbmdfZmllbGRzID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIHY6ZmluZCgiLy8gUHJvcGVydGllcyIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmluZ19maWVsZHMgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgY2FwdHVyaW5nX2ZpZWxkcyA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICN2ID4gMCBhbmQgdjpmaW5kKCIgLy8gMHgiKSBhbmQgdGVtcF9kdW1wX2NzX3RhYmxlWyN0ZW1wX2R1bXBfY3NfdGFibGVdLmNsYXNzIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBmaWVsZF90eXBlID0gIiINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBmaWVsZF9vZmZzZXQgPSAiIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGZpZWxkX25hbWUgPSAiIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHY6ZmluZCgiIHN0YXRpYyAiKSBvciB2OmZpbmQoIiByZWFkb25seSAiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX3R5cGUgPSB2OmdzdWIoIi4rIC4rICguKykgLis7IC8vIDB4LisiLCAiJTEiKTpnc3ViKCJbCSolWyVdXSIsICIiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF9vZmZzZXQgPSB2OmdzdWIoIi4rIC4rIC4rIC4rOyAvLyAoMHguKykiLCAiJTEiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF9uYW1lID0gdjpnc3ViKCIuKyAuKyAuKyAoLispOyAvLyAweC4rIiwgIiUxIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX3R5cGUgPSB2OmdzdWIoIi4rICguKykgLis7IC8vIDB4LisiLCAiJTEiKTpnc3ViKCJbCSolWyVdXSIsICIiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF9vZmZzZXQgPSB2OmdzdWIoIi4rIC4rIC4rOyAvLyAoMHguKykiLCAiJTEiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF9uYW1lID0gdjpnc3ViKCIuKyAuKyAoLispOyAvLyAweC4rIiwgIiUxIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQodGVtcF9kdW1wX2NzX3RhYmxlWyN0ZW1wX2R1bXBfY3NfdGFibGVdLmZpZWxkcywgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF90eXBlID0gZmllbGRfdHlwZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfb2Zmc2V0ID0gZmllbGRfb2Zmc2V0LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF9uYW1lID0gZmllbGRfbmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgI3YgPiAwIGFuZCB2OmZpbmQoIiAlPSAiKSBhbmQgdGVtcF9kdW1wX2NzX3RhYmxlWyN0ZW1wX2R1bXBfY3NfdGFibGVdLmVudW0gdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGZpZWxkX3R5cGUgPSAiIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGZpZWxkX3ZhbHVlID0gIiINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBmaWVsZF9uYW1lID0gIiINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF90eXBlID0gdjpnc3ViKCIuKyBjb25zdCAoLispIC4rICU9IFslLTAtOV0rOyIsICIlMSIpOmdzdWIoIlsJKiVbJV1dIiwgIiIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfdmFsdWUgPSB2OmdzdWIoIi4rIGNvbnN0IC4rIC4rICU9IChbJS0wLTldKyk7IiwgIiUxIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF9uYW1lID0gdjpnc3ViKCIuKyBjb25zdCAuKyAoLispICU9IFslLTAtOV0rOyIsICIlMSIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHRlbXBfZHVtcF9jc190YWJsZVsjdGVtcF9kdW1wX2NzX3RhYmxlXS5maWVsZHMsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bV90eXBlID0gZmllbGRfdHlwZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bV92YWx1ZSA9IGZpZWxkX3ZhbHVlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnVtX25hbWUgPSBmaWVsZF9uYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgY2FwdHVyaW5nX21ldGhvZHMgPT0gdHJ1ZSBhbmQgdjpmaW5kKCIJLy8gUlZBOiIpIGFuZCB2OmZpbmQoIiBWQTogIikgYW5kIHY6ZmluZCgiTW92ZU5leHQiKSA9PQ0KICAgICAgICAgICAgICAgICAgICAgICAgbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmluZ19maWVsZHMgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgbWV0aG9kX29mZnNldCA9IHRlbXBEdW1wVGFibGVbaV06Z3N1YigiLisvLyBSVkE6ICgweFtBLVphLXowLTldKykgLis6IC4rIiwgIiUxIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIG1ldGhvZF9uYW1lID0gdGVtcER1bXBUYWJsZVtpICsgMV06Z3N1YigiCSIsICIiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgbWV0aG9kX3R5cGUgPSAiIg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbWV0aG9kX25hbWU6ZmluZCgiIHN0YXRpYyAiKSBvciBtZXRob2RfbmFtZTpmaW5kKCIgb3ZlcnJpZGUgIikgb3INCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RfbmFtZTpmaW5kKCIgaW50ZXJuYWwgIikgb3IgbWV0aG9kX25hbWU6ZmluZCgiIHZpcnR1YWwgIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZF90eXBlID0gbWV0aG9kX25hbWU6Z3N1YigiLisgLisgKC4rKSAuKyUoLisiLCAiJTEiKTpnc3ViKCJbCSolWyVdXSIsICIiKTpnc3ViKCJbPixdIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiIpDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kX3R5cGUgPSBtZXRob2RfbmFtZTpnc3ViKCIuKyAoLispIC4rJSguKyIsICIlMSIpOmdzdWIoIlsJKiVbJV1dIiwgIiIpOmdzdWIoIls+LF0iLCAiIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHRlbXBfZHVtcF9jc190YWJsZVsjdGVtcF9kdW1wX2NzX3RhYmxlXS5tZXRob2RzLCB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kX29mZnNldCA9IG1ldGhvZF9vZmZzZXQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kX25hbWUgPSBtZXRob2RfbmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RfdHlwZSA9IG1ldGhvZF90eXBlDQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgY2FwdHVyaW5nID09IHRydWUgYW5kIHRlbXBEdW1wVGFibGVbaV06ZmluZCgiLy8gRmllbGRzIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgdGVtcF9kdW1wX2NzX3RhYmxlWyN0ZW1wX2R1bXBfY3NfdGFibGVdLmZpZWxkcyA9IHt9DQogICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJpbmdfZmllbGRzID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZHVtcF9jc190YWJsZSA9IHRlbXBfZHVtcF9jc190YWJsZQ0KICAgICAgICBlbmQNCiAgICAgICAgc2F2ZV9kdW1wID0gdHJ1ZQ0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJZHVtcEhhbmRsZXIuc2F2ZUpTT04oKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dICAtLQ0KICAgIHNhdmVKU09OID0gZnVuY3Rpb24oKQ0KICAgICAgICBmaWxlID0gaW8ub3BlbihkYXRhUGF0aCAuLiBnYW1lX3BhdGggLi4gIi9wcm9jZXNzZWRfZHVtcF8iIC4uIGdnLmdldFRhcmdldEluZm8oKS52ZXJzaW9uTmFtZSAuLiAiLmpzb24iLCAidysiKQ0KICAgICAgICBmaWxlOndyaXRlKGpzb24uZW5jb2RlKGR1bXBfY3NfdGFibGUpKQ0KICAgICAgICBmaWxlOmNsb3NlKCkNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWR1bXBIYW5kbGVyLmxvYWRKU09OKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAgLS0NCiAgICBsb2FkSlNPTiA9IGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgZmlsZSA9IGFzc2VydChpby5vcGVuKGRhdGFQYXRoIC4uIGdhbWVfcGF0aCAuLiAiL3Byb2Nlc3NlZF9kdW1wXyIgLi4gZ2cuZ2V0VGFyZ2V0SW5mbygpLnZlcnNpb25OYW1lIC4uICIuanNvbiIsICJyIikpDQogICAgICAgIGxvY2FsIGNvbnRlbnQgPSBmaWxlOnJlYWQoIiphIikNCiAgICAgICAgZmlsZTpjbG9zZSgpDQogICAgICAgIGR1bXBfY3NfdGFibGUgPSBqc29uLmRlY29kZShjb250ZW50KQ0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJZHVtcEhhbmRsZXIubG9hZER1bXBEYXRhKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAgLS0NCiAgICBsb2FkRHVtcERhdGEgPSBmdW5jdGlvbigpDQogICAgICAgIGlmICNkdW1wX2NzX3RhYmxlID09IDAgdGhlbg0KICAgICAgICAgICAgc2VsZWN0X2xpYigpDQogICAgICAgICAgICBpZiBwY2FsbChkdW1wSGFuZGxlci5sb2FkSlNPTikgPT0gZmFsc2UgdGhlbg0KICAgICAgICAgICAgICAgIGR1bXBIYW5kbGVyLmNyZWF0ZURpcmVjdG9yeSgpDQogICAgICAgICAgICAgICAgZHVtcEhhbmRsZXIuaW1wb3J0RHVtcCgpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGxvY2FsIHRlbXBfdHlwZXMgPSB7fQ0KICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoZHVtcF9jc190YWJsZSkgZG8NCiAgICAgICAgICAgICAgICBpZiB2Lm1ldGhvZHMgdGhlbg0KICAgICAgICAgICAgICAgICAgICBmb3IgaW5kZXgsIHZhbHVlIGluIHBhaXJzKHYubWV0aG9kcykgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCB0ZW1wX3R5cGVzW3ZhbHVlLm1ldGhvZF90eXBlXSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcF90eXBlc1t2YWx1ZS5tZXRob2RfdHlwZV0gPSB2YWx1ZS5tZXRob2RfdHlwZQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBsb2NhbCBhbHdheXNfYWRkID0geyAiQm9vbGVhbiIsICJTaW5nbGUiLCAiRG91YmxlIiwgIkludDE2IiwgIkludDMyIiwgIkludDY0IiwgIlVJbnQxNiIsICJVSW50MzIiLCAiVUludDY0IiwgIlN0cmluZyIsICJCeXRlIiwgIlNCeXRlIiwgIkNoYXIiLCAiVm9pZCIgfQ0KICAgICAgICAgICAgZm9yIGssIHYgaW4gcGFpcnModGVtcF90eXBlcykgZG8NCiAgICAgICAgICAgICAgICBsb2NhbCBhZGRlZCA9IGZhbHNlDQogICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGJjX3Rvb2xib3hfbWV0aG9kX3R5cGVzX2FsbCwgdikNCiAgICAgICAgICAgICAgICBmb3IgaSwgdmFsdWUgaW4gcGFpcnMoYWx3YXlzX2FkZCkgZG8NCiAgICAgICAgICAgICAgICAgICAgaWYgdiA9PSB2YWx1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoYmNfdG9vbGJveF9tZXRob2RfdHlwZXMsIHYpDQogICAgICAgICAgICAgICAgICAgICAgICBhZGRlZCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIHY6ZmluZCgiW0EtWl9dIikgdGhlbg0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgaWYgYWRkZWQgPT0gZmFsc2UgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGJjX3Rvb2xib3hfbWV0aG9kX3R5cGVzLCB2KQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCn0NCg0KcGx1Z2luTWFuYWdlciA9IHsNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJcGx1Z2luTWFuYWdlci5jb25maWdNZW51KCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAgLS0NCiAgICBjb25maWdNZW51ID0gZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBtZW51ID0gZ2cuY2hvaWNlKHsgIuKGle+4jyBDaGFuZ2UgTWVudSBPcmRlciIsDQogICAgICAgICAgICAi8J+UoiBTZXQgTWVudSBJdGVtIExpbWl0IiwNCiAgICAgICAgICAgICLwn5SXIENvbmZpZ3VyZSBEZWZhdWx0IFBsdWdpbnMiLA0KICAgICAgICAgICAgIvCfk6UgSW5zdGFsbCBQbHVnaW4iLA0KICAgICAgICAgICAgIuKcj++4jyBSZW5hbWUgUGx1Z2luIiwNCiAgICAgICAgICAgICLinIUgRW5hYmxlL0Rpc2FibGUgUGx1Z2lucyIgfSwNCiAgICAgICAgICAgIG5pbCwNCiAgICAgICAgICAgIHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBQbHVnaW4gTWFuYWdlciDihLnvuI8iKQ0KICAgICAgICBpZiBtZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICBpZiBtZW51ID09IDEgdGhlbg0KICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIubWVudU9yZGVyKCkNCiAgICAgICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmNvbmZpZ01lbnUoKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBtZW51ID09IDIgdGhlbg0KICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIubWVudUxpbWl0KCkNCiAgICAgICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmNvbmZpZ01lbnUoKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBtZW51ID09IDMgdGhlbg0KICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIuZGVmYXVsdFBsdWdpbnMoKQ0KICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIuY29uZmlnTWVudSgpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGlmIG1lbnUgPT0gNCB0aGVuDQogICAgICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5pbnN0YWxsUGx1Z2luKCkNCiAgICAgICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmNvbmZpZ01lbnUoKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBtZW51ID09IDUgdGhlbg0KICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIucmVuYW1lUGx1Z2luKCkNCiAgICAgICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmNvbmZpZ01lbnUoKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBtZW51ID09IDYgdGhlbg0KICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIudG9nZ2xlUGx1Z2lucygpDQogICAgICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5jb25maWdNZW51KCkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCXBsdWdpbk1hbmFnZXIuY2FsbFBsdWdpbihwbHVnaW5fcGF0aCwgZnVuY3Rpb25fdGFibGUsIHBhc3NlZF9kYXRhKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dICAtLQ0KICAgIGNhbGxQbHVnaW4gPSBmdW5jdGlvbihwbHVnaW5fcGF0aCwgZnVuY3Rpb25fdGFibGUsIHBhc3NlZF9kYXRhKQ0KICAgICAgICBpZiBfR1tmdW5jdGlvbl90YWJsZV0gdGhlbg0KICAgICAgICAgICAgX0dbZnVuY3Rpb25fdGFibGVdLmhvbWUocGFzc2VkX2RhdGEpDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIGRvZmlsZShwbHVnaW5fcGF0aCkNCiAgICAgICAgICAgIGlmIHBhc3NlZF9kYXRhIH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgX0dbZnVuY3Rpb25fdGFibGVdLmhvbWUocGFzc2VkX2RhdGEpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglwbHVnaW5NYW5hZ2VyLmRlZmF1bHRIYW5kbGVyKGhhbmRsZXIsIHBhc3NlZF9kYXRhKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dICAtLQ0KICAgIGRlZmF1bHRIYW5kbGVyID0gZnVuY3Rpb24oaGFuZGxlciwgcGFzc2VkX2RhdGEpDQogICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHBsdWdpbk1hbmFnZXIudG9vbGJveFBsdWdpbnMpIGRvDQogICAgICAgICAgICBpZiB2LmRlZmF1bHRfaGFuZGxlciA9PSBoYW5kbGVyIHRoZW4NCiAgICAgICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmNhbGxQbHVnaW4odi5wbHVnaW5fcGF0aCwgdi5mdW5jdGlvbl90YWJsZSwgcGFzc2VkX2RhdGEpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglwbHVnaW5NYW5hZ2VyLmluaXRQbHVnaW5NYW5hZ2VyKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAgLS0NCiAgICBpbml0UGx1Z2luTWFuYWdlciA9IGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgZmlsZSA9IGFzc2VydChpby5vcGVuKGNvbmZpZ0RhdGFQYXRoIC4uICJwbHVnaW5fbWFuYWdlci5qc29uIiwgInIiKSkNCiAgICAgICAgbG9jYWwgY29udGVudCA9IGZpbGU6cmVhZCgiKmEiKQ0KICAgICAgICBmaWxlOmNsb3NlKCkNCiAgICAgICAgcGx1Z2luTWFuYWdlci50b29sYm94UGx1Z2lucyA9IGpzb24uZGVjb2RlKGNvbnRlbnQpDQogICAgICAgIGRvZmlsZShjb25maWdEYXRhUGF0aCAuLiAicGx1Z2luX21hbmFnZXJfY29uZmlnLmx1YSIpDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglwbHVnaW5NYW5hZ2VyLmluaXRBbGxQbHVnaW5NYW5hZ2VyKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAgLS0NCiAgICBpbml0QWxsUGx1Z2luTWFuYWdlciA9IGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgZmlsZSA9IGFzc2VydChpby5vcGVuKGNvbmZpZ0RhdGFQYXRoIC4uICJwbHVnaW5fbWFuYWdlcl9hbGxfcGx1Z2lucy5qc29uIiwgInIiKSkNCiAgICAgICAgbG9jYWwgY29udGVudCA9IGZpbGU6cmVhZCgiKmEiKQ0KICAgICAgICBmaWxlOmNsb3NlKCkNCiAgICAgICAgcGx1Z2luTWFuYWdlci50b29sYm94QWxsUGx1Z2lucyA9IGpzb24uZGVjb2RlKGNvbnRlbnQpDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglwbHVnaW5NYW5hZ2VyLm1lbnVPcmRlcigpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gIC0tDQogICAgbWVudU9yZGVyID0gZnVuY3Rpb24oKQ0KICAgICAgICBpZiBwY2FsbChjaGVja19wbHVnaW5fbWFuYWdlcikgPT0gZmFsc2UgdGhlbg0KICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5zYXZlUGx1Z2lucygpDQogICAgICAgIGVuZA0KICAgICAgICBsb2NhbCBzbGlkZXJfcmFuZ2UgPSAnIFsxOyAnIC4uICNwbHVnaW5NYW5hZ2VyLnRvb2xib3hQbHVnaW5zIC4uICddJw0KICAgICAgICBsb2NhbCBzbGlkZXJzID0ge30NCiAgICAgICAgbG9jYWwgbnVtYmVycyA9IHt9DQogICAgICAgIGxvY2FsIG1lbnUgPSB7fQ0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhwbHVnaW5NYW5hZ2VyLnRvb2xib3hQbHVnaW5zKSBkbw0KICAgICAgICAgICAgc2xpZGVyc1tpXSA9IHYubWVudV9uYW1lIC4uIHNsaWRlcl9yYW5nZQ0KICAgICAgICAgICAgbnVtYmVyc1tpXSA9ICJudW1iZXIiDQogICAgICAgICAgICBtZW51W2ldID0gaQ0KICAgICAgICBlbmQNCiAgICAgICAgc2xpZGVyc1sxXSA9IHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBTZXQgb3JkZXIgb2YgbWFpbiBtZW51IGl0ZW1zIGJlbG93LiDihLnvuI9cblxuIiAuLiBzbGlkZXJzWzFdDQogICAgICAgIDo6ZHVwbGljYXRlX2luZGV4OjoNCiAgICAgICAgbWVudSA9IGdnLnByb21wdChzbGlkZXJzLCBtZW51LCBudW1iZXJzKQ0KICAgICAgICBpZiBtZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICBsb2NhbCBjaGVja19kdXBsaWNhdGVfaW5kZXhlcyA9IHt9DQogICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhtZW51KSBkbw0KICAgICAgICAgICAgICAgIGlmIGNoZWNrX2R1cGxpY2F0ZV9pbmRleGVzW3ZdIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZ2cuYWxlcnQoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIER1cGxpY2F0ZSBJbmRleGVzIEZvdW5kIOKEue+4jyIpDQogICAgICAgICAgICAgICAgICAgIGdvdG8gZHVwbGljYXRlX2luZGV4DQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBjaGVja19kdXBsaWNhdGVfaW5kZXhlc1t2XSA9IHYNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgbG9jYWwgdGVtcF9wbHVnaW5zID0ge30NCiAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKG1lbnUpIGRvDQogICAgICAgICAgICAgICAgdGVtcF9wbHVnaW5zW3RvbnVtYmVyKHYpXSA9IHBsdWdpbk1hbmFnZXIudG9vbGJveFBsdWdpbnNbaV0NCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgcGx1Z2luTWFuYWdlci50b29sYm94UGx1Z2lucyA9IHRlbXBfcGx1Z2lucw0KICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5zYXZlUGx1Z2lucygpDQogICAgICAgICAgICBnZy50b2FzdChzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gTWVudSBvcmRlciBzZXQuIOKEue+4jyIpDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJcGx1Z2luTWFuYWdlci5kZWZhdWx0UGx1Z2lucygpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gIC0tDQogICAgZGVmYXVsdFBsdWdpbnMgPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIGhhbmRsZXJfaW5kZXhlcyA9IHsNCiAgICAgICAgICAgIG1ldGhvZCA9ICIiLA0KICAgICAgICAgICAgZmllbGQgPSAiIiwNCiAgICAgICAgICAgIGVudW0gPSAiIiwNCiAgICAgICAgICAgIGNsYXNzID0gIiINCiAgICAgICAgfQ0KICAgICAgICBsb2NhbCBtZXRob2RfcmVzdWx0c19oYW5kbGVyID0gIk1ldGhvZCBzZWFyY2ggcmVzdWx0IGhhbmRsZXI6XG4iDQogICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHBsdWdpbk1hbmFnZXIudG9vbGJveFBsdWdpbnMpIGRvDQogICAgICAgICAgICBpZiB2LmRlZmF1bHRfaGFuZGxlciA9PSAibWV0aG9kX3Jlc3VsdHMiIHRoZW4NCiAgICAgICAgICAgICAgICBoYW5kbGVyX2luZGV4ZXMubWV0aG9kID0gaQ0KICAgICAgICAgICAgICAgIG1ldGhvZF9yZXN1bHRzX2hhbmRsZXIgPSBtZXRob2RfcmVzdWx0c19oYW5kbGVyIC4uIHYubWVudV9uYW1lDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIGZpZWxkX3Jlc3VsdHNfaGFuZGxlciA9ICJGaWVsZCBzZWFyY2ggcmVzdWx0IGhhbmRsZXI6XG4iDQogICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHBsdWdpbk1hbmFnZXIudG9vbGJveFBsdWdpbnMpIGRvDQogICAgICAgICAgICBpZiB2LmRlZmF1bHRfaGFuZGxlciA9PSAiZmllbGRfcmVzdWx0cyIgdGhlbg0KICAgICAgICAgICAgICAgIGhhbmRsZXJfaW5kZXhlcy5maWVsZCA9IGkNCiAgICAgICAgICAgICAgICBmaWVsZF9yZXN1bHRzX2hhbmRsZXIgPSBmaWVsZF9yZXN1bHRzX2hhbmRsZXIgLi4gdi5tZW51X25hbWUNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgbG9jYWwgZW51bV9yZXN1bHRzX2hhbmRsZXIgPSAiRW51bSBzZWFyY2ggcmVzdWx0IGhhbmRsZXI6XG4iDQogICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHBsdWdpbk1hbmFnZXIudG9vbGJveFBsdWdpbnMpIGRvDQogICAgICAgICAgICBpZiB2LmRlZmF1bHRfaGFuZGxlciA9PSAiZW51bV9yZXN1bHRzIiB0aGVuDQogICAgICAgICAgICAgICAgaGFuZGxlcl9pbmRleGVzLmVudW0gPSBpDQogICAgICAgICAgICAgICAgZW51bV9yZXN1bHRzX2hhbmRsZXIgPSBlbnVtX3Jlc3VsdHNfaGFuZGxlciAuLiB2Lm1lbnVfbmFtZQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBsb2NhbCBjbGFzc19yZXN1bHRzX2hhbmRsZXIgPSAiQ2xhc3MvRmllbGQgc2VhcmNoIHJlc3VsdCBoYW5kbGVyOlxuIg0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhwbHVnaW5NYW5hZ2VyLnRvb2xib3hQbHVnaW5zKSBkbw0KICAgICAgICAgICAgaWYgdi5kZWZhdWx0X2hhbmRsZXIgPT0gImNsYXNzX3Jlc3VsdHMiIHRoZW4NCiAgICAgICAgICAgICAgICBoYW5kbGVyX2luZGV4ZXMuY2xhc3MgPSBpDQogICAgICAgICAgICAgICAgY2xhc3NfcmVzdWx0c19oYW5kbGVyID0gY2xhc3NfcmVzdWx0c19oYW5kbGVyIC4uIHYubWVudV9uYW1lDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIGhhbmRsZXJNZW51ID0gZ2cuY2hvaWNlKHsgbWV0aG9kX3Jlc3VsdHNfaGFuZGxlciwNCiAgICAgICAgICAgIGZpZWxkX3Jlc3VsdHNfaGFuZGxlciwNCiAgICAgICAgICAgIGVudW1fcmVzdWx0c19oYW5kbGVyLA0KICAgICAgICAgICAgY2xhc3NfcmVzdWx0c19oYW5kbGVyIH0sDQogICAgICAgICAgICBuaWwsDQogICAgICAgICAgICBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2V0IGRlZmF1bHQgcGx1Z2lucy4g4oS577iPIikNCiAgICAgICAgaWYgaGFuZGxlck1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgIGxvY2FsIGhhbmRsZXJfdHlwZXMgPSB7DQogICAgICAgICAgICAgICAgWzFdID0gIm1ldGhvZCIsDQogICAgICAgICAgICAgICAgWzJdID0gImZpZWxkIiwNCiAgICAgICAgICAgICAgICBbM10gPSAiZW51bSIsDQogICAgICAgICAgICAgICAgWzRdID0gImNsYXNzIg0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbG9jYWwgaGFuZGxlcl9uYW1lcyA9IHsNCiAgICAgICAgICAgICAgICBbMV0gPSAibWV0aG9kX3Jlc3VsdHMiLA0KICAgICAgICAgICAgICAgIFsyXSA9ICJmaWVsZF9yZXN1bHRzIiwNCiAgICAgICAgICAgICAgICBbM10gPSAiZW51bV9yZXN1bHRzIiwNCiAgICAgICAgICAgICAgICBbNF0gPSAiY2xhc3NfcmVzdWx0cyINCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGxvY2FsIHBsdWdpbnNfbWVudV9pdGVtcyA9IHt9DQogICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhwbHVnaW5NYW5hZ2VyLnRvb2xib3hQbHVnaW5zKSBkbw0KICAgICAgICAgICAgICAgIHBsdWdpbnNfbWVudV9pdGVtc1tpXSA9IHYubWVudV9uYW1lDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGxvY2FsIHNlbGVjdEhhbmRsZXJNZW51ID0gZ2cuY2hvaWNlKHBsdWdpbnNfbWVudV9pdGVtcywgbmlsLA0KICAgICAgICAgICAgICAgIHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBTZWxlY3QgZGVmYXVsdCBwbHVnaW4g4oS577iPIikNCiAgICAgICAgICAgIGlmIHNlbGVjdEhhbmRsZXJNZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgcGx1Z2luTWFuYWdlci50b29sYm94UGx1Z2luc1toYW5kbGVyX2luZGV4ZXNbaGFuZGxlcl90eXBlc1toYW5kbGVyTWVudV1dXS5kZWZhdWx0X2hhbmRsZXIgPSBuaWwNCiAgICAgICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLnRvb2xib3hQbHVnaW5zW3NlbGVjdEhhbmRsZXJNZW51XS5kZWZhdWx0X2hhbmRsZXIgPSBoYW5kbGVyX25hbWVzW2hhbmRsZXJNZW51XQ0KICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIuc2F2ZVBsdWdpbnMoKQ0KICAgICAgICAgICAgICAgIGdnLnRvYXN0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBEZWZhdWx0IHBsdWdpbiBzZXQuIOKEue+4jyIpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglwbHVnaW5NYW5hZ2VyLmluc3RhbGxQbHVnaW4oKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dICAtLQ0KICAgIGluc3RhbGxQbHVnaW4gPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIHNlbGVjdFBsdWdpbkx1YSA9IGdnLnByb21wdCh7IHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBTZWxlY3QgcGx1Z2luIHRvIGluc3RhbGwuIOKEue+4jyIgfSwgeyBnZy5FWFRfU1RPUkFHRSAuLiAiL0Rvd25sb2FkLyIgfSwgeyAiZmlsZSIgfSkNCiAgICAgICAgaWYgc2VsZWN0UGx1Z2luTHVhIH49IG5pbCBhbmQgc2VsZWN0UGx1Z2luTHVhIH49IGdnLkVYVF9TVE9SQUdFIC4uICIvRG93bmxvYWQvIiB0aGVuDQogICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmluc3RhbGxpbmdQbHVnaW4gPSB0cnVlDQogICAgICAgICAgICBkb2ZpbGUoc2VsZWN0UGx1Z2luTHVhWzFdKQ0KICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5pbnN0YWxsaW5nUGx1Z2luID0gZmFsc2UNCiAgICAgICAgICAgIGxvY2FsIGluc3RhbGxNZW51ID0gZ2cucHJvbXB0KHsgc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIEluc3RhbGxpbmcgUGx1Z2luIOKEue+4j1xuXG5NZW51IG5hbWUgZm9yIFBsdWdpbiAiLA0KICAgICAgICAgICAgICAgICJOYW1lIG9mIGZ1bmN0aW9uIHRhYmxlIGNvbnRhaW5pbmcgcGx1Z2lucyBob21lKCkgbWVudS4iIH0sDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmluc3RhbGxpbmdQbHVnaW5OYW1lLA0KICAgICAgICAgICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmluc3RhbGxpbmdQbHVnaW5UYWJsZSB9LA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgInRleHQiLA0KICAgICAgICAgICAgICAgICAgICAidGV4dCIgfSkNCiAgICAgICAgICAgIGlmIGluc3RhbGxNZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgaWYgI2luc3RhbGxNZW51WzFdID4gMCBhbmQgI2luc3RhbGxNZW51WzJdID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGZpbGVuYW1lID0gc2VsZWN0UGx1Z2luTHVhWzFdOmdzdWIoIi4rLyguKykiLCAiJTEiKQ0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBhbGxyZWFkeV9pbnN0YWxsZWQgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhwbHVnaW5NYW5hZ2VyLnRvb2xib3hQbHVnaW5zKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgcGx1Z2luc0RhdGFQYXRoIC4uIGZpbGVuYW1lID09IHYucGx1Z2luX3BhdGggdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbHJlYWR5X2luc3RhbGxlZCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgYWxscmVhZHlfaW5zdGFsbGVkID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgZ2cuYWxlcnQoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIEEgcGx1Z2luIHdpdGggdGhpcyBmaWxlbmFtZSBpcyBhbHJlYWR5IGluc3RhbGxlZCB0cnkgcmVuYW1pbmcgdGhlIGx1YSBmaWxlIGZpcnN0IGlmIHlvdSBhcmUgc3VyZSBpdCBpcyBhIGRpZmZlcmVudCBwbHVnaW4uIOKEue+4jyIpDQogICAgICAgICAgICAgICAgICAgICAgICBnb3RvIGRvbmUNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIG9zLnJlbmFtZShzZWxlY3RQbHVnaW5MdWFbMV0sIHBsdWdpbnNEYXRhUGF0aCAuLiBmaWxlbmFtZSkNCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdGVtcF9wbHVnaW4gPSB7DQogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbl90YWJsZSA9IGluc3RhbGxNZW51WzJdLA0KICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9uYW1lID0gaW5zdGFsbE1lbnVbMV0sDQogICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW5fcGF0aCA9IHBsdWdpbnNEYXRhUGF0aCAuLiBmaWxlbmFtZQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChwbHVnaW5NYW5hZ2VyLnRvb2xib3hQbHVnaW5zLCB0ZW1wX3BsdWdpbikNCiAgICAgICAgICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5zYXZlUGx1Z2lucygpDQogICAgICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIuaW5pdEFsbFBsdWdpbk1hbmFnZXIoKQ0KICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQocGx1Z2luTWFuYWdlci50b29sYm94QWxsUGx1Z2lucywgdGVtcF9wbHVnaW4pDQogICAgICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIuc2F2ZUFsbFBsdWdpbnMoKQ0KICAgICAgICAgICAgICAgICAgICBnZy50b2FzdChzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gUGx1Z2luIGhhcyBiZWVuIGluc3RhbGxlZC4g4oS577iPIikNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgOjpkb25lOjoNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCXBsdWdpbk1hbmFnZXIucmVtb3ZlUGx1Z2luKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAgLS0NCiAgICByZW1vdmVQbHVnaW4gPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIHBsdWdpbnNfbWVudV9pdGVtcyA9IHt9DQogICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHBsdWdpbk1hbmFnZXIudG9vbGJveFBsdWdpbnMpIGRvDQogICAgICAgICAgICBwbHVnaW5zX21lbnVfaXRlbXNbaV0gPSB2Lm1lbnVfbmFtZQ0KICAgICAgICBlbmQNCiAgICAgICAgbG9jYWwgcmVtb3ZlUGx1Z2luTWVudSA9IGdnLmNob2ljZShwbHVnaW5zX21lbnVfaXRlbXMsIG5pbCwNCiAgICAgICAgICAgIHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBTZWxlY3QgcGx1Z2luIHRvIHVuaW5zdGFsbC4g4oS577iPIikNCiAgICAgICAgaWYgcmVtb3ZlUGx1Z2luTWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgbG9jYWwgY29uZmlybVJlbW92ZSA9IGdnLmNob2ljZSh7ICLinIUgWWVzIiwNCiAgICAgICAgICAgICAgICAi4p2MIE5vIiB9LA0KICAgICAgICAgICAgICAgIG5pbCwNCiAgICAgICAgICAgICAgICBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gUmVtb3ZlIHRoZSAiIC4uIHBsdWdpbnNfbWVudV9pdGVtc1tyZW1vdmVQbHVnaW5NZW51XSAuLiAiIHBsdWdpbj8g4oS577iPIikNCiAgICAgICAgICAgIGlmIGNvbmZpcm1SZW1vdmUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBjb25maXJtUmVtb3ZlID09IDEgdGhlbg0KICAgICAgICAgICAgICAgICAgICB0YWJsZS5yZW1vdmUocGx1Z2luTWFuYWdlci50b29sYm94UGx1Z2lucywgcmVtb3ZlUGx1Z2luTWVudSkNCiAgICAgICAgICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5zYXZlUGx1Z2lucygpDQogICAgICAgICAgICAgICAgICAgIGdnLnRvYXN0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBQbHVnaW4gaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIHRoZSBtZW51LiDihLnvuI8iKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJcGx1Z2luTWFuYWdlci5zYXZlUGx1Z2lucygpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gIC0tDQogICAgc2F2ZVBsdWdpbnMgPSBmdW5jdGlvbigpDQogICAgICAgIGZpbGUgPSBpby5vcGVuKGNvbmZpZ0RhdGFQYXRoIC4uICJwbHVnaW5fbWFuYWdlci5qc29uIiwgIncrIikNCiAgICAgICAgZmlsZTp3cml0ZShqc29uLmVuY29kZShwbHVnaW5NYW5hZ2VyLnRvb2xib3hQbHVnaW5zKSkNCiAgICAgICAgZmlsZTpjbG9zZSgpDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglwbHVnaW5NYW5hZ2VyLnNhdmVBbGxQbHVnaW5zKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAgLS0NCiAgICBzYXZlQWxsUGx1Z2lucyA9IGZ1bmN0aW9uKCkNCiAgICAgICAgZmlsZSA9IGlvLm9wZW4oY29uZmlnRGF0YVBhdGggLi4gInBsdWdpbl9tYW5hZ2VyX2FsbF9wbHVnaW5zLmpzb24iLCAidysiKQ0KICAgICAgICBmaWxlOndyaXRlKGpzb24uZW5jb2RlKHBsdWdpbk1hbmFnZXIudG9vbGJveEFsbFBsdWdpbnMpKQ0KICAgICAgICBmaWxlOmNsb3NlKCkNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCXBsdWdpbk1hbmFnZXIuc2F2ZU1lbnVMaW1pdCgpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gIC0tDQogICAgc2F2ZU1lbnVMaW1pdCA9IGZ1bmN0aW9uKCkNCiAgICAgICAgZmlsZSA9IGlvLm9wZW4oY29uZmlnRGF0YVBhdGggLi4gInBsdWdpbl9tYW5hZ2VyX2NvbmZpZy5sdWEiLCAidysiKQ0KICAgICAgICBmaWxlOndyaXRlKCJwbHVnaW5NYW5hZ2VyLm1lbnVJdGVtTGltaXQgPSAiIC4uIHBsdWdpbk1hbmFnZXIubWVudUl0ZW1MaW1pdCkNCiAgICAgICAgZmlsZTpjbG9zZSgpDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglwbHVnaW5NYW5hZ2VyLnJlbmFtZVBsdWdpbigpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gIC0tDQogICAgcmVuYW1lUGx1Z2luID0gZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBwbHVnaW5zX21lbnVfaXRlbXMgPSB7fQ0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhwbHVnaW5NYW5hZ2VyLnRvb2xib3hQbHVnaW5zKSBkbw0KICAgICAgICAgICAgcGx1Z2luc19tZW51X2l0ZW1zW2ldID0gdi5tZW51X25hbWUNCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIHJlbmFtZVBsdWdpbk1lbnUgPSBnZy5jaG9pY2UocGx1Z2luc19tZW51X2l0ZW1zLCBuaWwsIHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBTZWxlY3QgcGx1Z2luIHRvIHJlbmFtZS4g4oS577iPIikNCiAgICAgICAgaWYgcmVuYW1lUGx1Z2luTWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgbG9jYWwgcmVuYW1lUHJvbXB0ID0gZ2cucHJvbXB0KHsgc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIEVudGVyIGEgbmV3IG1lbnUgbmFtZSBmb3IgdGhlIHBsdWdpbi4g4oS577iPIiB9LA0KICAgICAgICAgICAgICAgIHsgcGx1Z2luc19tZW51X2l0ZW1zW3JlbmFtZVBsdWdpbk1lbnVdIH0sIHsgInRleHQiIH0pDQogICAgICAgICAgICBpZiByZW5hbWVQcm9tcHQgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLnRvb2xib3hQbHVnaW5zW3JlbmFtZVBsdWdpbk1lbnVdLm1lbnVfbmFtZSA9IHJlbmFtZVByb21wdFsxXQ0KICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIuc2F2ZVBsdWdpbnMoKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJcGx1Z2luTWFuYWdlci5tZW51TGltaXQoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dICAtLQ0KICAgIG1lbnVMaW1pdCA9IGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgbWVudSA9IGdnLnByb21wdCh7IHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBTZXQgbGltaXQgZm9yIG51bWJlciBvZiBpdGVtcyBwZXIgbWVudS4g4oS577iPXG5cblNldCBtZW51IGl0ZW0gbGltaXQgWzA7IDIwXSIgfSwgeyBwbHVnaW5NYW5hZ2VyLm1lbnVJdGVtTGltaXQgfSwgeyAnbnVtYmVyJyB9KQ0KICAgICAgICBpZiBtZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLm1lbnVJdGVtTGltaXQgPSBtZW51WzFdDQogICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLnNhdmVNZW51TGltaXQoKQ0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCXBsdWdpbk1hbmFnZXIudG9nZ2xlUGx1Z2lucygpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gIC0tDQogICAgdG9nZ2xlUGx1Z2lucyA9IGZ1bmN0aW9uKCkNCiAgICAgICAgaWYgbm90IHBsdWdpbk1hbmFnZXIudG9vbGJveEFsbFBsdWdpbnMgdGhlbg0KICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5pbml0QWxsUGx1Z2luTWFuYWdlcigpDQogICAgICAgIGVuZA0KICAgICAgICBsb2NhbCBtZW51X25hbWVzID0ge30NCiAgICAgICAgbG9jYWwgbWVudV9jaGVja2JveGVzID0ge30NCiAgICAgICAgbG9jYWwgbWVudV92YWx1ZXMgPSB7fQ0KICAgICAgICBsb2NhbCBtZW51X3BhdGhzID0ge30NCiAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMocGx1Z2luTWFuYWdlci50b29sYm94QWxsUGx1Z2lucykgZG8NCiAgICAgICAgICAgIG1lbnVfbmFtZXNbaV0gPSB2Lm1lbnVfbmFtZQ0KICAgICAgICAgICAgbWVudV9jaGVja2JveGVzW2ldID0gImNoZWNrYm94Ig0KICAgICAgICAgICAgbWVudV92YWx1ZXNbaV0gPSBmYWxzZQ0KICAgICAgICAgICAgbWVudV9wYXRoc1tpXSA9IHYucGx1Z2luX3BhdGgNCiAgICAgICAgICAgIGZvciBpbmRleCwgdmFsdWUgaW4gcGFpcnMocGx1Z2luTWFuYWdlci50b29sYm94UGx1Z2lucykgZG8NCiAgICAgICAgICAgICAgICBpZiB2LnBsdWdpbl9wYXRoID09IHZhbHVlLnBsdWdpbl9wYXRoIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbWVudV92YWx1ZXNbaV0gPSB0cnVlDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIG1lbnUgPSBnZy5wcm9tcHQobWVudV9uYW1lcywgbWVudV92YWx1ZXMsIG1lbnVfY2hlY2tib3hlcykNCiAgICAgICAgaWYgbWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMobWVudSkgZG8NCiAgICAgICAgICAgICAgICBpZiB2ID09IHRydWUgYW5kIG1lbnVfdmFsdWVzW2ldID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHBsdWdpbk1hbmFnZXIudG9vbGJveFBsdWdpbnMsIHBsdWdpbk1hbmFnZXIudG9vbGJveEFsbFBsdWdpbnNbaV0pDQogICAgICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIuc2F2ZVBsdWdpbnMoKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIHYgPT0gZmFsc2UgYW5kIG1lbnVfdmFsdWVzW2ldID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICBmb3IgaW5kZXgsIHZhbHVlIGluIHBhaXJzKHBsdWdpbk1hbmFnZXIudG9vbGJveFBsdWdpbnMpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICBpZiB2YWx1ZS5wbHVnaW5fcGF0aCA9PSBtZW51X3BhdGhzW2ldIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5yZW1vdmUocGx1Z2luTWFuYWdlci50b29sYm94UGx1Z2lucywgaW5kZXgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5zYXZlUGx1Z2lucygpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglwbHVnaW5NYW5hZ2VyLnRvb2xib3hQbHVnaW5zDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gIC0tDQogICAgdG9vbGJveFBsdWdpbnMgPSB7IHsNCiAgICAgICAgZnVuY3Rpb25fdGFibGUgPSAic3RhdGljVmFsdWVGaW5kZXIiLA0KICAgICAgICBtZW51X25hbWUgPSAi8J+Vte+4j+KAjSBTdGF0aWMgVmFsdWUgRmluZGVyIiwNCiAgICAgICAgcGx1Z2luX3BhdGggPSBwbHVnaW5zRGF0YVBhdGggLi4gInBsdWdpbl9iY19zdGF0aWNfdmFsdWVfZmluZGVyLmx1YSINCiAgICB9LCB7DQogICAgICAgIG1lbnVfbmFtZSA9ICLwn5K+IEdsb2JhbC1NZXRhZGF0YSBEdW1wZXIiLA0KICAgICAgICBwbHVnaW5fcGF0aCA9IHBsdWdpbnNEYXRhUGF0aCAuLiAicGx1Z2luX2JjX21ldGFkYXRhX2R1bXBlci5sdWEiDQogICAgfSwgew0KICAgICAgICBtZW51X25hbWUgPSAi8J+SviBMaWIgRHVtcGVyIiwNCiAgICAgICAgcGx1Z2luX3BhdGggPSBwbHVnaW5zRGF0YVBhdGggLi4gInBsdWdpbl9iY19saWJfZHVtcGVyLmx1YSINCiAgICB9LCB7DQogICAgICAgIG1lbnVfbmFtZSA9ICLwn5SOIENsYXNzIEZpZWxkIFNlYXJjaGVyIiwNCiAgICAgICAgcGx1Z2luX3BhdGggPSBwbHVnaW5zRGF0YVBhdGggLi4gInBsdWdpbl9iY19jbGFzc19maWVsZF9zZWFyY2gubHVhIg0KICAgIH0sIHsNCiAgICAgICAgZnVuY3Rpb25fdGFibGUgPSAiZHVtcFNlYXJjaGVyIiwNCiAgICAgICAgbWVudV9uYW1lID0gIvCflI0gU2VhcmNoIER1bXAuY3MiLA0KICAgICAgICBwbHVnaW5fcGF0aCA9IHBsdWdpbnNEYXRhUGF0aCAuLiAicGx1Z2luX2JjX2R1bXBfc2VhcmNoLmx1YSINCiAgICB9LCB7DQogICAgICAgIGZ1bmN0aW9uX3RhYmxlID0gIm1ldGhvZFNlYXJjaFJlc3VsdHMiLA0KICAgICAgICBkZWZhdWx0X2hhbmRsZXIgPSAibWV0aG9kX3Jlc3VsdHMiLA0KICAgICAgICBtZW51X25hbWUgPSAi8J+Xku+4jyBNZXRob2QgU2VhcmNoIFJlc3VsdHMiLA0KICAgICAgICBtZW51X2NvdW50X3RhYmxlID0gImR1bXBTZWFyY2hlci5tZXRob2RSZXN1bHRzIiwNCiAgICAgICAgcGx1Z2luX3BhdGggPSBwbHVnaW5zRGF0YVBhdGggLi4gInBsdWdpbl9iY19tZXRob2Rfc2VhcmNoX3Jlc3VsdHMubHVhIg0KICAgIH0sIHsNCiAgICAgICAgZnVuY3Rpb25fdGFibGUgPSAiZmllbGRTZWFyY2hSZXN1bHRzIiwNCiAgICAgICAgZGVmYXVsdF9oYW5kbGVyID0gImZpZWxkX3Jlc3VsdHMiLA0KICAgICAgICBtZW51X25hbWUgPSAi8J+Xku+4jyBGaWVsZCBTZWFyY2ggUmVzdWx0cyIsDQogICAgICAgIG1lbnVfY291bnRfdGFibGUgPSAiZHVtcFNlYXJjaGVyLmZpZWxkUmVzdWx0cyIsDQogICAgICAgIHBsdWdpbl9wYXRoID0gcGx1Z2luc0RhdGFQYXRoIC4uICJwbHVnaW5fYmNfZmllbGRfc2VhcmNoX3Jlc3VsdHMubHVhIg0KICAgIH0sIHsNCiAgICAgICAgZnVuY3Rpb25fdGFibGUgPSAiZW51bVNlYXJjaFJlc3VsdHMiLA0KICAgICAgICBkZWZhdWx0X2hhbmRsZXIgPSAiZW51bV9yZXN1bHRzIiwNCiAgICAgICAgbWVudV9uYW1lID0gIvCfl5LvuI8gRW51bSBTZWFyY2ggUmVzdWx0cyIsDQogICAgICAgIG1lbnVfY291bnRfdGFibGUgPSAiZHVtcFNlYXJjaGVyLmVudW1SZXN1bHRzIiwNCiAgICAgICAgcGx1Z2luX3BhdGggPSBwbHVnaW5zRGF0YVBhdGggLi4gInBsdWdpbl9iY19lbnVtX3NlYXJjaF9yZXN1bHRzLmx1YSINCiAgICB9LCB7DQogICAgICAgIGZ1bmN0aW9uX3RhYmxlID0gImlsMmNwcEZpZWxkcyIsDQogICAgICAgIGRlZmF1bHRfaGFuZGxlciA9ICJjbGFzc19yZXN1bHRzIiwNCiAgICAgICAgbWVudV9uYW1lID0gIvCfk50gQmFkQ2FzZSdzIElsMkNwcCBGaWVsZHMiLA0KICAgICAgICBwbHVnaW5fcGF0aCA9IHBsdWdpbnNEYXRhUGF0aCAuLiAicGx1Z2luX2JjX2lsMmNwcF9maWVsZHMubHVhIg0KICAgIH0sIHsNCiAgICAgICAgZnVuY3Rpb25fdGFibGUgPSAiaWwyY3BwRWRpdHMiLA0KICAgICAgICBtZW51X25hbWUgPSAi8J+TnSBCYWRDYXNlJ3MgSWwyQ3BwIEVkaXRzIGJ5IE5hbWUiLA0KICAgICAgICBwbHVnaW5fcGF0aCA9IHBsdWdpbnNEYXRhUGF0aCAuLiAicGx1Z2luX2JjX2lsMmNwcF9lZGl0cy5sdWEiDQogICAgfSwgew0KICAgICAgICBmdW5jdGlvbl90YWJsZSA9ICJzY3JpcHRDcmVhdG9yIiwNCiAgICAgICAgbWVudV9uYW1lID0gIvCfj5fvuI8gU2NyaXB0IENyZWF0b3IiLA0KICAgICAgICBwbHVnaW5fcGF0aCA9IHBsdWdpbnNEYXRhUGF0aCAuLiAicGx1Z2luX2JjX3NjcmlwdF9jcmVhdG9yLmx1YSINCiAgICB9LCB7DQogICAgICAgIGZ1bmN0aW9uX3RhYmxlID0gInNhdmVMaXN0TWFuYWdlciIsDQogICAgICAgIG1lbnVfbmFtZSA9ICLwn5ORIFNhdmUgTGlzdCBNYW5hZ2VyIiwNCiAgICAgICAgcGx1Z2luX3BhdGggPSBwbHVnaW5zRGF0YVBhdGggLi4gInBsdWdpbl9iY19zYXZlX2xpc3QubHVhIg0KICAgIH0gfSwNCiAgICBtZW51SXRlbUxpbWl0ID0gMCwNCiAgICByZXR1cm5Ib21lID0gZmFsc2UsDQogICAgcmV0dXJuUGx1Z2luVGFibGUgPSAiIiwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJcGx1Z2luTWFuYWdlci5ob21lKG1lbnVfbnVtYmVyKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dICAtLQ0KICAgIGhvbWUgPSBmdW5jdGlvbihtZW51X251bWJlcikNCiAgICAgICAgaWYgcGx1Z2luTWFuYWdlci5yZXR1cm5Ib21lID09IHRydWUgdGhlbg0KICAgICAgICAgICAgX0dbcGx1Z2luTWFuYWdlci5yZXR1cm5QbHVnaW5UYWJsZV0uaG9tZSgpDQogICAgICAgIGVsc2VpZiBwbHVnaW5NYW5hZ2VyLm1lbnVJdGVtTGltaXQgPT0gMCB0aGVuDQogICAgICAgICAgICBsb2NhbCBtZW51X25hbWVzID0ge30NCiAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHBsdWdpbk1hbmFnZXIudG9vbGJveFBsdWdpbnMpIGRvDQogICAgICAgICAgICAgICAgbWVudV9uYW1lc1tpXSA9IHYubWVudV9uYW1lDQogICAgICAgICAgICAgICAgaWYgdi5tZW51X2NvdW50X3RhYmxlIGFuZCBfR1t2Lm1lbnVfY291bnRfdGFibGU6Z3N1YigiKC4rKSUuLisiLCAiJTEiKV0gdGhlbg0KICAgICAgICAgICAgICAgICAgICBtZW51X25hbWVzW2ldID0gbWVudV9uYW1lc1tpXSAuLiAiICgiIC4uICNfR1t2Lm1lbnVfY291bnRfdGFibGU6Z3N1YigiKC4rKSUuLisiLCAiJTEiKV1bdi5tZW51X2NvdW50X3RhYmxlOmdzdWIoIi4rJS4oLispIiwgIiUxIildIC4uICIpIg0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBtZW51X25hbWVzWyNtZW51X25hbWVzICsgMV0gPSAi4pqZ77iPIFBsdWdpbiBNYW5hZ2VyIg0KICAgICAgICAgICAgbWVudV9uYW1lc1sjbWVudV9uYW1lcyArIDFdID0gIuKdjCBFeGl0Ig0KICAgICAgICAgICAgbG9jYWwgbWVudSA9IGdnLmNob2ljZShtZW51X25hbWVzLCBuaWwsIHNjcmlwdF90aXRsZSkNCiAgICAgICAgICAgIGlmIG1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBtZW51ID09ICNtZW51X25hbWVzIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgb3MuZXhpdCgpDQogICAgICAgICAgICAgICAgZWxzZWlmIG1lbnUgPT0gI21lbnVfbmFtZXMgLSAxIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5jb25maWdNZW51KCkNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHN0YXR1cywgcmV0dmFsID0gcGNhbGwocGx1Z2luTWFuYWdlci5jYWxsUGx1Z2luLA0KICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luTWFuYWdlci50b29sYm94UGx1Z2luc1ttZW51XS5wbHVnaW5fcGF0aCwNCiAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIudG9vbGJveFBsdWdpbnNbbWVudV0uZnVuY3Rpb25fdGFibGUpOw0KICAgICAgICAgICAgICAgICAgICBpZiBzdGF0dXMgPT0gZmFsc2UgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZXJyb3JfbWVudSA9IGdnLmFsZXJ0KHJldHZhbCwgIk9LIiwgIkNvcHkgRXJyb3IiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZXJyb3JfbWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGVycm9yX21lbnUgPT0gMiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdnLmNvcHlUZXh0KHJldHZhbCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbHNlDQogICAgICAgICAgICBsb2NhbCBjdXJyZW50X21lbnUgPSAxDQogICAgICAgICAgICBpZiBtZW51X251bWJlciB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgIGN1cnJlbnRfbWVudSA9IG1lbnVfbnVtYmVyDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGxvY2FsIGxpbWl0ID0gY3VycmVudF9tZW51IC0gMQ0KICAgICAgICAgICAgbG9jYWwgbWVudV9uYW1lcyA9IHt9DQogICAgICAgICAgICBsb2NhbCB0b3RhbF9wbHVnaW5zID0gI3BsdWdpbk1hbmFnZXIudG9vbGJveFBsdWdpbnMNCiAgICAgICAgICAgIGxvY2FsIG1lbnVfbGltaXQgPSBwbHVnaW5NYW5hZ2VyLm1lbnVJdGVtTGltaXQNCiAgICAgICAgICAgIG1lbnVfY291bnQgPSB0b3RhbF9wbHVnaW5zIC8gbWVudV9saW1pdA0KICAgICAgICAgICAgaWYgdG90YWxfcGx1Z2lucyAlIG1lbnVfbGltaXQgfj0gMCB0aGVuDQogICAgICAgICAgICAgICAgbWVudV9jb3VudCA9IG1lbnVfY291bnQgKyAxDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHBsdWdpbk1hbmFnZXIudG9vbGJveFBsdWdpbnMpIGRvDQogICAgICAgICAgICAgICAgaWYgaSA8PSBwbHVnaW5NYW5hZ2VyLm1lbnVJdGVtTGltaXQgKiBjdXJyZW50X21lbnUgYW5kIGkgPiBwbHVnaW5NYW5hZ2VyLm1lbnVJdGVtTGltaXQgKiBsaW1pdCB0aGVuDQogICAgICAgICAgICAgICAgICAgIG1lbnVfbmFtZXNbI21lbnVfbmFtZXMgKyAxXSA9IHYubWVudV9uYW1lDQogICAgICAgICAgICAgICAgICAgIGlmIHYubWVudV9jb3VudF90YWJsZSBhbmQgX0dbdi5tZW51X2NvdW50X3RhYmxlOmdzdWIoIiguKyklLi4rIiwgIiUxIildIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVfbmFtZXNbI21lbnVfbmFtZXNdID0gbWVudV9uYW1lc1sjbWVudV9uYW1lc10gLi4gIiAoIiAuLiAjX0dbdi5tZW51X2NvdW50X3RhYmxlOmdzdWIoIiguKyklLi4rIiwgIiUxIildW3YubWVudV9jb3VudF90YWJsZTpnc3ViKCIuKyUuKC4rKSIsICIlMSIpXSAuLiAiKSINCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgI21lbnVfbmFtZXMgPT0gcGx1Z2luTWFuYWdlci5tZW51SXRlbUxpbWl0IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWYgbWVudV9jb3VudCBhbmQgY3VycmVudF9tZW51ID09IG1lbnVfY291bnQgdGhlbg0KICAgICAgICAgICAgICAgIG1lbnVfbmFtZXNbI21lbnVfbmFtZXMgKyAxXSA9ICLwn4+gIEhvbWUgTWVudSINCiAgICAgICAgICAgIGVsc2VpZiBtZW51X2NvdW50IHRoZW4NCiAgICAgICAgICAgICAgICBtZW51X25hbWVzWyNtZW51X25hbWVzICsgMV0gPSAi4o+t77iPIE5leHQgTWVudSINCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgbWVudV9uYW1lc1sjbWVudV9uYW1lcyArIDFdID0gIuKame+4jyBQbHVnaW4gTWFuYWdlciINCiAgICAgICAgICAgIG1lbnVfbmFtZXNbI21lbnVfbmFtZXMgKyAxXSA9ICLinYwgRXhpdCINCiAgICAgICAgICAgIGxvY2FsIG1lbnUgPSBnZy5jaG9pY2UobWVudV9uYW1lcywgbmlsLCBzY3JpcHRfdGl0bGUpDQogICAgICAgICAgICBpZiBtZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgbG9jYWwgbWVudVJhbmdlID0gcGx1Z2luTWFuYWdlci5tZW51SXRlbUxpbWl0ICogbGltaXQNCiAgICAgICAgICAgICAgICBpZiBtZW51ID09ICNtZW51X25hbWVzIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgb3MuZXhpdCgpDQogICAgICAgICAgICAgICAgZWxzZWlmIG1lbnUgPT0gI21lbnVfbmFtZXMgLSAxIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5jb25maWdNZW51KCkNCiAgICAgICAgICAgICAgICBlbHNlaWYgbWVudSA8PSAjbWVudV9uYW1lcyAtIDMgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBjdXJyZW50X21lbnUgPiAxIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxfaW5kZXggPSBtZW51ICsgcGx1Z2luTWFuYWdlci5tZW51SXRlbUxpbWl0ICogbGltaXQNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgY2FsbF9pbmRleCA9IG1lbnUNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHN0YXR1cywgcmV0dmFsID0gcGNhbGwocGx1Z2luTWFuYWdlci5jYWxsUGx1Z2luLA0KICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luTWFuYWdlci50b29sYm94UGx1Z2luc1tjYWxsX2luZGV4XS5wbHVnaW5fcGF0aCwNCiAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIudG9vbGJveFBsdWdpbnNbY2FsbF9pbmRleF0uZnVuY3Rpb25fdGFibGUpOw0KICAgICAgICAgICAgICAgICAgICBpZiBzdGF0dXMgPT0gZmFsc2UgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZXJyb3JfbWVudSA9IGdnLmFsZXJ0KHJldHZhbCwgIk9LIiwgIkNvcHkgRXJyb3IiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZXJyb3JfbWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGVycm9yX21lbnUgPT0gMiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdnLmNvcHlUZXh0KHJldHZhbCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbHNlaWYgbWVudSA+PSAjbWVudV9uYW1lcyAtIDIgLSBtZW51X2NvdW50IGFuZCBtZW51IDw9ICNtZW51X25hbWVzIC0gMiB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIGN1cnJlbnRfbWVudSA9PSBtZW51X2NvdW50IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIuaG9tZSgxKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmhvbWUoY3VycmVudF9tZW51ICsgMSkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIHdoaWxlTG9vcCA9IHt9LA0KICAgIGRvV2hpbGVMb29wID0gZnVuY3Rpb24oKQ0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhwbHVnaW5NYW5hZ2VyLndoaWxlTG9vcCkgZG8NCiAgICAgICAgICAgIGxvY2FsIG1zX3RvX3NlYyA9IHYucnVuX2V2ZXJ5IC8gMTAwMA0KICAgICAgICAgICAgaWYgb3MudGltZSgpIC0gdi5sYXN0X3J1biA+IG1zX3RvX3NlYyB0aGVuDQogICAgICAgICAgICAgICAgaWYgdi5kb19wY2FsbCA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgcGNhbGwoX0dbdi5wbHVnaW5fdGFibGVdW3YuY2FsbF9mdW5jdGlvbl0pDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBfR1t2LnBsdWdpbl90YWJsZV1bdi5jYWxsX2Z1bmN0aW9uXSgpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgdi5sYXN0X3J1biA9IG9zLnRpbWUoKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KfQ0KDQppZiBwY2FsbChwbHVnaW5NYW5hZ2VyLmluaXRQbHVnaW5NYW5hZ2VyKSA9PSBmYWxzZSB0aGVuDQogICAgcGx1Z2luTWFuYWdlci50b29sYm94QWxsUGx1Z2lucyA9IHBsdWdpbk1hbmFnZXIudG9vbGJveFBsdWdpbnMNCiAgICBwbHVnaW5NYW5hZ2VyLnNhdmVBbGxQbHVnaW5zKCkNCiAgICBwbHVnaW5NYW5hZ2VyLnNhdmVNZW51TGltaXQoKQ0KZW5kDQpwbHVnaW5NYW5hZ2VyLnNhdmVQbHVnaW5zKCkNCg0KcGx1Z2luTWFuYWdlci5ob21lKCkNCg0KZ2cuc2hvd1VpQnV0dG9uKCkNCg0Kd2hpbGUgdHJ1ZSBkbw0KICAgIHBsdWdpbk1hbmFnZXIuZG9XaGlsZUxvb3AoKQ0KICAgIGlmIGdnLmlzQ2xpY2tlZFVpQnV0dG9uKCkgdGhlbg0KICAgICAgICBwbHVnaW5NYW5hZ2VyLmhvbWUoKQ0KICAgIGVuZA0KICAgIGdnLnNsZWVwKDEwMCkNCmVuZA0K"
        },
        [2] = {
            file_name = "plugin_bc_class_field_search.lua",
            file_data = "Y2xhc3NGaWVsZFNlYXJjaGVyID0gew0KCS0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCgljbGFzc0ZpZWxkU2VhcmNoZXIuaG9tZSgpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBob21lID0gZnVuY3Rpb24oKQ0KICAgICAgICB3aGlsZSAobmlsKSBkbw0KICAgICAgICAgICAgbG9jYWwgaG9tZVZhbCA9IHt9DQogICAgICAgICAgICBpZiAoaG9tZVZhbC5ob21lVmFsKSB0aGVuDQogICAgICAgICAgICAgICAgaG9tZVZhbC5ob21lVmFsID0gKGhvbWVWYWwuaG9tZVZhbChob21lVmFsKSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZ2cuc2V0UmFuZ2VzKGdnLlJFR0lPTl9DX0FMTE9DIHwgZ2cuUkVHSU9OX0FOT05ZTU9VUykNCiAgICAgICAgbG9jYWwgc3RhcnRfYWRkcmVzcyA9IGdnLmdldFJlc3VsdHMoMSkNCiAgICAgICAgZ2cuc2VhcmNoUG9pbnRlcigxMDAwKQ0KICAgICAgICBsb2NhbCBwb2ludGVyc190byA9IGdnLmdldFJlc3VsdHMoZ2cuZ2V0UmVzdWx0c0NvdW50KCkpDQogICAgICAgIGxvY2FsIGZpZWxkX29mZnNldCA9IDB4MA0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhwb2ludGVyc190bykgZG8NCiAgICAgICAgICAgIHBvaW50ZXJzX3RvW2ldLmFkZHJlc3MgPSB2LnZhbHVlDQogICAgICAgIGVuZA0KICAgICAgICB0YWJsZS5pbnNlcnQocG9pbnRlcnNfdG8sIHN0YXJ0X2FkZHJlc3NbMV0pDQogICAgICAgIGdnLmxvYWRSZXN1bHRzKHBvaW50ZXJzX3RvKQ0KICAgICAgICBsb2NhbCBwb2ludGVyc190byA9IGdnLmdldFJlc3VsdHMoZ2cuZ2V0UmVzdWx0c0NvdW50KCkpDQogICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHBvaW50ZXJzX3RvKSBkbw0KICAgICAgICAgICAgaWYgdi5hZGRyZXNzID09IHN0YXJ0X2FkZHJlc3NbMV0uYWRkcmVzcyB0aGVuDQogICAgICAgICAgICAgICAgbG9jYWwgY2xhc3NfcG9pbnRlciA9IHtwb2ludGVyc190b1tpIC0gMV19DQogICAgICAgICAgICAgICAgZmllbGRfb2Zmc2V0ID0gaGV4X28ocG9pbnRlcnNfdG9baV0uYWRkcmVzcyAtIHBvaW50ZXJzX3RvW2kgLSAxXS5hZGRyZXNzKQ0KICAgICAgICAgICAgICAgIGdnLmxvYWRSZXN1bHRzKGNsYXNzX3BvaW50ZXIpDQogICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgbG9jYWwgY2xhc3NfcG9pbnRlciA9IGdnLmdldFJlc3VsdHMoMSkNCiAgICAgICAgbG9jYWwgY2xhc3NfbmFtZV9wb2ludGVyID0ge30NCiAgICAgICAgY2xhc3NfbmFtZV9wb2ludGVyWzFdID0ge30NCiAgICAgICAgY2xhc3NfbmFtZV9wb2ludGVyWzFdLmFkZHJlc3MgPSBjbGFzc19wb2ludGVyWzFdLnZhbHVlICsgOA0KICAgICAgICBjbGFzc19uYW1lX3BvaW50ZXJbMV0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgIGxvY2FsIGNsYXNzX25hbWVfYWRkcmVzcyA9IGdnLmdldFZhbHVlcyhjbGFzc19uYW1lX3BvaW50ZXIpDQogICAgICAgIGNsYXNzX25hbWVfYWRkcmVzcyA9IGNsYXNzX25hbWVfYWRkcmVzc1sxXS52YWx1ZQ0KICAgICAgICBnZXRfY2xhc3NfbmFtZSA9IHt9DQogICAgICAgIG9mZnNldCA9IDANCiAgICAgICAgZm9yIGkgPSAxLCAxMDAgZG8NCiAgICAgICAgICAgIGdldF9jbGFzc19uYW1lW2ldID0ge30NCiAgICAgICAgICAgIGdldF9jbGFzc19uYW1lW2ldLmFkZHJlc3MgPSBjbGFzc19uYW1lX2FkZHJlc3MgKyBvZmZzZXQNCiAgICAgICAgICAgIGdldF9jbGFzc19uYW1lW2ldLmZsYWdzID0gZ2cuVFlQRV9CWVRFDQogICAgICAgICAgICBvZmZzZXQgPSBvZmZzZXQgKyAxDQogICAgICAgIGVuZA0KICAgICAgICBnZXRfY2xhc3NfbmFtZSA9IGdnLmdldFZhbHVlcyhnZXRfY2xhc3NfbmFtZSkNCiAgICAgICAgY2xhc3NfbmFtZSA9ICIiDQogICAgICAgIGZvciBpbmRleCwgdmFsdWUgaW4gcGFpcnMoZ2V0X2NsYXNzX25hbWUpIGRvDQogICAgICAgICAgICBpZiB2YWx1ZS52YWx1ZSA+PSAwIGFuZCB2YWx1ZS52YWx1ZSA8PSAyNTUgdGhlbg0KICAgICAgICAgICAgICAgIGNsYXNzX25hbWUgPSBjbGFzc19uYW1lIC4uIHN0cmluZy5jaGFyKHZhbHVlLnZhbHVlKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiB2YWx1ZS52YWx1ZSA9PSAwIHRoZW4NCiAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBjbGFzc19uYW1lID0gY2xhc3NfbmFtZTpnc3ViKCIAIiwgIiIpDQogICAgICAgIGxvY2FsIGZpZWxkc19wb2ludGVyID0ge30NCiAgICAgICAgZmllbGRzX3BvaW50ZXJbMV0gPSB7fQ0KICAgICAgICBmaWVsZHNfcG9pbnRlclsxXS5hZGRyZXNzID0gY2xhc3NfcG9pbnRlclsxXS52YWx1ZSArIDB4NDANCiAgICAgICAgZmllbGRzX3BvaW50ZXJbMV0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgIGxvY2FsIGZpZWxkc19wb2ludGVyX2FkZHJlc3MgPSBnZy5nZXRWYWx1ZXMoZmllbGRzX3BvaW50ZXIpDQogICAgICAgIGxvY2FsIGZpZWxkc19zdGFydCA9IHt9DQogICAgICAgIGZpZWxkc19zdGFydFsxXSA9IHt9DQogICAgICAgIGZpZWxkc19zdGFydFsxXS5hZGRyZXNzID0gZmllbGRzX3BvaW50ZXJfYWRkcmVzc1sxXS52YWx1ZQ0KICAgICAgICBmaWVsZHNfc3RhcnRbMV0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgIGdnLmxvYWRSZXN1bHRzKGZpZWxkc19zdGFydCkNCiAgICAgICAgZmllbGRzX3N0YXJ0ID0gZ2cuZ2V0UmVzdWx0cygxKQ0KICAgICAgICBnZy5jbGVhclJlc3VsdHMoKQ0KICAgICAgICBnZy5zZWFyY2hOdW1iZXIodG9udW1iZXIoZmllbGRfb2Zmc2V0KSwgZ2cuVFlQRV9EV09SRCwgZmFsc2UsIGdnLlNJR05fRVFVQUwsIGZpZWxkc19zdGFydFsxXS5hZGRyZXNzLA0KICAgICAgICAgICAgZmllbGRzX3N0YXJ0WzFdLmFkZHJlc3MgKyAxMDAwLCAxKQ0KICAgICAgICBsb2NhbCBmaWVsZF9mb3VuZCA9IGdnLmdldFJlc3VsdHMoMSkNCiAgICAgICAgbG9jYWwgZmllbGRfbmFtZV9wb2ludGVyID0ge30NCiAgICAgICAgZmllbGRfbmFtZV9wb2ludGVyWzFdID0ge30NCiAgICAgICAgZmllbGRfbmFtZV9wb2ludGVyWzFdLmFkZHJlc3MgPSBmaWVsZF9mb3VuZFsxXS5hZGRyZXNzIC0gMTINCiAgICAgICAgZmllbGRfbmFtZV9wb2ludGVyWzFdLmZsYWdzID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICBmaWVsZF9uYW1lX3BvaW50ZXIgPSBnZy5nZXRWYWx1ZXMoZmllbGRfbmFtZV9wb2ludGVyKQ0KICAgICAgICBnZXRfZmllbGRfbmFtZSA9IHt9DQogICAgICAgIG9mZnNldCA9IDANCiAgICAgICAgZm9yIGkgPSAxLCAxMDAgZG8NCiAgICAgICAgICAgIGdldF9maWVsZF9uYW1lW2ldID0ge30NCiAgICAgICAgICAgIGdldF9maWVsZF9uYW1lW2ldLmFkZHJlc3MgPSBmaWVsZF9uYW1lX3BvaW50ZXJbMV0udmFsdWUgKyBvZmZzZXQNCiAgICAgICAgICAgIGdldF9maWVsZF9uYW1lW2ldLmZsYWdzID0gZ2cuVFlQRV9CWVRFDQogICAgICAgICAgICBvZmZzZXQgPSBvZmZzZXQgKyAxDQogICAgICAgIGVuZA0KICAgICAgICBnZXRfZmllbGRfbmFtZSA9IGdnLmdldFZhbHVlcyhnZXRfZmllbGRfbmFtZSkNCiAgICAgICAgZmllbGRfbmFtZSA9ICIiDQogICAgICAgIGZvciBpbmRleCwgdmFsdWUgaW4gcGFpcnMoZ2V0X2ZpZWxkX25hbWUpIGRvDQogICAgICAgICAgICBpZiB2YWx1ZS52YWx1ZSA+PSAwIGFuZCB2YWx1ZS52YWx1ZSA8PSAyNTUgdGhlbg0KICAgICAgICAgICAgICAgIGZpZWxkX25hbWUgPSBmaWVsZF9uYW1lIC4uIHN0cmluZy5jaGFyKHZhbHVlLnZhbHVlKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiB2YWx1ZS52YWx1ZSA9PSAwIHRoZW4NCiAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBnZy5sb2FkUmVzdWx0cyhzdGFydF9hZGRyZXNzKQ0KICAgICAgICBnZy5hbGVydChzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gQ2xhc3MvRmllbGQgc2VhcmNoIHJlc3VsdC4g4oS577iPXG5DbGFzcyBOYW1lOiAiIC4uIGNsYXNzX25hbWUgLi4gIlxuRmllbGQgTmFtZTogIiAuLiBmaWVsZF9uYW1lIC4uICJcbkZpZWxkIE9mZnNldDogIiAuLiBmaWVsZF9vZmZzZXQpDQogICAgICAgIHBsdWdpbk1hbmFnZXIuZGVmYXVsdEhhbmRsZXIoImNsYXNzX3Jlc3VsdHMiLCBjbGFzc19uYW1lKQ0KICAgIGVuZA0KfQ0KDQpjbGFzc0ZpZWxkU2VhcmNoZXIuaG9tZSgpDQo"
        },
        [3] = {
            file_name = "plugin_bc_enum_search_results.lua",
            file_data = "ZW51bVNlYXJjaFJlc3VsdHMgPSB7DQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWVudW1TZWFyY2hSZXN1bHRzLmhvbWUoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgaG9tZSA9IGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgY2xlYW5lZF90YWJsZSA9IHt9DQogICAgICAgIGxvY2FsIGFkZGVkX3RhYmxlID0ge30NCiAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoZHVtcFNlYXJjaGVyLmVudW1SZXN1bHRzKSBkbw0KICAgICAgICAgICAgaWYgbm90IGFkZGVkX3RhYmxlW3ZbMV1dIHRoZW4NCiAgICAgICAgICAgICAgICBhZGRlZF90YWJsZVt2WzFdXSA9IHRydWUNCiAgICAgICAgICAgICAgICBsb2NhbCBuYW1lX3N0cmluZyA9ICIiDQogICAgICAgICAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBwYWlycyhkdW1wX2NzX3RhYmxlW3ZbMV1dLmZpZWxkcykgZG8NCiAgICAgICAgICAgICAgICAgICAgaWYgbmFtZV9zdHJpbmcgPT0gIiIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgbmFtZV9zdHJpbmcgPSB2YWx1ZS5lbnVtX3R5cGUgLi4gIlxuIg0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgbmFtZV9zdHJpbmcgPSBuYW1lX3N0cmluZyAuLiB2YWx1ZS5lbnVtX25hbWUgLi4gIsKgPcKgIiAuLiB2YWx1ZS5lbnVtX3ZhbHVlIC4uICJcbiINCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBjbGVhbmVkX3RhYmxlWyNjbGVhbmVkX3RhYmxlICsgMV0gPSBuYW1lX3N0cmluZw0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBsb2NhbCByZXN1bHRzX21lbnUgPSBnZy5jaG9pY2UoY2xlYW5lZF90YWJsZSwgbmlsLCBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gRW51bSBzZWFyY2ggcmVzdWx0cy4g4oS577iPIikNCiAgICAgICAgaWYgcmVzdWx0c19tZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICBnZy5jb3B5VGV4dChjbGVhbmVkX3RhYmxlW3Jlc3VsdHNfbWVudV0pDQogICAgICAgICAgICBnZy50b2FzdChzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gTGlzdCBDb3BpZWQgVG8gQ2xpcGJvYXJkIOKEue+4jyIpDQogICAgICAgIGVuZA0KICAgIGVuZA0KfQ0KDQplbnVtU2VhcmNoUmVzdWx0cy5ob21lKCkNCg"
        },
        [4] = {
            file_name = "plugin_bc_lib_dumper.lua",
            file_data = "bGliRHVtcGVyID0gew0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglsaWJEdW1wZXIuZHVtcEZpbGUoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgZHVtcEZpbGUgPSBmdW5jdGlvbihzdGFydF9hZGRyZXNzLCBlbmRfYWRkcmVzcykNCiAgICAgICAgbG9jYWwgc3RhcnRfYWRkcmVzc19mbmFtZSA9IHN0cmluZy5sb3dlcihzdHJpbmcuc3ViKHN0YXJ0X2FkZHJlc3MsIDMpKQ0KICAgICAgICBsb2NhbCBlbmRfYWRkcmVzc19mbmFtZSA9IHN0cmluZy5sb3dlcihzdHJpbmcuc3ViKGVuZF9hZGRyZXNzLCAzKSkNCiAgICAgICAgZ2cuZHVtcE1lbW9yeSh0b251bWJlcihzdGFydF9hZGRyZXNzKSwgdG9udW1iZXIoZW5kX2FkZHJlc3MpLA0KICAgICAgICAgICAgZ2cuRVhUX1NUT1JBR0UgLi4gIi9CQ19EQVRBLyIgLi4gZ2FtZV9wYXRoIC4uICIvZHVtcC8iLCBnZy5EVU1QX1NLSVBfU1lTVEVNX0xJQlMpDQogICAgICAgIGdnLmFsZXJ0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBEYXRhIER1bXBlZCDihLnvuI9cblxuU2F2ZWQgdG86ICIgLi4gZ2cuRVhUX1NUT1JBR0UgLi4gIi9CQ19EQVRBLyIgLi4gZ2FtZV9wYXRoIC4uICIvZHVtcC8gIikNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWxpYkR1bXBlci5zZWxlY3RMaWIoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgc2VsZWN0TGliID0gZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBsaWJfbmFtZV9nZW5fc2NyaXB0ID0ge30NCiAgICAgICAgbG9jYWwgbGliX3NlbGVjdG9yID0ge30NCiAgICAgICAgbG9jYWwgbGliX3NlbGVjdG9yX3N0YXJ0ID0ge30NCiAgICAgICAgbG9jYWwgbGliX3NlbGVjdG9yX2VuZCA9IHt9DQogICAgICAgIGxvY2FsIGNoZWNrX2xpYnMgPSBnZy5nZXRSYW5nZXNMaXN0KCkNCiAgICAgICAgZm9yIGssIHYgaW4gcGFpcnMoY2hlY2tfbGlicykgZG8NCiAgICAgICAgICAgIGlmIHN0cmluZy5tYXRjaChjaGVja19saWJzW2tdWyJuYW1lIl0sICIlLmRhdCIpIG9yIA0KCQkJCXN0cmluZy5tYXRjaChjaGVja19saWJzW2tdWyJuYW1lIl0sICIlW3N0YWNrJV0iKSBvcg0KICAgICAgICAgICAgICAgIHN0cmluZy5tYXRjaChjaGVja19saWJzW2tdWyJuYW1lIl0sICIvdmVuZG9yLyIpIG9yIA0KCQkJCXN0cmluZy5tYXRjaChjaGVja19saWJzW2tdWyJuYW1lIl0sICIvc3lzdGVtLyIpIG9yDQogICAgICAgICAgICAgICAgc3RyaW5nLm1hdGNoKGNoZWNrX2xpYnNba11bIm5hbWUiXSwgIi9kZXYvIikgb3IgDQoJCQkJc3RyaW5nLm1hdGNoKGNoZWNrX2xpYnNba11bIm5hbWUiXSwgIiVbaGVhcCVdIikgb3INCiAgICAgICAgICAgICAgICBzdHJpbmcubWF0Y2goY2hlY2tfbGlic1trXVsibmFtZSJdLCAiJS5hcnQiKSBvciANCgkJCQlzdHJpbmcubWF0Y2goY2hlY2tfbGlic1trXVsibmFtZSJdLCAiYW5vbl9pbm9kZToiKSBvcg0KICAgICAgICAgICAgICAgIHN0cmluZy5tYXRjaChjaGVja19saWJzW2tdWyJuYW1lIl0sICJkZWxldGVkIikgb3IgDQoJCQkJc3RyaW5nLm1hdGNoKGNoZWNrX2xpYnNba11bIm5hbWUiXSwgImFub246Iikgb3INCiAgICAgICAgICAgICAgICBzdHJpbmcubWF0Y2goY2hlY2tfbGlic1trXVsibmFtZSJdLCAiJS50dGYiKSBvciANCgkJCQlzdHJpbmcubWF0Y2goY2hlY2tfbGlic1trXVsibmFtZSJdLCAiLiIpID09IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgY2hlY2tfbGlic1trXSA9IG5pbA0KICAgICAgICAgICAgZWxzZWlmIGNoZWNrX2xpYnNba11bIm5hbWUiXTpmaW5kKCIuc28kIikgdGhlbg0KICAgICAgICAgICAgICAgIGdldF9zaXplX2FycmF5ID0ge30NCiAgICAgICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhjaGVja19saWJzW2tdKSBkbw0KICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoZ2V0X3NpemVfYXJyYXksIHYpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgbG9jYWwgZmlsZV9zaXplID0gdG9udW1iZXIoZ2V0X3NpemVfYXJyYXlbMV0pIC0gdG9udW1iZXIoZ2V0X3NpemVfYXJyYXlbNl0pDQogICAgICAgICAgICAgICAgbG9jYWwgZmlsZV9zdGFydCA9IHRvbnVtYmVyKGdldF9zaXplX2FycmF5WzZdKQ0KICAgICAgICAgICAgICAgIGxvY2FsIGZpbGVfZW5kID0gdG9udW1iZXIoZ2V0X3NpemVfYXJyYXlbMV0pDQogICAgICAgICAgICAgICAgaWYgZmlsZV9zaXplIDwgNTEyMDAwMCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGNoZWNrX2xpYnNba10gPSBuaWwNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGRpdmlkZV9ieSA9ICIxMDI0MDAwIg0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBzaXplX21hdGggPSB0b251bWJlcihmaWxlX3NpemUpIC8gdG9udW1iZXIoZGl2aWRlX2J5KQ0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBzaXplX2Rpc3BsYXkgPSBzaXplX21hdGggLi4gIk1CIg0KICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQobGliX25hbWVfZ2VuX3NjcmlwdCwgY2hlY2tfbGlic1trXVsibmFtZSJdKQ0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBmbGlibmFtZSA9IGNoZWNrX2xpYnNba11bIm5hbWUiXQ0KICAgICAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2WyJuYW1lIl0sICJsaWJpbDJjcHAuc28iKSBvciBzdHJpbmcuZmluZCh2WyJuYW1lIl0sICJzcGxpdF9jb25maWcuYXJtZWFiaV92N2EuYXBrIikgb3INCiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZy5maW5kKHZbIm5hbWUiXSwgInNwbGl0X2NvbmZpZy5hcm02NF92OGEuYXBrIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9zdHJpbmcgPSAi44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iPXG5OYW1lOiAiIC4uDQoJCQkJCQkJCQl2WyJuYW1lIl0gLi4gIlxuUmFuZ2U6ICIgLi4gdi5zdGF0ZSAuLiAiXG5TdGFydCBBZGRyZXNzOiAiIC4uDQoJCQkJCQkJCQlsaWJEdW1wZXIuaGV4X28oZ2V0X3NpemVfYXJyYXlbNl0pIC4uICJcbkVuZCBBZGRyZXNzOiAiIC4uDQoJCQkJCQkJCQlsaWJEdW1wZXIuaGV4X28oZ2V0X3NpemVfYXJyYXlbMV0pIC4uICJcblNpemU6ICIgLi4gc2l6ZV9kaXNwbGF5IC4uDQoJCQkJCQkJCQkiXG7jgLDvuI/jgLDvuI/jgLDvuI/jgLDvuI/jgLDvuI/jgLDvuI/jgLDvuI/jgLDvuI/jgLDvuI/jgLDvuI/jgLDvuI/jgLDvuI8iDQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVfc3RyaW5nID0gIuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgVxuTmFtZTogIiAuLiB2WyJuYW1lIl0gLi4gIlxuUmFuZ2U6ICIgLi4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuc3RhdGUgLi4gIlxuU3RhcnQgQWRkcmVzczogIiAuLiBsaWJEdW1wZXIuaGV4X28oZ2V0X3NpemVfYXJyYXlbNl0pIC4uDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiXG5FbmQgQWRkcmVzczogIiAuLiBsaWJEdW1wZXIuaGV4X28oZ2V0X3NpemVfYXJyYXlbMV0pIC4uICJcblNpemU6ICIgLi4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemVfZGlzcGxheSAuLiAiXG7ilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEiDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZChmbGlibmFtZSwgIi0iKSBhbmQgc3RyaW5nLmZpbmQoZmxpYm5hbWUsICI9PSIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGxpYl9zZWFyY2ggPSBzdHJpbmcuZmluZChmbGlibmFtZSwgIi0iKQ0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgbGliX3NlYXJjaDIgPSBzdHJpbmcuZmluZChmbGlibmFtZSwgIj09IikNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGxpYm5hbWVfcGFydDEgPSBzdHJpbmcuc3ViKGZsaWJuYW1lLCAxLCBsaWJfc2VhcmNoIC0gMSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGxpYm5hbWVfcGFydDIgPSBzdHJpbmcuc3ViKGZsaWJuYW1lLCBsaWJfc2VhcmNoMiArIDIpDQogICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQobGliX3NlbGVjdG9yLCBtZW51X3N0cmluZykNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGxpYl9zZWxlY3RvciwgbWVudV9zdHJpbmcpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQobGliX3NlbGVjdG9yX3N0YXJ0LCBmaWxlX3N0YXJ0KQ0KICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQobGliX3NlbGVjdG9yX2VuZCwgZmlsZV9lbmQpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIDo6c2VsZWN0X2xpYjo6DQogICAgICAgIGxvY2FsIGggPSBnZy5jaG9pY2UobGliX3NlbGVjdG9yLCBuaWwsIHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBTZWxlY3QgTGlicmFyeSBUbyBEdW1wIOKEue+4jyIpDQogICAgICAgIGlmIGggPT0gbmlsIHRoZW4NCiAgICAgICAgICAgIGdvdG8gZW5kX3NlbGVjdA0KICAgICAgICBlbHNlDQogICAgICAgICAgICBsb2NhbCBsaWJfbmFtZSA9IGxpYl9uYW1lX2dlbl9zY3JpcHRbaF0NCiAgICAgICAgICAgIGZvciBzdHIgaW4gc3RyaW5nLmdtYXRjaChsaWJfbmFtZSwgIihbXi9dKykiKSBkbw0KICAgICAgICAgICAgICAgIGZpeGVkX2xpYl9uYW1lID0gc3RyDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIEJBU0VBRERSID0gbGliX3NlbGVjdG9yX3N0YXJ0W2hdDQogICAgICAgICAgICBpZiBsaWJfc2VsZWN0b3JbaCArIDJdIGFuZCBzdHJpbmcuZ3N1YihsaWJfc2VsZWN0b3JbaF0sICIoLitzbyApLisiLCAiJTEiKSA9PSBzdHJpbmcuZ3N1YihsaWJfc2VsZWN0b3JbaCArIDJdLCAiKC4rc28gKS4rIiwgIiUxIikgdGhlbg0KICAgICAgICAgICAgICAgIEVOREFERFIgPSBsaWJfc2VsZWN0b3JfZW5kW2ggKyAyXQ0KICAgICAgICAgICAgZWxzZWlmIHN0cmluZy5nc3ViKGxpYl9zZWxlY3RvcltoXSwgIiguK3NvICkuKyIsICIlMSIpID09IHN0cmluZy5nc3ViKGxpYl9zZWxlY3RvcltoICsgMV0sICIoLitzbyApLisiLCAiJTEiKSB0aGVuDQogICAgICAgICAgICAgICAgRU5EQUREUiA9IGxpYl9zZWxlY3Rvcl9lbmRbaCArIDFdDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgRU5EQUREUiA9IGxpYl9zZWxlY3Rvcl9lbmRbaF0NCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZ2cudG9hc3Qoc2NyaXB0X3RpdGxlIC4uICJcblxu4pyFICIgLi4gZml4ZWRfbGliX25hbWUgLi4gIiBTZWxlY3RlZCDinIUiKQ0KICAgICAgICBsaWJEdW1wZXIuZHVtcEZpbGUoQkFTRUFERFIsIEVOREFERFIpDQogICAgICAgIDo6ZW5kX3NlbGVjdDo6DQogICAgZW5kLA0KICAgIGhleF9vID0gZnVuY3Rpb24obikNCiAgICAgICAgcmV0dXJuICIweCIgLi4gc3RyaW5nLnVwcGVyKHN0cmluZy5mb3JtYXQoIiV4IiwgbikpDQogICAgZW5kDQp9DQoNCmxpYkR1bXBlci5zZWxlY3RMaWIoKQ0K"
        },
        [5] = {
            file_name = "plugin_bc_save_list.lua",
            file_data = "c2F2ZUxpc3RNYW5hZ2VyID0gew0KICAgIGxpc3QgPSB7fSwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJc2F2ZUxpc3RNYW5hZ2VyLmhvbWUoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgaG9tZSA9IGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgbWFpbk1lbnUgPSBnZy5jaG9pY2UoeyLinpUgQWRkIGl0ZW1zIGluIFNhdmVkIFRhYiB0byBTYXZlIExpc3QiLCANCgkJCQkJCQkJCSLimLAgTG9hZCBTYXZlIExpc3QgdG8gU2F2ZWQgVGFiIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICLwn5SAIFJlcGxhY2UgY3VycmVudCBTYXZlIExpc3Qgd2l0aCBpdGVtcyBpbiBTYXZlZCBUYWIifSwgDQoJCQkJCQkJCQluaWwsDQoJCQkJCQkJCQlzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2F2ZSBMaXN0IE1hbmFnZXIg4oS577iPIikNCiAgICAgICAgaWYgbWFpbk1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgIGlmIG1haW5NZW51ID09IDEgdGhlbg0KICAgICAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKGdnLmdldExpc3RJdGVtcygpKSBkbw0KICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoc2F2ZUxpc3RNYW5hZ2VyLmxpc3QsIHYpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZ2cuYWxlcnQoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPICIgLi4gI2dnLmdldExpc3RJdGVtcygpIC4uICIgaXRlbXMgYWRkZWQgdG8gdGhlIFNhdmUgTGlzdC4g4oS577iPIikNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWYgbWFpbk1lbnUgPT0gMiB0aGVuDQogICAgICAgICAgICAgICAgZ2cuY2xlYXJMaXN0KCkNCiAgICAgICAgICAgICAgICBnZy5hZGRMaXN0SXRlbXMoc2F2ZUxpc3RNYW5hZ2VyLmxpc3QpDQogICAgICAgICAgICAgICAgZ2cuYWxlcnQoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPICIgLi4gI2dnLmdldExpc3RJdGVtcygpIC4uICIgaXRlbXMgbG9hZGVkIGZyb20gU2F2ZSBMaXN0IHRvIFNhdmUgVGFiLiDihLnvuI8iKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBtYWluTWVudSA9PSAzIHRoZW4NCiAgICAgICAgICAgICAgICBsb2NhbCBjb25maXJtID0gZ2cuY2hvaWNlKHsi4pyFIFllcyIsICLinYwgTm8ifSwgbmlsLCBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHJlcGxhY2UgeW91ciBjdXJyZW50IFNhdmUgTGlzdD8g4oS577iPXG5UaGlzIGNhbiBub3QgYmUgdW5kb25lLiIpDQogICAgICAgICAgICAgICAgaWYgY29uZmlybSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBjb25maXJtID09IDEgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZUxpc3RNYW5hZ2VyLmxpc3QgPSBnZy5nZXRMaXN0SXRlbXMoKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZ2cuYWxlcnQoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIFNhdmUgTGlzdCByZXBsYWNlZCB3aXRoIGl0ZW1zIGluIFNhdmVkIFRhYi4g4oS577iPIikNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCn0NCg0Kc2F2ZUxpc3RNYW5hZ2VyLmhvbWUoKQ0K"
        },
        [6] = {
            file_name = "plugin_bc_field_search_results.lua",
            file_data = "ZmllbGRTZWFyY2hSZXN1bHRzID0gew0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglmaWVsZFNlYXJjaFJlc3VsdHMuaG9tZSgpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBob21lID0gZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCByZXN1bHRzID0ge30NCiAgICAgICAgbG9jYWwgY2xhc3NfbmFtZXMgPSB7fQ0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhkdW1wU2VhcmNoZXIuZmllbGRSZXN1bHRzKSBkbw0KICAgICAgICAgICAgbG9jYWwgbmFtZV9zdHJpbmcgPSAiTmFtZXNwYWNlOiAiIC4uIGR1bXBfY3NfdGFibGVbdlsxXV0ubmFtZXNwYWNlIC4uICJcbiINCiAgICAgICAgICAgIGlmIGR1bXBfY3NfdGFibGVbdlsxXV0uY2xhc3MgdGhlbg0KICAgICAgICAgICAgICAgIG5hbWVfc3RyaW5nID0gbmFtZV9zdHJpbmcgLi4gIkNsYXNzIE5hbWU6ICIgLi4gZHVtcF9jc190YWJsZVt2WzFdXS5jbGFzcyAuLiAiXG4iDQogICAgICAgICAgICBlbHNlaWYgZHVtcF9jc190YWJsZVt2WzFdXS5zdHJ1Y3QgdGhlbg0KICAgICAgICAgICAgICAgIG5hbWVfc3RyaW5nID0gbmFtZV9zdHJpbmcgLi4gIlN0cnVjdCBOYW1lOiAiIC4uIGR1bXBfY3NfdGFibGVbdlsxXV0uc3RydWN0IC4uICJcbiINCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgbmFtZV9zdHJpbmcgPSBuYW1lX3N0cmluZyAuLiAiRmllbGQgTmFtZTogIiAuLiBkdW1wX2NzX3RhYmxlW3ZbMV1dLmZpZWxkc1t2WzJdXS5maWVsZF9uYW1lIC4uICJcbiINCiAgICAgICAgICAgIG5hbWVfc3RyaW5nID0gbmFtZV9zdHJpbmcgLi4gIkZpZWxkIFR5cGU6ICIgLi4gZHVtcF9jc190YWJsZVt2WzFdXS5maWVsZHNbdlsyXV0uZmllbGRfdHlwZSAuLiAiXG4iDQogICAgICAgICAgICBuYW1lX3N0cmluZyA9IG5hbWVfc3RyaW5nIC4uICJGaWVsZCBPZmZzZXQ6ICIgLi4gZHVtcF9jc190YWJsZVt2WzFdXS5maWVsZHNbdlsyXV0uZmllbGRfb2Zmc2V0IC4uICJcbiINCiAgICAgICAgICAgIHJlc3VsdHNbI3Jlc3VsdHMgKyAxXSA9IG5hbWVfc3RyaW5nDQogICAgICAgICAgICBpZiBkdW1wX2NzX3RhYmxlW3ZbMV1dLmNsYXNzIHRoZW4NCiAgICAgICAgICAgICAgICBjbGFzc19uYW1lc1sjY2xhc3NfbmFtZXMgKyAxXSA9IHN0cmluZy5nc3ViKGR1bXBfY3NfdGFibGVbdlsxXV0uY2xhc3MsICIuKyBjbGFzcyAoLispIC4rIiwgIiUxIik6Z3N1YigiIC8vIFR5cGVEZWZJbmRleC4rIiwgIiIpOmdzdWIoIiguKykgOiAuKyIsICIlMSIpOmdzdWIoIiguKyksIC4rIiwgIiUxIik6Z3N1YigiIDoiLCAiIikNCiAgICAgICAgICAgIGVsc2VpZiBkdW1wX2NzX3RhYmxlW3ZbMV1dLnN0cnVjdCB0aGVuDQogICAgICAgICAgICAgICAgY2xhc3NfbmFtZXNbI2NsYXNzX25hbWVzICsgMV0gPSBzdHJpbmcuZ3N1YihkdW1wX2NzX3RhYmxlW3ZbMV1dLnN0cnVjdCwgIi4rIHN0cnVjdCAoLispIC4rIiwgIiUxIik6Z3N1YigiIC8vIFR5cGVEZWZJbmRleC4rIiwgIiIpOmdzdWIoIiguKykgOiAuKyIsICIlMSIpOmdzdWIoIiguKyksIC4rIiwgIiUxIik6Z3N1YigiIDoiLCAiIikNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgbG9jYWwgcmVzdWx0c19tZW51ID0gZ2cuY2hvaWNlKHJlc3VsdHMsIG5pbCwgc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIEZpZWxkIHNlYXJjaCByZXN1bHRzLiDihLnvuI8iKQ0KICAgICAgICBpZiByZXN1bHRzX21lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgIGdnLnRvYXN0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBMb2FkaW5nIFBsdWdpbiDihLnvuI8iKQ0KICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5kZWZhdWx0SGFuZGxlcigiY2xhc3NfcmVzdWx0cyIsIGNsYXNzX25hbWVzW3Jlc3VsdHNfbWVudV0pDQogICAgICAgIGVuZA0KICAgIGVuZA0KfQ0KDQpmaWVsZFNlYXJjaFJlc3VsdHMuaG9tZSgpDQo"
        },
        [7] = {
            file_name = "plugin_bc_dump_search.lua",
            file_data = "ZHVtcEhhbmRsZXIubG9hZER1bXBEYXRhKCkNCmR1bXBTZWFyY2hlciA9IHsNCiAgICBtZXRob2RSZXN1bHRzID0ge30sDQogICAgZW51bVJlc3VsdHMgPSB7fSwNCiAgICBmaWVsZFJlc3VsdHMgPSB7fSwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJZHVtcFNlYXJjaGVyLmNhc2VTZW5zaXRpdmUoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgY2FzZVNlbnNpdGl2ZSA9IGZ1bmN0aW9uKHBhc3NlZF9zdHJpbmcsIGlzX2Nhc2Vfc2Vuc2l0aXZlKQ0KICAgICAgICBpZiBpc19jYXNlX3NlbnNpdGl2ZSA9PSBmYWxzZSB0aGVuDQogICAgICAgICAgICBwYXNzZWRfc3RyaW5nID0gc3RyaW5nLmxvd2VyKHBhc3NlZF9zdHJpbmcpDQogICAgICAgIGVuZA0KICAgICAgICByZXR1cm4gcGFzc2VkX3N0cmluZw0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJZHVtcFNlYXJjaGVyLnNlYXJjaER1bXAoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgc2VhcmNoRHVtcCA9IGZ1bmN0aW9uKHNlYXJjaF9wcm9tcHQsIHN0eXBlX2FycmF5KQ0KICAgICAgICBsb2NhbCBpc19jYXNlX3NlbnNpdGl2ZSA9IHNlYXJjaF9wcm9tcHRbNF0NCiAgICAgICAgbG9jYWwgYWxsX3NlYXJjaF90ZXJtcyA9IHNlYXJjaF9wcm9tcHRbNV0NCiAgICAgICAgbG9jYWwgc2VhcmNoX25hbWVzcGFjZXMgPSBzZWFyY2hfcHJvbXB0WzZdDQogICAgICAgIGxvY2FsIHNlYXJjaF9jbGFzc2VzID0gc2VhcmNoX3Byb21wdFs3XQ0KICAgICAgICBsb2NhbCBzZWFyY2hfbWV0aG9kcyA9IHNlYXJjaF9wcm9tcHRbOF0NCiAgICAgICAgbG9jYWwgc2VhcmNoX2ZpZWxkcyA9IHNlYXJjaF9wcm9tcHRbOV0NCiAgICAgICAgbG9jYWwgc2VhcmNoX2VudW1zID0gc2VhcmNoX3Byb21wdFsxMF0NCiAgICAgICAgbG9jYWwgc2VhcmNoX3Rlcm1fb25lID0gZHVtcFNlYXJjaGVyLmNhc2VTZW5zaXRpdmUoc2VhcmNoX3Byb21wdFsxXSwgaXNfY2FzZV9zZW5zaXRpdmUpDQogICAgICAgIGxvY2FsIHNlYXJjaF90ZXJtX3R3byA9IGR1bXBTZWFyY2hlci5jYXNlU2Vuc2l0aXZlKHNlYXJjaF9wcm9tcHRbMl0sIGlzX2Nhc2Vfc2Vuc2l0aXZlKQ0KICAgICAgICBsb2NhbCBzZWFyY2hfdGVybV90aHJlZSA9IGR1bXBTZWFyY2hlci5jYXNlU2Vuc2l0aXZlKHNlYXJjaF9wcm9tcHRbM10sIGlzX2Nhc2Vfc2Vuc2l0aXZlKQ0KICAgICAgICBsb2NhbCBzZWFyY2hfdGVybV9vbmVfbWF0Y2hlcyA9IHt9DQogICAgICAgIGxvY2FsIHNlYXJjaF90ZXJtX3R3b19tYXRjaGVzID0ge30NCiAgICAgICAgbG9jYWwgc2VhcmNoX3Rlcm1fdGhyZWVfbWF0Y2hlcyA9IHt9DQogICAgICAgIGlmIGFsbF9zZWFyY2hfdGVybXMgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhkdW1wX2NzX3RhYmxlKSBkbw0KICAgICAgICAgICAgICAgIGxvY2FsIHNlYXJjaF90ZXJtX29uZV9mb3VuZCA9IGZhbHNlDQogICAgICAgICAgICAgICAgbG9jYWwgc2VhcmNoX3Rlcm1fdHdvX2ZvdW5kID0gZmFsc2UNCiAgICAgICAgICAgICAgICBpZiAjc2VhcmNoX3Rlcm1fdHdvID09IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICBzZWFyY2hfdGVybV90d29fZm91bmQgPSB0cnVlDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgbG9jYWwgc2VhcmNoX3Rlcm1fdGhyZWVfZm91bmQgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIGlmICNzZWFyY2hfdGVybV90aHJlZSA9PSAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3Rlcm1fdGhyZWVfZm91bmQgPSB0cnVlDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgbG9jYWwgc2VhcmNoX3Rlcm1fb25lX21hdGNoX3R5cGVzID0ge30NCiAgICAgICAgICAgICAgICBsb2NhbCBzZWFyY2hfdGVybV90d29fbWF0Y2hfdHlwZXMgPSB7fQ0KICAgICAgICAgICAgICAgIGxvY2FsIHNlYXJjaF90ZXJtX3RocmVlX21hdGNoX3R5cGVzID0ge30NCiAgICAgICAgICAgICAgICBpZiBzZWFyY2hfbmFtZXNwYWNlcyA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgY3VycmVudF9uYW1lc3BhY2UgPSB2Lm5hbWVzcGFjZQ0KICAgICAgICAgICAgICAgICAgICBpZiBpc19jYXNlX3NlbnNpdGl2ZSA9PSBmYWxzZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50X25hbWVzcGFjZSA9IGR1bXBTZWFyY2hlci5jYXNlU2Vuc2l0aXZlKGN1cnJlbnRfbmFtZXNwYWNlLCBpc19jYXNlX3NlbnNpdGl2ZSkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIGN1cnJlbnRfbmFtZXNwYWNlOmZpbmQoc2VhcmNoX3Rlcm1fb25lKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hfdGVybV9vbmVfZm91bmQgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hfdGVybV9vbmVfbWF0Y2hfdHlwZXNbIm5hbWVzcGFjZSJdID0gMQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgY3VycmVudF9uYW1lc3BhY2U6ZmluZChzZWFyY2hfdGVybV90d28pIGFuZCAjc2VhcmNoX3Rlcm1fdHdvID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hfdGVybV90d29fZm91bmQgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hfdGVybV90d29fbWF0Y2hfdHlwZXNbIm5hbWVzcGFjZSJdID0gMQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgY3VycmVudF9uYW1lc3BhY2U6ZmluZChzZWFyY2hfdGVybV90aHJlZSkgYW5kICNzZWFyY2hfdGVybV90aHJlZSA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3Rlcm1fdGhyZWVfZm91bmQgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hfdGVybV90aHJlZV9tYXRjaF90eXBlc1sibmFtZXNwYWNlIl0gPSAxDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIHNlYXJjaF9jbGFzc2VzID09IHRydWUgYW5kICh2LmNsYXNzIG9yIHYuc3RydWN0KSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGN1cnJlbnRfY2xhc3MgPSAiIg0KICAgICAgICAgICAgICAgICAgICBpZiB2LmNsYXNzIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfY2xhc3MgPSB2LmNsYXNzDQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfY2xhc3MgPSB2LnN0cnVjdA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgaXNfY2FzZV9zZW5zaXRpdmUgPT0gZmFsc2UgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9jbGFzcyA9IGR1bXBTZWFyY2hlci5jYXNlU2Vuc2l0aXZlKGN1cnJlbnRfY2xhc3MsIGlzX2Nhc2Vfc2Vuc2l0aXZlKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgY3VycmVudF9jbGFzczpmaW5kKHNlYXJjaF90ZXJtX29uZSkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3Rlcm1fb25lX2ZvdW5kID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3Rlcm1fb25lX21hdGNoX3R5cGVzWyJjbGFzc19zdHJ1Y3QiXSA9IDENCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIGN1cnJlbnRfY2xhc3M6ZmluZChzZWFyY2hfdGVybV90d28pIGFuZCAjc2VhcmNoX3Rlcm1fdHdvID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hfdGVybV90d29fZm91bmQgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hfdGVybV90d29fbWF0Y2hfdHlwZXNbImNsYXNzX3N0cnVjdCJdID0gMQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgY3VycmVudF9jbGFzczpmaW5kKHNlYXJjaF90ZXJtX3RocmVlKSBhbmQgI3NlYXJjaF90ZXJtX3RocmVlID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hfdGVybV90aHJlZV9mb3VuZCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaF90ZXJtX3RocmVlX21hdGNoX3R5cGVzWyJjbGFzc19zdHJ1Y3QiXSA9IDENCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgc2VhcmNoX2ZpZWxkcyA9PSB0cnVlIGFuZCB2LmZpZWxkcyBhbmQgKHYuY2xhc3Mgb3Igdi5zdHJ1Y3QpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgY3VycmVudF9maWVsZHMgPSB0b3N0cmluZyh2LmZpZWxkcyk6Z3N1YigiLS0gdGFibGUlKFswLTlhLXpdKyUpIiwgIiIpDQogICAgICAgICAgICAgICAgICAgIGlmIGlzX2Nhc2Vfc2Vuc2l0aXZlID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfZmllbGRzID0gZHVtcFNlYXJjaGVyLmNhc2VTZW5zaXRpdmUoY3VycmVudF9maWVsZHMsIGlzX2Nhc2Vfc2Vuc2l0aXZlKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgY3VycmVudF9maWVsZHM6ZmluZChzZWFyY2hfdGVybV9vbmUpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaF90ZXJtX29uZV9mb3VuZCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaF90ZXJtX29uZV9tYXRjaF90eXBlc1siZmllbGQiXSA9IDENCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIGN1cnJlbnRfZmllbGRzOmZpbmQoc2VhcmNoX3Rlcm1fdHdvKSBhbmQgI3NlYXJjaF90ZXJtX3R3byA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3Rlcm1fdHdvX2ZvdW5kID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3Rlcm1fdHdvX21hdGNoX3R5cGVzWyJmaWVsZCJdID0gMQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgY3VycmVudF9maWVsZHM6ZmluZChzZWFyY2hfdGVybV90aHJlZSkgYW5kICNzZWFyY2hfdGVybV90aHJlZSA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3Rlcm1fdGhyZWVfZm91bmQgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hfdGVybV90aHJlZV9tYXRjaF90eXBlc1siZmllbGQiXSA9IDENCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgc2VhcmNoX2VudW1zID09IHRydWUgYW5kIHYuZmllbGRzIGFuZCB2LmVudW0gdGhlbg0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBjdXJyZW50X2ZpZWxkcyA9IHRvc3RyaW5nKHYuZmllbGRzKTpnc3ViKCItLSB0YWJsZSUoWzAtOWEtel0rJSkiLCAiIikNCiAgICAgICAgICAgICAgICAgICAgaWYgaXNfY2FzZV9zZW5zaXRpdmUgPT0gZmFsc2UgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9maWVsZHMgPSBkdW1wU2VhcmNoZXIuY2FzZVNlbnNpdGl2ZShjdXJyZW50X2ZpZWxkcywgaXNfY2FzZV9zZW5zaXRpdmUpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBjdXJyZW50X2ZpZWxkczpmaW5kKHNlYXJjaF90ZXJtX29uZSkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3Rlcm1fb25lX2ZvdW5kID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3Rlcm1fb25lX21hdGNoX3R5cGVzWyJlbnVtIl0gPSAxDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBjdXJyZW50X2ZpZWxkczpmaW5kKHNlYXJjaF90ZXJtX3R3bykgYW5kICNzZWFyY2hfdGVybV90d28gPiAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaF90ZXJtX3R3b19mb3VuZCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaF90ZXJtX3R3b19tYXRjaF90eXBlc1siZW51bSJdID0gMQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgY3VycmVudF9maWVsZHM6ZmluZChzZWFyY2hfdGVybV90aHJlZSkgYW5kICNzZWFyY2hfdGVybV90aHJlZSA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3Rlcm1fdGhyZWVfZm91bmQgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hfdGVybV90aHJlZV9tYXRjaF90eXBlc1siZW51bSJdID0gMQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBpZiBzZWFyY2hfdGVybV9vbmVfZm91bmQgPT0gdHJ1ZSBhbmQgc2VhcmNoX3Rlcm1fdHdvX2ZvdW5kID09IHRydWUgYW5kIHNlYXJjaF90ZXJtX3RocmVlX2ZvdW5kID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBzZWFyY2hfdGVybV9vbmVfbWF0Y2hfdHlwZXNbImVudW0iXSBvciBzZWFyY2hfdGVybV90d29fbWF0Y2hfdHlwZXNbImVudW0iXSBvcg0KICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3Rlcm1fdGhyZWVfbWF0Y2hfdHlwZXNbImVudW0iXSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgaW5kZXgsIHZhbHVlIGluIHBhaXJzKHYuZmllbGRzKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHZhbHVlLmVudW1fbmFtZTpmaW5kKHNlYXJjaF90ZXJtX29uZSkgb3IgKHZhbHVlLmVudW1fbmFtZTpmaW5kKHNlYXJjaF90ZXJtX3R3bykgYW5kICNzZWFyY2hfdGVybV90d28gPiAwKSBvciAodmFsdWUuZW51bV9uYW1lOmZpbmQoc2VhcmNoX3Rlcm1fdGhyZWUpIGFuZCAjc2VhcmNoX3Rlcm1fdGhyZWUgPiAwKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChkdW1wU2VhcmNoZXIuZW51bVJlc3VsdHMsIHtpLCBpbmRleH0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIHNlYXJjaF90ZXJtX29uZV9tYXRjaF90eXBlc1siZmllbGQiXSBvciBzZWFyY2hfdGVybV90d29fbWF0Y2hfdHlwZXNbImZpZWxkIl0gb3INCiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaF90ZXJtX3RocmVlX21hdGNoX3R5cGVzWyJmaWVsZCJdIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpbmRleCwgdmFsdWUgaW4gcGFpcnModi5maWVsZHMpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdmFsdWUuZmllbGRfbmFtZTpmaW5kKHNlYXJjaF90ZXJtX29uZSkgb3IgKHZhbHVlLmZpZWxkX25hbWU6ZmluZChzZWFyY2hfdGVybV90d28pIGFuZCAjc2VhcmNoX3Rlcm1fdHdvID4gMCkgb3IgKHZhbHVlLmZpZWxkX25hbWU6ZmluZChzZWFyY2hfdGVybV90aHJlZSkgYW5kICNzZWFyY2hfdGVybV90aHJlZSA+IDApIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGR1bXBTZWFyY2hlci5maWVsZFJlc3VsdHMsIHtpLCBpbmRleH0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgc2VhcmNoX21ldGhvZHMgPT0gdHJ1ZSBhbmQgdi5tZXRob2RzIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBwYWlycyh2Lm1ldGhvZHMpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBmb3VuZF9pbl9tZXRob2QgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgY3VycmVudF9tZXRob2QgPSB0b3N0cmluZyh2YWx1ZSk6Z3N1YigiLS0gdGFibGUlKFswLTlhLXpdKyUpIiwgIiIpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBpc19jYXNlX3NlbnNpdGl2ZSA9PSBmYWxzZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9tZXRob2QgPSBkdW1wU2VhcmNoZXIuY2FzZVNlbnNpdGl2ZShjdXJyZW50X21ldGhvZCwgaXNfY2FzZV9zZW5zaXRpdmUpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHNlYXJjaF90ZXJtX29uZV9mb3VuZF9sb2MgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgc2VhcmNoX3Rlcm1fdHdvX2ZvdW5kX2xvYyA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBzZWFyY2hfdGVybV90aHJlZV9mb3VuZF9sb2MgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgY3VycmVudF9tZXRob2Q6ZmluZChzZWFyY2hfdGVybV9vbmUpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hfdGVybV9vbmVfZm91bmRfbG9jID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNlYXJjaF90ZXJtX3R3b19mb3VuZCA9PSB0cnVlIGFuZCBzZWFyY2hfdGVybV90aHJlZV9mb3VuZCA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGR1bXBTZWFyY2hlci5tZXRob2RSZXN1bHRzLCB7aSwgaW5kZXh9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBzZWFyY2hfdGVybV90d29fbWF0Y2hfdHlwZXNbImZpZWxkIl0gb3Igc2VhcmNoX3Rlcm1fdGhyZWVfbWF0Y2hfdHlwZXNbImZpZWxkIl0gdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGluZCwgdmFsIGluIHBhaXJzKHYuZmllbGRzKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWwuZmllbGRfbmFtZTpmaW5kKHNlYXJjaF90ZXJtX3R3bykgYW5kICNzZWFyY2hfdGVybV90d28gPiAwKSBvciAodmFsLmZpZWxkX25hbWU6ZmluZChzZWFyY2hfdGVybV90aHJlZSkgYW5kICNzZWFyY2hfdGVybV90aHJlZSA+IDApIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGR1bXBTZWFyY2hlci5maWVsZFJlc3VsdHMsIHtpLCBpbmR9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBjdXJyZW50X21ldGhvZDpmaW5kKHNlYXJjaF90ZXJtX3R3bykgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaF90ZXJtX3R3b19mb3VuZF9sb2MgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlYXJjaF90ZXJtX29uZV9mb3VuZCA9PSB0cnVlIG9yIHNlYXJjaF90ZXJtX29uZV9mb3VuZF9sb2MgPT0gdHJ1ZSkgYW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzZWFyY2hfdGVybV90aHJlZV9mb3VuZCA9PSB0cnVlIG9yIHNlYXJjaF90ZXJtX3RocmVlX2ZvdW5kX2xvYyA9PSB0cnVlKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChkdW1wU2VhcmNoZXIubWV0aG9kUmVzdWx0cywge2ksIGluZGV4fSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgc2VhcmNoX3Rlcm1fb25lX21hdGNoX3R5cGVzWyJmaWVsZCJdIG9yIHNlYXJjaF90ZXJtX3RocmVlX21hdGNoX3R5cGVzWyJmaWVsZCJdIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpbmQsIHZhbCBpbiBwYWlycyh2LmZpZWxkcykgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsLmZpZWxkX25hbWU6ZmluZChzZWFyY2hfdGVybV9vbmUpIGFuZCAjc2VhcmNoX3Rlcm1fb25lID4gMCkgb3IgKHZhbC5maWVsZF9uYW1lOmZpbmQoc2VhcmNoX3Rlcm1fdGhyZWUpIGFuZCAjc2VhcmNoX3Rlcm1fdGhyZWUgPiAwKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChkdW1wU2VhcmNoZXIuZmllbGRSZXN1bHRzLCB7aSwgaW5kfSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgY3VycmVudF9tZXRob2Q6ZmluZChzZWFyY2hfdGVybV90aHJlZSkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaF90ZXJtX3RocmVlX2ZvdW5kX2xvYyA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VhcmNoX3Rlcm1fb25lX2ZvdW5kID09IHRydWUgb3Igc2VhcmNoX3Rlcm1fb25lX2ZvdW5kX2xvYyA9PSB0cnVlKSBhbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHNlYXJjaF90ZXJtX3R3b19mb3VuZCA9PSB0cnVlIG9yIHNlYXJjaF90ZXJtX3R3b19mb3VuZF9sb2MgPT0gdHJ1ZSkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoZHVtcFNlYXJjaGVyLm1ldGhvZFJlc3VsdHMsIHtpLCBpbmRleH0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNlYXJjaF90ZXJtX29uZV9tYXRjaF90eXBlc1siZmllbGQiXSBvciBzZWFyY2hfdGVybV90d29fbWF0Y2hfdHlwZXNbImZpZWxkIl0gdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGluZCwgdmFsIGluIHBhaXJzKHYuZmllbGRzKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWwuZmllbGRfbmFtZTpmaW5kKHNlYXJjaF90ZXJtX29uZSkgYW5kICNzZWFyY2hfdGVybV9vbmUgPiAwKSBvciAodmFsLmZpZWxkX25hbWU6ZmluZChzZWFyY2hfdGVybV90d28pIGFuZCAjc2VhcmNoX3Rlcm1fdHdvID4gMCkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoZHVtcFNlYXJjaGVyLmZpZWxkUmVzdWx0cywge2ksIGluZH0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZWlmIGFsbF9zZWFyY2hfdGVybXMgPT0gZmFsc2UgdGhlbg0KICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoZHVtcF9jc190YWJsZSkgZG8NCiAgICAgICAgICAgICAgICBpZiBzZWFyY2hfbmFtZXNwYWNlcyA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgY3VycmVudF9uYW1lc3BhY2UgPSB2Lm5hbWVzcGFjZQ0KICAgICAgICAgICAgICAgICAgICBpZiBpc19jYXNlX3NlbnNpdGl2ZSA9PSBmYWxzZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50X25hbWVzcGFjZSA9IGR1bXBTZWFyY2hlci5jYXNlU2Vuc2l0aXZlKGN1cnJlbnRfbmFtZXNwYWNlLCBpc19jYXNlX3NlbnNpdGl2ZSkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIGN1cnJlbnRfbmFtZXNwYWNlOmZpbmQoc2VhcmNoX3Rlcm1fb25lKSBvciAoI3NlYXJjaF90ZXJtX3R3byA+IDAgYW5kIGN1cnJlbnRfbmFtZXNwYWNlOmZpbmQoc2VhcmNoX3Rlcm1fdHdvKSkgb3IgKCNzZWFyY2hfdGVybV90aHJlZSA+IDAgYW5kIGN1cnJlbnRfbmFtZXNwYWNlOmZpbmQoc2VhcmNoX3Rlcm1fdGhyZWUpKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodi5jbGFzcyBvciB2LnN0cnVjdCkgYW5kIHYubWV0aG9kcyB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBwYWlycyh2Lm1ldGhvZHMpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChkdW1wU2VhcmNoZXIubWV0aG9kUmVzdWx0cywge2ksIGluZGV4fSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYuY2xhc3Mgb3Igdi5zdHJ1Y3QpIGFuZCB2LmZpZWxkcyB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBwYWlycyh2LmZpZWxkcykgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGR1bXBTZWFyY2hlci5maWVsZFJlc3VsdHMsIHtpLCBpbmRleH0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuZW51bSBhbmQgdi5maWVsZHMgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpbmRleCwgdmFsdWUgaW4gcGFpcnModi5maWVsZHMpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChkdW1wU2VhcmNoZXIuZW51bVJlc3VsdHMsIHtpLCBpbmRleH0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgc2VhcmNoX2NsYXNzZXMgPT0gdHJ1ZSBhbmQgKHYuY2xhc3Mgb3Igdi5zdHJ1Y3QpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgY3VycmVudF9jbGFzcyA9ICIiDQogICAgICAgICAgICAgICAgICAgIGlmIHYuY2xhc3MgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9jbGFzcyA9IHYuY2xhc3MNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9jbGFzcyA9IHYuc3RydWN0DQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBpc19jYXNlX3NlbnNpdGl2ZSA9PSBmYWxzZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50X2NsYXNzID0gZHVtcFNlYXJjaGVyLmNhc2VTZW5zaXRpdmUoY3VycmVudF9jbGFzcywgaXNfY2FzZV9zZW5zaXRpdmUpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBjdXJyZW50X2NsYXNzOmZpbmQoc2VhcmNoX3Rlcm1fb25lKSBvcg0KICAgICAgICAgICAgICAgICAgICAgICAgKCNzZWFyY2hfdGVybV90d28gPiAwIGFuZCBjdXJyZW50X2NsYXNzOmZpbmQoc2VhcmNoX3Rlcm1fdHdvKSkgb3IgKCNzZWFyY2hfdGVybV90aHJlZSA+IDAgYW5kIGN1cnJlbnRfY2xhc3M6ZmluZChzZWFyY2hfdGVybV90aHJlZSkpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2LmNsYXNzIG9yIHYuc3RydWN0KSBhbmQgdi5tZXRob2RzIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaW5kZXgsIHZhbHVlIGluIHBhaXJzKHYubWV0aG9kcykgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGR1bXBTZWFyY2hlci5tZXRob2RSZXN1bHRzLCB7aSwgaW5kZXh9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodi5jbGFzcyBvciB2LnN0cnVjdCkgYW5kIHYuZmllbGRzIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaW5kZXgsIHZhbHVlIGluIHBhaXJzKHYuZmllbGRzKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoZHVtcFNlYXJjaGVyLmZpZWxkUmVzdWx0cywge2ksIGluZGV4fSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBpZiBzZWFyY2hfbWV0aG9kcyA9PSB0cnVlIGFuZCB2Lm1ldGhvZHMgdGhlbg0KICAgICAgICAgICAgICAgICAgICBmb3IgaW5kZXgsIHZhbHVlIGluIHBhaXJzKHYubWV0aG9kcykgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGN1cnJlbnRfbWV0aG9kID0gdmFsdWUubWV0aG9kX25hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlzX2Nhc2Vfc2Vuc2l0aXZlID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50X21ldGhvZCA9IGR1bXBTZWFyY2hlci5jYXNlU2Vuc2l0aXZlKGN1cnJlbnRfbWV0aG9kLCBpc19jYXNlX3NlbnNpdGl2ZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgY3VycmVudF9tZXRob2Q6ZmluZChzZWFyY2hfdGVybV9vbmUpIG9yICgjc2VhcmNoX3Rlcm1fdHdvID4gMCBhbmQgY3VycmVudF9tZXRob2Q6ZmluZChzZWFyY2hfdGVybV90d28pKSBvciAoI3NlYXJjaF90ZXJtX3RocmVlID4gMCBhbmQgY3VycmVudF9tZXRob2Q6ZmluZChzZWFyY2hfdGVybV90aHJlZSkpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoZHVtcFNlYXJjaGVyLm1ldGhvZFJlc3VsdHMsIHtpLCBpbmRleH0pDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgc2VhcmNoX2ZpZWxkcyA9PSB0cnVlIGFuZCB2LmZpZWxkcyBhbmQgKHYuY2xhc3Mgb3Igdi5zdHJ1Y3QpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBwYWlycyh2LmZpZWxkcykgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGN1cnJlbnRfZmllbGQgPSB2YWx1ZS5maWVsZF9uYW1lDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBpc19jYXNlX3NlbnNpdGl2ZSA9PSBmYWxzZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9maWVsZCA9IGR1bXBTZWFyY2hlci5jYXNlU2Vuc2l0aXZlKGN1cnJlbnRfZmllbGQsIGlzX2Nhc2Vfc2Vuc2l0aXZlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBjdXJyZW50X2ZpZWxkOmZpbmQoc2VhcmNoX3Rlcm1fb25lKSBvciAoI3NlYXJjaF90ZXJtX3R3byA+IDAgYW5kIGN1cnJlbnRfZmllbGQ6ZmluZChzZWFyY2hfdGVybV90d28pKSBvciAoI3NlYXJjaF90ZXJtX3RocmVlID4gMCBhbmQgY3VycmVudF9maWVsZDpmaW5kKHNlYXJjaF90ZXJtX3RocmVlKSkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChkdW1wU2VhcmNoZXIuZmllbGRSZXN1bHRzLCB7aSwgaW5kZXh9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIHNlYXJjaF9lbnVtcyA9PSB0cnVlIGFuZCB2LmZpZWxkcyBhbmQgdi5lbnVtIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBwYWlycyh2LmZpZWxkcykgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGN1cnJlbnRfZmllbGQgPSB2YWx1ZS5lbnVtX25hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlzX2Nhc2Vfc2Vuc2l0aXZlID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50X2ZpZWxkID0gZHVtcFNlYXJjaGVyLmNhc2VTZW5zaXRpdmUoY3VycmVudF9maWVsZCwgaXNfY2FzZV9zZW5zaXRpdmUpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGN1cnJlbnRfZmllbGQ6ZmluZChzZWFyY2hfdGVybV9vbmUpIG9yICgjc2VhcmNoX3Rlcm1fdHdvID4gMCBhbmQgY3VycmVudF9maWVsZDpmaW5kKHNlYXJjaF90ZXJtX3R3bykpIG9yICgjc2VhcmNoX3Rlcm1fdGhyZWUgPiAwIGFuZCBjdXJyZW50X2ZpZWxkOmZpbmQoc2VhcmNoX3Rlcm1fdGhyZWUpKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGR1bXBTZWFyY2hlci5lbnVtUmVzdWx0cywge2ksIGluZGV4fSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCg0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBsb2NhbCBjbGVhbmVkX21ldGhvZHMgPSB7fQ0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhkdW1wU2VhcmNoZXIubWV0aG9kUmVzdWx0cykgZG8NCiAgICAgICAgICAgIGxvY2FsIG1ldGhvZF9mb3VuZCA9IGZhbHNlDQogICAgICAgICAgICBmb3IgaW5kZXgsIHZhbHVlIGluIHBhaXJzKGNsZWFuZWRfbWV0aG9kcykgZG8NCiAgICAgICAgICAgICAgICBpZiB2WzFdID09IHZhbHVlWzFdIGFuZCB2WzJdID09IHZhbHVlWzJdIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kX2ZvdW5kID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBtZXRob2RfZm91bmQgPT0gZmFsc2UgdGhlbg0KICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChjbGVhbmVkX21ldGhvZHMsIHYpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGR1bXBTZWFyY2hlci5tZXRob2RSZXN1bHRzID0gY2xlYW5lZF9tZXRob2RzDQogICAgICAgIGxvY2FsIGNsZWFuZWRfbWV0aG9kcyA9IHt9DQogICAgICAgIGZvciBpLCB2IGluIHBhaXJzKGR1bXBTZWFyY2hlci5maWVsZFJlc3VsdHMpIGRvDQogICAgICAgICAgICBsb2NhbCBtZXRob2RfZm91bmQgPSBmYWxzZQ0KICAgICAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBwYWlycyhjbGVhbmVkX21ldGhvZHMpIGRvDQogICAgICAgICAgICAgICAgaWYgdlsxXSA9PSB2YWx1ZVsxXSBhbmQgdlsyXSA9PSB2YWx1ZVsyXSB0aGVuDQogICAgICAgICAgICAgICAgICAgIG1ldGhvZF9mb3VuZCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWYgbWV0aG9kX2ZvdW5kID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoY2xlYW5lZF9tZXRob2RzLCB2KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBkdW1wU2VhcmNoZXIuZmllbGRSZXN1bHRzID0gY2xlYW5lZF9tZXRob2RzDQogICAgICAgIGxvY2FsIGNsZWFuZWRfbWV0aG9kcyA9IHt9DQogICAgICAgIGZvciBpLCB2IGluIHBhaXJzKGR1bXBTZWFyY2hlci5lbnVtUmVzdWx0cykgZG8NCiAgICAgICAgICAgIGxvY2FsIG1ldGhvZF9mb3VuZCA9IGZhbHNlDQogICAgICAgICAgICBmb3IgaW5kZXgsIHZhbHVlIGluIHBhaXJzKGNsZWFuZWRfbWV0aG9kcykgZG8NCiAgICAgICAgICAgICAgICBpZiB2WzFdID09IHZhbHVlWzFdIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kX2ZvdW5kID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBtZXRob2RfZm91bmQgPT0gZmFsc2UgdGhlbg0KICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChjbGVhbmVkX21ldGhvZHMsIHYpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGR1bXBTZWFyY2hlci5lbnVtUmVzdWx0cyA9IGNsZWFuZWRfbWV0aG9kcw0KICAgICAgICBpZiAjc3R5cGVfYXJyYXkgPiAwIHRoZW4NCiAgICAgICAgICAgIGxvY2FsIHR5cGVfa2V5cyA9IHt9DQogICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhzdHlwZV9hcnJheSkgZG8NCiAgICAgICAgICAgICAgICB0eXBlX2tleXNbdl0gPSAxDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGxvY2FsIHNvcnRfbWV0aG9kX3R5cGVzID0ge30NCiAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKGR1bXBTZWFyY2hlci5tZXRob2RSZXN1bHRzKSBkbw0KICAgICAgICAgICAgICAgIGlmIHR5cGVfa2V5c1tkdW1wX2NzX3RhYmxlW3ZbMV1dWyJtZXRob2RzIl1bdlsyXV0ubWV0aG9kX3R5cGVdIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHNvcnRfbWV0aG9kX3R5cGVzLCB2KQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBkdW1wU2VhcmNoZXIubWV0aG9kUmVzdWx0cyA9IHNvcnRfbWV0aG9kX3R5cGVzDQogICAgICAgICAgICBsb2NhbCBzb3J0X2ZpZWxkX3R5cGVzID0ge30NCiAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKGR1bXBTZWFyY2hlci5maWVsZFJlc3VsdHMpIGRvDQogICAgICAgICAgICAgICAgaWYgdHlwZV9rZXlzW2R1bXBfY3NfdGFibGVbdlsxXV1bImZpZWxkcyJdW3ZbMl1dLmZpZWxkX3R5cGVdIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHNvcnRfZmllbGRfdHlwZXMsIHYpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGR1bXBTZWFyY2hlci5maWVsZFJlc3VsdHMgPSBzb3J0X2ZpZWxkX3R5cGVzDQogICAgICAgIGVuZA0KICAgICAgICBsb2NhbCBzZWFyY2hfcmVzdWx0cyA9IGdnLmNob2ljZSh7IvCflJggTWV0aG9kIFJlc3VsdHMgKCIgLi4gI2R1bXBTZWFyY2hlci5tZXRob2RSZXN1bHRzIC4uICIpIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICLwn5SYIEZpZWxkIFJlc3VsdHMgKCIgLi4gI2R1bXBTZWFyY2hlci5maWVsZFJlc3VsdHMgLi4gIikiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIvCflJggRW51bSBSZXN1bHRzICgiIC4uICNkdW1wU2VhcmNoZXIuZW51bVJlc3VsdHMgLi4gIikifSwNCgkJCQkJCQkJCQkgIG5pbCwNCgkJCQkJCQkJCQkgIHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBTZWFyY2ggUmVzdWx0cyDihLnvuI8iKQ0KICAgICAgICBpZiBzZWFyY2hfcmVzdWx0cyB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgbG9jYWwgaGFuZGxlciA9ICIiDQogICAgICAgICAgICBpZiBzZWFyY2hfcmVzdWx0cyA9PSAxIHRoZW4NCiAgICAgICAgICAgICAgICBoYW5kbGVyID0gIm1ldGhvZF9yZXN1bHRzIg0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBzZWFyY2hfcmVzdWx0cyA9PSAyIHRoZW4NCiAgICAgICAgICAgICAgICBoYW5kbGVyID0gImZpZWxkX3Jlc3VsdHMiDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGlmIHNlYXJjaF9yZXN1bHRzID09IDMgdGhlbg0KICAgICAgICAgICAgICAgIGhhbmRsZXIgPSAiZW51bV9yZXN1bHRzIg0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmRlZmF1bHRIYW5kbGVyKGhhbmRsZXIpDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJZHVtcFNlYXJjaGVyLnNlYXJjaFByb21wdCgpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBzZWFyY2hQcm9tcHQgPSBmdW5jdGlvbihzdGVybTEsIHN0ZXJtMiwgYmF0Y2gpDQogICAgICAgIGR1bXBTZWFyY2hlci5tZXRob2RSZXN1bHRzID0ge30NCiAgICAgICAgZHVtcFNlYXJjaGVyLmVudW1SZXN1bHRzID0ge30NCiAgICAgICAgZHVtcFNlYXJjaGVyLmZpZWxkUmVzdWx0cyA9IHt9DQogICAgICAgIGxvY2FsIHRlbXBfdHlwZXMgPSBiY190b29sYm94X21ldGhvZF90eXBlcw0KICAgICAgICBsb2NhbCBzZWFyY2hfcHJvbXB0X3R5cGVzID0gZ2cubXVsdGlDaG9pY2UodGVtcF90eXBlcywgbmlsLCBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2VsZWN0IE1ldGhvZCBUeXBlcyAoc2VsZWN0IG5vbmUgZm9yIGFsbCkg4oS577iPIikNCiAgICAgICAgaWYgc2VhcmNoX3Byb21wdF90eXBlcyB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgc2VhcmNoX2FsbCA9IHRydWUNCiAgICAgICAgICAgIHN0eXBlX2FycmF5ID0ge30NCiAgICAgICAgICAgIGZvciBrLCB2YWx1ZSBpbiBwYWlycyhzZWFyY2hfcHJvbXB0X3R5cGVzKSBkbw0KICAgICAgICAgICAgICAgIGlmIHNlYXJjaF9wcm9tcHRfdHlwZXNba10gPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHNlYXJjaF9hbGwgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBzZWFyY2hfYWxsID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgICAgICBmb3IgaywgdmFsdWUgaW4gcGFpcnMoc2VhcmNoX3Byb21wdF90eXBlcykgZG8NCiAgICAgICAgICAgICAgICAgICAgaWYgc2VhcmNoX3Byb21wdF90eXBlc1trXSA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChzdHlwZV9hcnJheSwgYmNfdG9vbGJveF9tZXRob2RfdHlwZXNba10pDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBsb2NhbCBzZWFyY2hfcHJvbXB0ID0gZ2cucHJvbXB0KHtzY3JpcHRfdGl0bGUgLi4NCgkJCQkJCQkJCQkJICJcblxu4oS577iPIFNlYXJjaCBUZXJtIDEg4oS5ICDirIfvuI/CoFNjcm9sbMKgRG93bsKg4qyH77iPIiwgDQoJCQkJCQkJCQkJCSAi4oS577iPIFNlYXJjaCBUZXJtIDIg4oS5IiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICLihLnvuI8gU2VhcmNoIFRlcm0gMyDihLkiLCANCgkJCQkJCQkJCQkJICJDYXNlIHNlbnNpdGl2ZSIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiTXVzdCBjb250YWluIGFsbCBzZWFyY2ggdGVybXMiLCANCgkJCQkJCQkJCQkJICJTZWFyY2ggbmFtZXNwYWNlcyIsIA0KCQkJCQkJCQkJCQkgIlNlYXJjaCBjbGFzc2VzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTZWFyY2ggbWV0aG9kcyIsIA0KCQkJCQkJCQkJCQkgIlNlYXJjaCBmaWVsZHMiLCANCgkJCQkJCQkJCQkJICJTZWFyY2ggZW51bXMifSwgDQoJCQkJCQkJCQkJCSB7DQoJCQkJCQkJCQkJCSBbMV0gPSBzdGVybTEsDQoJCQkJCQkJCQkJCSBbMl0gPSBzdGVybTIsDQoJCQkJCQkJCQkJCSBbNF0gPSB0cnVlLA0KCQkJCQkJCQkJCQkgWzVdID0gdHJ1ZSwNCgkJCQkJCQkJCQkJIFs2XSA9IHRydWUsDQoJCQkJCQkJCQkJCSBbN10gPSB0cnVlLA0KCQkJCQkJCQkJCQkgWzhdID0gdHJ1ZSwNCgkJCQkJCQkJCQkJIFs5XSA9IHRydWUsDQoJCQkJCQkJCQkJCSBbMTBdID0gdHJ1ZQ0KCQkJCQkJCQkJCQkgfSwgew0KCQkJCQkJCQkJCQkgWzFdID0gInRleHQiLA0KCQkJCQkJCQkJCQkgWzJdID0gInRleHQiLA0KCQkJCQkJCQkJCQkgWzNdID0gInRleHQiLA0KCQkJCQkJCQkJCQkgWzRdID0gImNoZWNrYm94IiwNCgkJCQkJCQkJCQkJIFs1XSA9ICJjaGVja2JveCIsDQoJCQkJCQkJCQkJCSBbNl0gPSAiY2hlY2tib3giLA0KCQkJCQkJCQkJCQkgWzddID0gImNoZWNrYm94IiwNCgkJCQkJCQkJCQkJIFs4XSA9ICJjaGVja2JveCIsDQoJCQkJCQkJCQkJCSBbOV0gPSAiY2hlY2tib3giLA0KCQkJCQkJCQkJCQkgWzEwXSA9ICJjaGVja2JveCINCgkJCQkJCQkJCQkJIH0pDQogICAgICAgICAgICBpZiBzZWFyY2hfcHJvbXB0IH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgZHVtcFNlYXJjaGVyLnNlYXJjaER1bXAoc2VhcmNoX3Byb21wdCwgc3R5cGVfYXJyYXkpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglkdW1wU2VhcmNoZXIucmVtb3ZlTmFtZXNwYWNlcygpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICByZW1vdmVOYW1lc3BhY2VzID0gZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBuYW1lc3BhY2VOYW1lQXNLZXkgPSB7fQ0KICAgICAgICBsb2NhbCBmaXhlZE5hbWVzcGFjZVRhYmxlID0ge30NCiAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoZHVtcF9jc190YWJsZSkgZG8NCiAgICAgICAgICAgIGlmIHYubmFtZXNwYWNlIGFuZCB2Lm5hbWVzcGFjZSB+PSAiLy8gTmFtZXNwYWNlOiAiIHRoZW4NCiAgICAgICAgICAgICAgICBpZiB2Lm5hbWVzcGFjZTpmaW5kKCIvLyBOYW1lc3BhY2U6ICIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgY2xlYW5lZF9jbGFzc19uYW1lID0gdi5uYW1lc3BhY2U6Z3N1YigiLy8gTmFtZXNwYWNlOiAoLispIiwgIiUxIikNCiAgICAgICAgICAgICAgICAgICAgaWYgY2xlYW5lZF9jbGFzc19uYW1lOmZpbmQoIl5bYS16QS1aMC05XSIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZU5hbWVBc0tleVtjbGVhbmVkX2NsYXNzX25hbWVdID0gY2xlYW5lZF9jbGFzc19uYW1lDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlTmFtZUFzS2V5W3YubmFtZXNwYWNlXSA9IHYubmFtZXNwYWNlDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGZvciBrLCB2YWx1ZSBpbiBwYWlycyhuYW1lc3BhY2VOYW1lQXNLZXkpIGRvDQogICAgICAgICAgICBmaXhlZE5hbWVzcGFjZVRhYmxlWyNmaXhlZE5hbWVzcGFjZVRhYmxlICsgMV0gPSB2YWx1ZQ0KICAgICAgICBlbmQNCiAgICAgICAgdGFibGUuc29ydChmaXhlZE5hbWVzcGFjZVRhYmxlKQ0KICAgICAgICBsb2NhbCBzZWxlY3ROYW1lc3BhY2VNZW51ID0gZ2cubXVsdGlDaG9pY2UoZml4ZWROYW1lc3BhY2VUYWJsZSkNCiAgICAgICAgaWYgc2VsZWN0TmFtZXNwYWNlTWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoZHVtcF9jc190YWJsZSkgZG8NCiAgICAgICAgICAgICAgICBmb3IgaW5kZXgsIHZhbHVlIGluIHBhaXJzKHNlbGVjdE5hbWVzcGFjZU1lbnUpIGRvDQogICAgICAgICAgICAgICAgICAgIGlmIHYubmFtZXNwYWNlIGFuZCB2Lm5hbWVzcGFjZTpmaW5kKCIvLyBOYW1lc3BhY2U6ICIgLi4gZml4ZWROYW1lc3BhY2VUYWJsZVtpbmRleF0pIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGR1bXBfY3NfdGFibGVbaV0gPSAicmVtb3ZlIg0KICAgICAgICAgICAgICAgICAgICBlbHNlaWYgdi5uYW1lc3BhY2UgYW5kIHYubmFtZXNwYWNlOmZpbmQoZml4ZWROYW1lc3BhY2VUYWJsZVtpbmRleF0pIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGR1bXBfY3NfdGFibGVbaV0gPSAicmVtb3ZlIg0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgbG9jYWwgdGVtcF9kdW1wX2NzX3RhYmxlID0ge30NCiAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKGR1bXBfY3NfdGFibGUpIGRvDQogICAgICAgICAgICAgICAgaWYgdHlwZSh2KSA9PSAidGFibGUiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgdGVtcF9kdW1wX2NzX3RhYmxlWyN0ZW1wX2R1bXBfY3NfdGFibGUgKyAxXSA9IHYNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZHVtcF9jc190YWJsZSA9IHRlbXBfZHVtcF9jc190YWJsZQ0KICAgICAgICAgICAgZ2cudG9hc3Qoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIE5hbWVzcGFjZXMgUmVtb3ZlZCDihLnvuI8iKQ0KICAgICAgICAgICAgZHVtcEhhbmRsZXIuc2F2ZUpTT04oKQ0KICAgICAgICAgICAgZ2cudG9hc3Qoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIER1bXAgRGF0YSBVcGRhdGVkIOKEue+4jyIpDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJZHVtcFNlYXJjaGVyLmhvbWUoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgaG9tZSA9IGZ1bmN0aW9uKCkNCiAgICAgICAgaWYgc2F2ZV9kdW1wID09IHRydWUgdGhlbg0KICAgICAgICAgICAgc2F2ZV9kdW1wID0gZmFsc2UNCiAgICAgICAgICAgIGdnLnNsZWVwKDMwMCkNCiAgICAgICAgICAgIGR1bXBIYW5kbGVyLnNhdmVKU09OKCkNCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIG1lbnUgPSBnZy5jaG9pY2UoeyLwn5SNIFNlYXJjaCIsIA0KCQkJCQkJCQki4p6WIFJlbW92ZSBOYW1lc3BhY2VzIiwgDQoJCQkJCQkJCSLwn5SEIFJlcHJvY2VzcyBkdW1wLmNzIn0sIA0KCQkJCQkJCQluaWwsDQoJCQkJCQkJCXNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBTZWFyY2ggRHVtcC5jcyDihLnvuI8iKQ0KICAgICAgICBpZiBtZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICBpZiBtZW51ID09IDEgdGhlbg0KICAgICAgICAgICAgICAgIGR1bXBTZWFyY2hlci5zZWFyY2hQcm9tcHQoKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBtZW51ID09IDIgdGhlbg0KICAgICAgICAgICAgICAgIGR1bXBTZWFyY2hlci5yZW1vdmVOYW1lc3BhY2VzKCkNCiAgICAgICAgICAgICAgICBkdW1wU2VhcmNoZXIuaG9tZSgpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGlmIG1lbnUgPT0gMyB0aGVuDQogICAgICAgICAgICAgICAgZ2cudG9hc3Qoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIFJlcHJvY2Vzc2luZyBkdW1wLmNzIOKEue+4jyIpDQogICAgICAgICAgICAgICAgZHVtcEhhbmRsZXIuaW1wb3J0RHVtcCgpDQogICAgICAgICAgICAgICAgZHVtcFNlYXJjaGVyLmhvbWUoKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KfQ0KZHVtcFNlYXJjaGVyLmhvbWUoKQ0K"
        },
        [8] = {
            file_name = "plugin_bc_il2cpp_fields.lua",
            file_data = "Z2cuY2xlYXJMaXN0KCkNCmlsMmNwcEZpZWxkcyA9IHsNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRmllbGRzLmNyZWF0ZURpcmVjdG9yeSgpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBjcmVhdGVEaXJlY3RvcnkgPSBmdW5jdGlvbigpDQogICAgICAgIGRpcmVjdG9yeV9jcmVhdGVkID0gdHJ1ZQ0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhnZy5nZXRSYW5nZXNMaXN0KCkpIGRvDQogICAgICAgICAgICBpZiB2WyJlbmQiXSAtIHYuc3RhcnQgPCAxMDI0MCB0aGVuDQogICAgICAgICAgICAgICAgaWYgbm90IHN0cmluZy5maW5kKHZbIm5hbWUiXSwgImRlbGV0ZWQiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGNyZWF0ZV9zdGFydCA9IHYuc3RhcnQNCiAgICAgICAgICAgICAgICAgICAgY3JlYXRlX2VuZCA9IHZbImVuZCJdDQogICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGdnLmR1bXBNZW1vcnkoY3JlYXRlX3N0YXJ0LCBjcmVhdGVfZW5kLCBpbDJjcHBGaWVsZHMuc2F2ZVBhdGgsIGdnLkRVTVBfU0tJUF9TWVNURU1fTElCUykNCiAgICBlbmQsDQogICAgc2F2ZVBhdGggPSBwbHVnaW5zRGF0YVBhdGggLi4gImJhZGNhc2VfaWwyY3BwX2ZpZWxkc19kYXRhLyIsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWlsMmNwcEZpZWxkcy5jaGVja0NvbmZpZ0ZpbGVHYW1lKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIGNoZWNrQ29uZmlnRmlsZUdhbWUgPSBmdW5jdGlvbigpDQogICAgICAgIGRvZmlsZShpbDJjcHBGaWVsZHMuc2F2ZVBhdGggLi4gIi8iIC4uIGdnLmdldFRhcmdldFBhY2thZ2UoKSAuLiAiLmNmZyIpDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglpbDJjcHBGaWVsZHMuc2F2ZUNvbmZpZygpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBzYXZlQ29uZmlnID0gZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBmaWxlID0gaW8ub3BlbihpbDJjcHBGaWVsZHMuc2F2ZVBhdGggLi4gIi8iIC4uIGdnLmdldFRhcmdldFBhY2thZ2UoKSAuLiAiLmNmZyIsICJ3KyIpDQogICAgICAgIGZpbGU6d3JpdGUoImlsMmNwcEZpZWxkcy5zYXZlZEVkaXRzVGFibGUgPSAiIC4uIHRvc3RyaW5nKGlsMmNwcEZpZWxkcy5zYXZlZEVkaXRzVGFibGUpKQ0KICAgICAgICBmaWxlOmNsb3NlKCkNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWlsMmNwcEZpZWxkcy5nZXRSYW5nZSgpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBnZXRSYW5nZSA9IGZ1bmN0aW9uKCkNCiAgICAgICAgZ2cuc2V0UmFuZ2VzKGdnLlJFR0lPTl9PVEhFUikNCiAgICAgICAgZ2cuc2V0VmlzaWJsZShmYWxzZSkNCiAgICAgICAgZ2cudG9hc3Qoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIENvbmZpZ3VyaW5nIFNjcmlwdCDihLnvuI8iKQ0KICAgICAgICBnZy5jbGVhclJlc3VsdHMoKQ0KICAgICAgICA6OnRyeV9jYTo6DQogICAgICAgIGdnLnNlYXJjaE51bWJlcihpbDJjcHBGaWVsZHMuc19iX3MsIGdnLlRZUEVfQllURSwgZmFsc2UsIGdnLlNJR05fRVFVQUwsIG5pbCwgbmlsLCAxKQ0KICAgICAgICBpZiBnZy5nZXRSZXN1bHRzQ291bnQoKSA9PSAwIHRoZW4NCiAgICAgICAgICAgIGdnLnNldFJhbmdlcyhnZy5SRUdJT05fQ19BTExPQykNCiAgICAgICAgICAgIGdvdG8gdHJ5X2NhDQogICAgICAgIGVuZA0KICAgICAgICBsb2NhbCBzdGFydF9zZWFyY2ggPSBnZy5nZXRSZXN1bHRzKDEpDQogICAgICAgIGdnLmNsZWFyUmVzdWx0cygpDQogICAgICAgIHJhbmdlX3N0YXJ0ID0gc3RhcnRfc2VhcmNoWzFdLmFkZHJlc3MNCiAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoZ2cuZ2V0UmFuZ2VzTGlzdCgpKSBkbw0KICAgICAgICAgICAgaWYgdlsic3RhcnQiXSA8IHJhbmdlX3N0YXJ0IGFuZCB2WyJlbmQiXSA+IHJhbmdlX3N0YXJ0IHRoZW4NCiAgICAgICAgICAgICAgICBtZXRhZGF0YV9lbmQgPSB2WyJlbmQiXQ0KICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGdnLnNlYXJjaE51bWJlcihpbDJjcHBGaWVsZHMuZV9iX3MsIGdnLlRZUEVfQllURSwgZmFsc2UsIGdnLlNJR05fRVFVQUwsIHJhbmdlX3N0YXJ0LCBuaWwsIDEpDQogICAgICAgIGxvY2FsIGVuZF9zZWFyY2ggPSBnZy5nZXRSZXN1bHRzKDEpDQogICAgICAgIHJhbmdlX2VuZCA9IGVuZF9zZWFyY2hbMV0uYWRkcmVzcw0KICAgICAgICBnZy5jbGVhclJlc3VsdHMoKQ0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRmllbGRzLmNyZWF0ZVNlYXJjaCgpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBjcmVhdGVTZWFyY2ggPSBmdW5jdGlvbihzZWFyY2hfc3RyaW5nKQ0KICAgICAgICBieXRlX3NlYXJjaCA9ICIwOyINCiAgICAgICAgZm9yIGMgaW4gc2VhcmNoX3N0cmluZzpnbWF0Y2ggIi4iIGRvDQogICAgICAgICAgICBpZiAjc2VhcmNoX3N0cmluZyA+IDEgdGhlbg0KICAgICAgICAgICAgICAgIGJ5dGVfc2VhcmNoID0gYnl0ZV9zZWFyY2ggLi4gc3RyaW5nLmJ5dGUoYykgLi4gIjsiDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgYnl0ZV9zZWFyY2ggPSBieXRlX3NlYXJjaCAuLiBzdHJpbmcuYnl0ZShjKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBieXRlX3NlYXJjaCA9IGJ5dGVfc2VhcmNoIC4uICIwIg0KICAgICAgICBpZiAjc2VhcmNoX3N0cmluZyA+IDEgdGhlbg0KICAgICAgICAgICAgYnl0ZV9zZWFyY2ggPSBieXRlX3NlYXJjaCAuLiAiOjoiIC4uICNzZWFyY2hfc3RyaW5nICsgMg0KICAgICAgICBlbmQNCiAgICAgICAgcmV0dXJuIGJ5dGVfc2VhcmNoDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglpbDJjcHBGaWVsZHMuZ2V0TWV0aG9kVHlwZXMoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgZ2V0TWV0aG9kVHlwZXMgPSBmdW5jdGlvbigpDQogICAgICAgIGlsMmNwcEZpZWxkcy5tZXRob2RfdHlwZXMgPSB7fQ0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhpbDJjcHBGaWVsZHMuZ2V0X21ldGhvZF9zZWFyY2hlcykgZG8NCiAgICAgICAgICAgIGdnLnNldFJhbmdlcyhnZy5SRUdJT05fT1RIRVIpDQogICAgICAgICAgICBnZy5jbGVhclJlc3VsdHMoKQ0KICAgICAgICAgICAgZ2cuc2VhcmNoTnVtYmVyKCI6IiAuLiBzdHJpbmcuY2hhcigwKSAuLiB2WzJdIC4uIHN0cmluZy5jaGFyKDApLCBnZy5UWVBFX0JZVEUsIGZhbHNlLCBnZy5TSUdOX0VRVUFMLCByYW5nZV9zdGFydCwgcmFuZ2VfZW5kKQ0KICAgICAgICAgICAgbG9jYWwgc3RyaW5nX2FkZHJlc3MgPSBnZy5nZXRSZXN1bHRzKDEsIDEpDQogICAgICAgICAgICBzdHJpbmdfYWRkcmVzcyA9IHN0cmluZ19hZGRyZXNzWzFdLmFkZHJlc3MNCiAgICAgICAgICAgIGdnLmNsZWFyUmVzdWx0cygpDQogICAgICAgICAgICBnZy5zZXRSYW5nZXMoZ2cuUkVHSU9OX0NfQUxMT0MpDQogICAgICAgICAgICBnZy5zZWFyY2hOdW1iZXIoc3RyaW5nX2FkZHJlc3MsIGZsYWdfdHlwZSwgbmlsLCBuaWwsIG5pbCwgbmlsLCAxKQ0KICAgICAgICAgICAgbG9jYWwgbWV0aG9kX2RhdGEgPSBnZy5nZXRSZXN1bHRzKDEpDQogICAgICAgICAgICBpZiBnZy5nZXRSZXN1bHRzQ291bnQoKSA+IDAgdGhlbg0KICAgICAgICAgICAgICAgIGxvY2FsIGdldF90eXBlID0ge30NCiAgICAgICAgICAgICAgICBnZXRfdHlwZVsxXSA9IHt9DQogICAgICAgICAgICAgICAgaWYgaWwyY3BwRmllbGRzLmFyY2gueDY0IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZ2V0X3R5cGVbMV0uYWRkcmVzcyA9IG1ldGhvZF9kYXRhWzFdLmFkZHJlc3MgKyAxNg0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgZ2V0X3R5cGVbMV0uYWRkcmVzcyA9IG1ldGhvZF9kYXRhWzFdLmFkZHJlc3MgKyA4DQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZ2V0X3R5cGVbMV0uZmxhZ3MgPSBmbGFnX3R5cGUNCiAgICAgICAgICAgICAgICBnZXRfdHlwZSA9IGdnLmdldFZhbHVlcyhnZXRfdHlwZSkNCiAgICAgICAgICAgICAgICBsb2NhbCBnZXRfdHlwZTIgPSB7fQ0KICAgICAgICAgICAgICAgIGdldF90eXBlMlsxXSA9IHt9DQogICAgICAgICAgICAgICAgZ2V0X3R5cGUyWzFdLmFkZHJlc3MgPSBnZXRfdHlwZVsxXS52YWx1ZQ0KICAgICAgICAgICAgICAgIGdldF90eXBlMlsxXS5mbGFncyA9IGdnLlRZUEVfRFdPUkQNCiAgICAgICAgICAgICAgICBnZXRfdHlwZTIgPSBnZy5nZXRWYWx1ZXMoZ2V0X3R5cGUyKQ0KICAgICAgICAgICAgICAgIGxvY2FsIGZpbmFsX3R5cGUNCiAgICAgICAgICAgICAgICBpZiAjdG9zdHJpbmcoZ2V0X3R5cGUyWzFdLnZhbHVlKSA+IDYgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBpbDJjcHBGaWVsZHMuYXJjaC54NjQgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgZ2V0X3R5cGUyWzFdLmZsYWdzID0gZ2cuVFlQRV9RV09SRA0KICAgICAgICAgICAgICAgICAgICAgICAgZ2V0X3R5cGUyID0gZ2cuZ2V0VmFsdWVzKGdldF90eXBlMikNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGdldF90eXBlMyA9IHt9DQogICAgICAgICAgICAgICAgICAgIGdldF90eXBlM1sxXSA9IHt9DQogICAgICAgICAgICAgICAgICAgIGdldF90eXBlM1sxXS5hZGRyZXNzID0gZ2V0X3R5cGUyWzFdLnZhbHVlDQogICAgICAgICAgICAgICAgICAgIGdldF90eXBlM1sxXS5mbGFncyA9IGdnLlRZUEVfRFdPUkQNCiAgICAgICAgICAgICAgICAgICAgZ2V0X3R5cGUzID0gZ2cuZ2V0VmFsdWVzKGdldF90eXBlMykNCiAgICAgICAgICAgICAgICAgICAgZm9yIGluZGV4ID0gMSwgMTAgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGlsMmNwcEZpZWxkcy5tZXRob2RfdHlwZXNbdG9zdHJpbmcoZ2V0X3R5cGUzWzFdLnZhbHVlICsgaW5kZXgpXSA9IHZbMV0NCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGZpbmFsX3R5cGUgPSBnZXRfdHlwZTNbMV0udmFsdWUNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIGZpbmFsX3R5cGUgPSBnZXRfdHlwZTJbMV0udmFsdWUNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBpbDJjcHBGaWVsZHMubWV0aG9kX3R5cGVzW3Rvc3RyaW5nKGZpbmFsX3R5cGUpXSA9IHZbMV0NCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgbG9jYWwgZmlsZSA9IGlvLm9wZW4oaWwyY3BwRmllbGRzLnNhdmVQYXRoIC4uIGdnLmdldFRhcmdldFBhY2thZ2UoKSAuLiAiXyIgLi4gZ2cuZ2V0VGFyZ2V0SW5mbygpLnZlcnNpb25Db2RlIC4uICJfbWV0aG9kX3R5cGVzLmx1YSIsICJ3KyIpDQogICAgICAgIGZpbGU6d3JpdGUoImlsMmNwcEZpZWxkcy5tZXRob2RfdHlwZXMgPSAiIC4uIHRvc3RyaW5nKGlsMmNwcEZpZWxkcy5tZXRob2RfdHlwZXMpKQ0KICAgICAgICBmaWxlOmNsb3NlKCkNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWlsMmNwcEZpZWxkcy5jaGVja01ldGhvZFR5cGVzKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIGNoZWNrTWV0aG9kVHlwZXMgPSBmdW5jdGlvbigpDQogICAgICAgIGRvZmlsZShpbDJjcHBGaWVsZHMuc2F2ZVBhdGggLi4gZ2cuZ2V0VGFyZ2V0UGFja2FnZSgpIC4uICJfIiAuLiBnZy5nZXRUYXJnZXRJbmZvKCkudmVyc2lvbkNvZGUgLi4gIl9tZXRob2RfdHlwZXMubHVhIikNCiAgICBlbmQsDQogICAgZl9oZXggPSBmdW5jdGlvbihuKQ0KICAgICAgICByZXR1cm4gIjB4IiAuLiBzdHJpbmcuZm9ybWF0KCIleCIsIG4pDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglpbDJjcHBGaWVsZHMubG9hZEZpZWxkcyhjbGFzcywgY29udGludWUpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBsb2FkRmllbGRzID0gZnVuY3Rpb24oY2xhc3MsIGNvbnRpbnVlKQ0KICAgICAgICBsb2NhbCBzdHJpbmdfYWRkcmVzcyA9IHt9DQogICAgICAgIGxvY2FsIGNsYXNzX2hlYWRlcnMgPSB7fQ0KICAgICAgICBsb2NhbCBnZXRfbnVtYmVyX29mX2ZpZWxkcyA9IHt9DQogICAgICAgIGxvY2FsIGZpcnN0X2ZpZWxkX2FkZHJlc3MgPSB7fQ0KICAgICAgICBsb2NhbCBmaWVsZF9kYXRhID0gIiINCiAgICAgICAgbG9jYWwgZmllbGRfbmFtZV9wb2ludGVyID0gIiINCiAgICAgICAgbG9jYWwgdHlwZV9wb2ludGVyID0gIiINCiAgICAgICAgbG9jYWwgY2xhc3NfcG9pbnRlciA9ICIiDQogICAgICAgIGxvY2FsIGZpZWxkX29mZnNldCA9ICIiDQogICAgICAgIGxvY2FsIGN1cnJlbnRfYWRkcmVzcyA9ICIiDQogICAgICAgIGxvY2FsIGdldF9maWVsZF9uYW1lID0ge30NCiAgICAgICAgbG9jYWwgb2Zmc2V0ID0gMA0KICAgICAgICBsb2NhbCBjb3VudCA9IDENCiAgICAgICAgbG9jYWwgZmllbGRfZGF0YSA9IHt9DQogICAgICAgIGxvY2FsIGZpZWxkX25hbWUgPSAiIg0KICAgICAgICBsb2NhbCBnZXRfdHlwZSA9IHt9DQogICAgICAgIGxvY2FsIGZpZWxkX3R5cGUgPSB7fQ0KICAgICAgICBsb2NhbCBwb2ludGVyc190b19pbnN0YW5jZXMgPSB7fQ0KICAgICAgICBpZiBub3QgY2xhc3MgdGhlbg0KICAgICAgICAgICAgY2xhc3MgPSAiIg0KICAgICAgICBlbmQNCiAgICAgICAgZ2cuY2xlYXJMaXN0KCkNCiAgICAgICAgaWYgbm90IGNvbnRpbnVlIHRoZW4NCiAgICAgICAgICAgIGNsYXNzX3N0cmluZ19zZWFyY2ggPSBnZy5wcm9tcHQoe3NjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBFbnRlciBDbGFzcyBOYW1lIOKEue+4jyJ9LCB7Y2xhc3N9LCB7InRleHQifSkNCiAgICAgICAgZW5kDQogICAgICAgIGlmIGNsYXNzX3N0cmluZ19zZWFyY2ggfj0gbmlsIG9yIGNvbnRpbnVlID09IHRydWUgdGhlbg0KICAgICAgICAgICAgaWYgY29udGludWUgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgd29ya2luZ19jbGFzcyA9IGNsYXNzX3N0cmluZ19zZWFyY2hbMV0NCiAgICAgICAgICAgICAgICBnZy5zZXRSYW5nZXMoZ2cuUkVHSU9OX09USEVSKQ0KICAgICAgICAgICAgICAgIGdnLmNsZWFyUmVzdWx0cygpDQogICAgICAgICAgICAgICAgZ2cuc2VhcmNoTnVtYmVyKGlsMmNwcEZpZWxkcy5jcmVhdGVTZWFyY2goY2xhc3Nfc3RyaW5nX3NlYXJjaFsxXSksIGdnLlRZUEVfQllURSwgZmFsc2UsIGdnLlNJR05fRVFVQUwsDQogICAgICAgICAgICAgICAgICAgIHJhbmdlX3N0YXJ0LCByYW5nZV9lbmQpDQogICAgICAgICAgICAgICAgc3RyaW5nX2FkZHJlc3MgPSBnZy5nZXRSZXN1bHRzKDEsIDEpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGlmIGdnLmdldFJlc3VsdHNDb3VudCgpID4gMCBvciBjb250aW51ZSA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBjb250aW51ZSA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZ290byBkb19tb3JlDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgc3RyaW5nX2FkZHJlc3MgPSBzdHJpbmdfYWRkcmVzc1sxXS5hZGRyZXNzDQogICAgICAgICAgICAgICAgZ2cuY2xlYXJSZXN1bHRzKCkNCiAgICAgICAgICAgICAgICBnZy5zZXRSYW5nZXMoZ2cuUkVHSU9OX0NfQUxMT0MpDQogICAgICAgICAgICAgICAgZ2cuc2VhcmNoTnVtYmVyKHN0cmluZ19hZGRyZXNzLCBmbGFnX3R5cGUpDQogICAgICAgICAgICAgICAgY2xhc3NfaGVhZGVycyA9IGdnLmdldFJlc3VsdHMoZ2cuZ2V0UmVzdWx0c0NvdW50KCkpDQogICAgICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoY2xhc3NfaGVhZGVycykgZG8NCiAgICAgICAgICAgICAgICAgICAgaWYgaWwyY3BwRmllbGRzLmFyY2gueDY0IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzX2hlYWRlcnNbaV0uYWRkcmVzcyA9IGNsYXNzX2hlYWRlcnNbaV0uYWRkcmVzcyAtIDE2DQogICAgICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2Vfb2Zmc2V0ID0gMjQNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NfaGVhZGVyc1tpXS5hZGRyZXNzID0gY2xhc3NfaGVhZGVyc1tpXS5hZGRyZXNzIC0gOA0KICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlX29mZnNldCA9IDEyDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGdnLnNldFJhbmdlcyhnZy5SRUdJT05fQU5PTllNT1VTKQ0KICAgICAgICAgICAgICAgIGdnLmxvYWRSZXN1bHRzKGNsYXNzX2hlYWRlcnMpDQogICAgICAgICAgICAgICAgZ2cuc2VhcmNoUG9pbnRlcigwKQ0KICAgICAgICAgICAgICAgIGluc3RhbmNlX2hlYWRlcnMgPSBnZy5nZXRSZXN1bHRzKGdnLmdldFJlc3VsdHNDb3VudCgpKQ0KICAgICAgICAgICAgICAgIGZvdW5kX2NsYXNzZXMgPSB7fQ0KICAgICAgICAgICAgICAgIGZvciBpLCB2IGluIGlwYWlycyhpbnN0YW5jZV9oZWFkZXJzKSBkbw0KICAgICAgICAgICAgICAgICAgICBpZiBub3QgZm91bmRfY2xhc3Nlc1t0b3N0cmluZyh2LnZhbHVlKV0gdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRfY2xhc3Nlc1t0b3N0cmluZyh2LnZhbHVlKV0gPSAwDQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kX2NsYXNzZXNbdG9zdHJpbmcodi52YWx1ZSldID0gZm91bmRfY2xhc3Nlc1t0b3N0cmluZyh2LnZhbHVlKV0gKyAxDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGZvdW5kX2NsYXNzZXNfc29ydGVkID0ge30NCiAgICAgICAgICAgICAgICBmb3IgaywgdiBpbiBwYWlycyhmb3VuZF9jbGFzc2VzKSBkbw0KICAgICAgICAgICAgICAgICAgICBmb3VuZF9jbGFzc2VzX3NvcnRlZFsjZm91bmRfY2xhc3Nlc19zb3J0ZWQgKyAxXSA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzX2FkZHJlc3MgPSBrLA0KICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRlcnNfdG8gPSB2DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBuYW1lc3BhY2VfbmFtZXMgPSB7fQ0KICAgICAgICAgICAgICAgIGZvciBpLCB2IGluIGlwYWlycyhmb3VuZF9jbGFzc2VzX3NvcnRlZCkgZG8NCiAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlX3N0cmluZ19hZGRyZXNzID0ge30NCiAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlX3N0cmluZ19hZGRyZXNzWzFdID0ge30NCiAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlX3N0cmluZ19hZGRyZXNzWzFdLmFkZHJlc3MgPSB2LmNsYXNzX2FkZHJlc3MgKyBuYW1lc3BhY2Vfb2Zmc2V0DQogICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZV9zdHJpbmdfYWRkcmVzc1sxXS5mbGFncyA9IGZsYWdfdHlwZQ0KICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2Vfc3RyaW5nX2FkZHJlc3MgPSBnZy5nZXRWYWx1ZXMobmFtZXNwYWNlX3N0cmluZ19hZGRyZXNzKQ0KICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2Vfc3RyaW5nX2FkZHJlc3MgPSBuYW1lc3BhY2Vfc3RyaW5nX2FkZHJlc3NbMV0udmFsdWUNCiAgICAgICAgICAgICAgICAgICAgZ2V0X25hbWVzcGFjZV9uYW1lID0ge30NCiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gMA0KICAgICAgICAgICAgICAgICAgICBjb3VudCA9IDENCiAgICAgICAgICAgICAgICAgICAgcmVwZWF0DQogICAgICAgICAgICAgICAgICAgICAgICBnZXRfbmFtZXNwYWNlX25hbWVbY291bnRdID0ge30NCiAgICAgICAgICAgICAgICAgICAgICAgIGdldF9uYW1lc3BhY2VfbmFtZVtjb3VudF0uYWRkcmVzcyA9IG5hbWVzcGFjZV9zdHJpbmdfYWRkcmVzcyArIG9mZnNldA0KICAgICAgICAgICAgICAgICAgICAgICAgZ2V0X25hbWVzcGFjZV9uYW1lW2NvdW50XS5mbGFncyA9IGdnLlRZUEVfQllURQ0KICAgICAgICAgICAgICAgICAgICAgICAgY291bnQgPSBjb3VudCArIDENCiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IG9mZnNldCArIDENCiAgICAgICAgICAgICAgICAgICAgdW50aWwgKGNvdW50ID09IDEwMCkNCiAgICAgICAgICAgICAgICAgICAgZ2V0X25hbWVzcGFjZV9uYW1lID0gZ2cuZ2V0VmFsdWVzKGdldF9uYW1lc3BhY2VfbmFtZSkNCiAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlX25hbWUgPSAiIg0KICAgICAgICAgICAgICAgICAgICBmb3IgaW5kZXgsIHZhbHVlIGluIHBhaXJzKGdldF9uYW1lc3BhY2VfbmFtZSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHZhbHVlLnZhbHVlID49IDAgYW5kIHZhbHVlLnZhbHVlIDw9IDI1NSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlX25hbWUgPSBuYW1lc3BhY2VfbmFtZSAuLiBzdHJpbmcuY2hhcih2YWx1ZS52YWx1ZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdmFsdWUudmFsdWUgPT0gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlX25hbWVzW2ldID0gbmFtZXNwYWNlX25hbWUgLi4gIiBQb2ludGVycygiIC4uIGZvdW5kX2NsYXNzZXNfc29ydGVkW2ldLnBvaW50ZXJzX3RvIC4uICIpIg0KICAgICAgICAgICAgICAgICAgICBmb3VuZF9jbGFzc2VzX3NvcnRlZFtpXS5uYW1lc3BhY2UgPSBuYW1lc3BhY2VfbmFtZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIDo6cGlja19uczo6DQogICAgICAgICAgICAgICAgY2hvb3NlX25hbWVzcGFjZSA9IGdnLmNob2ljZShuYW1lc3BhY2VfbmFtZXMsIG5pbCwgc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIFNlbGVjdCBOYW1lc3BhY2Ug4oS577iPXG5JZiB0aGUgY2xhc3MgeW91IHdhbnQgaGFzIG5vIGFjdGl2ZSBpbnN0YW5jZXMgdGhlbiBnb3QgdG8gYSBwbGFjZSBpbiB0aGUgZ2FtZSB0aGUgdmFsdWVzIHdvdWxkIGJlIHVzZWQgYW5kIHRyeSBhZ2Fpbi4iKQ0KICAgICAgICAgICAgICAgIGlmIGNob29zZV9uYW1lc3BhY2UgPT0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIGVkaXRfbmFtZXNwYWNlID0gZm91bmRfY2xhc3Nlc19zb3J0ZWRbY2hvb3NlX25hbWVzcGFjZV0ubmFtZXNwYWNlDQogICAgICAgICAgICAgICAgICAgIGdnLnJlZmluZU51bWJlcihmb3VuZF9jbGFzc2VzX3NvcnRlZFtjaG9vc2VfbmFtZXNwYWNlXS5jbGFzc19hZGRyZXNzLCBmbGFnX3R5cGUpDQogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2hlYWRlcnMgPSBnZy5nZXRSZXN1bHRzKGdnLmdldFJlc3VsdENvdW50KCkpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgZ2cuZ2V0UmVzdWx0c0NvdW50KCkgPiAwIGFuZCBjaG9vc2VfbmFtZXNwYWNlIH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGNsYXNzX2hlYWRlciA9IGluc3RhbmNlX2hlYWRlcnNbMV0udmFsdWUNCiAgICAgICAgICAgICAgICAgICAgaWwyY3BwRmllbGRzLmN1cnJlbnRfZmllbGRzID0ge30NCiAgICAgICAgICAgICAgICAgICAgOjphYm92ZTo6DQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGZpZWxkX2NvdW50ID0ge30NCiAgICAgICAgICAgICAgICAgICAgZmllbGRfY291bnRbMV0gPSB7fQ0KICAgICAgICAgICAgICAgICAgICBmaWVsZF9jb3VudFsxXS5hZGRyZXNzID0gY2xhc3NfaGVhZGVyICsgaWwyY3BwRmllbGRzLmZpZWxkT2Zmc2V0cy5maWVsZENvdW50DQogICAgICAgICAgICAgICAgICAgIGZpZWxkX2NvdW50WzFdLmZsYWdzID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICAgICAgICAgICAgICBmaWVsZF9jb3VudCA9IGdnLmdldFZhbHVlcyhmaWVsZF9jb3VudCkNCiAgICAgICAgICAgICAgICAgICAgZmllbGRfY291bnQgPSBmaWVsZF9jb3VudFsxXS52YWx1ZQ0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBmaWVsZHNfcG9pbnRlciA9IHt9DQogICAgICAgICAgICAgICAgICAgIGZpZWxkc19wb2ludGVyWzFdID0ge30NCiAgICAgICAgICAgICAgICAgICAgZmllbGRzX3BvaW50ZXJbMV0uYWRkcmVzcyA9IGNsYXNzX2hlYWRlciArIGlsMmNwcEZpZWxkcy5maWVsZE9mZnNldHMuZmllbGRQb2ludGVyDQogICAgICAgICAgICAgICAgICAgIGZpZWxkc19wb2ludGVyWzFdLmZsYWdzID0gZmxhZ190eXBlDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGZpZWxkc19wb2ludGVyX2FkZHJlc3MgPSBnZy5nZXRWYWx1ZXMoZmllbGRzX3BvaW50ZXIpDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGZpZWxkc19zdGFydCA9IHt9DQogICAgICAgICAgICAgICAgICAgIGZpZWxkc19zdGFydFsxXSA9IHt9DQogICAgICAgICAgICAgICAgICAgIGZpZWxkc19zdGFydFsxXS5hZGRyZXNzID0gZmllbGRzX3BvaW50ZXJfYWRkcmVzc1sxXS52YWx1ZQ0KICAgICAgICAgICAgICAgICAgICBmaWVsZHNfc3RhcnRbMV0uZmxhZ3MgPSBmbGFnX3R5cGUNCiAgICAgICAgICAgICAgICAgICAgZmllbGRzX3N0YXJ0ID0gZ2cuZ2V0VmFsdWVzKGZpZWxkc19zdGFydCkNCiAgICAgICAgICAgICAgICAgICAgZmllbGRzX3N0YXJ0ID0gZmllbGRzX3N0YXJ0WzFdLmFkZHJlc3MNCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgb2Zmc2V0ID0gMA0KICAgICAgICAgICAgICAgICAgICBnZy5jbGVhclJlc3VsdHMoKQ0KICAgICAgICAgICAgICAgICAgICBnZy5zZXRSYW5nZXMoZ2cuUkVHSU9OX0NfQUxMT0MpDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGdldGFsbA0KICAgICAgICAgICAgICAgICAgICA6Om1lbnUyOjoNCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgbWVudSA9IGdnLmNob2ljZSh7IlllcyAoU0xPVykiLCAiTm8gKEZhc3RlcikifSwgbmlsLCBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gRG8geW91IHdhbnQgdG8gdHJ5IGFuZCBnZXQgYWRkaXRpb25hbCBmaWVsZCB0eXBlcyBmcm9tIG1lbW9yeT8gQWxsIGZpZWxkcyB3aWxsIGJlIHJldHJpZXZlZCByZWdhcmRsZXNzLiAg4oS577iPIikNCiAgICAgICAgICAgICAgICAgICAgaWYgbWVudSA9PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgZ290byBtZW51Mg0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBtZW51ID09IDEgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldGFsbCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgZ2V0RmllbGRzUG9pbnRlclNlYXJjaCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdnLnNlYXJjaE51bWJlcigNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlX3N0YXJ0IC4uICJ+IiAuLiByYW5nZV9lbmQgLi4gIjsiIC4uIHJhbmdlX3N0YXJ0IC4uICJ+IiAuLiByYW5nZV9lbmQgLi4gIjo6MTMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhZ190eXBlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRGaWVsZHNQb2ludGVyU2VhcmNoID0gZ2cuZ2V0UmVzdWx0cyhnZy5nZXRSZXN1bHRzQ291bnQoKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZm9yIGkgPSAxLCBmaWVsZF9jb3VudCBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZmllbGRfbmFtZV9wb2ludGVyID0ge30NCiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX25hbWVfcG9pbnRlclsxXSA9IHt9DQogICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF9uYW1lX3BvaW50ZXJbMV0uYWRkcmVzcyA9IGZpZWxkc19zdGFydCArIG9mZnNldA0KICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfbmFtZV9wb2ludGVyWzFdLmZsYWdzID0gZmxhZ190eXBlDQogICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF9uYW1lX3BvaW50ZXIgPSBnZy5nZXRWYWx1ZXMoZmllbGRfbmFtZV9wb2ludGVyKQ0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZmllbGRfdHlwZSA9ICIiDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBnZXRhbGwgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2cubG9hZFJlc3VsdHMoZ2V0RmllbGRzUG9pbnRlclNlYXJjaCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZy5yZWZpbmVOdW1iZXIoZmllbGRfbmFtZV9wb2ludGVyWzFdLnZhbHVlIC4uICI7MH5+MDo6NSIsIGZsYWdfdHlwZSwgbmlsLCBuaWwsIG5pbCwgbmlsLCAxKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVfcG9pbnRlciA9IGdnLmdldFJlc3VsdHMoMSwgMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAjdHlwZV9wb2ludGVyID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlsMmNwcEZpZWxkcy5yZXRyaWV2ZWRfZmllbGRfdHlwZXNbdG9zdHJpbmcodHlwZV9wb2ludGVyWzFdLnZhbHVlKV0gdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfdHlwZSA9IGlsMmNwcEZpZWxkcy5yZXRyaWV2ZWRfZmllbGRfdHlwZXNbdG9zdHJpbmcodHlwZV9wb2ludGVyWzFdLnZhbHVlKV0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZmlyc3RfbGV0dGVyID0ge30NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0X2xldHRlclsxXSA9IHt9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdF9sZXR0ZXJbMV0uYWRkcmVzcyA9IHR5cGVfcG9pbnRlclsxXS52YWx1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RfbGV0dGVyWzFdLmZsYWdzID0gZ2cuVFlQRV9CWVRFDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdF9sZXR0ZXIgPSBnZy5nZXRWYWx1ZXMoZmlyc3RfbGV0dGVyKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgY291bnQgPSAwDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBjdXJyZW50X2xldHRlciA9IHt9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9sZXR0ZXJbMV0gPSB7fQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfbGV0dGVyWzFdLmFkZHJlc3MgPSBmaXJzdF9sZXR0ZXJbMV0uYWRkcmVzcyArIGNvdW50DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9sZXR0ZXJbMV0uZmxhZ3MgPSBnZy5UWVBFX0JZVEUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50X2xldHRlciA9IGdnLmdldFZhbHVlcyhjdXJyZW50X2xldHRlcikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudCA9IGNvdW50ICsgMQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGN1cnJlbnRfbGV0dGVyWzFdLnZhbHVlID4gMCBhbmQgY3VycmVudF9sZXR0ZXJbMV0udmFsdWUgPD0gMjU1IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfdHlwZSA9IGZpZWxkX3R5cGUgLi4gc3RyaW5nLmNoYXIoY3VycmVudF9sZXR0ZXJbMV0udmFsdWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoY3VycmVudF9sZXR0ZXJbMV0udmFsdWUgPT0gMCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICNmaWVsZF90eXBlID4gMiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWwyY3BwRmllbGRzLnJldHJpZXZlZF9maWVsZF90eXBlc1t0b3N0cmluZyh0eXBlX3BvaW50ZXJbMV0udmFsdWUpXSA9IGZpZWxkX3R5cGUNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBnZXRfdHlwZSA9IHt9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0X3R5cGVbMV0gPSB7fQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlsMmNwcEZpZWxkcy5hcmNoLng2NCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldF90eXBlWzFdLmFkZHJlc3MgPSBmaWVsZHNfc3RhcnQgKyBvZmZzZXQgKyA4DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRfdHlwZVsxXS5hZGRyZXNzID0gZmllbGRzX3N0YXJ0ICsgb2Zmc2V0ICsgNA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldF90eXBlWzFdLmZsYWdzID0gZmxhZ190eXBlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0X3R5cGUgPSBnZy5nZXRWYWx1ZXMoZ2V0X3R5cGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZ2V0X3R5cGUyID0ge30NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRfdHlwZTJbMV0gPSB7fQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldF90eXBlMlsxXS5hZGRyZXNzID0gZ2V0X3R5cGVbMV0udmFsdWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRfdHlwZTJbMV0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0X3R5cGUyID0gZ2cuZ2V0VmFsdWVzKGdldF90eXBlMikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbF90eXBlID0gZ2V0X3R5cGUyWzFdLnZhbHVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgI3Rvc3RyaW5nKGZpbmFsX3R5cGUpID4gNiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlsMmNwcEZpZWxkcy5hcmNoLng2NCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRfdHlwZTJbMV0uZmxhZ3MgPSBnZy5UWVBFX1FXT1JEDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRfdHlwZTIgPSBnZy5nZXRWYWx1ZXMoZ2V0X3R5cGUyKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZ2V0X3R5cGUzID0ge30NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0X3R5cGUzWzFdID0ge30NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0X3R5cGUzWzFdLmFkZHJlc3MgPSBnZXRfdHlwZTJbMV0udmFsdWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0X3R5cGUzWzFdLmZsYWdzID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRfdHlwZTMgPSBnZy5nZXRWYWx1ZXMoZ2V0X3R5cGUzKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRfdHlwZTMgPSBnZXRfdHlwZTNbMV0udmFsdWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxfdHlwZSA9IGdldF90eXBlMw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlsMmNwcEZpZWxkcy5tZXRob2RfdHlwZXNbdG9zdHJpbmcoZmluYWxfdHlwZSldIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfdHlwZSA9IGlsMmNwcEZpZWxkcy5tZXRob2RfdHlwZXNbdG9zdHJpbmcoZmluYWxfdHlwZSldDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF90eXBlID0gdG9zdHJpbmcoZmluYWxfdHlwZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZmllbGRfb2Zmc2V0ID0ge30NCiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX29mZnNldFsxXSA9IHt9DQogICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF9vZmZzZXRbMV0uYWRkcmVzcyA9IGZpZWxkX25hbWVfcG9pbnRlclsxXS5hZGRyZXNzICsgaWwyY3BwRmllbGRzLmZpZWxkT2Zmc2V0cy5maWVsZE9mZnNldA0KICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfb2Zmc2V0WzFdLmZsYWdzID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfb2Zmc2V0ID0gZ2cuZ2V0VmFsdWVzKGZpZWxkX29mZnNldCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX29mZnNldCA9IGZpZWxkX29mZnNldFsxXS52YWx1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0ICsgaWwyY3BwRmllbGRzLmZpZWxkT2Zmc2V0cy5maWVsZE5leHQNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGZpcnN0X2xldHRlciA9IHt9DQogICAgICAgICAgICAgICAgICAgICAgICBmaXJzdF9sZXR0ZXJbMV0gPSB7fQ0KICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RfbGV0dGVyWzFdLmFkZHJlc3MgPSBmaWVsZF9uYW1lX3BvaW50ZXJbMV0udmFsdWUNCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0X2xldHRlclsxXS5mbGFncyA9IGdnLlRZUEVfQllURQ0KICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RfbGV0dGVyID0gZ2cuZ2V0VmFsdWVzKGZpcnN0X2xldHRlcikNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGZpZWxkX25hbWUgPSAiIg0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgY291bnQgPSAwDQogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBjdXJyZW50X2xldHRlciA9IHt9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9sZXR0ZXJbMV0gPSB7fQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfbGV0dGVyWzFdLmFkZHJlc3MgPSBmaXJzdF9sZXR0ZXJbMV0uYWRkcmVzcyArIGNvdW50DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9sZXR0ZXJbMV0uZmxhZ3MgPSBnZy5UWVBFX0JZVEUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50X2xldHRlciA9IGdnLmdldFZhbHVlcyhjdXJyZW50X2xldHRlcikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudCA9IGNvdW50ICsgMQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGN1cnJlbnRfbGV0dGVyWzFdLnZhbHVlID4gMCBhbmQgY3VycmVudF9sZXR0ZXJbMV0udmFsdWUgPD0gMjU1IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfbmFtZSA9IGZpZWxkX25hbWUgLi4gc3RyaW5nLmNoYXIoY3VycmVudF9sZXR0ZXJbMV0udmFsdWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoY3VycmVudF9sZXR0ZXJbMV0udmFsdWUgPT0gMCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlsMmNwcEZpZWxkcy5tZXRob2RfdHlwZXNbdG9zdHJpbmcoZmllbGRfdHlwZSldID09ICJmbG9hdCIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlX3R5cGUgPSBnZy5UWVBFX0ZMT0FUDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgaWwyY3BwRmllbGRzLm1ldGhvZF90eXBlc1t0b3N0cmluZyhmaWVsZF90eXBlKV0gPT0gImRvdWJsZSIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlX3R5cGUgPSBnZy5UWVBFX0RPVUJMRQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChmaWVsZF9vZmZzZXQgJSAyIH49IDApIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZV90eXBlID0gZ2cuVFlQRV9CWVRFDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVfdHlwZSA9IGdnLlRZUEVfRFdPUkQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgYXNrX3R5cGUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgaWwyY3BwRmllbGRzLm1ldGhvZF90eXBlc1t0b3N0cmluZyhmaWVsZF90eXBlKV0gdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVfbWVudSA9IGlsMmNwcEZpZWxkcy5tZXRob2RfdHlwZXNbdG9zdHJpbmcoZmllbGRfdHlwZSldDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNrX3R5cGUgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBmaWVsZHMgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkcyA9IHt9DQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkc1sjZmllbGRzICsgMV0gPSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfbmFtZSA9IGZpZWxkX25hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfb2Zmc2V0ID0gaWwyY3BwRmllbGRzLmZfaGV4KGZpZWxkX29mZnNldCksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfdHlwZSA9IHZhbHVlX3R5cGUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZV9tZW51ID0gZmllbGRfdHlwZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc2tfdHlwZSA9IGFza190eXBlDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGdnLmxvYWRSZXN1bHRzKGluc3RhbmNlX2hlYWRlcnMpDQogICAgICAgICAgICAgICAgZ2cuc2VhcmNoUG9pbnRlcigwKQ0KICAgICAgICAgICAgICAgIHBvaW50ZXJzX3RvX2luc3RhbmNlcyA9IGdnLmdldFJlc3VsdHMoZ2cuZ2V0UmVzdWx0c0NvdW50KCkpDQogICAgICAgICAgICAgICAgc29ydGVkX2luc3RhbmNlX2hlYWRlcnMgPSB7fQ0KICAgICAgICAgICAgICAgIGFkZGVkX2hlYWRlcnMgPSB7fQ0KICAgICAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHBvaW50ZXJzX3RvX2luc3RhbmNlcykgZG8NCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IGFkZGVkX2hlYWRlcnNbdi52YWx1ZV0gdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgYWRkZWRfaGVhZGVyc1t2LnZhbHVlXSA9IHYudmFsdWUNCiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChzb3J0ZWRfaW5zdGFuY2VfaGVhZGVycywgdikNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZ2cubG9hZFJlc3VsdHMoc29ydGVkX2luc3RhbmNlX2hlYWRlcnMpDQogICAgICAgICAgICAgICAgc29ydGVkX2luc3RhbmNlX2hlYWRlcnMgPSBnZy5nZXRSZXN1bHRzKGdnLmdldFJlc3VsdHNDb3VudCgpKQ0KICAgICAgICAgICAgICAgIHNlbGVjdF9maWVsZF9pdGVtcyA9IHt9DQogICAgICAgICAgICAgICAgaWYgY2hvb3NlX25hbWVzcGFjZSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhmaWVsZHMpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RfZmllbGRfaXRlbXNbaV0gPSAi8J+UmCAiIC4uIHYudHlwZV9tZW51IC4uICIgIiAuLiB2LmZpZWxkX25hbWUgLi4gIiAiIC4uIHYuZmllbGRfb2Zmc2V0DQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIDo6ZG9fbW9yZTo6DQogICAgICAgICAgICAgICAgaWYgY2hvb3NlX25hbWVzcGFjZSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICBnZy5sb2FkUmVzdWx0cyhzb3J0ZWRfaW5zdGFuY2VfaGVhZGVycykNCiAgICAgICAgICAgICAgICAgICAgc2VsZWN0X2ZpZWxkX21lbnUgPSBnZy5jaG9pY2Uoc2VsZWN0X2ZpZWxkX2l0ZW1zLCBuaWwsDQogICAgICAgICAgICAgICAgICAgICAgICBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gIiAuLiAjc29ydGVkX2luc3RhbmNlX2hlYWRlcnMgLi4gIiBJbnN0YW5jZXMgRm91bmQg4oS577iPXG5DbGFzcyBOYW1lOiAiIC4uIGNsYXNzX3N0cmluZ19zZWFyY2hbMV0pDQogICAgICAgICAgICAgICAgICAgIGlmIHNlbGVjdF9maWVsZF9tZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICB3b3JraW5nX29mZnNldCA9IGZpZWxkc1tzZWxlY3RfZmllbGRfbWVudV0uZmllbGRfb2Zmc2V0DQogICAgICAgICAgICAgICAgICAgICAgICB3b3JraW5nX2ZpZWxkX25hbWUgPSBmaWVsZHNbc2VsZWN0X2ZpZWxkX21lbnVdLmZpZWxkX25hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRfZmllbGRfdmFsdWVzID0ge30NCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGdnX3R5cGVzID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsxXSA9IDQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgWzJdID0gMTYsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgWzNdID0gNjQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgWzRdID0gMiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbNV0gPSAxLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFs2XSA9IDMyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFs3XSA9IDgNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHR5cGVfbWVudV9pdGVtcyA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbMV0gPSAiVFlQRV9EV09SRCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgWzJdID0gIlRZUEVfRkxPQVQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFszXSA9ICJUWVBFX0RPVUJMRSIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgWzRdID0gIlRZUEVfV09SRCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgWzVdID0gIlRZUEVfQllURSIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgWzZdID0gIlRZUEVfUVdPUkQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFs3XSA9ICJUWVBFX1hPUiINCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIDo6cGlja190eXBlOjoNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHR5cGVfbWVudSA9IGdnLmNob2ljZSh0eXBlX21lbnVfaXRlbXMpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiB0eXBlX21lbnUgPT0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb3RvIHBpY2tfdHlwZQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlX3R5cGUgPSBnZ190eXBlc1t0eXBlX21lbnVdDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoc29ydGVkX2luc3RhbmNlX2hlYWRlcnMpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRfZmllbGRfdmFsdWVzW2ldID0gdg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkX2ZpZWxkX3ZhbHVlc1tpXS5hZGRyZXNzID0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYudmFsdWUgKyB0b251bWJlcihmaWVsZHNbc2VsZWN0X2ZpZWxkX21lbnVdLmZpZWxkX29mZnNldCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZF9maWVsZF92YWx1ZXNbaV0uZmxhZ3MgPSB2YWx1ZV90eXBlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRfZmllbGRfdmFsdWVzW2ldLm5hbWUgPSAiSW5zdGFuY2UgIiAuLiBpIC4uICI6ICIgLi4gc2VsZWN0X2ZpZWxkX2l0ZW1zW3NlbGVjdF9maWVsZF9tZW51XQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdnLmFkZExpc3RJdGVtcyhsb2FkX2ZpZWxkX3ZhbHVlcykNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgOjpub25lOjoNCiAgICAgICAgICAgIGlmIG5vbmVfZm91bmQgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgZ2cuYWxlcnQoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIE5vIENsYXNzIEluc3RhbmNlcyBGb3VuZCDihLnvuI8iKQ0KICAgICAgICAgICAgICAgIHNlbGVjdF9maWVsZF9tZW51ID0gbmlsDQogICAgICAgICAgICAgICAgbG9hZF9maWVsZF92YWx1ZXMgPSB7fQ0KICAgICAgICAgICAgICAgIG5vbmVfZm91bmQgPSBmYWxzZQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIGlmIHNlbGVjdF9maWVsZF9tZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgIHNlbGVjdF9maWVsZF9tZW51ID0gbmlsDQogICAgICAgICAgICAgICAgICAgIGdnLnNldFZpc2libGUodHJ1ZSkNCiAgICAgICAgICAgICAgICAgICAgZ2cuYWxlcnQoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPICIgLi4gI2xvYWRfZmllbGRfdmFsdWVzIC4uICIgSW5zdGFuY2VzIEFkZGVkIFRvIFNhdmUgTGlzdCDihLnvuI8iKQ0KICAgICAgICAgICAgICAgICAgICBsb2FkX2ZpZWxkX3ZhbHVlcyA9IHt9DQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglpbDJjcHBGaWVsZHMuZWRpdEZpZWxkcygpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBlZGl0RmllbGRzID0gZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBtZW51X2l0ZW1zID0ge30NCiAgICAgICAgbG9jYWwgbWVudV9uYW1lcyA9IHt9DQogICAgICAgIGxvY2FsIG1lbnVfdmFsdWVzID0ge30NCiAgICAgICAgbG9jYWwgbWVudV90eXBlcyA9IHt9DQogICAgICAgIGxvY2FsIHNhdmVfbGlzdF9zZWxlY3RlZCA9IGdnLmdldFNlbGVjdGVkTGlzdEl0ZW1zKCkNCiAgICAgICAgbG9jYWwgc2F2ZV9lZGl0X3ZhbHVlcyA9IHsNCiAgICAgICAgICAgIGNsYXNzX25hbWUgPSB3b3JraW5nX2NsYXNzLA0KICAgICAgICAgICAgZmllbGRfbmFtZSA9IHdvcmtpbmdfZmllbGRfbmFtZSwNCiAgICAgICAgICAgIHZhbHVlX3R5cGUgPSBzYXZlX2xpc3Rfc2VsZWN0ZWRbMV0uZmxhZ3MNCiAgICAgICAgfQ0KICAgICAgICBtZW51X2l0ZW1zWyNtZW51X2l0ZW1zICsgMV0gPSBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gQ3JlYXRlIEVkaXQg4oS5XG4iDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLiBpbDJjcHBGaWVsZHMuZ2dfZmxhZ3Nbc2F2ZV9saXN0X3NlbGVjdGVkWzFdLmZsYWdzXSAuLiAiICINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uIHNhdmVfbGlzdF9zZWxlY3RlZFsxXS5uYW1lDQogICAgICAgIG1lbnVfdmFsdWVzWyNtZW51X3ZhbHVlcyArIDFdID0gc2F2ZV9saXN0X3NlbGVjdGVkWzFdLnZhbHVlDQogICAgICAgIG1lbnVfdHlwZXNbI21lbnVfdHlwZXMgKyAxXSA9ICJudW1iZXIiDQogICAgICAgIG1lbnVfbmFtZXNbI21lbnVfbmFtZXMgKyAxXSA9IHNhdmVfbGlzdF9zZWxlY3RlZFsxXS5uYW1lDQogICAgICAgIG1lbnVfaXRlbXNbI21lbnVfaXRlbXMgKyAxXSA9ICJGcmVlemUiDQogICAgICAgIG1lbnVfaXRlbXNbI21lbnVfaXRlbXMgKyAxXSA9ICJFZGl0IEFsbCBJbnN0YW5jZXMgKE9ubHkgc2VsZWN0IG9uZSkiDQogICAgICAgIG1lbnVfaXRlbXNbI21lbnVfaXRlbXMgKyAxXSA9ICJFZGl0IEFsbCBJbnN0YW5jZXMgQWRkcmVzcyArIDQgWDQgKE9ubHkgc2VsZWN0IG9uZSkiDQogICAgICAgIG1lbnVfaXRlbXNbI21lbnVfaXRlbXMgKyAxXSA9ICJFZGl0IEFsbCBJbnN0YW5jZXMgV2l0aCBTYW1lIEluaXRpYWwgVmFsdWUgKE9ubHkgc2VsZWN0IG9uZSkiDQogICAgICAgIG1lbnVfaXRlbXNbI21lbnVfaXRlbXMgKyAxXSA9ICJFZGl0IEFsbCBJbnN0YW5jZXMgVGhhdCBIYXZlIFZhbHVlIEJlbG93IChPbmx5IHNlbGVjdCBvbmUpIg0KICAgICAgICBtZW51X2l0ZW1zWyNtZW51X2l0ZW1zICsgMV0gPSAiRWRpdCBJbnN0YW5jZXMgVGhhdCBIYXZlIFRoaXMgVmFsdWUiDQogICAgICAgIG1lbnVfdmFsdWVzWyNtZW51X3ZhbHVlcyArIDFdID0gZmFsc2UNCiAgICAgICAgbWVudV90eXBlc1sjbWVudV90eXBlcyArIDFdID0gImNoZWNrYm94Ig0KICAgICAgICBtZW51X3ZhbHVlc1sjbWVudV92YWx1ZXMgKyAxXSA9IGZhbHNlDQogICAgICAgIG1lbnVfdHlwZXNbI21lbnVfdHlwZXMgKyAxXSA9ICJjaGVja2JveCINCiAgICAgICAgbWVudV92YWx1ZXNbI21lbnVfdmFsdWVzICsgMV0gPSBmYWxzZQ0KICAgICAgICBtZW51X3R5cGVzWyNtZW51X3R5cGVzICsgMV0gPSAiY2hlY2tib3giDQogICAgICAgIG1lbnVfdmFsdWVzWyNtZW51X3ZhbHVlcyArIDFdID0gZmFsc2UNCiAgICAgICAgbWVudV90eXBlc1sjbWVudV90eXBlcyArIDFdID0gImNoZWNrYm94Ig0KICAgICAgICBtZW51X3ZhbHVlc1sjbWVudV92YWx1ZXMgKyAxXSA9IGZhbHNlDQogICAgICAgIG1lbnVfdHlwZXNbI21lbnVfdHlwZXMgKyAxXSA9ICJjaGVja2JveCINCiAgICAgICAgbWVudV92YWx1ZXNbI21lbnVfdmFsdWVzICsgMV0gPSAiIg0KICAgICAgICBtZW51X3R5cGVzWyNtZW51X3R5cGVzICsgMV0gPSAibnVtYmVyIg0KICAgICAgICBsb2NhbCBtZW51ID0gZ2cucHJvbXB0KG1lbnVfaXRlbXMsIG1lbnVfdmFsdWVzLCBtZW51X3R5cGVzKQ0KICAgICAgICBpZiBtZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICBpZiBtZW51WyNtZW51IC0gNV0gPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgc2F2ZV9lZGl0X3ZhbHVlcy5mcmVlemUgPSB0cnVlDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgc2F2ZV9lZGl0X3ZhbHVlcy5mcmVlemUgPSBmYWxzZQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBtZW51WyNtZW51IC0gM10gPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgbG9jYWwgc2F2ZV9saXN0X2FsbCA9IGdnLmdldExpc3RJdGVtcygpDQogICAgICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoc2F2ZV9saXN0X2FsbCkgZG8NCiAgICAgICAgICAgICAgICAgICAgc2F2ZV9saXN0X2FsbFtpXS5hZGRyZXNzID0gc2F2ZV9saXN0X2FsbFtpXS5hZGRyZXNzICsgNA0KICAgICAgICAgICAgICAgICAgICBzYXZlX2xpc3RfYWxsW2ldLnZhbHVlID0gbWVudVsxXSAuLiAiWDQiDQogICAgICAgICAgICAgICAgICAgIHNhdmVfbGlzdF9hbGxbaV0uZnJlZXplID0gc2F2ZV9lZGl0X3ZhbHVlcy5mcmVlemUNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBnZy5zZXRWYWx1ZXMoc2F2ZV9saXN0X2FsbCkNCiAgICAgICAgICAgICAgICBnZy5hZGRMaXN0SXRlbXMoc2F2ZV9saXN0X2FsbCkNCiAgICAgICAgICAgICAgICBzYXZlX2VkaXRfdmFsdWVzLmVkaXRfdHlwZSA9ICJlZGl0X2FsbF94NCINCiAgICAgICAgICAgICAgICBzYXZlX2VkaXRfdmFsdWVzLmVkaXRfdmFsdWUgPSBtZW51WzFdDQogICAgICAgICAgICBlbHNlaWYgbWVudVsjbWVudSAtIDRdID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgIGxvY2FsIHNhdmVfbGlzdF9hbGwgPSBnZy5nZXRMaXN0SXRlbXMoKQ0KICAgICAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHNhdmVfbGlzdF9hbGwpIGRvDQogICAgICAgICAgICAgICAgICAgIHNhdmVfbGlzdF9hbGxbaV0udmFsdWUgPSBtZW51WzFdDQogICAgICAgICAgICAgICAgICAgIHNhdmVfbGlzdF9hbGxbaV0uZnJlZXplID0gc2F2ZV9lZGl0X3ZhbHVlcy5mcmVlemUNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBnZy5zZXRWYWx1ZXMoc2F2ZV9saXN0X2FsbCkNCiAgICAgICAgICAgICAgICBnZy5hZGRMaXN0SXRlbXMoc2F2ZV9saXN0X2FsbCkNCiAgICAgICAgICAgICAgICBzYXZlX2VkaXRfdmFsdWVzLmVkaXRfdHlwZSA9ICJlZGl0X2FsbCINCiAgICAgICAgICAgICAgICBzYXZlX2VkaXRfdmFsdWVzLmVkaXRfdmFsdWUgPSBtZW51WzFdDQogICAgICAgICAgICBlbHNlaWYgbWVudVsjbWVudSAtIDJdID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgIGxvY2FsIHNhdmVfbGlzdF9hbGwgPSBnZy5nZXRMaXN0SXRlbXMoKQ0KICAgICAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHNhdmVfbGlzdF9hbGwpIGRvDQogICAgICAgICAgICAgICAgICAgIGlmIHNhdmVfbGlzdF9hbGxbaV0udmFsdWUgPT0gc2F2ZV9saXN0X3NlbGVjdGVkWzFdLnZhbHVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVfbGlzdF9hbGxbaV0udmFsdWUgPSBtZW51WzFdDQogICAgICAgICAgICAgICAgICAgICAgICBzYXZlX2xpc3RfYWxsW2ldLmZyZWV6ZSA9IHNhdmVfZWRpdF92YWx1ZXMuZnJlZXplDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGdnLnNldFZhbHVlcyhzYXZlX2xpc3RfYWxsKQ0KICAgICAgICAgICAgICAgIGdnLmFkZExpc3RJdGVtcyhzYXZlX2xpc3RfYWxsKQ0KICAgICAgICAgICAgICAgIHNhdmVfZWRpdF92YWx1ZXMuZWRpdF90eXBlID0gImVkaXRfYWxsX3RoYXRfZXF1YWwiDQogICAgICAgICAgICAgICAgc2F2ZV9lZGl0X3ZhbHVlcy5lZGl0X3ZhbHVlID0gbWVudVsxXQ0KICAgICAgICAgICAgICAgIHNhdmVfZWRpdF92YWx1ZXMubXVzdF9lcXVhbCA9IHNhdmVfbGlzdF9zZWxlY3RlZFsxXS52YWx1ZQ0KICAgICAgICAgICAgZWxzZWlmIG1lbnVbI21lbnUgLSAxXSA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgICBsb2NhbCBzYXZlX2xpc3RfYWxsID0gZ2cuZ2V0TGlzdEl0ZW1zKCkNCiAgICAgICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhzYXZlX2xpc3RfYWxsKSBkbw0KICAgICAgICAgICAgICAgICAgICBpZiBzYXZlX2xpc3RfYWxsW2ldLnZhbHVlID09IG1lbnVbI21lbnVdIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVfbGlzdF9hbGxbaV0udmFsdWUgPSBtZW51WzFdDQogICAgICAgICAgICAgICAgICAgICAgICBzYXZlX2xpc3RfYWxsW2ldLmZyZWV6ZSA9IHNhdmVfZWRpdF92YWx1ZXMuZnJlZXplDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGdnLnNldFZhbHVlcyhzYXZlX2xpc3RfYWxsKQ0KICAgICAgICAgICAgICAgIGdnLmFkZExpc3RJdGVtcyhzYXZlX2xpc3RfYWxsKQ0KICAgICAgICAgICAgICAgIHNhdmVfZWRpdF92YWx1ZXMuZWRpdF90eXBlID0gImVkaXRfYWxsX3RoYXRfZXF1YWwiDQogICAgICAgICAgICAgICAgc2F2ZV9lZGl0X3ZhbHVlcy5lZGl0X3ZhbHVlID0gbWVudVsxXQ0KICAgICAgICAgICAgICAgIHNhdmVfZWRpdF92YWx1ZXMubXVzdF9lcXVhbCA9IG1lbnVbI21lbnVdDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoc2F2ZV9saXN0X3NlbGVjdGVkKSBkbw0KICAgICAgICAgICAgICAgICAgICBzYXZlX2xpc3Rfc2VsZWN0ZWRbaV0udmFsdWUgPSBtZW51WzFdDQogICAgICAgICAgICAgICAgICAgIHNhdmVfbGlzdF9zZWxlY3RlZFtpXS5mcmVlemUgPSBzYXZlX2VkaXRfdmFsdWVzLmZyZWV6ZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGdnLnNldFZhbHVlcyhzYXZlX2xpc3Rfc2VsZWN0ZWQpDQogICAgICAgICAgICAgICAgZ2cuYWRkTGlzdEl0ZW1zKHNhdmVfbGlzdF9zZWxlY3RlZCkNCiAgICAgICAgICAgICAgICBsb2NhbCBzYXZlX2VkaXRfaW5kZXhlcyA9IHt9DQogICAgICAgICAgICAgICAgbG9jYWwgc2F2ZV9saXN0X2FsbCA9IGdnLmdldExpc3RJdGVtcygpDQogICAgICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoc2F2ZV9saXN0X3NlbGVjdGVkKSBkbw0KICAgICAgICAgICAgICAgICAgICBmb3IgaW5kZXgsIHZhbHVlIGluIHBhaXJzKHNhdmVfbGlzdF9hbGwpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICBpZiB2LmFkZHJlc3MgPT0gdmFsdWUuYWRkcmVzcyB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHNhdmVfZWRpdF9pbmRleGVzLCBpbmRleCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBzYXZlX2VkaXRfdmFsdWVzLmVkaXRfdHlwZSA9ICJlZGl0X2luZGV4ZXMiDQogICAgICAgICAgICAgICAgc2F2ZV9lZGl0X3ZhbHVlcy5lZGl0X3ZhbHVlID0gbWVudVsxXQ0KICAgICAgICAgICAgICAgIHNhdmVfZWRpdF92YWx1ZXMuZWRpdF9pbmRleGVzID0gc2F2ZV9lZGl0X2luZGV4ZXMNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgc2F2ZV9lZGl0X3ZhbHVlcy5lZGl0X25hbWVzcGFjZSA9IGVkaXRfbmFtZXNwYWNlDQogICAgICAgICAgICA6OmVudGVyX25hbWU6Og0KICAgICAgICAgICAgbG9jYWwgbmFtZV9lZGl0ID0gZ2cucHJvbXB0KHtzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gRW50ZXIgTmFtZSBGb3IgRWRpdCDihLkifSwNCiAgICAgICAgICAgICAgICB7c2F2ZV9lZGl0X3ZhbHVlcy5maWVsZF9uYW1lfSwgeyJ0ZXh0In0pDQogICAgICAgICAgICBpZiBuYW1lX2VkaXQgPT0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICBnb3RvIGVudGVyX25hbWUNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgc2F2ZV9lZGl0X3ZhbHVlcy5lZGl0X25hbWUgPSBuYW1lX2VkaXRbMV0NCiAgICAgICAgICAgIGlsMmNwcEZpZWxkcy5zYXZlZEVkaXRzVGFibGVbI2lsMmNwcEZpZWxkcy5zYXZlZEVkaXRzVGFibGUgKyAxXSA9IHNhdmVfZWRpdF92YWx1ZXMNCiAgICAgICAgICAgIG1ha2luZ19lZGl0ID0gdHJ1ZQ0KICAgICAgICAgICAgZ2cuYWxlcnQoc2NyaXB0X3RpdGxlDQogICAgICAgICAgICAgICAgICAgICAgICAgLi4gIlxuXG7ihLnvuI8gVmFsdWUgaGFzIGJlZW4gc2V0LiDihLnvuI8gXG5UZXN0IHRvIHZlcmlmeSBpdCBpcyB3b3JraW5nIGFuZCB0aGVuIHByZXNzIHRoZSBmbG9hdGluZyBHRyBidXR0b24gdG8gZWl0aGVyIFNhdmUgb3IgRGlzY2FyZCBlZGl0LiIpDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRmllbGRzLmRvU2F2ZWRFZGl0KHNhdmVkX2VkaXRfdGFibGUpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBkb1NhdmVkRWRpdCA9IGZ1bmN0aW9uKHNhdmVkX2VkaXRfdGFibGUpDQogICAgICAgIGxvY2FsIHN0cmluZ19hZGRyZXNzID0ge30NCiAgICAgICAgbG9jYWwgY2xhc3NfaGVhZGVycyA9IHt9DQogICAgICAgIGxvY2FsIGdldF9udW1iZXJfb2ZfZmllbGRzID0ge30NCiAgICAgICAgbG9jYWwgZmlyc3RfZmllbGRfYWRkcmVzcyA9IHt9DQogICAgICAgIGxvY2FsIGZpZWxkX2RhdGEgPSAiIg0KICAgICAgICBsb2NhbCBmaWVsZF9uYW1lX3BvaW50ZXIgPSAiIg0KICAgICAgICBsb2NhbCB0eXBlX3BvaW50ZXIgPSAiIg0KICAgICAgICBsb2NhbCBjbGFzc19wb2ludGVyID0gIiINCiAgICAgICAgbG9jYWwgZmllbGRfb2Zmc2V0ID0gIiINCiAgICAgICAgbG9jYWwgY3VycmVudF9hZGRyZXNzID0gIiINCiAgICAgICAgbG9jYWwgZ2V0X2ZpZWxkX25hbWUgPSB7fQ0KICAgICAgICBsb2NhbCBvZmZzZXQgPSAwDQogICAgICAgIGxvY2FsIGNvdW50ID0gMQ0KICAgICAgICBsb2NhbCBmaWVsZF9kYXRhID0ge30NCiAgICAgICAgbG9jYWwgZmllbGRfbmFtZSA9ICIiDQogICAgICAgIGxvY2FsIGdldF90eXBlID0ge30NCiAgICAgICAgbG9jYWwgZmllbGRfdHlwZSA9IHt9DQogICAgICAgIGxvY2FsIHBvaW50ZXJzX3RvX2luc3RhbmNlcyA9IHt9DQogICAgICAgIGlmIG5vdCBjbGFzcyB0aGVuDQogICAgICAgICAgICBjbGFzcyA9ICIiDQogICAgICAgIGVuZA0KICAgICAgICBnZy5jbGVhckxpc3QoKQ0KICAgICAgICB3b3JraW5nX2NsYXNzID0gc2F2ZWRfZWRpdF90YWJsZS5jbGFzc19uYW1lDQogICAgICAgIGdnLnNldFJhbmdlcyhnZy5SRUdJT05fT1RIRVIpDQogICAgICAgIGdnLmNsZWFyUmVzdWx0cygpDQogICAgICAgIGdnLnNlYXJjaE51bWJlcihpbDJjcHBGaWVsZHMuY3JlYXRlU2VhcmNoKHNhdmVkX2VkaXRfdGFibGUuY2xhc3NfbmFtZSksIGdnLlRZUEVfQllURSwgZmFsc2UsIGdnLlNJR05fRVFVQUwsDQogICAgICAgICAgICByYW5nZV9zdGFydCwgcmFuZ2VfZW5kKQ0KICAgICAgICBzdHJpbmdfYWRkcmVzcyA9IGdnLmdldFJlc3VsdHMoMSwgMSkNCiAgICAgICAgaWYgZ2cuZ2V0UmVzdWx0c0NvdW50KCkgPT0gMCB0aGVuDQogICAgICAgICAgICBub25lX2ZvdW5kID0gdHJ1ZQ0KICAgICAgICAgICAgZ290byBub25lDQogICAgICAgIGVuZA0KICAgICAgICBzdHJpbmdfYWRkcmVzcyA9IHN0cmluZ19hZGRyZXNzWzFdLmFkZHJlc3MNCiAgICAgICAgZ2cuY2xlYXJSZXN1bHRzKCkNCiAgICAgICAgZ2cuc2V0UmFuZ2VzKGdnLlJFR0lPTl9DX0FMTE9DKQ0KICAgICAgICBnZy5zZWFyY2hOdW1iZXIoc3RyaW5nX2FkZHJlc3MsIGZsYWdfdHlwZSkNCiAgICAgICAgY2xhc3NfaGVhZGVycyA9IGdnLmdldFJlc3VsdHMoZ2cuZ2V0UmVzdWx0c0NvdW50KCkpDQogICAgICAgIGlmIGdnLmdldFJlc3VsdHNDb3VudCgpID09IDAgdGhlbg0KICAgICAgICAgICAgbm9uZV9mb3VuZCA9IHRydWUNCiAgICAgICAgICAgIGdvdG8gbm9uZQ0KICAgICAgICBlbmQNCiAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoY2xhc3NfaGVhZGVycykgZG8NCiAgICAgICAgICAgIGlmIGlsMmNwcEZpZWxkcy5hcmNoLng2NCB0aGVuDQogICAgICAgICAgICAgICAgY2xhc3NfaGVhZGVyc1tpXS5hZGRyZXNzID0gY2xhc3NfaGVhZGVyc1tpXS5hZGRyZXNzIC0gMTYNCiAgICAgICAgICAgICAgICBuYW1lc3BhY2Vfb2Zmc2V0ID0gMjQNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBjbGFzc19oZWFkZXJzW2ldLmFkZHJlc3MgPSBjbGFzc19oZWFkZXJzW2ldLmFkZHJlc3MgLSA4DQogICAgICAgICAgICAgICAgbmFtZXNwYWNlX29mZnNldCA9IDEyDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGdnLnNldFJhbmdlcyhnZy5SRUdJT05fQU5PTllNT1VTKQ0KICAgICAgICBnZy5sb2FkUmVzdWx0cyhjbGFzc19oZWFkZXJzKQ0KICAgICAgICBnZy5zZWFyY2hQb2ludGVyKDApDQogICAgICAgIGluc3RhbmNlX2hlYWRlcnMgPSBnZy5nZXRSZXN1bHRzKGdnLmdldFJlc3VsdHNDb3VudCgpKQ0KICAgICAgICBmb3VuZF9jbGFzc2VzID0ge30NCiAgICAgICAgZm9yIGksIHYgaW4gaXBhaXJzKGluc3RhbmNlX2hlYWRlcnMpIGRvDQogICAgICAgICAgICBpZiBub3QgZm91bmRfY2xhc3Nlc1t0b3N0cmluZyh2LnZhbHVlKV0gdGhlbg0KICAgICAgICAgICAgICAgIGZvdW5kX2NsYXNzZXNbdG9zdHJpbmcodi52YWx1ZSldID0gMA0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIGZvdW5kX2NsYXNzZXNbdG9zdHJpbmcodi52YWx1ZSldID0gZm91bmRfY2xhc3Nlc1t0b3N0cmluZyh2LnZhbHVlKV0gKyAxDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGZvdW5kX2NsYXNzZXNfc29ydGVkID0ge30NCiAgICAgICAgZm9yIGssIHYgaW4gcGFpcnMoZm91bmRfY2xhc3NlcykgZG8NCiAgICAgICAgICAgIGZvdW5kX2NsYXNzZXNfc29ydGVkWyNmb3VuZF9jbGFzc2VzX3NvcnRlZCArIDFdID0gew0KICAgICAgICAgICAgICAgIGNsYXNzX2FkZHJlc3MgPSBrLA0KICAgICAgICAgICAgICAgIHBvaW50ZXJzX3RvID0gdg0KICAgICAgICAgICAgfQ0KICAgICAgICBlbmQNCiAgICAgICAgbmFtZXNwYWNlX25hbWVzID0ge30NCiAgICAgICAgZm9yIGksIHYgaW4gaXBhaXJzKGZvdW5kX2NsYXNzZXNfc29ydGVkKSBkbw0KICAgICAgICAgICAgbmFtZXNwYWNlX3N0cmluZ19hZGRyZXNzID0ge30NCiAgICAgICAgICAgIG5hbWVzcGFjZV9zdHJpbmdfYWRkcmVzc1sxXSA9IHt9DQogICAgICAgICAgICBuYW1lc3BhY2Vfc3RyaW5nX2FkZHJlc3NbMV0uYWRkcmVzcyA9IHYuY2xhc3NfYWRkcmVzcyArIG5hbWVzcGFjZV9vZmZzZXQNCiAgICAgICAgICAgIG5hbWVzcGFjZV9zdHJpbmdfYWRkcmVzc1sxXS5mbGFncyA9IGZsYWdfdHlwZQ0KICAgICAgICAgICAgbmFtZXNwYWNlX3N0cmluZ19hZGRyZXNzID0gZ2cuZ2V0VmFsdWVzKG5hbWVzcGFjZV9zdHJpbmdfYWRkcmVzcykNCiAgICAgICAgICAgIG5hbWVzcGFjZV9zdHJpbmdfYWRkcmVzcyA9IG5hbWVzcGFjZV9zdHJpbmdfYWRkcmVzc1sxXS52YWx1ZQ0KICAgICAgICAgICAgZ2V0X25hbWVzcGFjZV9uYW1lID0ge30NCiAgICAgICAgICAgIG9mZnNldCA9IDANCiAgICAgICAgICAgIGNvdW50ID0gMQ0KICAgICAgICAgICAgcmVwZWF0DQogICAgICAgICAgICAgICAgZ2V0X25hbWVzcGFjZV9uYW1lW2NvdW50XSA9IHt9DQogICAgICAgICAgICAgICAgZ2V0X25hbWVzcGFjZV9uYW1lW2NvdW50XS5hZGRyZXNzID0gbmFtZXNwYWNlX3N0cmluZ19hZGRyZXNzICsgb2Zmc2V0DQogICAgICAgICAgICAgICAgZ2V0X25hbWVzcGFjZV9uYW1lW2NvdW50XS5mbGFncyA9IGdnLlRZUEVfQllURQ0KICAgICAgICAgICAgICAgIGNvdW50ID0gY291bnQgKyAxDQogICAgICAgICAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0ICsgMQ0KICAgICAgICAgICAgdW50aWwgKGNvdW50ID09IDEwMCkNCiAgICAgICAgICAgIGdldF9uYW1lc3BhY2VfbmFtZSA9IGdnLmdldFZhbHVlcyhnZXRfbmFtZXNwYWNlX25hbWUpDQogICAgICAgICAgICBuYW1lc3BhY2VfbmFtZSA9ICIiDQogICAgICAgICAgICBmb3IgaW5kZXgsIHZhbHVlIGluIHBhaXJzKGdldF9uYW1lc3BhY2VfbmFtZSkgZG8NCiAgICAgICAgICAgICAgICBpZiB2YWx1ZS52YWx1ZSA+PSAwIGFuZCB2YWx1ZS52YWx1ZSA8PSAyNTUgdGhlbg0KICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2VfbmFtZSA9IG5hbWVzcGFjZV9uYW1lIC4uIHN0cmluZy5jaGFyKHZhbHVlLnZhbHVlKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIHZhbHVlLnZhbHVlID09IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBuYW1lc3BhY2VfbmFtZSA9PSBzYXZlZF9lZGl0X3RhYmxlLmVkaXRfbmFtZXNwYWNlIHRoZW4NCiAgICAgICAgICAgICAgICBnZy5yZWZpbmVOdW1iZXIoZm91bmRfY2xhc3Nlc19zb3J0ZWRbaV0uY2xhc3NfYWRkcmVzcywgZmxhZ190eXBlKQ0KICAgICAgICAgICAgICAgIGluc3RhbmNlX2hlYWRlcnMgPSBnZy5nZXRSZXN1bHRzKGdnLmdldFJlc3VsdENvdW50KCkpDQogICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgaWYgZ2cuZ2V0UmVzdWx0c0NvdW50KCkgPT0gMCB0aGVuDQogICAgICAgICAgICBub25lX2ZvdW5kID0gdHJ1ZQ0KICAgICAgICAgICAgZ290byBub25lDQogICAgICAgIGVuZA0KICAgICAgICBjbGFzc19oZWFkZXIgPSBpbnN0YW5jZV9oZWFkZXJzWzFdLnZhbHVlDQogICAgICAgIGZpcnN0X2ZpZWxkX2FkZHJlc3MgPSB7fQ0KICAgICAgICBmaXJzdF9maWVsZF9hZGRyZXNzWzFdID0ge30NCiAgICAgICAgaWYgaWwyY3BwRmllbGRzLmFyY2gueDY0IHRoZW4NCiAgICAgICAgICAgIGZpcnN0X2ZpZWxkX2FkZHJlc3NbMV0uYWRkcmVzcyA9IGNsYXNzX2hlYWRlciArIDB4ODANCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgZmlyc3RfZmllbGRfYWRkcmVzc1sxXS5hZGRyZXNzID0gY2xhc3NfaGVhZGVyICsgMHg0MA0KICAgICAgICBlbmQNCiAgICAgICAgZmlyc3RfZmllbGRfYWRkcmVzc1sxXS5mbGFncyA9IGZsYWdfdHlwZQ0KICAgICAgICBmaXJzdF9maWVsZF9hZGRyZXNzID0gZ2cuZ2V0VmFsdWVzKGZpcnN0X2ZpZWxkX2FkZHJlc3MpDQogICAgICAgIGZpcnN0X2ZpZWxkX2FkZHJlc3MgPSBmaXJzdF9maWVsZF9hZGRyZXNzWzFdLnZhbHVlDQogICAgICAgIGlmIGlsMmNwcEZpZWxkcy5hcmNoLng2NCB0aGVuDQogICAgICAgICAgICBnZXRfbnVtX2ZpZWxkc19zdGFydCA9IGZpcnN0X2ZpZWxkX2FkZHJlc3MgKyAyNA0KICAgICAgICAgICAgZ2V0X251bV9maWVsZHNfb2Zmc2V0ID0gMzINCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgZ2V0X251bV9maWVsZHNfc3RhcnQgPSBmaXJzdF9maWVsZF9hZGRyZXNzICsgMTINCiAgICAgICAgICAgIGdldF9udW1fZmllbGRzX29mZnNldCA9IDIwDQogICAgICAgIGVuZA0KICAgICAgICBudW1fb2Zmc2V0ID0gMA0KICAgICAgICBudW1fZmllbGRfZGF0YSA9IHt9DQogICAgICAgIGZvciBpID0gMSwgMTAwMCBkbw0KICAgICAgICAgICAgbnVtX2ZpZWxkX2RhdGFbaV0gPSB7fQ0KICAgICAgICAgICAgbnVtX2ZpZWxkX2RhdGFbaV0uYWRkcmVzcyA9IGdldF9udW1fZmllbGRzX3N0YXJ0ICsgbnVtX29mZnNldA0KICAgICAgICAgICAgbnVtX2ZpZWxkX2RhdGFbaV0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgICAgICBudW1fb2Zmc2V0ID0gbnVtX29mZnNldCArIGdldF9udW1fZmllbGRzX29mZnNldA0KICAgICAgICBlbmQNCiAgICAgICAgbnVtX2ZpZWxkX2RhdGEgPSBnZy5nZXRWYWx1ZXMobnVtX2ZpZWxkX2RhdGEpDQogICAgICAgIGZpZWxkX2NvdW50ZXIgPSAwDQogICAgICAgIGxhc3RfZmllbGRfb2Zmc2V0ID0gMA0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhudW1fZmllbGRfZGF0YSkgZG8NCiAgICAgICAgICAgIGlmIHYudmFsdWUgPj0gbGFzdF9maWVsZF9vZmZzZXQgb3Igdi52YWx1ZSA9PSAwIHRoZW4NCiAgICAgICAgICAgICAgICBpZiB2LnZhbHVlID49IGxhc3RfZmllbGRfb2Zmc2V0IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbGFzdF9maWVsZF9vZmZzZXQgPSB2LnZhbHVlDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZmllbGRfY291bnRlciA9IGZpZWxkX2NvdW50ZXIgKyAxDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZmllbGRfZGF0YSA9ICIiDQogICAgICAgIGZpZWxkX25hbWVfcG9pbnRlciA9ICIiDQogICAgICAgIHR5cGVfcG9pbnRlciA9ICIiDQogICAgICAgIGNsYXNzX3BvaW50ZXIgPSAiIg0KICAgICAgICBmaWVsZF9vZmZzZXQgPSAiIg0KICAgICAgICBmaWVsZHMgPSB7fQ0KICAgICAgICBudW1iZXJfb2ZfZmllbGRzID0gZmllbGRfY291bnRlcg0KICAgICAgICBjdXJyZW50X2FkZHJlc3MgPSBmaXJzdF9maWVsZF9hZGRyZXNzDQogICAgICAgIGZvciBpID0gMSwgbnVtYmVyX29mX2ZpZWxkcyBkbw0KICAgICAgICAgICAgaWYgaWwyY3BwRmllbGRzLmFyY2gueDY0IHRoZW4NCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhID0ge30NCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzFdID0ge30NCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzFdLmFkZHJlc3MgPSBjdXJyZW50X2FkZHJlc3MNCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzFdLmZsYWdzID0gZ2cuVFlQRV9RV09SRA0KICAgICAgICAgICAgICAgIGN1cnJlbnRfYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcyArIDQNCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzJdID0ge30NCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzJdLmFkZHJlc3MgPSBjdXJyZW50X2FkZHJlc3MNCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzJdLmZsYWdzID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICAgICAgICAgIGN1cnJlbnRfYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcyArIDQNCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzNdID0ge30NCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzNdLmFkZHJlc3MgPSBjdXJyZW50X2FkZHJlc3MNCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzNdLmZsYWdzID0gZ2cuVFlQRV9RV09SRA0KICAgICAgICAgICAgICAgIGN1cnJlbnRfYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcyArIDQNCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzRdID0ge30NCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzRdLmFkZHJlc3MgPSBjdXJyZW50X2FkZHJlc3MNCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzRdLmZsYWdzID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICAgICAgICAgIGN1cnJlbnRfYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcyArIDQNCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzVdID0ge30NCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzVdLmFkZHJlc3MgPSBjdXJyZW50X2FkZHJlc3MNCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzVdLmZsYWdzID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICAgICAgICAgIGN1cnJlbnRfYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcyArIDQNCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzZdID0ge30NCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzZdLmFkZHJlc3MgPSBjdXJyZW50X2FkZHJlc3MNCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzZdLmZsYWdzID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICAgICAgICAgIGN1cnJlbnRfYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcyArIDQNCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzddID0ge30NCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzddLmFkZHJlc3MgPSBjdXJyZW50X2FkZHJlc3MNCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzddLmZsYWdzID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICAgICAgICAgIGN1cnJlbnRfYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcyArIDQNCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzhdID0ge30NCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzhdLmFkZHJlc3MgPSBjdXJyZW50X2FkZHJlc3MNCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzhdLmZsYWdzID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICAgICAgICAgIGN1cnJlbnRfYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcyArIDQNCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhID0gZ2cuZ2V0VmFsdWVzKGZpZWxkX2RhdGEpDQogICAgICAgICAgICAgICAgZmllbGRfbmFtZV9wb2ludGVyID0gZmllbGRfZGF0YVsxXS52YWx1ZQ0KICAgICAgICAgICAgICAgIHR5cGVfcG9pbnRlciA9IGZpZWxkX2RhdGFbM10udmFsdWUNCiAgICAgICAgICAgICAgICBjbGFzc19wb2ludGVyID0gZmllbGRfZGF0YVs1XS52YWx1ZQ0KICAgICAgICAgICAgICAgIGZpZWxkX29mZnNldCA9IGZpZWxkX2RhdGFbN10udmFsdWUNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhID0ge30NCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzFdID0ge30NCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzFdLmFkZHJlc3MgPSBjdXJyZW50X2FkZHJlc3MNCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzFdLmZsYWdzID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICAgICAgICAgIGN1cnJlbnRfYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcyArIDQNCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzJdID0ge30NCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzJdLmFkZHJlc3MgPSBjdXJyZW50X2FkZHJlc3MNCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzJdLmZsYWdzID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICAgICAgICAgIGN1cnJlbnRfYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcyArIDQNCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzNdID0ge30NCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzNdLmFkZHJlc3MgPSBjdXJyZW50X2FkZHJlc3MNCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzNdLmZsYWdzID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICAgICAgICAgIGN1cnJlbnRfYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcyArIDQNCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzRdID0ge30NCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzRdLmFkZHJlc3MgPSBjdXJyZW50X2FkZHJlc3MNCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzRdLmZsYWdzID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICAgICAgICAgIGN1cnJlbnRfYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcyArIDQNCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzVdID0ge30NCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzVdLmFkZHJlc3MgPSBjdXJyZW50X2FkZHJlc3MNCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhWzVdLmZsYWdzID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICAgICAgICAgIGN1cnJlbnRfYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcyArIDQNCiAgICAgICAgICAgICAgICBmaWVsZF9kYXRhID0gZ2cuZ2V0VmFsdWVzKGZpZWxkX2RhdGEpDQogICAgICAgICAgICAgICAgZmllbGRfbmFtZV9wb2ludGVyID0gZmllbGRfZGF0YVsxXS52YWx1ZQ0KICAgICAgICAgICAgICAgIHR5cGVfcG9pbnRlciA9IGZpZWxkX2RhdGFbMl0udmFsdWUNCiAgICAgICAgICAgICAgICBjbGFzc19wb2ludGVyID0gZmllbGRfZGF0YVszXS52YWx1ZQ0KICAgICAgICAgICAgICAgIGZpZWxkX29mZnNldCA9IGZpZWxkX2RhdGFbNF0udmFsdWUNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZ2V0X2ZpZWxkX25hbWUgPSB7fQ0KICAgICAgICAgICAgb2Zmc2V0ID0gMA0KICAgICAgICAgICAgY291bnQgPSAxDQogICAgICAgICAgICByZXBlYXQNCiAgICAgICAgICAgICAgICBnZXRfZmllbGRfbmFtZVtjb3VudF0gPSB7fQ0KICAgICAgICAgICAgICAgIGdldF9maWVsZF9uYW1lW2NvdW50XS5hZGRyZXNzID0gZmllbGRfbmFtZV9wb2ludGVyICsgb2Zmc2V0DQogICAgICAgICAgICAgICAgZ2V0X2ZpZWxkX25hbWVbY291bnRdLmZsYWdzID0gZ2cuVFlQRV9CWVRFDQogICAgICAgICAgICAgICAgY291bnQgPSBjb3VudCArIDENCiAgICAgICAgICAgICAgICBvZmZzZXQgPSBvZmZzZXQgKyAxDQogICAgICAgICAgICB1bnRpbCAoY291bnQgPT0gMTAwKQ0KICAgICAgICAgICAgZ2V0X2ZpZWxkX25hbWUgPSBnZy5nZXRWYWx1ZXMoZ2V0X2ZpZWxkX25hbWUpDQogICAgICAgICAgICBmaWVsZF9uYW1lID0gIiINCiAgICAgICAgICAgIGZvciBpbmRleCwgdmFsdWUgaW4gcGFpcnMoZ2V0X2ZpZWxkX25hbWUpIGRvDQogICAgICAgICAgICAgICAgaWYgdmFsdWUudmFsdWUgPj0gMCBhbmQgdmFsdWUudmFsdWUgPD0gMjU1IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZmllbGRfbmFtZSA9IGZpZWxkX25hbWUgLi4gc3RyaW5nLmNoYXIodmFsdWUudmFsdWUpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgdmFsdWUudmFsdWUgPT0gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGdldF90eXBlID0ge30NCiAgICAgICAgICAgIGdldF90eXBlWzFdID0ge30NCiAgICAgICAgICAgIGdldF90eXBlWzFdLmFkZHJlc3MgPSB0eXBlX3BvaW50ZXINCiAgICAgICAgICAgIGdldF90eXBlWzFdLmZsYWdzID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICAgICAgZmllbGRfdHlwZSA9IGdnLmdldFZhbHVlcyhnZXRfdHlwZSkNCiAgICAgICAgICAgIGZpZWxkX3R5cGUgPSBmaWVsZF90eXBlWzFdLnZhbHVlDQogICAgICAgICAgICBpZiAjdG9zdHJpbmcoZmllbGRfdHlwZSkgPiA4IHRoZW4NCiAgICAgICAgICAgICAgICBnZXRfdHlwZSA9IHt9DQogICAgICAgICAgICAgICAgZ2V0X3R5cGVbMV0gPSB7fQ0KICAgICAgICAgICAgICAgIGdldF90eXBlWzFdLmFkZHJlc3MgPSB0eXBlX3BvaW50ZXIgKyA0DQogICAgICAgICAgICAgICAgZ2V0X3R5cGVbMV0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgICAgICAgICAgZmllbGRfdHlwZSA9IGdnLmdldFZhbHVlcyhnZXRfdHlwZSkNCiAgICAgICAgICAgICAgICBmaWVsZF90eXBlID0gZmllbGRfdHlwZVsxXS52YWx1ZQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBpbDJjcHBGaWVsZHMubWV0aG9kX3R5cGVzW3Rvc3RyaW5nKGZpZWxkX3R5cGUpXSA9PSAiZmxvYXQiIHRoZW4NCiAgICAgICAgICAgICAgICB2YWx1ZV90eXBlID0gZ2cuVFlQRV9GTE9BVA0KICAgICAgICAgICAgZWxzZWlmIGlsMmNwcEZpZWxkcy5tZXRob2RfdHlwZXNbdG9zdHJpbmcoZmllbGRfdHlwZSldID09ICJkb3VibGUiIHRoZW4NCiAgICAgICAgICAgICAgICB2YWx1ZV90eXBlID0gZ2cuVFlQRV9ET1VCTEUNCiAgICAgICAgICAgIGVsc2VpZiAoZmllbGRfb2Zmc2V0ICUgMiB+PSAwKSB0aGVuDQogICAgICAgICAgICAgICAgdmFsdWVfdHlwZSA9IGdnLlRZUEVfQllURQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHZhbHVlX3R5cGUgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGlmIHZhbHVlX3R5cGUgYW5kIGZpZWxkX29mZnNldCBhbmQgc3RyaW5nLmZpbmQoZmllbGRfbmFtZSwgIltBLVphLXpdIikgdGhlbg0KICAgICAgICAgICAgICAgIHR5cGVfbWVudSA9ICI/IiAuLiBmaWVsZF90eXBlIC4uICI/Ig0KICAgICAgICAgICAgICAgIGlmIGlsMmNwcEZpZWxkcy5tZXRob2RfdHlwZXNbdG9zdHJpbmcoZmllbGRfdHlwZSldIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgdHlwZV9tZW51ID0gaWwyY3BwRmllbGRzLm1ldGhvZF90eXBlc1t0b3N0cmluZyhmaWVsZF90eXBlKV0NCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBmaWVsZHNbI2ZpZWxkcyArIDFdID0gew0KICAgICAgICAgICAgICAgICAgICBmaWVsZF9uYW1lID0gZmllbGRfbmFtZSwNCiAgICAgICAgICAgICAgICAgICAgZmllbGRfb2Zmc2V0ID0gaWwyY3BwRmllbGRzLmZfaGV4KGZpZWxkX29mZnNldCksDQogICAgICAgICAgICAgICAgICAgIGZpZWxkX3R5cGUgPSB2YWx1ZV90eXBlLA0KICAgICAgICAgICAgICAgICAgICB0eXBlX21lbnUgPSB0eXBlX21lbnUNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGdnLmxvYWRSZXN1bHRzKGluc3RhbmNlX2hlYWRlcnMpDQogICAgICAgIGdnLnNlYXJjaFBvaW50ZXIoMCkNCiAgICAgICAgcG9pbnRlcnNfdG9faW5zdGFuY2VzID0gZ2cuZ2V0UmVzdWx0cyhnZy5nZXRSZXN1bHRzQ291bnQoKSkNCiAgICAgICAgc29ydGVkX2luc3RhbmNlX2hlYWRlcnMgPSB7fQ0KICAgICAgICBhZGRlZF9oZWFkZXJzID0ge30NCiAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMocG9pbnRlcnNfdG9faW5zdGFuY2VzKSBkbw0KICAgICAgICAgICAgaWYgbm90IGFkZGVkX2hlYWRlcnNbdi52YWx1ZV0gdGhlbg0KICAgICAgICAgICAgICAgIGFkZGVkX2hlYWRlcnNbdi52YWx1ZV0gPSB2LnZhbHVlDQogICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHNvcnRlZF9pbnN0YW5jZV9oZWFkZXJzLCB2KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBnZy5sb2FkUmVzdWx0cyhzb3J0ZWRfaW5zdGFuY2VfaGVhZGVycykNCiAgICAgICAgc29ydGVkX2luc3RhbmNlX2hlYWRlcnMgPSBnZy5nZXRSZXN1bHRzKGdnLmdldFJlc3VsdHNDb3VudCgpKQ0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhmaWVsZHMpIGRvDQogICAgICAgICAgICBpZiBzYXZlZF9lZGl0X3RhYmxlLmZpZWxkX25hbWUgPT0gdi5maWVsZF9uYW1lIHRoZW4NCiAgICAgICAgICAgICAgICBlZGl0X29mZnNldCA9IHYuZmllbGRfb2Zmc2V0DQogICAgICAgICAgICAgICAgZWRpdF90eXBlID0gdi5maWVsZF90eXBlDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGxvYWRfZmllbGRfdmFsdWVzID0ge30NCiAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoc29ydGVkX2luc3RhbmNlX2hlYWRlcnMpIGRvDQogICAgICAgICAgICBsb2FkX2ZpZWxkX3ZhbHVlc1tpXSA9IHYNCiAgICAgICAgICAgIGxvYWRfZmllbGRfdmFsdWVzW2ldLmFkZHJlc3MgPSB2LnZhbHVlICsgZWRpdF9vZmZzZXQNCiAgICAgICAgICAgIGxvYWRfZmllbGRfdmFsdWVzW2ldLmZsYWdzID0gZWRpdF90eXBlDQogICAgICAgIGVuZA0KICAgICAgICBnZy5zZXRWYWx1ZXMobG9hZF9maWVsZF92YWx1ZXMpDQogICAgICAgIGdnLmFkZExpc3RJdGVtcyhsb2FkX2ZpZWxkX3ZhbHVlcykNCiAgICAgICAgaWYgc2F2ZWRfZWRpdF90YWJsZS5lZGl0X3R5cGUgPT0gImVkaXRfYWxsX3g0IiB0aGVuDQogICAgICAgICAgICBsb2NhbCBzYXZlX2xpc3RfYWxsID0gZ2cuZ2V0TGlzdEl0ZW1zKCkNCiAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHNhdmVfbGlzdF9hbGwpIGRvDQogICAgICAgICAgICAgICAgc2F2ZV9saXN0X2FsbFtpXS5hZGRyZXNzID0gc2F2ZV9saXN0X2FsbFtpXS5hZGRyZXNzICsgNA0KICAgICAgICAgICAgICAgIHNhdmVfbGlzdF9hbGxbaV0udmFsdWUgPSBzYXZlZF9lZGl0X3RhYmxlLmVkaXRfdmFsdWUgLi4gIlg0Ig0KICAgICAgICAgICAgICAgIHNhdmVfbGlzdF9hbGxbaV0uZnJlZXplID0gc2F2ZWRfZWRpdF90YWJsZS5mcmVlemUNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZ2cuc2V0VmFsdWVzKHNhdmVfbGlzdF9hbGwpDQogICAgICAgICAgICBnZy5hZGRMaXN0SXRlbXMoc2F2ZV9saXN0X2FsbCkNCiAgICAgICAgZWxzZWlmIHNhdmVkX2VkaXRfdGFibGUuZWRpdF90eXBlID09ICJlZGl0X2luZGV4ZXMiIHRoZW4NCiAgICAgICAgICAgIGxvY2FsIHNhdmVfbGlzdF9hbGwgPSBnZy5nZXRMaXN0SXRlbXMoKQ0KICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoc2F2ZWRfZWRpdF90YWJsZS5lZGl0X2luZGV4ZXMpIGRvDQogICAgICAgICAgICAgICAgc2F2ZV9saXN0X2FsbFt2XS52YWx1ZSA9IHNhdmVkX2VkaXRfdGFibGUuZWRpdF92YWx1ZQ0KICAgICAgICAgICAgICAgIHNhdmVfbGlzdF9hbGxbdl0uZnJlZXplID0gc2F2ZWRfZWRpdF90YWJsZS5mcmVlemUNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZ2cuc2V0VmFsdWVzKHNhdmVfbGlzdF9hbGwpDQogICAgICAgICAgICBnZy5hZGRMaXN0SXRlbXMoc2F2ZV9saXN0X2FsbCkNCiAgICAgICAgZWxzZWlmIHNhdmVkX2VkaXRfdGFibGUuZWRpdF90eXBlID09ICJlZGl0X2FsbF90aGF0X2VxdWFsIiB0aGVuDQogICAgICAgICAgICBsb2NhbCBzYXZlX2xpc3RfYWxsID0gZ2cuZ2V0TGlzdEl0ZW1zKCkNCiAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHNhdmVfbGlzdF9hbGwpIGRvDQogICAgICAgICAgICAgICAgaWYgdi52YWx1ZSA9PSBzYXZlZF9lZGl0X3RhYmxlLm11c3RfZXF1YWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICBzYXZlX2xpc3RfYWxsW2ldLnZhbHVlID0gc2F2ZWRfZWRpdF90YWJsZS5lZGl0X3ZhbHVlDQogICAgICAgICAgICAgICAgICAgIHNhdmVfbGlzdF9hbGxbaV0uZnJlZXplID0gc2F2ZWRfZWRpdF90YWJsZS5mcmVlemUNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZ2cuc2V0VmFsdWVzKHNhdmVfbGlzdF9hbGwpDQogICAgICAgICAgICBnZy5hZGRMaXN0SXRlbXMoc2F2ZV9saXN0X2FsbCkNCiAgICAgICAgZWxzZWlmIHNhdmVkX2VkaXRfdGFibGUuZWRpdF90eXBlID09ICJlZGl0X2FsbCIgdGhlbg0KICAgICAgICAgICAgbG9jYWwgc2F2ZV9saXN0X2FsbCA9IGdnLmdldExpc3RJdGVtcygpDQogICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhzYXZlX2xpc3RfYWxsKSBkbw0KICAgICAgICAgICAgICAgIHNhdmVfbGlzdF9hbGxbaV0udmFsdWUgPSBzYXZlZF9lZGl0X3RhYmxlLmVkaXRfdmFsdWUNCiAgICAgICAgICAgICAgICBzYXZlX2xpc3RfYWxsW2ldLmZyZWV6ZSA9IHNhdmVkX2VkaXRfdGFibGUuZnJlZXplDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGdnLnNldFZhbHVlcyhzYXZlX2xpc3RfYWxsKQ0KICAgICAgICAgICAgZ2cuYWRkTGlzdEl0ZW1zKHNhdmVfbGlzdF9hbGwpDQogICAgICAgIGVuZA0KICAgICAgICBmaWVsZHMgPSB7fQ0KICAgICAgICA6Om5vbmU6Og0KICAgICAgICBpZiBub25lX2ZvdW5kID09IHRydWUgdGhlbg0KICAgICAgICAgICAgZ2cuYWxlcnQoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIE5vIENsYXNzIEluc3RhbmNlcyBGb3VuZCDihLnvuI8iKQ0KICAgICAgICAgICAgbm9uZV9mb3VuZCA9IGZhbHNlDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIGdnLnRvYXN0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBFZGl0cyBNYWRlIOKEue+4jyIpDQogICAgICAgICAgICBpbDJjcHBGaWVsZHMuaG9tZSgpDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRmllbGRzLmRlbGV0ZUVkaXQoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgZGVsZXRlRWRpdCA9IGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgbWVudV9uYW1lcyA9IHt9DQogICAgICAgIGZvciBpLCB2IGluIHBhaXJzKGlsMmNwcEZpZWxkcy5zYXZlZEVkaXRzVGFibGUpIGRvDQogICAgICAgICAgICBtZW51X25hbWVzW2ldID0gdi5lZGl0X25hbWUNCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIG1lbnUgPSBnZy5tdWx0aUNob2ljZShtZW51X25hbWVzLCBuaWwsIHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBTZWxlY3QgRWRpdHMgVG8gRGVsZXRlIOKEuSIpDQogICAgICAgIGlmIG1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgIGxvY2FsIGNvbmZpcm0gPSBnZy5jaG9pY2UoeyLinIUgWWVzIGRlbGV0ZSB0aGUgZWRpdHMiLCAi4p2MIE5vIn0sIG5pbCwgc2NyaXB0X3RpdGxlDQogICAgICAgICAgICAgICAgLi4gIlxuXG7ihLnvuI8gQXJlIHlvdSBzdXJlPyDihLlcbkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhlc2UgZWRpdHMsICB0aGlzIGNhbiBub3QgYmUgdW5kb25lPyAiKQ0KICAgICAgICAgICAgaWYgY29uZmlybSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgIGlmIGNvbmZpcm0gPT0gMSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGZvciBrLCB2IGluIHBhaXJzKGlsMmNwcEZpZWxkcy5zYXZlZEVkaXRzVGFibGUpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICBmb3Iga2V5LCB2YWx1ZSBpbiBwYWlycyhtZW51KSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGsgPT0ga2V5IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWwyY3BwRmllbGRzLnNhdmVkRWRpdHNUYWJsZVtrXSA9ICJkZWxldGUiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIDo6Z2V0X25leHQ6Og0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBjb3VudCA9IDENCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgZG9fdW50aWwgPSAjaWwyY3BwRmllbGRzLnNhdmVkRWRpdHNUYWJsZSArIDENCiAgICAgICAgICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoaWwyY3BwRmllbGRzLnNhdmVkRWRpdHNUYWJsZSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ID0gY291bnQgKyAxDQogICAgICAgICAgICAgICAgICAgICAgICBpZiB0eXBlKHYpID09ICJzdHJpbmciIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5yZW1vdmUoaWwyY3BwRmllbGRzLnNhdmVkRWRpdHNUYWJsZSwgaSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBjb3VudCA8IGRvX3VudGlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gZ2V0X25leHQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlsMmNwcEZpZWxkcy5zYXZlQ29uZmlnKCkNCiAgICAgICAgICAgICAgICAgICAgZ2cudG9hc3QoIuKchSBFZGl0cyBEZWxldGVkIOKchSIpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglpbDJjcHBGaWVsZHMuZXhwb3J0RWRpdHMoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgZXhwb3J0RWRpdHMgPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIG1lbnVfbmFtZXMgPSB7fQ0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhpbDJjcHBGaWVsZHMuc2F2ZWRFZGl0c1RhYmxlKSBkbw0KICAgICAgICAgICAgbWVudV9uYW1lc1tpXSA9IHYuZWRpdF9uYW1lDQogICAgICAgIGVuZA0KICAgICAgICBsb2NhbCB0b19leHBvcnQgPSB7fQ0KICAgICAgICBsb2NhbCBtZW51ID0gZ2cubXVsdGlDaG9pY2UobWVudV9uYW1lcywgbmlsLCBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2VsZWN0IGVkaXRzIHRvIGV4cG9ydC4g4oS577iPIikNCiAgICAgICAgaWYgbWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgZm9yIGssIHYgaW4gcGFpcnMobWVudSkgZG8NCiAgICAgICAgICAgICAgICB0b19leHBvcnRbI3RvX2V4cG9ydCArIDFdID0gaWwyY3BwRmllbGRzLnNhdmVkRWRpdHNUYWJsZVtrXQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBsb2NhbCBmaWxlID0gaW8ub3BlbihpbDJjcHBGaWVsZHMuc2F2ZVBhdGggLi4gIi8iIC4uIGdnLmdldFRhcmdldFBhY2thZ2UoKSAuLiAiXyIgLi4gb3MuZGF0ZSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4gIl9leHBvcnQuanNvbiIsICJ3KyIpDQogICAgICAgICAgICBpZiBmaWxlID09IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgZmlsZSA9IGlvLm9wZW4oaWwyY3BwRmllbGRzLnNhdmVQYXRoIC4uICIvIiAuLiBnZy5nZXRUYXJnZXRQYWNrYWdlKCkgLi4gIl8iIC4uIG9zLnRpbWUoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLiAiX2V4cG9ydC5qc29uIiwgIncrIikNCiAgICAgICAgICAgICAgICBnZy5hbGVydChzY3JpcHRfdGl0bGUgLi4gIlxuXG7inIUgRWRpdHMgRXhwb3J0ZWQg4pyFXG5cbiIgLi4gaWwyY3BwRmllbGRzLnNhdmVQYXRoIC4uICIvIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLiBnZy5nZXRUYXJnZXRQYWNrYWdlKCkgLi4gIl8iIC4uIG9zLnRpbWUoKSAuLiAiX2V4cG9ydC5qc29uIikNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBnZy5hbGVydChzY3JpcHRfdGl0bGUgLi4gIlxuXG7inIUgRWRpdHMgRXhwb3J0ZWQg4pyFXG5cbiIgLi4gaWwyY3BwRmllbGRzLnNhdmVQYXRoIC4uICIvIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLiBnZy5nZXRUYXJnZXRQYWNrYWdlKCkgLi4gIl8iIC4uIG9zLmRhdGUoKSAuLiAiX2V4cG9ydC5qc29uIikNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZmlsZTp3cml0ZShqc29uLmVuY29kZSh0b19leHBvcnQpKQ0KICAgICAgICAgICAgZmlsZTpjbG9zZSgpDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRmllbGRzLmltcG9ydEVkaXRzKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIGltcG9ydEVkaXRzID0gZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBtZW51ID0gZ2cucHJvbXB0KHtzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2VsZWN0IEpTT04g4oS577iPIn0sIHsNCiAgICAgICAgICAgIFsxXSA9IGlsMmNwcEZpZWxkcy5zYXZlUGF0aCAuLiAiLyINCiAgICAgICAgfSwgew0KICAgICAgICAgICAgWzFdID0gImZpbGUiDQogICAgICAgIH0pDQogICAgICAgIGlmIG1lbnUgPT0gbmlsIHRoZW4NCiAgICAgICAgZW5kDQogICAgICAgIGlmIG1lbnUgfj0gbmlsIGFuZCBzdHJpbmcuZmluZChtZW51WzFdLCAiJS5qc29uIikgdGhlbg0KICAgICAgICAgICAgbG9jYWwgZmlsZSA9IGFzc2VydChpby5vcGVuKG1lbnVbMV0sICJyIikpDQogICAgICAgICAgICBsb2NhbCBjb250ZW50ID0gZmlsZTpyZWFkKCIqYSIpDQogICAgICAgICAgICBmaWxlOmNsb3NlKCkNCiAgICAgICAgICAgIGxvY2FsIGltcG9ydF90YWJsZSA9IGpzb24uZGVjb2RlKGNvbnRlbnQpDQogICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhpbXBvcnRfdGFibGUpIGRvDQogICAgICAgICAgICAgICAgaWwyY3BwRmllbGRzLnNhdmVkRWRpdHNUYWJsZVsjaWwyY3BwRmllbGRzLnNhdmVkRWRpdHNUYWJsZSArIDFdID0gdg0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpbDJjcHBGaWVsZHMuc2F2ZUNvbmZpZygpDQogICAgICAgICAgICBnZy50b2FzdCgi4pyFIEVkaXRzIEltcG9ydGVkIOKchSIpDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRmllbGRzLmFib3V0KCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIGFib3V0ID0gZnVuY3Rpb24oKQ0KICAgICAgICBnZy5hbGVydChzY3JpcHRfdGl0bGUgLi4gW1sNCg0KDQrihLnvuI8gQWJvdXQgU2NyaXB0IOKEue+4jw0KDQpUaGlzIHNjcmlwdCBhbGxvd3MgdXNlcnMgdG8gZWRpdCBmaWVsZCBvZmZzZXQgdmFsdWVzIGluIGluc3RhbmNlcyBvZiBJbDJDcHAgY2xhc3NlcyBieSBlbnRlcmluZyBhIGNsYXNzIG5hbWUsIHRoaXMgbWVhbnMgbm8gb2Zmc2V0cyBhcmUgbmVlZGVkLiBBcyBsb25nIGFzIGNsYXNzIGFuZCBmaWVsZCBuYW1lcyBhcmUgbm90IGNoYW5nZWQgaW4gdGhlIGdhbWUgdGhlIGVkaXRzIHdpbGwgY29udGludWUgd29ya2luZyBldmVuIGFmdGVyIGEgZ2FtZSB1cGRhdGVzLg0KDQrinpUgQ3JlYXRlIEVkaXQgKEVudGVyIENsYXNzIE5hbWUpDQpIZXJlIHlvdSB3aWxsIGVudGVyIGEga25vd24gY2xhc3MgbmFtZSB0byBzZWFyY2ggZm9yIGluc3RhbmNlcyBhbmQgY3JlYXRlIGFuIGVkaXQuIEVkaXRzIHlvdSBjcmVhdGUgZm9yIGEgZ2FtZSBhcmUgYWRkZWQgdG8gdGhlIG1haW4gbWVudSBhYm92ZSB0aGlzIG1lbnUgaXRlbS4NCg0K4p6VIENyZWF0ZSBFZGl0IChTZWFyY2ggSWwyQ3BwRHVtcGVyIER1bXApDQpIZXJlIHlvdSBjYW4gbG9hZCBhIElsMkNwcER1bXBlciBkdW1wLmNzIGFuZCBzZWFyY2ggZm9yIGtleXdvcmRzIHRvIGZpbmQgY2xhc3MgbmFtZXMsIHNlYXJjaCBmb3IgaW5zdGFuY2VzIGFuZCBjcmVhdGUgYW4gZWRpdC4gRWRpdHMgeW91IGNyZWF0ZSBmb3IgYSBnYW1lIGFyZSBhZGRlZCB0byB0aGUgbWFpbiBtZW51IGFib3ZlIHRoaXMgbWVudSBpdGVtLg0KDQripLTvuI8gSW1wb3J0IEVkaXRzDQpIZXJlIHlvdSBjYW4gaW1wb3J0IGVkaXRzIGNyZWF0ZWQgYW5kIGV4cG9ydGVkIGJ5IG90aGVyIHVzZXJzIG9mIHRoaXMgc2NyaXB0Lg0KIA0K4qS177iPIEV4cG9ydCBFZGl0cw0KSGVyZSB5b3UgY2FuIGV4cG9ydCBlZGl0cyB5b3UgaGF2ZSBjcmVhdGVkIHRvIHNoYXJlIHRoZW0gd2l0aCBvdGhlciB1c2VycyBvZiB0aGUgc2NyaXB0Lg0KDQrwn5eR77iPIERlbGV0ZSBFZGl0DQpIZXJlIHlvdSBjYW4gZGVsZXRlIGVkaXRzIGZvciBhIGdhbWUgYW5kIHJlbW92ZSB0aGVtIGZyb20gdGhlIG1haW4gbWVudS4NCl1dKQ0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRmllbGRzLmhvbWUoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgaG9tZSA9IGZ1bmN0aW9uKHBhc3NlZF9kYXRhKQ0KICAgICAgICBwbHVnaW5NYW5hZ2VyLnJldHVybkhvbWUgPSB0cnVlDQogICAgICAgIHBsdWdpbk1hbmFnZXIucmV0dXJuUGx1Z2luVGFibGUgPSAiaWwyY3BwRmllbGRzIg0KICAgICAgICBpZiBwYXNzZWRfZGF0YSB0aGVuDQogICAgICAgICAgICBpbDJjcHBGaWVsZHMubG9hZEZpZWxkcyhwYXNzZWRfZGF0YSkNCiAgICAgICAgZWxzZWlmIGlsMmNwcEZpZWxkcy5zY2FubmluZyA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgIGlsMmNwcEZpZWxkcy5zY2FuSG9tZSgpDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIGlmIG1ha2luZ19lZGl0ID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgIGxvY2FsIG1lbnUgPSBnZy5jaG9pY2UoeyLinIUgU2F2ZSBFZGl0IiwgIvCfl5HvuI8gRGlzY2FyZCBFZGl0In0sIG5pbCwNCiAgICAgICAgICAgICAgICAgICAgc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIFNhdmUgb3IgRGlzY2FyZCBlZGl0LiDihLnvuI8iKQ0KICAgICAgICAgICAgICAgIGlmIG1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgbWVudSA9PSAxIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGlsMmNwcEZpZWxkcy5zYXZlQ29uZmlnKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2luZ19lZGl0ID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIGdnLnRvYXN0KCLinIUgRWRpdCBzYXZlZCDinIUiKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgbWVudSA9PSAyIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLnJlbW92ZShpbDJjcHBGaWVsZHMuc2F2ZWRFZGl0c1RhYmxlLCAjaWwyY3BwRmllbGRzLnNhdmVkRWRpdHNUYWJsZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2luZ19lZGl0ID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIGdnLnRvYXN0KCLwn5eR77iPIEVkaXQgZGlzY2FyZGVkIPCfl5HvuI8iKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWwyY3BwRmllbGRzLmhvbWUoKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiAjZ2cuZ2V0U2VsZWN0ZWRMaXN0SXRlbXMoKSA+IDAgdGhlbg0KICAgICAgICAgICAgICAgIGlsMmNwcEZpZWxkcy5lZGl0RmllbGRzKCkNCiAgICAgICAgICAgIGVsc2VpZiBmaWVsZHMgYW5kICNmaWVsZHMgPiAwIHRoZW4NCiAgICAgICAgICAgICAgICBsb2NhbCBtZW51ID0gZ2cuY2hvaWNlKHsiWWVzIiwgIk5vIn0sIG5pbCwgc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIENvbnRpbnVlIGVkaXRpbmcgZmllbGRzPyDihLnvuI8iKQ0KICAgICAgICAgICAgICAgIGlmIG1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgbWVudSA9PSAxIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGlsMmNwcEZpZWxkcy5sb2FkRmllbGRzKG5pbCwgdHJ1ZSkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIG1lbnUgPT0gMiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHMgPSB7fQ0KICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3Nfc3RyaW5nX3NlYXJjaCA9IG5pbA0KICAgICAgICAgICAgICAgICAgICAgICAgaWwyY3BwRmllbGRzLmhvbWUoKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBsb2NhbCBtZW51X2l0ZW1zID0ge30NCiAgICAgICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhpbDJjcHBGaWVsZHMuc2F2ZWRFZGl0c1RhYmxlKSBkbw0KICAgICAgICAgICAgICAgICAgICBtZW51X2l0ZW1zW2ldID0gIuKWtu+4jyAiIC4uIHYuZWRpdF9uYW1lDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgbWVudV9pdGVtc1sjbWVudV9pdGVtcyArIDFdID0gIuKelSBDcmVhdGUgRWRpdCAoRW50ZXIgQ2xhc3MgTmFtZSkiDQogICAgICAgICAgICAgICAgbWVudV9pdGVtc1sjbWVudV9pdGVtcyArIDFdID0gIuKelSBDcmVhdGUgRWRpdCAoU2VhcmNoIElsMkNwcER1bXBlciBEdW1wKSINCiAgICAgICAgICAgICAgICBtZW51X2l0ZW1zWyNtZW51X2l0ZW1zICsgMV0gPSAi8J+UjSBDbGFzcyBTY2FubmVyIg0KICAgICAgICAgICAgICAgIG1lbnVfaXRlbXNbI21lbnVfaXRlbXMgKyAxXSA9ICLipLTvuI8gSW1wb3J0IEVkaXRzIg0KICAgICAgICAgICAgICAgIG1lbnVfaXRlbXNbI21lbnVfaXRlbXMgKyAxXSA9ICLipLXvuI8gRXhwb3J0IEVkaXRzIg0KICAgICAgICAgICAgICAgIG1lbnVfaXRlbXNbI21lbnVfaXRlbXMgKyAxXSA9ICLwn5eR77iPIERlbGV0ZSBFZGl0cyINCiAgICAgICAgICAgICAgICBtZW51X2l0ZW1zWyNtZW51X2l0ZW1zICsgMV0gPSAi4oS577iPIEFib3V0IFNjcmlwdCINCiAgICAgICAgICAgICAgICBtZW51X2l0ZW1zWyNtZW51X2l0ZW1zICsgMV0gPSAi4p2MIEV4aXQgU2NyaXB0Ig0KICAgICAgICAgICAgICAgIGxvY2FsIG1lbnUgPSBnZy5jaG9pY2UobWVudV9pdGVtcywgbmlsLCBzY3JpcHRfdGl0bGUpDQogICAgICAgICAgICAgICAgaWYgbWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBtZW51IDwgI21lbnVfaXRlbXMgLSA3IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGlsMmNwcEZpZWxkcy5kb1NhdmVkRWRpdChpbDJjcHBGaWVsZHMuc2F2ZWRFZGl0c1RhYmxlW21lbnVdKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgbWVudSA9PSAjbWVudV9pdGVtcyAtIDcgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgaWwyY3BwRmllbGRzLmxvYWRGaWVsZHMoKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgbWVudSA9PSAjbWVudV9pdGVtcyAtIDYgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5jYWxsUGx1Z2luKHBsdWdpbnNEYXRhUGF0aCAuLiAicGx1Z2luX2JjX2R1bXBfc2VhcmNoLmx1YSIpDQogICAgICAgICAgICAgICAgICAgICAgICBpbDJjcHBGaWVsZHMuaG9tZSgpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBtZW51ID09ICNtZW51X2l0ZW1zIC0gNSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpbDJjcHBGaWVsZHMuc2NhbkhvbWUoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWwyY3BwRmllbGRzLnNjYW5uaW5nID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgLS0gaWwyY3BwRmllbGRzLmhvbWUoKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCg0KICAgICAgICAgICAgICAgICAgICBpZiBtZW51ID09ICNtZW51X2l0ZW1zIC0gNCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpbDJjcHBGaWVsZHMuaW1wb3J0RWRpdHMoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWwyY3BwRmllbGRzLmhvbWUoKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgbWVudSA9PSAjbWVudV9pdGVtcyAtIDMgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgaWwyY3BwRmllbGRzLmV4cG9ydEVkaXRzKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlsMmNwcEZpZWxkcy5ob21lKCkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIG1lbnUgPT0gI21lbnVfaXRlbXMgLSAyIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGlsMmNwcEZpZWxkcy5kZWxldGVFZGl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlsMmNwcEZpZWxkcy5ob21lKCkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIG1lbnUgPT0gI21lbnVfaXRlbXMgLSAxIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGlsMmNwcEZpZWxkcy5hYm91dCgpDQogICAgICAgICAgICAgICAgICAgICAgICBpbDJjcHBGaWVsZHMuaG9tZSgpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBtZW51ID09ICNtZW51X2l0ZW1zIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIucmV0dXJuSG9tZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICBnZXRfbWV0aG9kX3NlYXJjaGVzID0ge3siYm9vbCIsICJTeXN0ZW0uSUNvbnZlcnRpYmxlLlRvQm9vbGVhbiJ9LCB7ImNoYXIiLCAiU3lzdGVtLklDb252ZXJ0aWJsZS5Ub0NoYXIifSwNCiAgICAgICAgeyJzYnl0ZSIsICJTeXN0ZW0uSUNvbnZlcnRpYmxlLlRvU0J5dGUifSwgeyJieXRlIiwgIlN5c3RlbS5JQ29udmVydGlibGUuVG9CeXRlIn0sDQogICAgICAgIHsic2hvcnQiLCAiU3lzdGVtLklDb252ZXJ0aWJsZS5Ub0ludDE2In0sIHsidXNob3J0IiwgIlN5c3RlbS5JQ29udmVydGlibGUuVG9VSW50MTYifSwNCiAgICAgICAgeyJpbnQiLCAiU3lzdGVtLklDb252ZXJ0aWJsZS5Ub0ludDMyIn0sIHsidWludCIsICJTeXN0ZW0uSUNvbnZlcnRpYmxlLlRvVUludDMyIn0sDQogICAgICAgIHsibG9uZyIsICJTeXN0ZW0uSUNvbnZlcnRpYmxlLlRvSW50NjQifSwgeyJ1bG9uZyIsICJTeXN0ZW0uSUNvbnZlcnRpYmxlLlRvVUludDY0In0sDQogICAgICAgIHsiZmxvYXQiLCAiU3lzdGVtLklDb252ZXJ0aWJsZS5Ub1NpbmdsZSJ9LCB7ImRvdWJsZSIsICJTeXN0ZW0uSUNvbnZlcnRpYmxlLlRvRG91YmxlIn0sDQogICAgICAgIHsiRGVjaW1hbCIsICJTeXN0ZW0uSUNvbnZlcnRpYmxlLlRvRGVjaW1hbCJ9LCB7InZvaWQiLCAiR2V0T2JqZWN0RGF0YSJ9fSwNCiAgICBtZXRob2RfdHlwZXMgPSB7fSwNCiAgICBnZ19mbGFncyA9IHsNCiAgICAgICAgWzFdID0gIlRZUEVfQllURSIsDQogICAgICAgIFs2NF0gPSAiVFlQRV9ET1VCTEUiLA0KICAgICAgICBbNF0gPSAiVFlQRV9EV09SRCIsDQogICAgICAgIFsxNl0gPSAiVFlQRV9GTE9BVCIsDQogICAgICAgIFszMl0gPSAiVFlQRV9RV09SRCIsDQogICAgICAgIFsyXSA9ICJUWVBFX1dPUkQiLA0KICAgICAgICBbOF0gPSAiVFlQRV9YT1IiDQogICAgfSwNCiAgICBhcmNoID0gZ2cuZ2V0VGFyZ2V0SW5mbygpLA0KICAgIGdnX2hleCA9IGZ1bmN0aW9uKG4pDQogICAgICAgIGlmIGlsMmNwcEZpZWxkcy5hcmNoLng2NCB0aGVuDQogICAgICAgICAgICByZXR1cm4gIjB4IiAuLiBzdHJpbmcuZm9ybWF0KCclMTZ4Jywgbik6c3ViKC0xMCkNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgcmV0dXJuICIweCIgLi4gc3RyaW5nLmZvcm1hdCgnJTA4eCcsIG4pOnN1YigtOCkNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIG90aGVyX3JhbmdlcyA9IHt9LA0KICAgIGZpZWxkT2Zmc2V0cyA9IHt9LA0KICAgIG9mZnNldHNBUEkgPSB7DQogICAgICAgIFsyNF0gPSB7DQogICAgICAgICAgICBmaWVsZE9mZnNldCA9IHsNCiAgICAgICAgICAgICAgICBBUk04ID0gMHgxOCwNCiAgICAgICAgICAgICAgICBBUk03ID0gMHhDDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgZmllbGRUeXBlID0gew0KICAgICAgICAgICAgICAgIEFSTTggPSAweDgsDQogICAgICAgICAgICAgICAgQVJNNyA9IDB4NA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGZpZWxkQ2xhc3NPZmZzZXQgPSB7DQogICAgICAgICAgICAgICAgQVJNOCA9IDB4MTAsDQogICAgICAgICAgICAgICAgQVJNNyA9IDB4OA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGZpZWxkUG9pbnRlciA9IHsNCiAgICAgICAgICAgICAgICBBUk04ID0gMHg4MCwNCiAgICAgICAgICAgICAgICBBUk03ID0gMHg0MA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGZpZWxkTmV4dCA9IHsNCiAgICAgICAgICAgICAgICBBUk04ID0gMHgyMCwNCiAgICAgICAgICAgICAgICBBUk03ID0gMHgxNA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGZpZWxkQ291bnQgPSB7DQogICAgICAgICAgICAgICAgQVJNOCA9IDB4MTFDLA0KICAgICAgICAgICAgICAgIEFSTTcgPSAweEE4DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIFsyN10gPSB7DQogICAgICAgICAgICBmaWVsZE9mZnNldCA9IHsNCiAgICAgICAgICAgICAgICBBUk04ID0gMHgxOCwNCiAgICAgICAgICAgICAgICBBUk03ID0gMHhDDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgZmllbGRUeXBlID0gew0KICAgICAgICAgICAgICAgIEFSTTggPSAweDgsDQogICAgICAgICAgICAgICAgQVJNNyA9IDB4NA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGZpZWxkQ2xhc3NPZmZzZXQgPSB7DQogICAgICAgICAgICAgICAgQVJNOCA9IDB4MTAsDQogICAgICAgICAgICAgICAgQVJNNyA9IDB4OA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGZpZWxkUG9pbnRlciA9IHsNCiAgICAgICAgICAgICAgICBBUk04ID0gMHg4MCwNCiAgICAgICAgICAgICAgICBBUk03ID0gMHg0MA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGZpZWxkTmV4dCA9IHsNCiAgICAgICAgICAgICAgICBBUk04ID0gMHgyMCwNCiAgICAgICAgICAgICAgICBBUk03ID0gMHgxNA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGZpZWxkQ291bnQgPSB7DQogICAgICAgICAgICAgICAgQVJNOCA9IDB4MTIwLA0KICAgICAgICAgICAgICAgIEFSTTcgPSAweEE4DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIFsyOV0gPSB7DQogICAgICAgICAgICBmaWVsZE9mZnNldCA9IHsNCiAgICAgICAgICAgICAgICBBUk04ID0gMHgxOCwNCiAgICAgICAgICAgICAgICBBUk03ID0gMHhDDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgZmllbGRUeXBlID0gew0KICAgICAgICAgICAgICAgIEFSTTggPSAweDgsDQogICAgICAgICAgICAgICAgQVJNNyA9IDB4NA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGZpZWxkQ2xhc3NPZmZzZXQgPSB7DQogICAgICAgICAgICAgICAgQVJNOCA9IDB4MTAsDQogICAgICAgICAgICAgICAgQVJNNyA9IDB4OA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGZpZWxkUG9pbnRlciA9IHsNCiAgICAgICAgICAgICAgICBBUk04ID0gMHg4MCwNCiAgICAgICAgICAgICAgICBBUk03ID0gMHg0MA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGZpZWxkTmV4dCA9IHsNCiAgICAgICAgICAgICAgICBBUk04ID0gMHgyMCwNCiAgICAgICAgICAgICAgICBBUk03ID0gMHgxNA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGZpZWxkQ291bnQgPSB7DQogICAgICAgICAgICAgICAgQVJNOCA9IDB4MTIwLA0KICAgICAgICAgICAgICAgIEFSTTcgPSAweEE4DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9LA0KICAgIHVuaXR5VmVyc2lvbnMgPSB7ew0KICAgICAgICBzZWFyY2ggPSAiOiIgLi4gc3RyaW5nLmNoYXIoMCkgLi4gIjIwMjIuIiwNCiAgICAgICAgdmVyc2lvbiA9IDI5DQogICAgfSwgew0KICAgICAgICBzZWFyY2ggPSAiOiIgLi4gc3RyaW5nLmNoYXIoMCkgLi4gIjIwMjEuMSIsDQogICAgICAgIHZlcnNpb24gPSAyNw0KICAgIH0sIHsNCiAgICAgICAgc2VhcmNoID0gIjoiIC4uIHN0cmluZy5jaGFyKDApIC4uICIyMDIwLjIiLA0KICAgICAgICB2ZXJzaW9uID0gMjcNCiAgICB9LCB7DQogICAgICAgIHNlYXJjaCA9ICI6IiAuLiBzdHJpbmcuY2hhcigwKSAuLiAiMjAyMC4xIiwNCiAgICAgICAgdmVyc2lvbiA9IDI0DQogICAgfSwgew0KICAgICAgICBzZWFyY2ggPSAiOiIgLi4gc3RyaW5nLmNoYXIoMCkgLi4gIjIwMTkuIiwNCiAgICAgICAgdmVyc2lvbiA9IDI0DQogICAgfSwgew0KICAgICAgICBzZWFyY2ggPSAiOiIgLi4gc3RyaW5nLmNoYXIoMCkgLi4gIjIwMTguIiwNCiAgICAgICAgdmVyc2lvbiA9IDI0DQogICAgfSwgew0KICAgICAgICBzZWFyY2ggPSAiOiIgLi4gc3RyaW5nLmNoYXIoMCkgLi4gIjIwMTcuIiwNCiAgICAgICAgdmVyc2lvbiA9IDI0DQogICAgfX0sDQogICAgc2V0dXAgPSBmdW5jdGlvbigpDQogICAgICAgIGlmIGlsMmNwcEZpZWxkcy5hcmNoLng2NCB0aGVuDQogICAgICAgICAgICBmbGFnX3R5cGUgPSBnZy5UWVBFX1FXT1JEDQogICAgICAgICAgICBBUk0gPSAiQVJNOCINCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgZmxhZ190eXBlID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICAgICAgQVJNID0gIkFSTTciDQogICAgICAgIGVuZA0KICAgICAgICBnZy5zZXRSYW5nZXMoZ2cuUkVHSU9OX0NfQUxMT0MpDQogICAgICAgIGZvciBpLCB2IGluIGlwYWlycyhpbDJjcHBGaWVsZHMudW5pdHlWZXJzaW9ucykgZG8NCiAgICAgICAgICAgIGdnLmNsZWFyUmVzdWx0cygpDQogICAgICAgICAgICBnZy5zZWFyY2hOdW1iZXIodi5zZWFyY2gpDQogICAgICAgICAgICBsb2NhbCBjaGVja192ZXJzaW9uID0gZ2cuZ2V0UmVzdWx0cygxKQ0KICAgICAgICAgICAgaWYgI2NoZWNrX3ZlcnNpb24gPiAwIHRoZW4NCiAgICAgICAgICAgICAgICBsb2NhbCBjaGVja19mID0ge30NCiAgICAgICAgICAgICAgICBmb3IgaW5kZXggPSAxLCAxMiBkbw0KICAgICAgICAgICAgICAgICAgICBjaGVja19mW2luZGV4XSA9IHt9DQogICAgICAgICAgICAgICAgICAgIGNoZWNrX2ZbaW5kZXhdLmFkZHJlc3MgPSBjaGVja192ZXJzaW9uWzFdLmFkZHJlc3MgKyBpbmRleA0KICAgICAgICAgICAgICAgICAgICBjaGVja19mW2luZGV4XS5mbGFncyA9IGdnLlRZUEVfQllURQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGNoZWNrX2YgPSBnZy5nZXRWYWx1ZXMoY2hlY2tfZikNCiAgICAgICAgICAgICAgICBmb3IgaW5kZXgsIHZhbHVlIGluIGlwYWlycyhjaGVja19mKSBkbw0KICAgICAgICAgICAgICAgICAgICBpZiB2YWx1ZS52YWx1ZSA9PSAxMDIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIGZvdW5kID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpbDJjcHBGaWVsZHMuZmllbGRPZmZzZXRzLmZpZWxkT2Zmc2V0ID0gaWwyY3BwRmllbGRzLm9mZnNldHNBUElbdi52ZXJzaW9uXS5maWVsZE9mZnNldFtBUk1dDQogICAgICAgICAgICAgICAgICAgIGlsMmNwcEZpZWxkcy5maWVsZE9mZnNldHMuZmllbGRUeXBlID0gaWwyY3BwRmllbGRzLm9mZnNldHNBUElbdi52ZXJzaW9uXS5maWVsZFR5cGVbQVJNXQ0KICAgICAgICAgICAgICAgICAgICBpbDJjcHBGaWVsZHMuZmllbGRPZmZzZXRzLmZpZWxkQ2xhc3NPZmZzZXQgPQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWwyY3BwRmllbGRzLm9mZnNldHNBUElbdi52ZXJzaW9uXS5maWVsZENsYXNzT2Zmc2V0W0FSTV0NCiAgICAgICAgICAgICAgICAgICAgaWwyY3BwRmllbGRzLmZpZWxkT2Zmc2V0cy5maWVsZFBvaW50ZXIgPSBpbDJjcHBGaWVsZHMub2Zmc2V0c0FQSVt2LnZlcnNpb25dLmZpZWxkUG9pbnRlcltBUk1dDQogICAgICAgICAgICAgICAgICAgIGlsMmNwcEZpZWxkcy5maWVsZE9mZnNldHMuZmllbGROZXh0ID0gaWwyY3BwRmllbGRzLm9mZnNldHNBUElbdi52ZXJzaW9uXS5maWVsZE5leHRbQVJNXQ0KICAgICAgICAgICAgICAgICAgICBpbDJjcHBGaWVsZHMuZmllbGRPZmZzZXRzLmZpZWxkQ291bnQgPSBpbDJjcHBGaWVsZHMub2Zmc2V0c0FQSVt2LnZlcnNpb25dLmZpZWxkQ291bnRbQVJNXQ0KICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBpZiBub3QgaWwyY3BwRmllbGRzLmZpZWxkT2Zmc2V0cy5maWVsZE9mZnNldCB0aGVuDQogICAgICAgICAgICBpbDJjcHBGaWVsZHMuZmllbGRPZmZzZXRzLmZpZWxkT2Zmc2V0ID0gaWwyY3BwRmllbGRzLm9mZnNldHNBUElbMjRdLmZpZWxkT2Zmc2V0W0FSTV0NCiAgICAgICAgICAgIGlsMmNwcEZpZWxkcy5maWVsZE9mZnNldHMuZmllbGRUeXBlID0gaWwyY3BwRmllbGRzLm9mZnNldHNBUElbMjRdLmZpZWxkVHlwZVtBUk1dDQogICAgICAgICAgICBpbDJjcHBGaWVsZHMuZmllbGRPZmZzZXRzLmZpZWxkQ2xhc3NPZmZzZXQgPSBpbDJjcHBGaWVsZHMub2Zmc2V0c0FQSVsyNF0uZmllbGRDbGFzc09mZnNldFtBUk1dDQogICAgICAgICAgICBpbDJjcHBGaWVsZHMuZmllbGRPZmZzZXRzLmZpZWxkUG9pbnRlciA9IGlsMmNwcEZpZWxkcy5vZmZzZXRzQVBJWzI0XS5maWVsZFBvaW50ZXJbQVJNXQ0KICAgICAgICAgICAgaWwyY3BwRmllbGRzLmZpZWxkT2Zmc2V0cy5maWVsZE5leHQgPSBpbDJjcHBGaWVsZHMub2Zmc2V0c0FQSVsyNF0uZmllbGROZXh0W0FSTV0NCiAgICAgICAgICAgIGlsMmNwcEZpZWxkcy5maWVsZE9mZnNldHMuZmllbGRDb3VudCA9IGlsMmNwcEZpZWxkcy5vZmZzZXRzQVBJWzI0XS5maWVsZENvdW50W0FSTV0NCiAgICAgICAgZW5kDQogICAgICAgIGZvciBpLCB2IGluIHBhaXJzKGdnLmdldFJhbmdlc0xpc3QoKSkgZG8NCiAgICAgICAgICAgIGlmIHYuc3RhdGUgPT0gIk8iIHRoZW4NCiAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoaWwyY3BwRmllbGRzLm90aGVyX3Jhbmdlcywgew0KICAgICAgICAgICAgICAgICAgICBzdGFydCA9IHZbInN0YXJ0Il0sDQogICAgICAgICAgICAgICAgICAgIFsiZW5kIl0gPSB2WyJlbmQiXQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIGNoZWNrX2lmX290aGVyID0gZnVuY3Rpb24oYWRkcmVzcykNCiAgICAgICAgbG9jYWwgZm91bmQgPSBmYWxzZQ0KICAgICAgICBpZiBhZGRyZXNzIH49ICIweDAwMDAwMDAwIiB0aGVuDQogICAgICAgICAgICBmb3IgaSwgdiBpbiBpcGFpcnMoaWwyY3BwRmllbGRzLm90aGVyX3JhbmdlcykgZG8NCiAgICAgICAgICAgICAgICBpZiB0b251bWJlcihhZGRyZXNzKSA+PSB0b251bWJlcih2WyJzdGFydCJdKSBhbmQgdG9udW1iZXIoYWRkcmVzcykgPD0gdG9udW1iZXIodlsiZW5kIl0pIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIHJldHVybiBmb3VuZA0KICAgIGVuZCwNCiAgICBjbGFzc19uYW1lcyA9IHt9LA0KICAgIG5hbWVzcGFjZV9uYW1lcyA9IHt9LA0KICAgIGltYWdlX25hbWVzID0ge30sDQogICAgZmlyc3RQb2ludGVyU2VhcmNoID0ge30sDQogICAgc2NhbiA9IGZ1bmN0aW9uKCkNCiAgICAgICAgOjptZW51MTo6DQogICAgICAgIGxvY2FsIG1lbnUgPSBnZy5jaG9pY2UoeyJGaW5kIEFsbCBDbGFzc2VzIiwgIk9ubHkgRmluZCBDbGFzc2VzIFdpdGggTm8gTmFtZXNwYWNlIn0sIG5pbCwgc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIENsYXNzIFNjYW5uZXIg4oS577iPIikNCiAgICAgICAgaWYgbWVudSA9PSBuaWwgdGhlbg0KICAgICAgICAgICAgZ290byBtZW51MQ0KICAgICAgICBlbmQNCiAgICAgICAgaWYgbm90IGlsMmNwcEZpZWxkcy5maWVsZE9mZnNldHMuZmllbGRPZmZzZXQgdGhlbg0KICAgICAgICAgICAgaWwyY3BwRmllbGRzLnNldHVwKCkNCiAgICAgICAgZW5kDQogICAgICAgIGdnLmNsZWFyUmVzdWx0cygpDQogICAgICAgIGdnLnNldFJhbmdlcyhnZy5SRUdJT05fQ19BTExPQykNCiAgICAgICAgbG9jYWwgc3RhcnRpbmdTZWFyY2hlcyA9IHsNCiAgICAgICAgICAgIFsiQVJNNyJdID0gew0KICAgICAgICAgICAgICAgIFsxXSA9IHJhbmdlX3N0YXJ0IC4uICJ+IiAuLiByYW5nZV9lbmQgLi4gIjsiIC4uIHJhbmdlX3N0YXJ0IC0gMjAwIC4uICJ+IiAuLiByYW5nZV9lbmQgLi4gIjo6NSIsDQogICAgICAgICAgICAgICAgWzJdID0gcmFuZ2Vfc3RhcnQgLi4gIn4iIC4uIHJhbmdlX2VuZCAuLiAiOyIgLi4gcmFuZ2Vfc3RhcnQgLSAyMDAgLi4gIn4iIC4uIHJhbmdlX3N0YXJ0ICsgMTAgLi4gIjo6NSINCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBbIkFSTTgiXSA9IHsNCiAgICAgICAgICAgICAgICBbMV0gPSByYW5nZV9zdGFydCAuLiAifiIgLi4gcmFuZ2VfZW5kIC4uICI7IiAuLiByYW5nZV9zdGFydCAtIDIwMCAuLiAifiIgLi4gcmFuZ2VfZW5kIC4uICI6OjEzIiwNCiAgICAgICAgICAgICAgICBbMl0gPSByYW5nZV9zdGFydCAuLiAifiIgLi4gcmFuZ2VfZW5kIC4uICI7IiAuLiByYW5nZV9zdGFydCAtIDIwMCAuLiAifiIgLi4gcmFuZ2Vfc3RhcnQgKyAxMCAuLiAiOjoxMyINCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiBtZW51ID09IDEgdGhlbg0KICAgICAgICAgICAgZmlyc3Rfc2VhcmNoX3N0cmluZyA9IHN0YXJ0aW5nU2VhcmNoZXNbQVJNXVsxXQ0KICAgICAgICBlbmQNCiAgICAgICAgaWYgbWVudSA9PSAyIHRoZW4NCiAgICAgICAgICAgIGZpcnN0X3NlYXJjaF9zdHJpbmcgPSBzdGFydGluZ1NlYXJjaGVzW0FSTV1bMl0NCiAgICAgICAgZW5kDQogICAgICAgIGdnLnNlYXJjaE51bWJlcihmaXJzdF9zZWFyY2hfc3RyaW5nLCBmbGFnX3R5cGUpDQogICAgICAgIGlsMmNwcEZpZWxkcy5maXJzdFBvaW50ZXJTZWFyY2ggPSBnZy5nZXRSZXN1bHRzKGdnLmdldFJlc3VsdHNDb3VudCgpKQ0KICAgICAgICBjaGVja190YWJsZSA9IHt9DQogICAgICAgIGxvY2FsIGFkZF92YWx1ZSA9IHRydWUNCiAgICAgICAgZm9yIGksIHYgaW4gaXBhaXJzKGlsMmNwcEZpZWxkcy5maXJzdFBvaW50ZXJTZWFyY2gpIGRvDQogICAgICAgICAgICBpZiBhZGRfdmFsdWUgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGNoZWNrX3RhYmxlLCB2KQ0KICAgICAgICAgICAgICAgIGFkZF92YWx1ZSA9IGZhbHNlDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgYWRkX3ZhbHVlID0gdHJ1ZQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBnZy5sb2FkUmVzdWx0cyhjaGVja190YWJsZSkNCiAgICAgICAgc29ydGVkX2NoZWNrX3RhYmxlID0ge30NCiAgICAgICAgZm9yIGksIHYgaW4gaXBhaXJzKGNoZWNrX3RhYmxlKSBkbw0KICAgICAgICAgICAgaWYgaSAlIDEwMCA9PSAwIHRoZW4NCiAgICAgICAgICAgICAgICBnZy50b2FzdChpIC4uICIgb2YgIiAuLiAjY2hlY2tfdGFibGUgLi4gIiBwb2ludGVycyBjaGVja2VkIikNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgbG9jYWwgY2hlY2tfY2xhc3MgPSB7fQ0KICAgICAgICAgICAgY2hlY2tfY2xhc3NbMV0gPSB7fQ0KICAgICAgICAgICAgaWYgaWwyY3BwRmllbGRzLmFyY2gueDY0IHRoZW4NCiAgICAgICAgICAgICAgICBjaGVja19jbGFzc1sxXS5hZGRyZXNzID0gdi5hZGRyZXNzIC0gMTYNCiAgICAgICAgICAgICAgICBjaGVja19jbGFzc1sxXS5mbGFncyA9IGdnLlRZUEVfUVdPUkQNCiAgICAgICAgICAgICAgICBjaGVja19jbGFzc1syXSA9IHt9DQogICAgICAgICAgICAgICAgY2hlY2tfY2xhc3NbMl0uYWRkcmVzcyA9IHYuYWRkcmVzcw0KICAgICAgICAgICAgICAgIGNoZWNrX2NsYXNzWzJdLmZsYWdzID0gZ2cuVFlQRV9RV09SRA0KICAgICAgICAgICAgICAgIGNoZWNrX2NsYXNzWzNdID0ge30NCiAgICAgICAgICAgICAgICBjaGVja19jbGFzc1szXS5hZGRyZXNzID0gdi5hZGRyZXNzICsgOA0KICAgICAgICAgICAgICAgIGNoZWNrX2NsYXNzWzNdLmZsYWdzID0gZ2cuVFlQRV9RV09SRA0KICAgICAgICAgICAgICAgIGNoZWNrX2NsYXNzWzRdID0ge30NCiAgICAgICAgICAgICAgICBjaGVja19jbGFzc1s0XS5hZGRyZXNzID0gdi5hZGRyZXNzICsgaWwyY3BwRmllbGRzLmZpZWxkT2Zmc2V0cy5maWVsZFBvaW50ZXIgLSAxNg0KICAgICAgICAgICAgICAgIGNoZWNrX2NsYXNzWzRdLmZsYWdzID0gZ2cuVFlQRV9RV09SRA0KICAgICAgICAgICAgICAgIGNoZWNrX2NsYXNzWzVdID0ge30NCiAgICAgICAgICAgICAgICBjaGVja19jbGFzc1s1XS5hZGRyZXNzID0gdi5hZGRyZXNzICsgaWwyY3BwRmllbGRzLmZpZWxkT2Zmc2V0cy5maWVsZENvdW50IC0gMTYNCiAgICAgICAgICAgICAgICBjaGVja19jbGFzc1s1XS5mbGFncyA9IGdnLlRZUEVfRFdPUkQNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBjaGVja19jbGFzc1sxXS5hZGRyZXNzID0gdi5hZGRyZXNzIC0gOA0KICAgICAgICAgICAgICAgIGNoZWNrX2NsYXNzWzFdLmZsYWdzID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICAgICAgICAgIGNoZWNrX2NsYXNzWzJdID0ge30NCiAgICAgICAgICAgICAgICBjaGVja19jbGFzc1syXS5hZGRyZXNzID0gdi5hZGRyZXNzDQogICAgICAgICAgICAgICAgY2hlY2tfY2xhc3NbMl0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgICAgICAgICAgY2hlY2tfY2xhc3NbM10gPSB7fQ0KICAgICAgICAgICAgICAgIGNoZWNrX2NsYXNzWzNdLmFkZHJlc3MgPSB2LmFkZHJlc3MgKyA0DQogICAgICAgICAgICAgICAgY2hlY2tfY2xhc3NbM10uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgICAgICAgICAgY2hlY2tfY2xhc3NbNF0gPSB7fQ0KICAgICAgICAgICAgICAgIGNoZWNrX2NsYXNzWzRdLmFkZHJlc3MgPSB2LmFkZHJlc3MgKyBpbDJjcHBGaWVsZHMuZmllbGRPZmZzZXRzLmZpZWxkUG9pbnRlciAtIDgNCiAgICAgICAgICAgICAgICBjaGVja19jbGFzc1s0XS5mbGFncyA9IGdnLlRZUEVfRFdPUkQNCiAgICAgICAgICAgICAgICBjaGVja19jbGFzc1s1XSA9IHt9DQogICAgICAgICAgICAgICAgY2hlY2tfY2xhc3NbNV0uYWRkcmVzcyA9IHYuYWRkcmVzcyArIGlsMmNwcEZpZWxkcy5maWVsZE9mZnNldHMuZmllbGRDb3VudCAtIDgNCiAgICAgICAgICAgICAgICBjaGVja19jbGFzc1s1XS5mbGFncyA9IGdnLlRZUEVfRFdPUkQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgY2hlY2tfY2xhc3MgPSBnZy5nZXRWYWx1ZXMoY2hlY2tfY2xhc3MpDQogICAgICAgICAgICBpZiAjdG9zdHJpbmcoY2hlY2tfY2xhc3NbMV0udmFsdWUpID4gOCBhbmQgI3Rvc3RyaW5nKGNoZWNrX2NsYXNzWzJdLnZhbHVlKSA+IDgNCiAgICAgICAgICAgICAgICBhbmQgI3Rvc3RyaW5nKGNoZWNrX2NsYXNzWzRdLnZhbHVlKSA+IDggdGhlbg0KICAgICAgICAgICAgICAgIGxvY2FsIGZpZWxkX2NvdW50DQogICAgICAgICAgICAgICAgaWYgY2hlY2tfY2xhc3NbNV0udmFsdWUgPiAwIGFuZCBjaGVja19jbGFzc1s1XS52YWx1ZSA8IDEwMDAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZmllbGRfY291bnQgPSBjaGVja19jbGFzc1s1XS52YWx1ZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGxvY2FsIGdldF9pbWFnZSA9IHt9DQogICAgICAgICAgICAgICAgbG9jYWwgZ2V0X25hbWVzcGFjZSA9IHt9DQogICAgICAgICAgICAgICAgaWYgZmllbGRfY291bnQgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgaWwyY3BwRmllbGRzLmltYWdlX25hbWVzW3Rvc3RyaW5nKGNoZWNrX2NsYXNzWzFdLmFkZHJlc3MpXSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBnZXRfaW1hZ2UgPSBpbDJjcHBGaWVsZHMuaW1hZ2VfbmFtZXNbdG9zdHJpbmcoY2hlY2tfY2xhc3NbMV0uYWRkcmVzcyldDQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIGdldF9pbWFnZVsxXSA9IHt9DQogICAgICAgICAgICAgICAgICAgICAgICBnZXRfaW1hZ2VbMV0uYWRkcmVzcyA9IGNoZWNrX2NsYXNzWzFdLnZhbHVlDQogICAgICAgICAgICAgICAgICAgICAgICBnZXRfaW1hZ2VbMV0uZmxhZ3MgPSBmbGFnX3R5cGUNCiAgICAgICAgICAgICAgICAgICAgICAgIGdldF9pbWFnZSA9IGdnLmdldFZhbHVlcyhnZXRfaW1hZ2UpDQogICAgICAgICAgICAgICAgICAgICAgICBnZXRfaW1hZ2UgPSBnZXRfaW1hZ2VbMV0udmFsdWUNCiAgICAgICAgICAgICAgICAgICAgICAgIGlsMmNwcEZpZWxkcy5pbWFnZV9uYW1lc1t0b3N0cmluZyhjaGVja19jbGFzc1sxXS5hZGRyZXNzKV0gPSBnZXRfaW1hZ2UNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmICN0b3N0cmluZyhjaGVja19jbGFzc1szXS52YWx1ZSkgPiA4IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlsMmNwcEZpZWxkcy5uYW1lc3BhY2VfbmFtZXNbdG9zdHJpbmcoY2hlY2tfY2xhc3NbM10udmFsdWUpXSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0X25hbWVzcGFjZSA9IGlsMmNwcEZpZWxkcy5uYW1lc3BhY2VfbmFtZXNbdG9zdHJpbmcoY2hlY2tfY2xhc3NbM10udmFsdWUpXQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldF9uYW1lc3BhY2UgPSBjaGVja19jbGFzc1szXS52YWx1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlsMmNwcEZpZWxkcy5uYW1lc3BhY2VfbmFtZXNbdG9zdHJpbmcoY2hlY2tfY2xhc3NbM10udmFsdWUpXSA9IGdldF9uYW1lc3BhY2UNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgY2xhc3NfbmFtZQ0KICAgICAgICAgICAgICAgICAgICBpZiBpbDJjcHBGaWVsZHMuY2xhc3NfbmFtZXNbdG9zdHJpbmcoY2hlY2tfY2xhc3NbMl0udmFsdWUpXSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBjbGFzc19uYW1lID0gaWwyY3BwRmllbGRzLmNsYXNzX25hbWVzW3Rvc3RyaW5nKGNoZWNrX2NsYXNzWzJdLnZhbHVlKV0NCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NfbmFtZSA9IGlsMmNwcEZpZWxkcy5nZXRfY2xhc3NfbmFtZShpbDJjcHBGaWVsZHMuZ2dfaGV4KGNoZWNrX2NsYXNzWzJdLnZhbHVlKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlsMmNwcEZpZWxkcy5jbGFzc19uYW1lc1t0b3N0cmluZyhjaGVja19jbGFzc1syXS52YWx1ZSldID0gY2xhc3NfbmFtZQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgYWRkX3RvX2xpc3QgPSB7fQ0KICAgICAgICAgICAgICAgICAgICBhZGRfdG9fbGlzdC5hZGRyZXNzID0gY2hlY2tfY2xhc3NbMV0uYWRkcmVzcw0KICAgICAgICAgICAgICAgICAgICBhZGRfdG9fbGlzdC5mbGFncyA9IGZsYWdfdHlwZQ0KICAgICAgICAgICAgICAgICAgICBhZGRfdG9fbGlzdC5uYW1lID0gIkltYWdlOiAiIC4uIGlsMmNwcEZpZWxkcy5nZXRfY2xhc3NfbmFtZShpbDJjcHBGaWVsZHMuZ2dfaGV4KGdldF9pbWFnZSkpIC4uICJcbiINCiAgICAgICAgICAgICAgICAgICAgaWYgdHlwZShnZXRfbmFtZXNwYWNlKSA9PSAibnVtYmVyIiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBhZGRfdG9fbGlzdC5uYW1lID0gYWRkX3RvX2xpc3QubmFtZSAuLiAiTmFtZXNwYWNlOiAiIC4uIGlsMmNwcEZpZWxkcy5nZXRfY2xhc3NfbmFtZShpbDJjcHBGaWVsZHMuZ2dfaGV4KGdldF9uYW1lc3BhY2UpKSAuLiAiXG4iDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBhZGRfdG9fbGlzdC5uYW1lID0gYWRkX3RvX2xpc3QubmFtZSAuLiAiQ2xhc3M6ICIgLi4gY2xhc3NfbmFtZSAuLiAiXG5GaWVsZHM6ICIgLi4gZmllbGRfY291bnQNCiAgICAgICAgICAgICAgICAgICAgZ2cuYWRkTGlzdEl0ZW1zKHthZGRfdG9fbGlzdH0pDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGNsYXNzX2xpc3QgPSBnZy5nZXRMaXN0SXRlbXMoKQ0KICAgICAgICBnZy5hbGVydChzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gQ2xhc3MgU2NhbiBDb21wbGV0ZSDihLnvuI9cblxuU2VsZWN0IDEgaXRlbSBpbiB0aGUgU2F2ZSBMaXN0IGFuZCBwcmVzcyB0aGUgZmxvYXRpbmcgW1N4XSBidXR0b24gdG8gc2VhcmNoIGZvciBpbnN0YW5jZXMgb2YgdGhlIGNsYXNzLlxuXG5PciBzZWxlY3Qgbm90aGluZyBhbmQgcHJlc3MgdGhlIGZsb2F0aW5nIFtTeF0gYnV0dG9uIHRvIHNlYXJjaCBmb3Iga2V5d29yZHMgb3IgcmVzY2FuLiIpDQogICAgZW5kLA0KICAgIGdldF9jbGFzc19uYW1lID0gZnVuY3Rpb24oYWRkcmVzcykNCiAgICAgICAgbG9jYWwgY2xhc3NfbmFtZSA9ICIiDQogICAgICAgIGlmIGFkZHJlc3Mgfj0gIjB4MDAwMDAwMDAiIHRoZW4NCiAgICAgICAgICAgIGxvY2FsIGZpcnN0X2xldHRlciA9IHt9DQogICAgICAgICAgICBmaXJzdF9sZXR0ZXJbMV0gPSB7fQ0KICAgICAgICAgICAgZmlyc3RfbGV0dGVyWzFdLmFkZHJlc3MgPSBhZGRyZXNzDQogICAgICAgICAgICBmaXJzdF9sZXR0ZXJbMV0uZmxhZ3MgPSBnZy5UWVBFX0JZVEUNCiAgICAgICAgICAgIGZpcnN0X2xldHRlciA9IGdnLmdldFZhbHVlcyhmaXJzdF9sZXR0ZXIpDQogICAgICAgICAgICBsb2NhbCBnZXRfY2xhc3NfbmFtZV90YWJsZSA9IHt9DQogICAgICAgICAgICBvZmZzZXQgPSAwDQogICAgICAgICAgICBmb3IgaSA9IDEsIDEwMCBkbw0KICAgICAgICAgICAgICAgIGdldF9jbGFzc19uYW1lX3RhYmxlW2ldID0ge30NCiAgICAgICAgICAgICAgICBnZXRfY2xhc3NfbmFtZV90YWJsZVtpXS5hZGRyZXNzID0gZmlyc3RfbGV0dGVyWzFdLmFkZHJlc3MgKyBvZmZzZXQNCiAgICAgICAgICAgICAgICBnZXRfY2xhc3NfbmFtZV90YWJsZVtpXS5mbGFncyA9IGdnLlRZUEVfQllURQ0KICAgICAgICAgICAgICAgIG9mZnNldCA9IG9mZnNldCArIDENCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZ2V0X2NsYXNzX25hbWVfdGFibGUgPSBnZy5nZXRWYWx1ZXMoZ2V0X2NsYXNzX25hbWVfdGFibGUpDQogICAgICAgICAgICBjbGFzc19uYW1lID0gIiINCiAgICAgICAgICAgIGZvciBpbmRleCwgdmFsdWUgaW4gcGFpcnMoZ2V0X2NsYXNzX25hbWVfdGFibGUpIGRvDQogICAgICAgICAgICAgICAgaWYgdmFsdWUudmFsdWUgPiAwIGFuZCB2YWx1ZS52YWx1ZSA8PSAyNTUgdGhlbg0KICAgICAgICAgICAgICAgICAgICBjbGFzc19uYW1lID0gY2xhc3NfbmFtZSAuLiBzdHJpbmcuY2hhcih2YWx1ZS52YWx1ZSkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBpZiB2YWx1ZS52YWx1ZSA9PSAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgcmV0dXJuIGNsYXNzX25hbWUNCiAgICBlbmQsDQogICAgY3VycmVudF9maWVsZHMgPSB7fSwNCiAgICByZXRyaWV2ZWRfZmllbGRfdHlwZXMgPSB7fSwNCiAgICBzX2JfcyA9ICI6bXNjb3JsaWIuZGxsADxNb2R1bGU+IiwNCiAgICBlX2JfcyA9ICIwMGg7MDBoOzB+fjA7MH5+MDswfn4wOzAwaDswfn4wOzAwaDswfn4wOzAwaDtGRmg7RkZoOjoxMiIsDQogICAgZ2V0UmFuZ2UgPSBmdW5jdGlvbigpDQogICAgICAgIGdnLnNldFJhbmdlcyhnZy5SRUdJT05fT1RIRVIpDQogICAgICAgIGdnLnNldFZpc2libGUoZmFsc2UpDQogICAgICAgIGdnLnRvYXN0KCJcblxu4oS577iPIENvbmZpZ3VyaW5nIFNjcmlwdCDihLnvuI8iKQ0KICAgICAgICBnZy5jbGVhclJlc3VsdHMoKQ0KICAgICAgICA6OnRyeV9jYTo6DQogICAgICAgIGdnLnNlYXJjaE51bWJlcihpbDJjcHBGaWVsZHMuc19iX3MsIGdnLlRZUEVfQllURSwgZmFsc2UsIGdnLlNJR05fRVFVQUwsIG5pbCwgbmlsLCAxKQ0KICAgICAgICBpZiBnZy5nZXRSZXN1bHRzQ291bnQoKSA9PSAwIHRoZW4NCiAgICAgICAgICAgIGdnLnNldFJhbmdlcyhnZy5SRUdJT05fQ19BTExPQykNCiAgICAgICAgICAgIGdvdG8gdHJ5X2NhDQogICAgICAgIGVuZA0KICAgICAgICBsb2NhbCBzdGFydF9zZWFyY2ggPSBnZy5nZXRSZXN1bHRzKDEpDQogICAgICAgIGdnLmNsZWFyUmVzdWx0cygpDQogICAgICAgIHJhbmdlX3N0YXJ0ID0gc3RhcnRfc2VhcmNoWzFdLmFkZHJlc3MNCiAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoZ2cuZ2V0UmFuZ2VzTGlzdCgpKSBkbw0KICAgICAgICAgICAgaWYgdlsic3RhcnQiXSA8IHJhbmdlX3N0YXJ0IGFuZCB2WyJlbmQiXSA+IHJhbmdlX3N0YXJ0IHRoZW4NCiAgICAgICAgICAgICAgICBtZXRhZGF0YV9lbmQgPSB2WyJlbmQiXQ0KICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGdnLnNlYXJjaE51bWJlcihpbDJjcHBGaWVsZHMuZV9iX3MsIGdnLlRZUEVfQllURSwgZmFsc2UsIGdnLlNJR05fRVFVQUwsIHJhbmdlX3N0YXJ0LCBuaWwsIDEpDQogICAgICAgIGxvY2FsIGVuZF9zZWFyY2ggPSBnZy5nZXRSZXN1bHRzKDEpDQogICAgICAgIHJhbmdlX2VuZCA9IGVuZF9zZWFyY2hbMV0uYWRkcmVzcw0KICAgICAgICBnZy5jbGVhclJlc3VsdHMoKQ0KICAgIGVuZCwNCiAgICBsb2FkX2luc3RhbmNlX3ZhbHVlcyA9IGZ1bmN0aW9uKGFkZHJlc3MsIG9mZnNldCwgZmllbGRfdHlwZSwgZmllbGRfbmFtZSwgY3VycmVudF9jbGFzcykNCiAgICAgICAgbG9jYWwgZ2dfZmxhZ3MgPSB7DQogICAgICAgICAgICBbImNoYXIiXSA9IGdnLlRZUEVfQllURSwNCiAgICAgICAgICAgIFsiYnl0ZSJdID0gZ2cuVFlQRV9CWVRFLA0KICAgICAgICAgICAgWyJzYnl0ZSJdID0gZ2cuVFlQRV9CWVRFLA0KICAgICAgICAgICAgWyJkb3VibGUiXSA9IGdnLlRZUEVfRE9VQkxFLA0KICAgICAgICAgICAgWyJpbnQiXSA9IGdnLlRZUEVfRFdPUkQsDQogICAgICAgICAgICBbInNob3J0Il0gPSBnZy5UWVBFX0RXT1JELA0KICAgICAgICAgICAgWyJsb25nIl0gPSBnZy5UWVBFX0RXT1JELA0KICAgICAgICAgICAgWyJ1aW50Il0gPSBnZy5UWVBFX0RXT1JELA0KICAgICAgICAgICAgWyJ1c2hvcnQiXSA9IGdnLlRZUEVfRFdPUkQsDQogICAgICAgICAgICBbInVsb25nIl0gPSBnZy5UWVBFX0RXT1JELA0KICAgICAgICAgICAgWyJmbG9hdCJdID0gZ2cuVFlQRV9GTE9BVA0KICAgICAgICB9DQogICAgICAgIGdnLnNldFJhbmdlcyhnZy5SRUdJT05fQU5PTllNT1VTKQ0KICAgICAgICBnZy5jbGVhclJlc3VsdHMoKQ0KICAgICAgICBnZy5zZWFyY2hOdW1iZXIoYWRkcmVzcywgZmxhZ190eXBlKQ0KICAgICAgICBsb2NhbCBjdXJyZW50X2luc3RhbmNlcyA9IGdnLmdldFJlc3VsdHMoZ2cuZ2V0UmVzdWx0c0NvdW50KCkpDQogICAgICAgIGZvciBpLCB2IGluIGlwYWlycyhjdXJyZW50X2luc3RhbmNlcykgZG8NCiAgICAgICAgICAgIGN1cnJlbnRfaW5zdGFuY2VzW2ldLmFkZHJlc3MgPSBjdXJyZW50X2luc3RhbmNlc1tpXS5hZGRyZXNzICsgb2Zmc2V0DQogICAgICAgICAgICBpZiBjdXJyZW50X2luc3RhbmNlc1tpXS5hZGRyZXNzICUgNCB+PSAwIHRoZW4NCiAgICAgICAgICAgICAgICBjdXJyZW50X2luc3RhbmNlc1tpXS5mbGFncyA9IGdnLlRZUEVfQllURQ0KICAgICAgICAgICAgZWxzZWlmIGdnX2ZsYWdzW2ZpZWxkX3R5cGVdIHRoZW4NCiAgICAgICAgICAgICAgICBjdXJyZW50X2luc3RhbmNlc1tpXS5mbGFncyA9IGdnX2ZsYWdzW2ZpZWxkX3R5cGVdDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgY3VycmVudF9pbnN0YW5jZXNbaV0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGN1cnJlbnRfaW5zdGFuY2VzW2ldLm5hbWUgPSBjdXJyZW50X2NsYXNzIC4uICJcbiIgLi4gZmllbGRfdHlwZSAuLiAiICIgLi4gZmllbGRfbmFtZSAuLiAiICIgLi4gb2Zmc2V0DQogICAgICAgIGVuZA0KICAgICAgICBnZy5jbGVhckxpc3QoKQ0KICAgICAgICBnZy5hZGRMaXN0SXRlbXMoY3VycmVudF9pbnN0YW5jZXMpDQogICAgZW5kLA0KICAgIHNlYXJjaCA9IGZ1bmN0aW9uKCkNCiAgICAgICAgc2VhcmNoX2xpc3QgPSB7fQ0KICAgICAgICBsb2NhbCBtZW51ID0gZ2cucHJvbXB0KHsiU2VhcmNoIFRlcm0iLCAiQ2FzZSBTZW5zaXRpdmUiLCAiU2VhcmNoIEltYWdlIEluc3RlYWQgT2YgQ2xhc3MifSwgeyIiLCB0cnVlLCBmYWxzZX0sIHsidGV4dCIsICJjaGVja2JveCIsICJjaGVja2JveCJ9KQ0KICAgICAgICBpZiBtZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICBmb3IgaSwgdiBpbiBpcGFpcnMoY2xhc3NfbGlzdCkgZG8NCiAgICAgICAgICAgICAgICBpZiBtZW51WzNdID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgbWVudVsyXSA9PSBmYWxzZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBzdHJpbmcubG93ZXIodi5uYW1lKTpmaW5kKCJjbGFzcy4rIiAuLiBzdHJpbmcubG93ZXIobWVudVsxXSkpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoc2VhcmNoX2xpc3QsIHYpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIHYubmFtZTpmaW5kKCJDbGFzcy4rIiAuLiBtZW51WzFdKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoc2VhcmNoX2xpc3QsIHYpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgaWYgbWVudVsyXSA9PSBmYWxzZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBzdHJpbmcubG93ZXIodi5uYW1lKTpmaW5kKCJpbWFnZS4rIiAuLiBzdHJpbmcubG93ZXIobWVudVsxXSkpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoc2VhcmNoX2xpc3QsIHYpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIHYubmFtZTpmaW5kKCJJbWFnZS4rIiAuLiBtZW51WzFdKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoc2VhcmNoX2xpc3QsIHYpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBnZy5jbGVhckxpc3QoKQ0KICAgICAgICBnZy5hZGRMaXN0SXRlbXMoc2VhcmNoX2xpc3QpDQogICAgZW5kLA0KICAgIHNjYW5Ib21lID0gZnVuY3Rpb24oKQ0KICAgICAgICBpZiAjZ2cuZ2V0U2VsZWN0ZWRMaXN0SXRlbXMoKSA9PSAxIHRoZW4NCiAgICAgICAgICAgIGN1cnJlbnRfY2xhc3MgPSBnZy5nZXRTZWxlY3RlZExpc3RJdGVtcygpWzFdLm5hbWUNCiAgICAgICAgICAgIGlsMmNwcEZpZWxkcy5zY2FubmluZyA9IGZhbHNlDQogICAgICAgICAgICBpbDJjcHBGaWVsZHMuaG9tZShjdXJyZW50X2NsYXNzOmdzdWIoIi4rQ2xhc3M6ICguKylcbkZpZWxkLisiLCAiJTEiKSkNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgbG9jYWwgbWVudV9pdGVtcyA9IHt9DQogICAgICAgICAgICBtZW51X2l0ZW1zWzFdID0gIvCflI0gU2Nhbi9SZXNjYW4gRm9yIENsYXNzZXMiDQogICAgICAgICAgICBpZiBjbGFzc19saXN0IHRoZW4NCiAgICAgICAgICAgICAgICBtZW51X2l0ZW1zWzJdID0gIvCflIQgUmVsb2FkIENsYXNzIExpc3QiDQogICAgICAgICAgICAgICAgbWVudV9pdGVtc1szXSA9ICLwn5SOIFNlYXJjaCBDbGFzcyBMaXN0Ig0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBzZWFyY2hfbGlzdCB0aGVuDQogICAgICAgICAgICAgICAgbWVudV9pdGVtc1s0XSA9ICLwn5SEIFJlbG9hZCBMYXN0IFNlYXJjaCBSZXN1bHQiDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIG1lbnVfaXRlbXNbI21lbnVfaXRlbXMgKyAxXSA9ICLwn4+gIEJhY2siDQogICAgICAgICAgICBsb2NhbCBtZW51ID0gZ2cuY2hvaWNlKG1lbnVfaXRlbXMsIG5pbCwgc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIENsYXNzIFNjYW5uZXIg4oS577iPIikNCiAgICAgICAgICAgIGlmIG1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBtZW51ID09IDEgdGhlbg0KICAgICAgICAgICAgICAgICAgICBnZy5jbGVhckxpc3QoKQ0KICAgICAgICAgICAgICAgICAgICBpbDJjcHBGaWVsZHMuc2NhbigpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgbWVudSA9PSAyIGFuZCAoI21lbnVfaXRlbXMgPT0gNCBvciAjbWVudV9pdGVtcyA9PSA1KSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGdnLmNsZWFyTGlzdCgpDQogICAgICAgICAgICAgICAgICAgIGdnLmFkZExpc3RJdGVtcyhjbGFzc19saXN0KQ0KICAgICAgICAgICAgICAgIGVsc2VpZiBtZW51ID09IDIgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpbDJjcHBGaWVsZHMuc2Nhbm5pbmcgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICBpbDJjcHBGaWVsZHMuaG9tZSgpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGlmIG1lbnUgPT0gMyB0aGVuDQogICAgICAgICAgICAgICAgaWwyY3BwRmllbGRzLnNlYXJjaCgpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGlmIG1lbnUgPT0gNCBhbmQgI21lbnVfaXRlbXMgPT0gNSB0aGVuDQogICAgICAgICAgICAgICAgZ2cuY2xlYXJMaXN0KCkNCiAgICAgICAgICAgICAgICBnZy5hZGRMaXN0SXRlbXMoc2VhcmNoX2xpc3QpDQogICAgICAgICAgICBlbHNlaWYgbWVudSA9PSA0IHRoZW4NCiAgICAgICAgICAgICAgICBpbDJjcHBGaWVsZHMuc2Nhbm5pbmcgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIGlsMmNwcEZpZWxkcy5ob21lKCkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWYgbWVudSA9PSA1IHRoZW4NCiAgICAgICAgICAgICAgICBpbDJjcHBGaWVsZHMuc2Nhbm5pbmcgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIGlsMmNwcEZpZWxkcy5ob21lKCkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCn0NCmlmIGlsMmNwcEZpZWxkcy5hcmNoLng2NCB0aGVuDQogICAgZmxhZ190eXBlID0gZ2cuVFlQRV9RV09SRA0KZWxzZQ0KICAgIGZsYWdfdHlwZSA9IGdnLlRZUEVfRFdPUkQNCmVuZA0KaWwyY3BwRmllbGRzLmdldFJhbmdlKCkNCmlmIHBjYWxsKGlsMmNwcEZpZWxkcy5jaGVja0NvbmZpZ0ZpbGVHYW1lKSA9PSBmYWxzZSB0aGVuDQogICAgaWwyY3BwRmllbGRzLmNyZWF0ZURpcmVjdG9yeSgpDQogICAgaWwyY3BwRmllbGRzLnNhdmVkRWRpdHNUYWJsZSA9IHt9DQogICAgaWwyY3BwRmllbGRzLnNhdmVDb25maWcoKQ0KZW5kDQoNCmlmIHBjYWxsKGlsMmNwcEZpZWxkcy5jaGVja01ldGhvZFR5cGVzKSA9PSBmYWxzZSB0aGVuDQogICAgaWwyY3BwRmllbGRzLmdldE1ldGhvZFR5cGVzKCkNCmVuZA0KDQpwbHVnaW5NYW5hZ2VyLnJldHVybkhvbWUgPSB0cnVlDQpwbHVnaW5NYW5hZ2VyLnJldHVyblBsdWdpblRhYmxlID0gImlsMmNwcEZpZWxkcyINCmdnLmFsZXJ0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBQbHVnaW4gbG9hZGVkLCBpZiBsYXVuY2hlZCBkaXJlY3RseSBwcmVzcyB0aGUgZmxvYXRpbmcgW1N4XSBidXR0b24gdG8gb3BlbiB0aGUgbWVudS4g4oS577iPIikNCg"
        },
        [11] = {
            file_name = "plugin_bc_metadata_dumper.lua",
            file_data = "bWV0YWRhdGFEdW1wZXIgPSB7DQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCW1ldGFkYXRhRHVtcGVyLmdldFZlcnNpb24oKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgZ2V0VmVyc2lvbiA9IGZ1bmN0aW9uKCkNCiAgICAgICAgd2hpbGUgKG5pbCkgZG8NCiAgICAgICAgICAgIGxvY2FsIGdldFZlcnNpb25WYWwgPSB7fQ0KICAgICAgICAgICAgaWYgKGdldFZlcnNpb25WYWwuZ2V0VmVyc2lvblZhbCkgdGhlbg0KICAgICAgICAgICAgICAgIGdldFZlcnNpb25WYWwuZ2V0VmVyc2lvblZhbCA9IChnZXRWZXJzaW9uVmFsLmdldFZlcnNpb25WYWwoZ2V0VmVyc2lvblZhbCkpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGdnLnRvYXN0KHNjcmlwdF90aXRsZSAuLg0KICAgICAgICAgICAgICAgICAgICAgIlxuXG7ihLnvuI8gR2V0dGluZyBVbml0eSBWZXJzaW9uIOKEue+4j1xuXG5HZXR0aW5nIFVuaXR5IHZlcnNpb24gZm9yIGdsb2JhbC1tZXRhZGF0YS5kYXQgcmVwYWlyLiIpDQogICAgICAgIGdnLnNldFJhbmdlcyhnZy5SRUdJT05fQ09ERV9BUFApDQogICAgICAgIGdnLmNsZWFyUmVzdWx0cygpDQogICAgICAgIGdnLnNlYXJjaE51bWJlcigiMzJoOzMwaDswfn4wOzB+fjA7MkVoOzB+fjA7MkVoOzY2aDo6MTEiLCBnZy5UWVBFX0JZVEUsIGZhbHNlLCBnZy5TSUdOX0VRVUFMLCBuaWwsIG5pbCwgMTYpDQogICAgICAgIGxvY2FsIHZlcnNpb24gPSBnZy5nZXRSZXN1bHRzKDEsIDgpDQogICAgICAgIGxvY2FsIGNvdW50ID0gMQ0KICAgICAgICBsb2NhbCBvZmZzZXQgPSAwDQogICAgICAgIGxvY2FsIHZlcnNpb25fdGFibGUgPSB7fQ0KICAgICAgICByZXBlYXQNCiAgICAgICAgICAgIHZlcnNpb25fdGFibGVbY291bnRdID0ge30NCiAgICAgICAgICAgIHZlcnNpb25fdGFibGVbY291bnRdLmFkZHJlc3MgPSB2ZXJzaW9uWzFdLmFkZHJlc3MgKyBvZmZzZXQNCiAgICAgICAgICAgIHZlcnNpb25fdGFibGVbY291bnRdLmZsYWdzID0gZ2cuVFlQRV9CWVRFDQogICAgICAgICAgICBvZmZzZXQgPSBvZmZzZXQgKyAxDQogICAgICAgICAgICBjb3VudCA9IGNvdW50ICsgMQ0KICAgICAgICB1bnRpbCAoY291bnQgPT0gNSkNCiAgICAgICAgbG9jYWwgbmFtZV90YWJsZSA9IGdnLmdldFZhbHVlcyh2ZXJzaW9uX3RhYmxlKQ0KICAgICAgICBsb2NhbCBuYW1lX3N0cmluZyA9ICIiDQogICAgICAgIGZvciBpLCB2IGluIHBhaXJzKG5hbWVfdGFibGUpIGRvDQogICAgICAgICAgICBuYW1lX3N0cmluZyA9IG5hbWVfc3RyaW5nIC4uIHN0cmluZy5jaGFyKHYudmFsdWUpDQogICAgICAgIGVuZA0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhtZXRhZGF0YUR1bXBlci51dl9hKSBkbw0KICAgICAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBwYWlycyh2LnZlcnNpb25zKSBkbw0KICAgICAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKHZhbHVlLCBuYW1lX3N0cmluZykgdGhlbg0KICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uXzEgPSB2LmhlYWRlcnNbMV0NCiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbl8yID0gdi5oZWFkZXJzWzJdDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIHJldHVybiB7dmVyc2lvbl8xLCB2ZXJzaW9uXzJ9DQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCgltZXRhZGF0YUR1bXBlci5nZXRSYW5nZXMoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgZ2V0UmFuZ2VzID0gZnVuY3Rpb24oYWRkcmVzcykNCiAgICAgICAgbG9jYWwgcmFuZ2VzID0gZ2cuZ2V0UmFuZ2VzTGlzdCgpDQogICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHJhbmdlcykgZG8NCiAgICAgICAgICAgIGlmIHYuc3RhcnQgPD0gYWRkcmVzcyBhbmQgdlsiZW5kIl0gPiBhZGRyZXNzIHRoZW4NCiAgICAgICAgICAgICAgICByYW5nZV9zdGFydCA9IHYuc3RhcnQNCiAgICAgICAgICAgICAgICByYW5nZV9lbmQgPSB2WyJlbmQiXQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICByZXR1cm4ge3JhbmdlX3N0YXJ0LCByYW5nZV9lbmR9DQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCgltZXRhZGF0YUR1bXBlci5jaGVja0hlYWRlcigpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBjaGVja0hlYWRlciA9IGZ1bmN0aW9uKHJhbmdlX3N0YXJ0KQ0KICAgICAgICB3aGlsZSAobmlsKSBkbw0KICAgICAgICAgICAgbG9jYWwgY2hlY2tIZWFkZXJWYWwgPSB7fQ0KICAgICAgICAgICAgaWYgKGNoZWNrSGVhZGVyVmFsLmNoZWNrSGVhZGVyVmFsKSB0aGVuDQogICAgICAgICAgICAgICAgY2hlY2tIZWFkZXJWYWwuY2hlY2tIZWFkZXJWYWwgPSAoY2hlY2tIZWFkZXJWYWwuY2hlY2tIZWFkZXJWYWwoY2hlY2tIZWFkZXJWYWwpKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBnZy50b2FzdChzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gQ2hlY2tpbmcgSGVhZGVyIOKEue+4j1xuXG5DaGVja2luZyBmb3IgdmFsaWQgZ2xvYmFsLW1ldGFkYXRhLmRhdCBoZWFkZXIuIikNCiAgICAgICAgbG9jYWwgaGVhZGVyX3RhYmxlID0ge30NCiAgICAgICAgaGVhZGVyX3RhYmxlWzFdID0ge30NCiAgICAgICAgaGVhZGVyX3RhYmxlWzFdLmFkZHJlc3MgPSByYW5nZV9zdGFydA0KICAgICAgICBoZWFkZXJfdGFibGVbMV0uZmxhZ3MgPSBnZy5UWVBFX0JZVEUNCiAgICAgICAgaGVhZGVyX3RhYmxlWzJdID0ge30NCiAgICAgICAgaGVhZGVyX3RhYmxlWzJdLmFkZHJlc3MgPSByYW5nZV9zdGFydCArIDENCiAgICAgICAgaGVhZGVyX3RhYmxlWzJdLmZsYWdzID0gZ2cuVFlQRV9CWVRFDQogICAgICAgIGhlYWRlcl90YWJsZVszXSA9IHt9DQogICAgICAgIGhlYWRlcl90YWJsZVszXS5hZGRyZXNzID0gcmFuZ2Vfc3RhcnQgKyAyDQogICAgICAgIGhlYWRlcl90YWJsZVszXS5mbGFncyA9IGdnLlRZUEVfQllURQ0KICAgICAgICBoZWFkZXJfdGFibGVbNF0gPSB7fQ0KICAgICAgICBoZWFkZXJfdGFibGVbNF0uYWRkcmVzcyA9IHJhbmdlX3N0YXJ0ICsgMw0KICAgICAgICBoZWFkZXJfdGFibGVbNF0uZmxhZ3MgPSBnZy5UWVBFX0JZVEUNCiAgICAgICAgaGVhZGVyX3RhYmxlWzVdID0ge30NCiAgICAgICAgaGVhZGVyX3RhYmxlWzVdLmFkZHJlc3MgPSByYW5nZV9zdGFydCArIDQNCiAgICAgICAgaGVhZGVyX3RhYmxlWzVdLmZsYWdzID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICBoZWFkZXJfdGFibGVbNl0gPSB7fQ0KICAgICAgICBoZWFkZXJfdGFibGVbNl0uYWRkcmVzcyA9IHJhbmdlX3N0YXJ0ICsgOA0KICAgICAgICBoZWFkZXJfdGFibGVbNl0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgIGhlYWRlcl92YWx1ZXMgPSBnZy5nZXRWYWx1ZXMoaGVhZGVyX3RhYmxlKQ0KICAgICAgICBpZiBoZWFkZXJfdmFsdWVzWzFdLnZhbHVlIH49IC04MSBvciBoZWFkZXJfdmFsdWVzWzFdLnZhbHVlIH49IDI3IG9yIGhlYWRlcl92YWx1ZXNbMV0udmFsdWUgfj0gLTc5IG9yDQogICAgICAgICAgICBoZWFkZXJfdmFsdWVzWzFdLnZhbHVlIH49IC02IHRoZW4NCiAgICAgICAgICAgIGhlYWRlcl92YWx1ZXNbMV0udmFsdWUgPSAiQUZoIg0KICAgICAgICAgICAgaGVhZGVyX3ZhbHVlc1syXS52YWx1ZSA9ICIxQmgiDQogICAgICAgICAgICBoZWFkZXJfdmFsdWVzWzNdLnZhbHVlID0gIkIxaCINCiAgICAgICAgICAgIGhlYWRlcl92YWx1ZXNbNF0udmFsdWUgPSAiRkFoIg0KICAgICAgICAgICAgYWRkcmVzc19lZGl0X3RhYmxlXzEgPSB7DQogICAgICAgICAgICAgICAgWzFdID0gew0KICAgICAgICAgICAgICAgICAgICBbImFkZHJlc3MiXSA9IGhlYWRlcl90YWJsZVsxXS5hZGRyZXNzLA0KICAgICAgICAgICAgICAgICAgICBbImVkaXQiXSA9ICJBRmgiLA0KICAgICAgICAgICAgICAgICAgICBbInR5cGUiXSA9IGdnLlRZUEVfQllURQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgWzJdID0gew0KICAgICAgICAgICAgICAgICAgICBbImFkZHJlc3MiXSA9IGhlYWRlcl90YWJsZVsyXS5hZGRyZXNzLA0KICAgICAgICAgICAgICAgICAgICBbImVkaXQiXSA9ICIxQmgiLA0KICAgICAgICAgICAgICAgICAgICBbInR5cGUiXSA9IGdnLlRZUEVfQllURQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgWzNdID0gew0KICAgICAgICAgICAgICAgICAgICBbImFkZHJlc3MiXSA9IGhlYWRlcl90YWJsZVszXS5hZGRyZXNzLA0KICAgICAgICAgICAgICAgICAgICBbImVkaXQiXSA9ICJCMWgiLA0KICAgICAgICAgICAgICAgICAgICBbInR5cGUiXSA9IGdnLlRZUEVfQllURQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgWzRdID0gew0KICAgICAgICAgICAgICAgICAgICBbImFkZHJlc3MiXSA9IGhlYWRlcl90YWJsZVs0XS5hZGRyZXNzLA0KICAgICAgICAgICAgICAgICAgICBbImVkaXQiXSA9ICJGQWgiLA0KICAgICAgICAgICAgICAgICAgICBbInR5cGUiXSA9IGdnLlRZUEVfQllURQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIGhlYWRlcl92YWx1ZXMgPSBnZy5nZXRWYWx1ZXMoaGVhZGVyX3RhYmxlKQ0KICAgICAgICBpZiBoZWFkZXJfdmFsdWVzWzVdLnZhbHVlID09IDI0IG9yIGhlYWRlcl92YWx1ZXNbNV0udmFsdWUgPT0gMjcgdGhlbg0KICAgICAgICBlbHNlDQogICAgICAgICAgICBsb2NhbCB2ZXJzaW9uID0gbWV0YWRhdGFEdW1wZXIuZ2V0VmVyc2lvbigpDQogICAgICAgICAgICBoZWFkZXJfdmFsdWVzWzVdLnZhbHVlID0gdmVyc2lvblsxXQ0KICAgICAgICAgICAgaGVhZGVyX3ZhbHVlc1s2XS52YWx1ZSA9IHZlcnNpb25bMl0NCiAgICAgICAgICAgIGFkZHJlc3NfZWRpdF90YWJsZV8yID0gew0KICAgICAgICAgICAgICAgIFsxXSA9IHsNCiAgICAgICAgICAgICAgICAgICAgWyJhZGRyZXNzIl0gPSBoZWFkZXJfdGFibGVbNV0uYWRkcmVzcywNCiAgICAgICAgICAgICAgICAgICAgWyJlZGl0Il0gPSB2ZXJzaW9uWzFdLA0KICAgICAgICAgICAgICAgICAgICBbInR5cGUiXSA9IGdnLlRZUEVfRFdPUkQNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIFsyXSA9IHsNCiAgICAgICAgICAgICAgICAgICAgWyJhZGRyZXNzIl0gPSBoZWFkZXJfdGFibGVbNl0uYWRkcmVzcywNCiAgICAgICAgICAgICAgICAgICAgWyJlZGl0Il0gPSB2ZXJzaW9uWzJdLA0KICAgICAgICAgICAgICAgICAgICBbInR5cGUiXSA9IGdnLlRZUEVfRFdPUkQNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIGVuZA0KICAgICAgICBsb2NhbCBoZWFkZXJfdmFsdWVzID0gZ2cuZ2V0VmFsdWVzKGhlYWRlcl90YWJsZSkNCiAgICAgICAgaWYgaGVhZGVyX3ZhbHVlc1s2XS52YWx1ZSA9PSAyNjQgb3IgaGVhZGVyX3ZhbHVlc1s2XS52YWx1ZSA9PSAyNzIgb3IgaGVhZGVyX3ZhbHVlc1s2XS52YWx1ZSA9PSAyNTYgdGhlbg0KICAgICAgICBlbHNlDQogICAgICAgICAgICBsb2NhbCB2ZXJzaW9uID0gbWV0YWRhdGFEdW1wZXIuZ2V0VmVyc2lvbigpDQogICAgICAgICAgICBoZWFkZXJfdmFsdWVzWzVdLnZhbHVlID0gdmVyc2lvblsxXQ0KICAgICAgICAgICAgaGVhZGVyX3ZhbHVlc1s2XS52YWx1ZSA9IHZlcnNpb25bMl0NCiAgICAgICAgICAgIGFkZHJlc3NfZWRpdF90YWJsZV8zID0gew0KICAgICAgICAgICAgICAgIFsxXSA9IHsNCiAgICAgICAgICAgICAgICAgICAgWyJhZGRyZXNzIl0gPSBoZWFkZXJfdGFibGVbNV0uYWRkcmVzcywNCiAgICAgICAgICAgICAgICAgICAgWyJlZGl0Il0gPSB2ZXJzaW9uWzFdLA0KICAgICAgICAgICAgICAgICAgICBbInR5cGUiXSA9IGdnLlRZUEVfRFdPUkQNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIFsyXSA9IHsNCiAgICAgICAgICAgICAgICAgICAgWyJhZGRyZXNzIl0gPSBoZWFkZXJfdGFibGVbNl0uYWRkcmVzcywNCiAgICAgICAgICAgICAgICAgICAgWyJlZGl0Il0gPSB2ZXJzaW9uWzJdLA0KICAgICAgICAgICAgICAgICAgICBbInR5cGUiXSA9IGdnLlRZUEVfRFdPUkQNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIGVuZA0KICAgICAgICBpZiBhZGRyZXNzX2VkaXRfdGFibGVfMSB0aGVuDQogICAgICAgICAgICBhZGRyZXNzX2VkaXRfdGFibGUgPSBhZGRyZXNzX2VkaXRfdGFibGVfMQ0KICAgICAgICAgICAgbWV0YWRhdGFEdW1wZXIud3JpdGVWYWx1ZXMoKQ0KICAgICAgICBlbmQNCiAgICAgICAgaWYgYWRkcmVzc19lZGl0X3RhYmxlXzIgdGhlbg0KICAgICAgICAgICAgYWRkcmVzc19lZGl0X3RhYmxlID0gYWRkcmVzc19lZGl0X3RhYmxlXzINCiAgICAgICAgICAgIG1ldGFkYXRhRHVtcGVyLndyaXRlVmFsdWVzKCkNCiAgICAgICAgZW5kDQogICAgICAgIGlmIGFkZHJlc3NfZWRpdF90YWJsZV8zIHRoZW4NCiAgICAgICAgICAgIGFkZHJlc3NfZWRpdF90YWJsZSA9IGFkZHJlc3NfZWRpdF90YWJsZV8zDQogICAgICAgICAgICBtZXRhZGF0YUR1bXBlci53cml0ZVZhbHVlcygpDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJbWV0YWRhdGFEdW1wZXIubWV0aG9kT25lKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIG1ldGhvZE9uZSA9IGZ1bmN0aW9uKCkNCiAgICAgICAgd2hpbGUgKG5pbCkgZG8NCiAgICAgICAgICAgIGxvY2FsIG1ldGhvZE9uZVZhbCA9IHt9DQogICAgICAgICAgICBpZiAobWV0aG9kT25lVmFsLm1ldGhvZE9uZVZhbCkgdGhlbg0KICAgICAgICAgICAgICAgIG1ldGhvZE9uZVZhbC5tZXRob2RPbmVWYWwgPSAobWV0aG9kT25lVmFsLm1ldGhvZE9uZVZhbChtZXRob2RPbmVWYWwpKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBnZy50b2FzdChzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gUnVubmluZyBzZWFyY2ggbWV0aG9kIDEgZm9yIGdsb2JhbC1tZXRhZGF0YS5kYXQg4oS577iPIikNCiAgICAgICAgZ2cuY2xlYXJSZXN1bHRzKCkNCiAgICAgICAgZ2cuc2VhcmNoTnVtYmVyKCJBRmg7MUJoO0IxaDtGQWg6OjUiLCBnZy5UWVBFX0JZVEUsIGZhbHNlLCBuaWwsIG5pbCwgbmlsLCAxKQ0KICAgICAgICBsb2NhbCBtZXRhX3N0YXJ0ID0gZ2cuZ2V0UmVzdWx0cygxKQ0KICAgICAgICBpZiBnZy5nZXRSZXN1bHRzQ291bnQoKSA9PSAwIHRoZW4NCiAgICAgICAgICAgIG1ldGFkYXRhRHVtcGVyLm1ldGhvZFR3bygpDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIG1ldGFkYXRhRHVtcGVyLmdtX2R1bXBlZCA9IHRydWUNCiAgICAgICAgICAgIGdnLmNsZWFyUmVzdWx0cygpDQogICAgICAgICAgICByYW5nZV9kYXRhID0gbWV0YWRhdGFEdW1wZXIuZ2V0UmFuZ2VzKG1ldGFfc3RhcnRbMV0uYWRkcmVzcykNCiAgICAgICAgICAgIG1ldGFkYXRhRHVtcGVyLmR1bXBNZXRhKG1ldGFfc3RhcnRbMV0uYWRkcmVzcywgcmFuZ2VfZGF0YVsyXSkNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCgltZXRhZGF0YUR1bXBlci5tZXRob2RUd28oKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgbWV0aG9kVHdvID0gZnVuY3Rpb24oKQ0KICAgICAgICB3aGlsZSAobmlsKSBkbw0KICAgICAgICAgICAgbG9jYWwgbWV0aG9kVHdvVmFsID0ge30NCiAgICAgICAgICAgIGlmIChtZXRob2RUd29WYWwubWV0aG9kVHdvVmFsKSB0aGVuDQogICAgICAgICAgICAgICAgbWV0aG9kVHdvVmFsLm1ldGhvZFR3b1ZhbCA9IChtZXRob2RUd29WYWwubWV0aG9kVHdvVmFsKG1ldGhvZFR3b1ZhbCkpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGdnLnRvYXN0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBSdW5uaW5nIHNlYXJjaCBtZXRob2QgMiBmb3IgZ2xvYmFsLW1ldGFkYXRhLmRhdCDihLnvuI8iKQ0KICAgICAgICBnZy5jbGVhclJlc3VsdHMoKQ0KICAgICAgICBnZy5zZWFyY2hOdW1iZXIoIjB+MjQ7MjU2fjI3Mjo6NSIsIGdnLlRZUEVfRFdPUkQpDQogICAgICAgIGdnLnJlZmluZU51bWJlcigiMjQiLCBnZy5UWVBFX0RXT1JEKQ0KICAgICAgICBsb2NhbCBydGFibGUgPSBnZy5nZXRSZXN1bHRzKGdnLmdldFJlc3VsdHNDb3VudCgpKQ0KICAgICAgICBnZy5jbGVhclJlc3VsdHMoKQ0KICAgICAgICByZXN1bHRzID0ge30NCiAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMocnRhYmxlKSBkbw0KICAgICAgICAgICAgbG9jYWwgc3RhcnRfYWRkcmVzcyA9IHYuYWRkcmVzcw0KICAgICAgICAgICAgbG9jYWwgY3VycmVudF9hZGRyZXNzID0gdi5hZGRyZXNzDQogICAgICAgICAgICBsb2NhbCBlbmRfYWRkcmVzcyA9IHN0YXJ0X2FkZHJlc3MgKyA0NA0KICAgICAgICAgICAgbG9jYWwgdmFsdWVfdGFibGUgPSB7fQ0KICAgICAgICAgICAgbG9jYWwgdGluZGV4ID0gMQ0KICAgICAgICAgICAgcmVwZWF0DQogICAgICAgICAgICAgICAgdmFsdWVfdGFibGVbdGluZGV4XSA9IHt9DQogICAgICAgICAgICAgICAgdmFsdWVfdGFibGVbdGluZGV4XS5hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzDQogICAgICAgICAgICAgICAgdmFsdWVfdGFibGVbdGluZGV4XS5mbGFncyA9IGdnLlRZUEVfRFdPUkQNCiAgICAgICAgICAgICAgICBjdXJyZW50X2FkZHJlc3MgPSBjdXJyZW50X2FkZHJlc3MgKyA0DQogICAgICAgICAgICAgICAgdGluZGV4ID0gdGluZGV4ICsgMQ0KICAgICAgICAgICAgdW50aWwgKGN1cnJlbnRfYWRkcmVzcyA9PSBlbmRfYWRkcmVzcykNCiAgICAgICAgICAgIHZhbHVlX3RhYmxlID0gZ2cuZ2V0VmFsdWVzKHZhbHVlX3RhYmxlKQ0KICAgICAgICAgICAgaWYgdmFsdWVfdGFibGVbM10udmFsdWUgPiB2YWx1ZV90YWJsZVsyXS52YWx1ZSBhbmQgDQoJCQkJdmFsdWVfdGFibGVbNF0udmFsdWUgPiB2YWx1ZV90YWJsZVszXS52YWx1ZSBhbmQNCiAgICAgICAgICAgICAgICB2YWx1ZV90YWJsZVs1XS52YWx1ZSA+IHZhbHVlX3RhYmxlWzRdLnZhbHVlIGFuZCANCgkJCQl2YWx1ZV90YWJsZVs2XS52YWx1ZSA+IHZhbHVlX3RhYmxlWzVdLnZhbHVlIGFuZA0KICAgICAgICAgICAgICAgIHZhbHVlX3RhYmxlWzddLnZhbHVlID4gdmFsdWVfdGFibGVbNl0udmFsdWUgYW5kIA0KCQkJCXZhbHVlX3RhYmxlWzhdLnZhbHVlID4gdmFsdWVfdGFibGVbN10udmFsdWUgYW5kDQogICAgICAgICAgICAgICAgdmFsdWVfdGFibGVbOV0udmFsdWUgPCB2YWx1ZV90YWJsZVs4XS52YWx1ZSBhbmQgDQoJCQkJdmFsdWVfdGFibGVbMTBdLnZhbHVlID4gdmFsdWVfdGFibGVbOV0udmFsdWUgdGhlbg0KICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChyZXN1bHRzLCBzdGFydF9hZGRyZXNzKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBpZiAjcmVzdWx0cyA9PSAxIHRoZW4NCiAgICAgICAgICAgIG1ldGFkYXRhRHVtcGVyLmdtX2R1bXBlZCA9IHRydWUNCiAgICAgICAgICAgIGxvY2FsIG1ldGFfc3RhcnQgPSByZXN1bHRzWzFdIC0gNA0KICAgICAgICAgICAgcmFuZ2VfZGF0YSA9IG1ldGFkYXRhRHVtcGVyLmdldFJhbmdlcyhtZXRhX3N0YXJ0KQ0KICAgICAgICAgICAgbWV0YWRhdGFEdW1wZXIuY2hlY2tIZWFkZXIobWV0YV9zdGFydCkNCiAgICAgICAgICAgIG1ldGFkYXRhRHVtcGVyLmR1bXBNZXRhKG1ldGFfc3RhcnQsIHJhbmdlX2RhdGFbMl0pDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIG1ldGFkYXRhRHVtcGVyLm1ldGhvZFRocmVlKCkNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCgltZXRhZGF0YUR1bXBlci5tZXRob2RUaHJlZSgpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBtZXRob2RUaHJlZSA9IGZ1bmN0aW9uKCkNCiAgICAgICAgd2hpbGUgKG5pbCkgZG8NCiAgICAgICAgICAgIGxvY2FsIG1ldGhvZFRocmVlVmFsID0ge30NCiAgICAgICAgICAgIGlmIChtZXRob2RUaHJlZVZhbC5tZXRob2RUaHJlZVZhbCkgdGhlbg0KICAgICAgICAgICAgICAgIG1ldGhvZFRocmVlVmFsLm1ldGhvZFRocmVlVmFsID0gKG1ldGhvZFRocmVlVmFsLm1ldGhvZFRocmVlVmFsKG1ldGhvZFRocmVlVmFsKSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZ2cudG9hc3Qoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIFJ1bm5pbmcgc2VhcmNoIG1ldGhvZCAzIGZvciBnbG9iYWwtbWV0YWRhdGEuZGF0IOKEue+4jyIpDQogICAgICAgIGdnLmNsZWFyUmVzdWx0cygpDQogICAgICAgIGdnLnNlYXJjaE51bWJlcigiMjdoOzI4aDsyOWg7MkNoOzJEaDsyRWg7MkZoOjo3IiwgZ2cuVFlQRV9CWVRFLCBmYWxzZSwgbmlsLCBuaWwsIG5pbCwgMSkNCiAgICAgICAgbG9jYWwgc20xID0gZ2cuZ2V0UmVzdWx0cygxKQ0KICAgICAgICBpZiBnZy5nZXRSZXN1bHRzQ291bnQoKSA9PSAwIHRoZW4NCiAgICAgICAgICAgIGdnLmFsZXJ0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBObyByZXN1bHRzIOKEue+4j1xuXG5Ucnkgb3RoZXIgbWV0aG9kcyBpZiB5b3UgaGF2ZSBub3QgYWxyZWFkeS4iKQ0KICAgICAgICBlbHNlDQogICAgICAgICAgICBtZXRhZGF0YUR1bXBlci5nbV9kdW1wZWQgPSB0cnVlDQogICAgICAgICAgICBnZy5jbGVhclJlc3VsdHMoKQ0KICAgICAgICAgICAgcmFuZ2VfZGF0YSA9IG1ldGFkYXRhRHVtcGVyLmdldFJhbmdlcyhzbTFbMV0uYWRkcmVzcykNCiAgICAgICAgICAgIHRydWVfc3RhcnQgPSBtZXRhZGF0YUR1bXBlci5nZXRNZXRhU3RhcnQocmFuZ2VfZGF0YVsxXSkNCiAgICAgICAgICAgIG1ldGFkYXRhRHVtcGVyLmNoZWNrSGVhZGVyKHRydWVfc3RhcnQpDQogICAgICAgICAgICBtZXRhZGF0YUR1bXBlci5kdW1wTWV0YSh0cnVlX3N0YXJ0LCByYW5nZV9kYXRhWzJdKQ0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCW1ldGFkYXRhRHVtcGVyLmdldE1ldGFTdGFydCgpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBnZXRNZXRhU3RhcnQgPSBmdW5jdGlvbihyYW5nZV9zdGFydCkNCiAgICAgICAgd2hpbGUgKG5pbCkgZG8NCiAgICAgICAgICAgIGxvY2FsIGdldE1ldGFTdGFydFZhbCA9IHt9DQogICAgICAgICAgICBpZiAoZ2V0TWV0YVN0YXJ0VmFsLmdldE1ldGFTdGFydFZhbCkgdGhlbg0KICAgICAgICAgICAgICAgIGdldE1ldGFTdGFydFZhbC5nZXRNZXRhU3RhcnRWYWwgPSAoZ2V0TWV0YVN0YXJ0VmFsLmdldE1ldGFTdGFydFZhbChnZXRNZXRhU3RhcnRWYWwpKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICByZXBlYXQNCiAgICAgICAgICAgIHN0YXJ0X2FkZHJlc3MgPSByYW5nZV9zdGFydA0KICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gcmFuZ2Vfc3RhcnQNCiAgICAgICAgICAgIGVuZF9hZGRyZXNzID0gc3RhcnRfYWRkcmVzcyArIDQ0DQogICAgICAgICAgICB2YWx1ZV90YWJsZSA9IHt9DQogICAgICAgICAgICB0aW5kZXggPSAxDQogICAgICAgICAgICByZXBlYXQNCiAgICAgICAgICAgICAgICB2YWx1ZV90YWJsZVt0aW5kZXhdID0ge30NCiAgICAgICAgICAgICAgICB2YWx1ZV90YWJsZVt0aW5kZXhdLmFkZHJlc3MgPSBjdXJyZW50X2FkZHJlc3MNCiAgICAgICAgICAgICAgICB2YWx1ZV90YWJsZVt0aW5kZXhdLmZsYWdzID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICAgICAgICAgIGN1cnJlbnRfYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcyArIDQNCiAgICAgICAgICAgICAgICB0aW5kZXggPSB0aW5kZXggKyAxDQogICAgICAgICAgICB1bnRpbCAoY3VycmVudF9hZGRyZXNzID09IGVuZF9hZGRyZXNzKQ0KICAgICAgICAgICAgdmFsdWVfdGFibGUgPSBnZy5nZXRWYWx1ZXModmFsdWVfdGFibGUpDQogICAgICAgICAgICBpZiB2YWx1ZV90YWJsZVs1XS52YWx1ZSA+IHZhbHVlX3RhYmxlWzRdLnZhbHVlIGFuZCANCgkJCQl2YWx1ZV90YWJsZVs0XS52YWx1ZSA+IDAgYW5kIA0KCQkJCXZhbHVlX3RhYmxlWzVdLnZhbHVlID4gMCBhbmQNCiAgICAgICAgICAgICAgICB2YWx1ZV90YWJsZVs2XS52YWx1ZSA+IHZhbHVlX3RhYmxlWzVdLnZhbHVlIGFuZCANCgkJCQl2YWx1ZV90YWJsZVs1XS52YWx1ZSA+IDAgYW5kIA0KCQkJCXZhbHVlX3RhYmxlWzZdLnZhbHVlID4gMCB0aGVuDQogICAgICAgICAgICAgICAgbWV0YV9mb3VuZCA9IHRydWUNCiAgICAgICAgICAgICAgICByZXR1cm4gbWV0YWRhdGFEdW1wZXIuaGV4X28ocmFuZ2Vfc3RhcnQpDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgcmFuZ2Vfc3RhcnQgPSByYW5nZV9zdGFydCArIDB4MTAwMDANCiAgICAgICAgICAgIGVuZA0KICAgICAgICB1bnRpbCAobWV0YV9mb3VuZCA9PSB0cnVlKQ0KICAgIGVuZCwNCiAgICBoZXhfbyA9IGZ1bmN0aW9uKG4pDQogICAgICAgIHJldHVybiAiMHgiIC4uIHN0cmluZy51cHBlcihzdHJpbmcuZm9ybWF0KCIleCIsIG4pKQ0KICAgIGVuZCwNCiAgICBoZXhueCA9IGZ1bmN0aW9uKG4pDQogICAgICAgIHJldHVybiBzdHJpbmcuZm9ybWF0KCIlWCIsIG4pDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCgltZXRhZGF0YUR1bXBlci5kdW1wTWV0YSgpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBkdW1wTWV0YSA9IGZ1bmN0aW9uKHJhbmdlX3N0YXJ0LCByYW5nZV9lbmQpDQogICAgICAgIHdoaWxlIChuaWwpIGRvDQogICAgICAgICAgICBsb2NhbCBkdW1wTWV0YVZhbCA9IHt9DQogICAgICAgICAgICBpZiAoZHVtcE1ldGFWYWwuZHVtcE1ldGFWYWwpIHRoZW4NCiAgICAgICAgICAgICAgICBkdW1wTWV0YVZhbC5kdW1wTWV0YVZhbCA9IChkdW1wTWV0YVZhbC5kdW1wTWV0YVZhbChkdW1wTWV0YVZhbCkpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGdnLmR1bXBNZW1vcnkobWV0YWRhdGFEdW1wZXIuaGV4X28ocmFuZ2Vfc3RhcnQpLCBtZXRhZGF0YUR1bXBlci5oZXhfbyhyYW5nZV9lbmQpLA0KICAgICAgICAgICAgZGF0YVBhdGggLi4gZ2FtZV9wYXRoIC4uICIvZHVtcC8iLCBnZy5EVU1QX1NLSVBfU1lTVEVNX0xJQlMpDQogICAgICAgIGxvY2FsIGZpbGUgPSBpby5vcGVuKGRhdGFQYXRoIC4uIGdhbWVfcGF0aCAuLiAiL2R1bXAvIiAuLiBnZy5nZXRUYXJnZXRQYWNrYWdlKCkgLi4gIi0iIC4uIG1ldGFkYXRhRHVtcGVyLmhleG54KHJhbmdlX3N0YXJ0KSAuLiAiLSIgLi4gbWV0YWRhdGFEdW1wZXIuaGV4bngocmFuZ2VfZW5kKSAuLiAiLmJpbiIsICJyIikNCiAgICAgICAgaWYgZmlsZSA9PSBuaWwgdGhlbg0KICAgICAgICAgICAgOjpjaG9vc2VfZmlsZTo6DQogICAgICAgICAgICBnZy5hbGVydChzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gQWRkaXRpb25hbCBEYXRhIER1bXBlZCDihLnvuI9cblxuVGhlIGZpbGUgbWF5IG5lZWQgdG8gYmUgdHJpbW1lZCwgc2VsZWN0IHRoZSBtb3N0IHJlY2VudCBiaW4gZmlsZSBpbiB0aGUgZGVmYXVsdCBkaXJlY3RvcnkuIikNCiAgICAgICAgICAgIGxvY2FsIGJpbl9maWxlbmFtZSA9IGdnLnByb21wdCh7c2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIFNlbGVjdCBOZXdlc3QgLmJpbiBGaWxlIOKEue+4jyJ9LCB7DQogICAgICAgICAgICAgICAgWzFdID0gZGF0YVBhdGggLi4gZ2FtZV9wYXRoIC4uICIvZHVtcC8iDQogICAgICAgICAgICB9LCB7DQogICAgICAgICAgICAgICAgWzFdID0gImZpbGUiDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgaWYgYmluX2ZpbGVuYW1lID09IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgZ290byBjaG9vc2VfZmlsZQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBzdHJpbmcuZmluZChiaW5fZmlsZW5hbWVbMV0sICIlLmJpbiIpIHRoZW4NCiAgICAgICAgICAgICAgICBsb2NhbCBmaWxlID0gYXNzZXJ0KGlvLm9wZW4oYmluX2ZpbGVuYW1lWzFdLCAiciIpKQ0KICAgICAgICAgICAgICAgIGxvY2FsIGNvbnRlbnQgPSBmaWxlOnJlYWQoIiphIikNCiAgICAgICAgICAgICAgICBmaWxlOmNsb3NlKCkNCiAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZChjb250ZW50LCAiXlx4QUZceDFCXHhCMVx4RkEiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHRyaW1tZWRfY29udGVudCA9IGNvbnRlbnQNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIHRyaW1tZWRfY29udGVudCA9IHN0cmluZy5nc3ViKGNvbnRlbnQsICIuKyhceEFGXHgxQlx4QjFceEZBLispIiwgIiUxIikNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBsb2NhbCBmaWxlID0gaW8ub3BlbihkYXRhUGF0aCAuLiBnYW1lX3BhdGggLi4gIi9kdW1wL2dsb2JhbC1tZXRhZGF0YS5kYXQiLCAidysiKQ0KICAgICAgICAgICAgICAgIGZpbGU6d3JpdGUodHJpbW1lZF9jb250ZW50KQ0KICAgICAgICAgICAgICAgIGZpbGU6Y2xvc2UoKQ0KICAgICAgICAgICAgICAgIGxvY2FsIGZpbGUgPSBpby5vcGVuKGRhdGFQYXRoIC4uIGdhbWVfcGF0aCAuLiAiL2R1bXAvZ2xvYmFsLW1ldGFkYXRhIGR1bXAgYWRkcmVzcy50eHQiLCAidysiKQ0KICAgICAgICAgICAgICAgIGZpbGU6d3JpdGUobWV0YWRhdGFEdW1wZXIuaGV4bngocmFuZ2Vfc3RhcnQpKQ0KICAgICAgICAgICAgICAgIGZpbGU6Y2xvc2UoKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBnZy5hbGVydChzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gRmlsZSBUcmltbWVkIOKEue+4j1xuXG5TYXZlZCB0bzogIiAuLiBkYXRhUGF0aCAuLiBnYW1lX3BhdGggLi4gIi9kdW1wL2dsb2JhbC1tZXRhZGF0YS5kYXQgIikNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgbG9jYWwgbWV0YV9jb250ZW50ID0gZmlsZTpyZWFkKCIqYSIpDQogICAgICAgICAgICBmaWxlOmNsb3NlKCkNCiAgICAgICAgICAgIGxvY2FsIGZpbGUgPSBpby5vcGVuKGRhdGFQYXRoIC4uIGdhbWVfcGF0aCAuLiAiL2R1bXAvZ2xvYmFsLW1ldGFkYXRhLmRhdCIsICJ3KyIpDQogICAgICAgICAgICBmaWxlOndyaXRlKG1ldGFfY29udGVudCkNCiAgICAgICAgICAgIGZpbGU6Y2xvc2UoKQ0KICAgICAgICAgICAgbG9jYWwgZmlsZSA9IGlvLm9wZW4oZGF0YVBhdGggLi4gZ2FtZV9wYXRoIC4uICIvZHVtcC9nbG9iYWwtbWV0YWRhdGEgZHVtcCBhZGRyZXNzLnR4dCIsICJ3KyIpDQogICAgICAgICAgICBmaWxlOndyaXRlKG1ldGFkYXRhRHVtcGVyLmhleG54KHJhbmdlX3N0YXJ0KSkNCiAgICAgICAgICAgIGZpbGU6Y2xvc2UoKQ0KICAgICAgICAgICAgbWV0YWRhdGFEdW1wZXIub3ZlcndyaXRlVmFsdWVzKCkNCiAgICAgICAgICAgIGdnLmFsZXJ0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBEYXRhIER1bXBlZCDihLnvuI9cblxuU2F2ZWQgdG86ICIgLi4gZGF0YVBhdGggLi4gZ2FtZV9wYXRoIC4uICIvZHVtcC9nbG9iYWwtbWV0YWRhdGEuZGF0ICIpDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJbWV0YWRhdGFEdW1wZXIuZ2V0V3JpdGVMb2NhdGlvbigpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBnZXRXcml0ZUxvY2F0aW9uID0gZnVuY3Rpb24oKQ0KICAgICAgICB3aGlsZSAobmlsKSBkbw0KICAgICAgICAgICAgbG9jYWwgZ2V0V3JpdGVMb2NhdGlvblZhbCA9IHt9DQogICAgICAgICAgICBpZiAoZ2V0V3JpdGVMb2NhdGlvblZhbC5nZXRXcml0ZUxvY2F0aW9uVmFsKSB0aGVuDQogICAgICAgICAgICAgICAgZ2V0V3JpdGVMb2NhdGlvblZhbC5nZXRXcml0ZUxvY2F0aW9uVmFsID0gKGdldFdyaXRlTG9jYXRpb25WYWwuZ2V0V3JpdGVMb2NhdGlvblZhbChnZXRXcml0ZUxvY2F0aW9uVmFsKSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgaWYgd3JpdGVfbG9jYXRpb24gPT0gbmlsIHRoZW4NCiAgICAgICAgICAgIHdyaXRlX2xvY2F0aW9uID0gcmFuZ2VfZGF0YVsyXSAtIDE2DQogICAgICAgIGVuZA0KICAgICAgICByZXR1cm4gd3JpdGVfbG9jYXRpb24NCiAgICBlbmQsDQogICAgb3ZlcndyaXRlVmFsdWVzID0gZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCB3bCA9IG1ldGFkYXRhRHVtcGVyLmdldFdyaXRlTG9jYXRpb24oKQ0KICAgICAgICBhZGRyZXNzX2VkaXRfdGFibGUgPSB7DQogICAgICAgICAgICBbMV0gPSB7DQogICAgICAgICAgICAgICAgWyJhZGRyZXNzIl0gPSB3bCwNCiAgICAgICAgICAgICAgICBbImVkaXQiXSA9IDAsDQogICAgICAgICAgICAgICAgWyJ0eXBlIl0gPSBnZy5UWVBFX0RXT1JEDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgWzJdID0gew0KICAgICAgICAgICAgICAgIFsiYWRkcmVzcyJdID0gd2wgKyA0LA0KICAgICAgICAgICAgICAgIFsiZWRpdCJdID0gMCwNCiAgICAgICAgICAgICAgICBbInR5cGUiXSA9IGdnLlRZUEVfRFdPUkQNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBbM10gPSB7DQogICAgICAgICAgICAgICAgWyJhZGRyZXNzIl0gPSB3bCArIDgsDQogICAgICAgICAgICAgICAgWyJlZGl0Il0gPSAwLA0KICAgICAgICAgICAgICAgIFsidHlwZSJdID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIG1ldGFkYXRhRHVtcGVyLndyaXRlVmFsdWVzKCkNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCW1ldGFkYXRhRHVtcGVyLndyaXRlVmFsdWVzKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIHdyaXRlVmFsdWVzID0gZnVuY3Rpb24oKQ0KICAgICAgICB3aGlsZSAobmlsKSBkbw0KICAgICAgICAgICAgbG9jYWwgd3JpdGVWYWx1ZXNWYWwgPSB7fQ0KICAgICAgICAgICAgaWYgKHdyaXRlVmFsdWVzVmFsLndyaXRlVmFsdWVzVmFsKSB0aGVuDQogICAgICAgICAgICAgICAgd3JpdGVWYWx1ZXNWYWwud3JpdGVWYWx1ZXNWYWwgPSAod3JpdGVWYWx1ZXNWYWwud3JpdGVWYWx1ZXNWYWwod3JpdGVWYWx1ZXNWYWwpKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBsb2NhbCB3bCA9IG1ldGFkYXRhRHVtcGVyLmdldFdyaXRlTG9jYXRpb24oKQ0KICAgICAgICBsb2NhbCB0ZW1wX3RhYmxlID0ge30NCiAgICAgICAgaWYgI2FkZHJlc3NfZWRpdF90YWJsZSA9PSA0IHRoZW4NCiAgICAgICAgICAgIHRlbXBfdGFibGVbMV0gPSB7fQ0KICAgICAgICAgICAgdGVtcF90YWJsZVsxXS5hZGRyZXNzID0gd2wNCiAgICAgICAgICAgIHRlbXBfdGFibGVbMV0uZmxhZ3MgPSBhZGRyZXNzX2VkaXRfdGFibGVbMV0udHlwZQ0KICAgICAgICAgICAgdGVtcF90YWJsZVsxXS52YWx1ZSA9IGFkZHJlc3NfZWRpdF90YWJsZVsxXS5lZGl0DQogICAgICAgICAgICB0ZW1wX3RhYmxlWzJdID0ge30NCiAgICAgICAgICAgIHRlbXBfdGFibGVbMl0uYWRkcmVzcyA9IHdsICsgMQ0KICAgICAgICAgICAgdGVtcF90YWJsZVsyXS5mbGFncyA9IGFkZHJlc3NfZWRpdF90YWJsZVsyXS50eXBlDQogICAgICAgICAgICB0ZW1wX3RhYmxlWzJdLnZhbHVlID0gYWRkcmVzc19lZGl0X3RhYmxlWzJdLmVkaXQNCiAgICAgICAgICAgIHRlbXBfdGFibGVbM10gPSB7fQ0KICAgICAgICAgICAgdGVtcF90YWJsZVszXS5hZGRyZXNzID0gd2wgKyAyDQogICAgICAgICAgICB0ZW1wX3RhYmxlWzNdLmZsYWdzID0gYWRkcmVzc19lZGl0X3RhYmxlWzNdLnR5cGUNCiAgICAgICAgICAgIHRlbXBfdGFibGVbM10udmFsdWUgPSBhZGRyZXNzX2VkaXRfdGFibGVbM10uZWRpdA0KICAgICAgICAgICAgdGVtcF90YWJsZVs0XSA9IHt9DQogICAgICAgICAgICB0ZW1wX3RhYmxlWzRdLmFkZHJlc3MgPSB3bCArIDMNCiAgICAgICAgICAgIHRlbXBfdGFibGVbNF0uZmxhZ3MgPSBhZGRyZXNzX2VkaXRfdGFibGVbNF0udHlwZQ0KICAgICAgICAgICAgdGVtcF90YWJsZVs0XS52YWx1ZSA9IGFkZHJlc3NfZWRpdF90YWJsZVs0XS5lZGl0DQogICAgICAgICAgICBnZy5zZXRWYWx1ZXModGVtcF90YWJsZSkNCiAgICAgICAgICAgIGdnLmNvcHlNZW1vcnkod2wsIGFkZHJlc3NfZWRpdF90YWJsZVsxXVsiYWRkcmVzcyJdLCA0KQ0KICAgICAgICAgICAgdGVtcF90YWJsZVsxXS52YWx1ZSA9IDANCiAgICAgICAgICAgIHRlbXBfdGFibGVbMl0udmFsdWUgPSAwDQogICAgICAgICAgICB0ZW1wX3RhYmxlWzNdLnZhbHVlID0gMA0KICAgICAgICAgICAgdGVtcF90YWJsZVs0XS52YWx1ZSA9IDANCiAgICAgICAgICAgIGdnLnNldFZhbHVlcyh0ZW1wX3RhYmxlKQ0KICAgICAgICAgICAgZ2cuc2V0VmFsdWVzKHRlbXBfdGFibGUpDQogICAgICAgIGVuZA0KICAgICAgICBpZiAjYWRkcmVzc19lZGl0X3RhYmxlID09IDIgdGhlbg0KICAgICAgICAgICAgdGVtcF90YWJsZVsxXSA9IHt9DQogICAgICAgICAgICB0ZW1wX3RhYmxlWzFdLmFkZHJlc3MgPSB3bCArIDQNCiAgICAgICAgICAgIHRlbXBfdGFibGVbMV0uZmxhZ3MgPSBhZGRyZXNzX2VkaXRfdGFibGVbMV0udHlwZQ0KICAgICAgICAgICAgdGVtcF90YWJsZVsxXS52YWx1ZSA9IGFkZHJlc3NfZWRpdF90YWJsZVsxXS5lZGl0DQogICAgICAgICAgICB0ZW1wX3RhYmxlWzJdID0ge30NCiAgICAgICAgICAgIHRlbXBfdGFibGVbMl0uYWRkcmVzcyA9IHdsICsgOA0KICAgICAgICAgICAgdGVtcF90YWJsZVsyXS5mbGFncyA9IGFkZHJlc3NfZWRpdF90YWJsZVsyXS50eXBlDQogICAgICAgICAgICB0ZW1wX3RhYmxlWzJdLnZhbHVlID0gYWRkcmVzc19lZGl0X3RhYmxlWzJdLmVkaXQNCiAgICAgICAgICAgIGdnLnNldFZhbHVlcyh0ZW1wX3RhYmxlKQ0KICAgICAgICAgICAgZ2cuY29weU1lbW9yeShtZXRhZGF0YUR1bXBlci5nZXRXcml0ZUxvY2F0aW9uKCkgKyA0LCBhZGRyZXNzX2VkaXRfdGFibGVbMV0uYWRkcmVzcywgOCkNCiAgICAgICAgICAgIHRlbXBfdGFibGVbMV0udmFsdWUgPSAwDQogICAgICAgICAgICB0ZW1wX3RhYmxlWzJdLnZhbHVlID0gMA0KICAgICAgICAgICAgZ2cuc2V0VmFsdWVzKHRlbXBfdGFibGUpDQogICAgICAgICAgICBnZy5zZXRWYWx1ZXModGVtcF90YWJsZSkNCiAgICAgICAgZW5kDQogICAgICAgIGlmICNhZGRyZXNzX2VkaXRfdGFibGUgPT0gMyB0aGVuDQogICAgICAgICAgICB0ZW1wX3RhYmxlWzFdID0ge30NCiAgICAgICAgICAgIHRlbXBfdGFibGVbMV0uYWRkcmVzcyA9IHdsICsgNA0KICAgICAgICAgICAgdGVtcF90YWJsZVsxXS5mbGFncyA9IGFkZHJlc3NfZWRpdF90YWJsZVsxXS50eXBlDQogICAgICAgICAgICB0ZW1wX3RhYmxlWzFdLnZhbHVlID0gYWRkcmVzc19lZGl0X3RhYmxlWzFdLmVkaXQNCiAgICAgICAgICAgIHRlbXBfdGFibGVbMl0gPSB7fQ0KICAgICAgICAgICAgdGVtcF90YWJsZVsyXS5hZGRyZXNzID0gd2wgKyA4DQogICAgICAgICAgICB0ZW1wX3RhYmxlWzJdLmZsYWdzID0gYWRkcmVzc19lZGl0X3RhYmxlWzJdLnR5cGUNCiAgICAgICAgICAgIHRlbXBfdGFibGVbMl0udmFsdWUgPSBhZGRyZXNzX2VkaXRfdGFibGVbMl0uZWRpdA0KICAgICAgICAgICAgdGVtcF90YWJsZVszXSA9IHt9DQogICAgICAgICAgICB0ZW1wX3RhYmxlWzNdLmFkZHJlc3MgPSB3bCArIDEyDQogICAgICAgICAgICB0ZW1wX3RhYmxlWzNdLmZsYWdzID0gYWRkcmVzc19lZGl0X3RhYmxlWzJdLnR5cGUNCiAgICAgICAgICAgIHRlbXBfdGFibGVbM10udmFsdWUgPSBhZGRyZXNzX2VkaXRfdGFibGVbMl0uZWRpdA0KICAgICAgICAgICAgZ2cuc2V0VmFsdWVzKHRlbXBfdGFibGUpDQogICAgICAgICAgICBnZy5jb3B5TWVtb3J5KG1ldGFkYXRhRHVtcGVyLmdldFdyaXRlTG9jYXRpb24oKSArIDQsIGFkZHJlc3NfZWRpdF90YWJsZVsxXS5hZGRyZXNzLCAxMikNCiAgICAgICAgICAgIGdnLnNldFZhbHVlcyh0ZW1wX3RhYmxlKQ0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCW1ldGFkYXRhRHVtcGVyLmR1bXBHbG9iYWxNZXRhZGF0YSgpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBkdW1wR2xvYmFsTWV0YWRhdGEgPSBmdW5jdGlvbigpDQogICAgICAgIHdoaWxlIChuaWwpIGRvDQogICAgICAgICAgICBsb2NhbCBkdW1wR2xvYmFsTWV0YWRhdGFWYWwgPSB7fQ0KICAgICAgICAgICAgaWYgKGR1bXBHbG9iYWxNZXRhZGF0YVZhbC5kdW1wR2xvYmFsTWV0YWRhdGFWYWwpIHRoZW4NCiAgICAgICAgICAgICAgICBkdW1wR2xvYmFsTWV0YWRhdGFWYWwuZHVtcEdsb2JhbE1ldGFkYXRhVmFsID0gKGR1bXBHbG9iYWxNZXRhZGF0YVZhbC5kdW1wR2xvYmFsTWV0YWRhdGFWYWwoZHVtcEdsb2JhbE1ldGFkYXRhVmFsKSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZ2cuc2V0UmFuZ2VzKGdnLlJFR0lPTl9DX0FMTE9DIHwgZ2cuUkVHSU9OX0NfREFUQSB8IGdnLlJFR0lPTl9DX0JTUyB8IGdnLlJFR0lPTl9PVEhFUikNCiAgICAgICAgbWV0YWRhdGFEdW1wZXIubWV0aG9kT25lKCkNCiAgICAgICAgaWYgbWV0YWRhdGFEdW1wZXIuZ21fZHVtcGVkID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgIG1ldGFkYXRhRHVtcGVyLm1ldGhvZFR3bygpDQogICAgICAgIGVuZA0KICAgICAgICBpZiBtZXRhZGF0YUR1bXBlci5nbV9kdW1wZWQgPT0gZmFsc2UgdGhlbg0KICAgICAgICAgICAgbWV0YWRhdGFEdW1wZXIubWV0aG9kVGhyZWUoKQ0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgdXZfYSA9IHt7DQogICAgICAgIFsidmVyc2lvbnMiXSA9IHsiMjAxNyIsICIyMDE4In0sDQogICAgICAgIFsiaGVhZGVycyJdID0geyIyNCIsICIyNzIifQ0KICAgIH0sIHsNCiAgICAgICAgWyJ2ZXJzaW9ucyJdID0geyIyMDE5In0sDQogICAgICAgIFsiaGVhZGVycyJdID0geyIyNCIsICIyNjQifQ0KICAgIH0sIHsNCiAgICAgICAgWyJ2ZXJzaW9ucyJdID0geyIyMDIwIn0sDQogICAgICAgIFsiaGVhZGVycyJdID0geyIyNyIsICIyNTYifQ0KICAgIH19LA0KICAgIGdtX2R1bXBlZCA9IGZhbHNlDQp9DQp0YXJnZXRfcGFja2FnZSA9IGdnLmdldFRhcmdldFBhY2thZ2UoKQ0KbWV0YWRhdGFEdW1wZXIuZHVtcEdsb2JhbE1ldGFkYXRhKCkNCg"
        },
        [12] = {
            file_name = "plugin_bc_il2cpp_edits.lua",
            file_data = "aWwyY3BwRWRpdHMgPSB7DQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWlsMmNwcEVkaXRzLmNyZWF0ZURpcmVjdG9yeSgpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBjcmVhdGVEaXJlY3RvcnkgPSBmdW5jdGlvbigpDQogICAgICAgIGRpcmVjdG9yeV9jcmVhdGVkID0gdHJ1ZQ0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhnZy5nZXRSYW5nZXNMaXN0KCkpIGRvDQogICAgICAgICAgICBpZiB2WyJlbmQiXSAtIHYuc3RhcnQgPCAxMDI0MCB0aGVuDQogICAgICAgICAgICAgICAgaWYgbm90IHN0cmluZy5maW5kKHZbIm5hbWUiXSwgImRlbGV0ZWQiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGNyZWF0ZV9zdGFydCA9IHYuc3RhcnQNCiAgICAgICAgICAgICAgICAgICAgY3JlYXRlX2VuZCA9IHZbImVuZCJdDQogICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGdnLmR1bXBNZW1vcnkoY3JlYXRlX3N0YXJ0LCBjcmVhdGVfZW5kLCBpbDJjcHBFZGl0cy5zYXZlUGF0aCwgZ2cuRFVNUF9TS0lQX1NZU1RFTV9MSUJTKQ0KICAgIGVuZCwNCiAgICBzYXZlUGF0aCA9IHBsdWdpbnNEYXRhUGF0aCAuLiAiYmFkY2FzZV9pbDJjcHBfZWRpdHNfZGF0YS8iLA0KICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC0tIEdsb2JhbCBWYXJpYWJsZXMtLQ0KICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIGNsb2NrcyA9IHsNCiAgICAgICAgWzFdID0gJ/CflaYnLA0KICAgICAgICBbMl0gPSAn8J+VmicsDQogICAgICAgIFszXSA9ICfwn5WlJywNCiAgICAgICAgWzRdID0gJ/CflZknLA0KICAgICAgICBbNV0gPSAn8J+VpCcsDQogICAgICAgIFs2XSA9ICfwn5WYJywNCiAgICAgICAgWzddID0gJ/CflaMnLA0KICAgICAgICBbOF0gPSAn8J+VlycsDQogICAgICAgIFs5XSA9ICfwn5WiJywNCiAgICAgICAgWzEwXSA9ICfwn5WWJywNCiAgICAgICAgWzExXSA9ICfwn5WhJywNCiAgICAgICAgWzEyXSA9ICfwn5WVJywNCiAgICAgICAgWzEzXSA9ICfwn5WgJywNCiAgICAgICAgWzE0XSA9ICfwn5WUJywNCiAgICAgICAgWzE1XSA9ICfwn5WfJywNCiAgICAgICAgWzE2XSA9ICfwn5WTJywNCiAgICAgICAgWzE3XSA9ICfwn5WeJywNCiAgICAgICAgWzE4XSA9ICfwn5WSJywNCiAgICAgICAgWzE5XSA9ICfwn5WdJywNCiAgICAgICAgWzIwXSA9ICfwn5WRJywNCiAgICAgICAgWzIxXSA9ICfwn5WcJywNCiAgICAgICAgWzIyXSA9ICfwn5WQJywNCiAgICAgICAgWzIzXSA9ICfwn5WnJywNCiAgICAgICAgWzI0XSA9ICfwn5WbJw0KICAgIH0sDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWlsMmNwcEVkaXRzLnRpY2tDbG9jaygpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICB0aWNrQ2xvY2sgPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIGNsb2NrX3N0cmluZyA9ICIiDQogICAgICAgIGxvY2FsIGNsb2Nrc190b19zaG93ID0gMTANCiAgICAgICAgbG9jYWwgY2xvY2tfY291bnQgPSAwDQogICAgICAgIHJlcGVhdA0KICAgICAgICAgICAgY2xvY2tfc3RyaW5nID0gY2xvY2tfc3RyaW5nIC4uIGlsMmNwcEVkaXRzLmNsb2Nrc1sxXQ0KICAgICAgICAgICAgY2xvY2tfY291bnQgPSBjbG9ja19jb3VudCArIDENCiAgICAgICAgdW50aWwgKGNsb2NrX2NvdW50ID09IGNsb2Nrc190b19zaG93KQ0KICAgICAgICB0YWJsZS5pbnNlcnQoaWwyY3BwRWRpdHMuY2xvY2tzLCAxLCBpbDJjcHBFZGl0cy5jbG9ja3NbI2lsMmNwcEVkaXRzLmNsb2Nrc10pDQogICAgICAgIHRhYmxlLnJlbW92ZShpbDJjcHBFZGl0cy5jbG9ja3MsICNpbDJjcHBFZGl0cy5jbG9ja3MpDQogICAgICAgIGdnLnRvYXN0KGNsb2NrX3N0cmluZykNCiAgICBlbmQsDQogICAgc3RyaW5nc1N0YXJ0ID0gIjEwOTsxMTU7OTk7MTExOzExNDsxMDg7MTA1Ozk4OzQ2OzEwMDsxMDg7MTA4Ozc3OzExMTsxMDA7MTE3OzEwODsxMDE6OjIwIiwNCiAgICBzdHJpbmdzRW5kID0gIjAwaDswMGg7MH5+MDswfn4wOzB+fjA7MDBoOzB+fjA7MDBoOzB+fjA7MDBoO0ZGaDtGRmg6OjEyIiwNCiAgICByZXZlcnRfdGFibGUgPSB7fSwNCiAgICBjcmVhdGVfcmV2ZXJ0X3RhYmxlID0ge30sDQogICAgY3JlYXRlX2VkaXRfdGFibGUgPSB7fSwNCiAgICBwYXJzZWRfc3RyaW5nc190YWJsZSA9IHt9LA0KICAgIHN0YXJ0ZWQgPSBmYWxzZSwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRWRpdHMuYmNfY3BwX2NoZWNrX2NmZ19maWxlKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIGJjX2NwcF9jaGVja19jZmdfZmlsZSA9IGZ1bmN0aW9uKCkNCiAgICAgICAgcmVydW4gPSBmYWxzZQ0KICAgICAgICBpZiBwY2FsbChpbDJjcHBFZGl0cy5iY19jcHBfY2hlY2tfY2ZnX2ZpbGVfZ2FtZSkgPT0gZmFsc2UgdGhlbg0KICAgICAgICAgICAgaWwyY3BwRWRpdHMuY3JlYXRlRGlyZWN0b3J5KCkNCiAgICAgICAgICAgIGxvY2FsIGZpbGUgPSBpby5vcGVuKGlsMmNwcEVkaXRzLnNhdmVQYXRoIC4uIGdnLmdldFRhcmdldFBhY2thZ2UoKSAuLiAiLmNmZyIsICJ3KyIpDQogICAgICAgICAgICBsb2NhbCBkYXRhX3N0cmluZyA9ICJpbDJjcHBFZGl0cy5zYXZlZEVkaXRzVGFibGUgPSB7fSINCiAgICAgICAgICAgIGZpbGU6d3JpdGUoZGF0YV9zdHJpbmcpDQogICAgICAgICAgICBmaWxlOmNsb3NlKCkNCiAgICAgICAgICAgIHJlcnVuID0gdHJ1ZQ0KICAgICAgICBlbmQNCiAgICAgICAgaWYgcmVydW4gPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICBpbDJjcHBFZGl0cy5iY19jcHBfY2hlY2tfY2ZnX2ZpbGUoKQ0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgYmNfY3BwX2NoZWNrX2NmZ19maWxlX2dhbWUgPSBmdW5jdGlvbigpDQogICAgICAgIGRvZmlsZShpbDJjcHBFZGl0cy5zYXZlUGF0aCAuLiBnZy5nZXRUYXJnZXRQYWNrYWdlKCkgLi4gIi5jZmciKQ0KICAgIGVuZCwNCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC0tIEdldCBHbG9iYWwgTWV0YWRhdGEgU3RyaW5nIFN0YXJ0L0VuZC0tDQogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRWRpdHMuZ2V0UmFuZ2UoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgZ2V0UmFuZ2UgPSBmdW5jdGlvbigpIC0tIGdldF9zdHJpbmdzX3N0YXJ0X2VuZA0KICAgICAgICBnZy5zZXRSYW5nZXMoZ2cuUkVHSU9OX09USEVSKQ0KICAgICAgICBnZy5zZXRWaXNpYmxlKGZhbHNlKQ0KICAgICAgICBnZy50b2FzdChzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gQ29uZmlndXJpbmcgU2NyaXB0IOKEue+4jyIpDQogICAgICAgIGdnLmNsZWFyUmVzdWx0cygpDQogICAgICAgIDo6dHJ5X2NhOjoNCiAgICAgICAgZ2cuc2VhcmNoTnVtYmVyKGlsMmNwcEVkaXRzLnN0cmluZ3NTdGFydCwgZ2cuVFlQRV9CWVRFLCBmYWxzZSwgZ2cuU0lHTl9FUVVBTCwgbmlsLCBuaWwsIDEpDQogICAgICAgIGlmIGdnLmdldFJlc3VsdHNDb3VudCgpID09IDAgdGhlbg0KICAgICAgICAgICAgZ2cuc2V0UmFuZ2VzKGdnLlJFR0lPTl9DX0FMTE9DKQ0KICAgICAgICAgICAgZ290byB0cnlfY2ENCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIHN0YXJ0X3NlYXJjaCA9IGdnLmdldFJlc3VsdHMoMSkNCiAgICAgICAgZ2cuY2xlYXJSZXN1bHRzKCkNCiAgICAgICAgcmFuZ2Vfc3RhcnQgPSBzdGFydF9zZWFyY2hbMV0uYWRkcmVzcw0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhnZy5nZXRSYW5nZXNMaXN0KCkpIGRvDQogICAgICAgICAgICBpZiB2WyJzdGFydCJdIDwgcmFuZ2Vfc3RhcnQgYW5kIHZbImVuZCJdID4gcmFuZ2Vfc3RhcnQgdGhlbg0KICAgICAgICAgICAgICAgIG1ldGFkYXRhX2VuZCA9IHZbImVuZCJdDQogICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZ2cuc2VhcmNoTnVtYmVyKGlsMmNwcEVkaXRzLnN0cmluZ3NFbmQsIGdnLlRZUEVfQllURSwgZmFsc2UsIGdnLlNJR05fRVFVQUwsIHJhbmdlX3N0YXJ0LCBuaWwsIDEpDQogICAgICAgIGxvY2FsIGVuZF9zZWFyY2ggPSBnZy5nZXRSZXN1bHRzKDEpDQogICAgICAgIHJhbmdlX2VuZCA9IGVuZF9zZWFyY2hbMV0uYWRkcmVzcw0KICAgICAgICBnZy5jbGVhclJlc3VsdHMoKQ0KICAgIGVuZCwNCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAtLSBTZWFyY2ggRnVuY3Rpb25zLS0NCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRWRpdHMuY3JlYXRlU2VhcmNoKHNlYXJjaF9zdHJpbmcpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBjcmVhdGVTZWFyY2ggPSBmdW5jdGlvbihzZWFyY2hfc3RyaW5nKQ0KICAgICAgICBieXRlX3NlYXJjaCA9ICIwOyINCiAgICAgICAgZm9yIGMgaW4gc2VhcmNoX3N0cmluZzpnbWF0Y2ggIi4iIGRvDQogICAgICAgICAgICBpZiAjc2VhcmNoX3N0cmluZyA+IDEgdGhlbg0KICAgICAgICAgICAgICAgIGJ5dGVfc2VhcmNoID0gYnl0ZV9zZWFyY2ggLi4gc3RyaW5nLmJ5dGUoYykgLi4gIjsiDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgYnl0ZV9zZWFyY2ggPSBieXRlX3NlYXJjaCAuLiBzdHJpbmcuYnl0ZShjKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBpZiBpbDJjcHBFZGl0cy5zdGFydGVkID09IGZhbHNlIHRoZW4NCiAgICAgICAgICAgIGJ5dGVfc2VhcmNoID0gYnl0ZV9zZWFyY2ggLi4gIjAiDQogICAgICAgICAgICBpbDJjcHBFZGl0cy5zdGFydGVkID0gdHJ1ZQ0KICAgICAgICBlbmQNCiAgICAgICAgaWYgI3NlYXJjaF9zdHJpbmcgPiAxIHRoZW4NCiAgICAgICAgICAgIGJ5dGVfc2VhcmNoID0gYnl0ZV9zZWFyY2ggLi4gIjo6IiAuLiAjc2VhcmNoX3N0cmluZyArIDINCiAgICAgICAgZW5kDQogICAgICAgIHJldHVybiBieXRlX3NlYXJjaA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRWRpdHMucmVmaW5lUmVzdWx0cyhzZWFyY2hfc3RyaW5nKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgcmVmaW5lUmVzdWx0cyA9IGZ1bmN0aW9uKHNlYXJjaF9zdHJpbmcpDQogICAgICAgIGxvY2FsIGZpcnN0X3NlYXJjaF9zdHJpbmcgPSAiMDsiIC4uIHN0cmluZy5ieXRlKHN0cmluZy5zdWIoc2VhcmNoX3N0cmluZywgMSwgMSkpIC4uICI6OjIiDQogICAgICAgIGdnLnJlZmluZU51bWJlcihmaXJzdF9zZWFyY2hfc3RyaW5nLCBnZy5UWVBFX0JZVEUpDQogICAgICAgIGxvY2FsIHNlY29uZF9zZWFyY2hfc3RyaW5nID0gc3RyaW5nLmJ5dGUoc3RyaW5nLnN1YihzZWFyY2hfc3RyaW5nLCAxLCAxKSkNCiAgICAgICAgZ2cucmVmaW5lTnVtYmVyKHNlY29uZF9zZWFyY2hfc3RyaW5nLCBnZy5UWVBFX0JZVEUpDQogICAgICAgIGxvY2FsIHNlYXJjaF9yZXN1bHRzID0gZ2cuZ2V0UmVzdWx0cyhnZy5nZXRSZXN1bHRzQ291bnQoKSkNCiAgICAgICAgcmV0dXJuIHNlYXJjaF9yZXN1bHRzWzFdLmFkZHJlc3MNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWlsMmNwcEVkaXRzLnNlYXJjaER1bXAoc2VhcmNoX3N0cmluZykNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIHNlYXJjaER1bXAgPSBmdW5jdGlvbihzZWFyY2hfc3RyaW5nKQ0KICAgICAgICBnZy5zZXRSYW5nZXMoZ2cuUkVHSU9OX09USEVSIHwgZ2cuUkVHSU9OX0NfQUxMT0MpDQogICAgICAgIGlmIHNlYXJjaF9zdHJpbmcgdGhlbg0KICAgICAgICAgICAgZ2cuY2xlYXJSZXN1bHRzKCkNCiAgICAgICAgICAgIGdnLnNlYXJjaE51bWJlcihpbDJjcHBFZGl0cy5jcmVhdGVTZWFyY2goc2VhcmNoX3N0cmluZyksIGdnLlRZUEVfQllURSwgZmFsc2UsIGdnLlNJR05fRVFVQUwsIHJhbmdlX3N0YXJ0LA0KICAgICAgICAgICAgICAgIHJhbmdlX2VuZCkNCiAgICAgICAgICAgIGlmIGdnLmdldFJlc3VsdHNDb3VudCgpID4gMCB0aGVuDQogICAgICAgICAgICAgICAgcmV0dXJuIGlsMmNwcEVkaXRzLnJlZmluZVJlc3VsdHMoc2VhcmNoX3N0cmluZykNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLS0gR2V0IEFsbCBNZXRob2RzIEFuZCBDbGFzc25hbWVzLS0NCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRWRpdHMuc2F2ZURhdGFCYXNlKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIHNhdmVEYXRhQmFzZSA9IGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgZmlsZSA9IGlvLm9wZW4oaWwyY3BwRWRpdHMuc2F2ZVBhdGggLi4gZ2cuZ2V0VGFyZ2V0UGFja2FnZSgpIC4uICJfIiAuLiBnZy5nZXRUYXJnZXRJbmZvKCkudmVyc2lvbkNvZGUgLi4gIl9kYi5sdWEiLCAidysiKQ0KICAgICAgICBmaWxlOndyaXRlKCJpbDJjcHBFZGl0cy5wYXJzZWRfc3RyaW5nc190YWJsZSA9ICIgLi4gdG9zdHJpbmcoaWwyY3BwRWRpdHMucGFyc2VkX3N0cmluZ3NfdGFibGUpKQ0KICAgICAgICBmaWxlOmNsb3NlKCkNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWlsMmNwcEVkaXRzLnNhdmVNZXRob2RUeXBlcygpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBzYXZlTWV0aG9kVHlwZXMgPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIGZpbGUgPSBpby5vcGVuKGlsMmNwcEVkaXRzLnNhdmVQYXRoIC4uIGdnLmdldFRhcmdldFBhY2thZ2UoKSAuLiAiXyIgLi4gZ2cuZ2V0VGFyZ2V0SW5mbygpLnZlcnNpb25Db2RlIC4uICJfbWV0aG9kX3R5cGVzLmx1YSIsICJ3KyIpDQogICAgICAgIGZpbGU6d3JpdGUoImlsMmNwcEVkaXRzLm1ldGhvZF90eXBlcyA9ICIgLi4gdG9zdHJpbmcoaWwyY3BwRWRpdHMubWV0aG9kX3R5cGVzKSkNCiAgICAgICAgZmlsZTpjbG9zZSgpDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglpbDJjcHBFZGl0cy5nZXRNZXRob2RzKG1ldGhvZF9uYW1lLCBnZXRfZmlyc3QpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBnZXRNZXRob2RzID0gZnVuY3Rpb24obWV0aG9kX25hbWUsIGdldF9maXJzdCkNCiAgICAgICAgd2hpbGUgKG5pbCkgZG8NCiAgICAgICAgICAgIGxvY2FsIGdldE1ldGhvZHNWYWwgPSB7fQ0KICAgICAgICAgICAgaWYgKGdldE1ldGhvZHNWYWwuZ2V0TWV0aG9kc1ZhbCkgdGhlbg0KICAgICAgICAgICAgICAgIGdldE1ldGhvZHNWYWwuZ2V0TWV0aG9kc1ZhbCA9IChnZXRNZXRob2RzVmFsLmdldE1ldGhvZHNWYWwoZ2V0TWV0aG9kc1ZhbCkpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGlmIGlsMmNwcEVkaXRzLmFyY2gueDY0IHRoZW4NCiAgICAgICAgICAgIHBfb2Zmc2V0ID0gMTYNCiAgICAgICAgICAgIHBfb2Zmc2V0MiA9IDgNCiAgICAgICAgICAgIGZsYWdfdHlwZSA9IGdnLlRZUEVfUVdPUkQNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgcF9vZmZzZXQgPSA4DQogICAgICAgICAgICBwX29mZnNldDIgPSA0DQogICAgICAgICAgICBmbGFnX3R5cGUgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgIGVuZA0KICAgICAgICBpZiBtZXRob2RfbmFtZSB0aGVuDQogICAgICAgICAgICBsb2NhbCBjZm91bmQgPSBmYWxzZQ0KICAgICAgICAgICAgbWV0aG9kX25hbWVfYWRkcmVzcyA9IGlsMmNwcEVkaXRzLnNlYXJjaER1bXAobWV0aG9kX25hbWUpDQogICAgICAgICAgICBnZy5jbGVhclJlc3VsdHMoKQ0KICAgICAgICAgICAgZ2cuc2V0UmFuZ2VzKGdnLlJFR0lPTl9DX0FMTE9DIHwgZ2cuUkVHSU9OX0NfSEVBUCkNCiAgICAgICAgICAgIGlmIGdldF9maXJzdCA9PSB0cnVlIGFuZCBtZXRob2RfbmFtZV9hZGRyZXNzIH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgZ2cuc2VhcmNoTnVtYmVyKG1ldGhvZF9uYW1lX2FkZHJlc3MsIGZsYWdfdHlwZSwgbmlsLCBuaWwsIG5pbCwgbmlsLCAxKQ0KICAgICAgICAgICAgZWxzZWlmIG1ldGhvZF9uYW1lX2FkZHJlc3Mgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICBnZy5zZWFyY2hOdW1iZXIobWV0aG9kX25hbWVfYWRkcmVzcywgZmxhZ190eXBlKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBsb2NhbCByZXN1bHRzID0gZ2cuZ2V0UmVzdWx0cyhnZy5nZXRSZXN1bHRzQ291bnQoKSkNCiAgICAgICAgICAgIGxvY2FsIG1ldGhvZHNfZm91bmQgPSB7fQ0KICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMocmVzdWx0cykgZG8NCiAgICAgICAgICAgICAgICBsb2NhbCBnZXRfY2xhc3NfcG9pbnRlcl8xID0ge30NCiAgICAgICAgICAgICAgICBnZXRfY2xhc3NfcG9pbnRlcl8xWzFdID0ge30NCiAgICAgICAgICAgICAgICBnZXRfY2xhc3NfcG9pbnRlcl8xWzFdLmFkZHJlc3MgPSB2LmFkZHJlc3MgKyBwX29mZnNldDINCiAgICAgICAgICAgICAgICBnZXRfY2xhc3NfcG9pbnRlcl8xWzFdLmZsYWdzID0gZmxhZ190eXBlDQogICAgICAgICAgICAgICAgZ2V0X2NsYXNzX3BvaW50ZXJfMSA9IGdnLmdldFZhbHVlcyhnZXRfY2xhc3NfcG9pbnRlcl8xKQ0KICAgICAgICAgICAgICAgIGxvY2FsIGdldF9jbGFzc19wb2ludGVyXzIgPSB7fQ0KICAgICAgICAgICAgICAgIGdldF9jbGFzc19wb2ludGVyXzJbMV0gPSB7fQ0KICAgICAgICAgICAgICAgIGdldF9jbGFzc19wb2ludGVyXzJbMV0uYWRkcmVzcyA9IGdldF9jbGFzc19wb2ludGVyXzFbMV0udmFsdWUgKyBwX29mZnNldA0KICAgICAgICAgICAgICAgIGdldF9jbGFzc19wb2ludGVyXzJbMV0uZmxhZ3MgPSBmbGFnX3R5cGUNCiAgICAgICAgICAgICAgICBnZXRfY2xhc3NfcG9pbnRlcl8yID0gZ2cuZ2V0VmFsdWVzKGdldF9jbGFzc19wb2ludGVyXzIpDQogICAgICAgICAgICAgICAgbG9jYWwgZ2V0X2NsYXNzX3N0YXJ0ID0ge30NCiAgICAgICAgICAgICAgICBnZXRfY2xhc3Nfc3RhcnRbMV0gPSB7fQ0KICAgICAgICAgICAgICAgIGdldF9jbGFzc19zdGFydFsxXS5hZGRyZXNzID0gZ2V0X2NsYXNzX3BvaW50ZXJfMlsxXS52YWx1ZQ0KICAgICAgICAgICAgICAgIGdldF9jbGFzc19zdGFydFsxXS5mbGFncyA9IGdnLlRZUEVfQllURQ0KICAgICAgICAgICAgICAgIGdnLmxvYWRSZXN1bHRzKGdldF9jbGFzc19zdGFydCkNCiAgICAgICAgICAgICAgICBnZXRfY2xhc3Nfc3RhcnQgPSBnZy5nZXRWYWx1ZXMoZ2V0X2NsYXNzX3N0YXJ0KQ0KICAgICAgICAgICAgICAgIGxvY2FsIGdldF9jbGFzcyA9IHt9DQogICAgICAgICAgICAgICAgbG9jYWwgb2Zmc2V0ID0gMA0KICAgICAgICAgICAgICAgIGxvY2FsIGNvdW50ID0gMQ0KICAgICAgICAgICAgICAgIHJlcGVhdA0KICAgICAgICAgICAgICAgICAgICBnZXRfY2xhc3NbY291bnRdID0ge30NCiAgICAgICAgICAgICAgICAgICAgZ2V0X2NsYXNzW2NvdW50XS5hZGRyZXNzID0gZ2V0X2NsYXNzX3BvaW50ZXJfMlsxXS52YWx1ZSArIG9mZnNldA0KICAgICAgICAgICAgICAgICAgICBnZXRfY2xhc3NbY291bnRdLmZsYWdzID0gZ2cuVFlQRV9CWVRFDQogICAgICAgICAgICAgICAgICAgIGNvdW50ID0gY291bnQgKyAxDQogICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IG9mZnNldCArIDENCiAgICAgICAgICAgICAgICB1bnRpbCAoY291bnQgPT0gMTAwKQ0KICAgICAgICAgICAgICAgIGdldF9jbGFzcyA9IGdnLmdldFZhbHVlcyhnZXRfY2xhc3MpDQogICAgICAgICAgICAgICAgbG9jYWwgY2xhc3NfbmFtZSA9ICIiDQogICAgICAgICAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBwYWlycyhnZXRfY2xhc3MpIGRvDQogICAgICAgICAgICAgICAgICAgIGlmIHZhbHVlLnZhbHVlID49IDAgYW5kIHZhbHVlLnZhbHVlIDw9IDI1NSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBjbGFzc19uYW1lID0gY2xhc3NfbmFtZSAuLiBzdHJpbmcuY2hhcih2YWx1ZS52YWx1ZSkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIHZhbHVlLnZhbHVlID09IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQoY2xhc3NfbmFtZSwgIiAiKSBvciANCgkJCQkJc3RyaW5nLmZpbmQoY2xhc3NfbmFtZSwgIg4iKSBvciANCgkJCQkJc3RyaW5nLmZpbmQoY2xhc3NfbmFtZSwgIgwiKSBvcg0KICAgICAgICAgICAgICAgICAgICBzdHJpbmcuZmluZChjbGFzc19uYW1lLCAiXHJcbiIpIG9yIA0KCQkJCQlzdHJpbmcuZmluZChjbGFzc19uYW1lLCAiXHIiKSBvciANCgkJCQkJc3RyaW5nLmZpbmQoY2xhc3NfbmFtZSwgIlxuIikgb3INCiAgICAgICAgICAgICAgICAgICAgc3RyaW5nLmZpbmQoY2xhc3NfbmFtZSwgIhciKSBvciANCgkJCQkJc3RyaW5nLmZpbmQoY2xhc3NfbmFtZSwgJyInKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGNsYXNzX25hbWUgPSAiIg0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmICNjbGFzc19uYW1lID4gMSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGNmb3VuZCA9IHRydWUNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBsb2NhbCBnZXRfaWwyY3BwX2FkZHJlc3MgPSB7fQ0KICAgICAgICAgICAgICAgIGdldF9pbDJjcHBfYWRkcmVzc1sxXSA9IHt9DQogICAgICAgICAgICAgICAgZ2V0X2lsMmNwcF9hZGRyZXNzWzFdLmFkZHJlc3MgPSB2LmFkZHJlc3MgLSBwX29mZnNldA0KICAgICAgICAgICAgICAgIGdldF9pbDJjcHBfYWRkcmVzc1sxXS5mbGFncyA9IGZsYWdfdHlwZQ0KICAgICAgICAgICAgICAgIGdldF9pbDJjcHBfYWRkcmVzcyA9IGdnLmdldFZhbHVlcyhnZXRfaWwyY3BwX2FkZHJlc3MpDQogICAgICAgICAgICAgICAgaWwyY3BwX2FkZHJlc3MgPSBnZXRfaWwyY3BwX2FkZHJlc3NbMV0udmFsdWUNCiAgICAgICAgICAgICAgICBsb2NhbCBnZXRfbWV0aG9kX3R5cGVfMSA9IHt9DQogICAgICAgICAgICAgICAgZ2V0X21ldGhvZF90eXBlXzFbMV0gPSB7fQ0KICAgICAgICAgICAgICAgIGdldF9tZXRob2RfdHlwZV8xWzFdLmFkZHJlc3MgPSB2LmFkZHJlc3MgKyBwX29mZnNldA0KICAgICAgICAgICAgICAgIGdldF9tZXRob2RfdHlwZV8xWzFdLmZsYWdzID0gZmxhZ190eXBlDQogICAgICAgICAgICAgICAgZ2V0X21ldGhvZF90eXBlXzEgPSBnZy5nZXRWYWx1ZXMoZ2V0X21ldGhvZF90eXBlXzEpDQogICAgICAgICAgICAgICAgbG9jYWwgZ2V0X21ldGhvZF90eXBlXzIgPSB7fQ0KICAgICAgICAgICAgICAgIGdldF9tZXRob2RfdHlwZV8yWzFdID0ge30NCiAgICAgICAgICAgICAgICBnZXRfbWV0aG9kX3R5cGVfMlsxXS5hZGRyZXNzID0gZ2V0X21ldGhvZF90eXBlXzFbMV0udmFsdWUNCiAgICAgICAgICAgICAgICBnZXRfbWV0aG9kX3R5cGVfMlsxXS5mbGFncyA9IGZsYWdfdHlwZQ0KICAgICAgICAgICAgICAgIGdldF9tZXRob2RfdHlwZV8yID0gZ2cuZ2V0VmFsdWVzKGdldF9tZXRob2RfdHlwZV8yKQ0KICAgICAgICAgICAgICAgIGxvY2FsIG1ldGhvZF90eXBlID0gZ2V0X21ldGhvZF90eXBlXzJbMV0udmFsdWUNCiAgICAgICAgICAgICAgICBpZiAjdG9zdHJpbmcobWV0aG9kX3R5cGUpID4gOCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGdldF9tZXRob2RfdHlwZV8yID0ge30NCiAgICAgICAgICAgICAgICAgICAgZ2V0X21ldGhvZF90eXBlXzJbMV0gPSB7fQ0KICAgICAgICAgICAgICAgICAgICBnZXRfbWV0aG9kX3R5cGVfMlsxXS5hZGRyZXNzID0gZ2V0X21ldGhvZF90eXBlXzFbMV0udmFsdWUgKyA0DQogICAgICAgICAgICAgICAgICAgIGdldF9tZXRob2RfdHlwZV8yWzFdLmZsYWdzID0gZmxhZ190eXBlDQogICAgICAgICAgICAgICAgICAgIGdldF9tZXRob2RfdHlwZV8yID0gZ2cuZ2V0VmFsdWVzKGdldF9tZXRob2RfdHlwZV8yKQ0KICAgICAgICAgICAgICAgICAgICBtZXRob2RfdHlwZSA9IGdldF9tZXRob2RfdHlwZV8yWzFdLnZhbHVlDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgaWwyY3BwRWRpdHMubWV0aG9kX3R5cGVzW3Rvc3RyaW5nKG1ldGhvZF90eXBlKV0gdGhlbg0KICAgICAgICAgICAgICAgICAgICBtZXRob2RfdHlwZSA9IGlsMmNwcEVkaXRzLm1ldGhvZF90eXBlc1t0b3N0cmluZyhtZXRob2RfdHlwZSldDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgbWV0aG9kX3R5cGUgPT0gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGNmb3VuZCA9IGZhbHNlDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgbWV0aG9kc19mb3VuZFsjbWV0aG9kc19mb3VuZCArIDFdID0ge30NCiAgICAgICAgICAgICAgICBtZXRob2RzX2ZvdW5kWyNtZXRob2RzX2ZvdW5kXS5jbGFzc19uYW1lID0gY2xhc3NfbmFtZQ0KICAgICAgICAgICAgICAgIG1ldGhvZHNfZm91bmRbI21ldGhvZHNfZm91bmRdLm1ldGhvZF9uYW1lID0gbWV0aG9kX25hbWUNCiAgICAgICAgICAgICAgICBtZXRob2RzX2ZvdW5kWyNtZXRob2RzX2ZvdW5kXS5pbDJjcHBfYWRkcmVzcyA9IGlsMmNwcF9hZGRyZXNzDQogICAgICAgICAgICAgICAgbWV0aG9kc19mb3VuZFsjbWV0aG9kc19mb3VuZF0ubWV0aG9kX3R5cGUgPSBtZXRob2RfdHlwZQ0KICAgICAgICAgICAgICAgIGlmIG5vdCBnZXRfZmlyc3QgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpbDJjcHBFZGl0cy5zZXREdW1wTWV0aG9kKG1ldGhvZF9uYW1lLCBtZXRob2RfdHlwZSwgY2xhc3NfbmFtZSkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWYgbm90IGdldF9maXJzdCB0aGVuDQogICAgICAgICAgICAgICAgaWwyY3BwRWRpdHMuc2F2ZURhdGFCYXNlKCkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgOjpub3RfZm91bmQ6Og0KICAgICAgICAgICAgaWYgY2ZvdW5kID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgIGdnLnRvYXN0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyAiIC4uICNtZXRob2RzX2ZvdW5kIC4uICIgbWV0aG9kKHMpIGZvdW5kIGZvciB0aGUgc3RyaW5nICIgLi4gbWV0aG9kX25hbWUgLi4gIiDihLnvuI8iKQ0KICAgICAgICAgICAgICAgIHJldHVybiBtZXRob2RzX2ZvdW5kDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgOjpub3RfZm91bmQ6Og0KICAgICAgICAgICAgICAgIGdnLnRvYXN0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBObyBSZXN1bHRzIOKEue+4j1xuTm8gbWV0aG9kcyB3ZXJlIGZvdW5kIGZvciB0aGF0IHN0cmluZywgaXQgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIHRoZSBkYXRhYmFzZS4iKQ0KICAgICAgICAgICAgICAgIGlsMmNwcEVkaXRzLnJlbW92ZUZyb21EYXRhQmFzZShtZXRob2RfbmFtZSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWlsMmNwcEVkaXRzLnNldER1bXBNZXRob2QobWV0aG9kX25hbWUsIG1ldGhvZF90eXBlLCBjbGFzc19uYW1lKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgc2V0RHVtcE1ldGhvZCA9IGZ1bmN0aW9uKG1ldGhvZF9uYW1lLCBtZXRob2RfdHlwZSwgY2xhc3NfbmFtZSkNCiAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoaWwyY3BwRWRpdHMucGFyc2VkX3N0cmluZ3NfdGFibGUpIGRvDQogICAgICAgICAgICBpZiB2LmlsMmNwcF9zdHJpbmcgPT0gbWV0aG9kX25hbWUgdGhlbg0KICAgICAgICAgICAgICAgIGlsMmNwcEVkaXRzLnBhcnNlZF9zdHJpbmdzX3RhYmxlW2ldLm1ldGhvZF90eXBlID0gbWV0aG9kX3R5cGUNCiAgICAgICAgICAgICAgICBpZiBpbDJjcHBFZGl0cy5wYXJzZWRfc3RyaW5nc190YWJsZVtpXS5jbGFzc19uYW1lcyB0aGVuDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGZvdW5kID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBwYWlycyhpbDJjcHBFZGl0cy5wYXJzZWRfc3RyaW5nc190YWJsZVtpXS5jbGFzc19uYW1lcykgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHZhbHVlID09IGNsYXNzX25hbWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBmb3VuZCA9PSBmYWxzZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpbDJjcHBFZGl0cy5wYXJzZWRfc3RyaW5nc190YWJsZVtpXS5jbGFzc19uYW1lc1sjaWwyY3BwRWRpdHMucGFyc2VkX3N0cmluZ3NfdGFibGVbaV0uY2xhc3NfbmFtZXMgKyAxXSA9IGNsYXNzX25hbWUNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBpbDJjcHBFZGl0cy5wYXJzZWRfc3RyaW5nc190YWJsZVtpXS5jbGFzc19uYW1lcyA9IHt9DQogICAgICAgICAgICAgICAgICAgIGlsMmNwcEVkaXRzLnBhcnNlZF9zdHJpbmdzX3RhYmxlW2ldLmNsYXNzX25hbWVzWyNpbDJjcHBFZGl0cy5wYXJzZWRfc3RyaW5nc190YWJsZVtpXS5jbGFzc19uYW1lcyArIDFdID0gY2xhc3NfbmFtZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRWRpdHMuZ2V0Qm9vbEVkaXQoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgZ2V0Qm9vbEVkaXQgPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIGFybTdFZGl0ID0gew0KICAgICAgICAgICAgaXNUcnVlID0geyJ+QSBNT1YgUjAsICMxIiwgIn5BIEJYIExSIn0sDQogICAgICAgICAgICBpc0ZhbHNlID0geyJ+QSBNT1YgUjAsICMwIiwgIn5BIEJYIExSIn0NCiAgICAgICAgfQ0KICAgICAgICBsb2NhbCBhcm04RWRpdCA9IHsNCiAgICAgICAgICAgIGlzVHJ1ZSA9IHsifkE4IE1PViBXMCwgIzEiLCAifkE4IFJFVCJ9LA0KICAgICAgICAgICAgaXNGYWxzZSA9IHsifkE4IE1PViBXMCwgV1pSIiwgIn5BOCBSRVQifQ0KICAgICAgICB9DQogICAgICAgIGxvY2FsIG1lbnUgPSBnZy5jaG9pY2UoeyJUcnVlIiwgIkZhbHNlIn0pDQogICAgICAgIGlmIG1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgIGlmIG1lbnUgPT0gMSB0aGVuDQogICAgICAgICAgICAgICAgcmV0dXJuIHthcm03RWRpdC5pc1RydWUsIGFybThFZGl0LmlzVHJ1ZX0NCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWYgbWVudSA9PSAyIHRoZW4NCiAgICAgICAgICAgICAgICByZXR1cm4ge2FybTdFZGl0LmlzRmFsc2UsIGFybThFZGl0LmlzRmFsc2V9DQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglpbDJjcHBFZGl0cy5nZXRJbnRFZGl0KCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIGdldEludEVkaXQgPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIGVkaXRzX2FybTcgPSB7fQ0KICAgICAgICBsb2NhbCBlZGl0c19hcm04ID0ge30NCiAgICAgICAgOjpzZXRfdmFsOjoNCiAgICAgICAgbG9jYWwgbWVudSA9IGdnLnByb21wdCh7ImVudGVyIG51bWJlciAtMjU1IHRvIDY1NTM1ICJ9LCB7bmlsfSwgeyJudW1iZXIifSkNCiAgICAgICAgaWYgbWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgaWYgdG9udW1iZXIobWVudVsxXSkgPCAtMjU2IG9yIHRvbnVtYmVyKG1lbnVbMV0pID4gNjU1MzUgdGhlbg0KICAgICAgICAgICAgICAgIGdnLmFsZXJ0KCLihLnvuI8gU2V0IEEgVmFsaWQgTnVtYmVyIOKEue+4j1xuXG5TZXQgYSB2YWxpZCBudW1iZXIgZnJvbSAtMjU1IHRvIDY1NTM1IikNCiAgICAgICAgICAgICAgICBnb3RvIHNldF92YWwNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWYgdG9udW1iZXIobWVudVsxXSkgPT0gMCB0aGVuDQogICAgICAgICAgICAgICAgZWRpdHNfYXJtOFsxXSA9ICJ+QTggTU9WIFcwLCBXWlIiDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgZWRpdHNfYXJtOFsxXSA9ICJ+QTggTU9WIFcwLCAjIiAuLiBtZW51WzFdDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVkaXRzX2FybThbMl0gPSAifkE4IFJFVCINCiAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKG1lbnVbMV0sICJbLV0iKSB0aGVuDQogICAgICAgICAgICAgICAgZWRpdHNfYXJtN1sxXSA9ICJ+QSBNVk4gUjAsICMiIC4uIHN0cmluZy5nc3ViKG1lbnVbMV0sICJbLV0iLCAiIikNCiAgICAgICAgICAgICAgICBlZGl0c19hcm03WzJdID0gIn5BIEJYIExSIg0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIGVkaXRzX2FybTdbMV0gPSAifkEgTU9WVyBSMCwgIyIgLi4gbWVudVsxXQ0KICAgICAgICAgICAgICAgIGVkaXRzX2FybTdbMl0gPSAifkEgQlggTFIiDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIHJldHVybiB7ZWRpdHNfYXJtNywgZWRpdHNfYXJtOH0NCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglpbDJjcHBFZGl0cy5nZXRDb21wbGV4RmxvYXRFZGl0KHRhcmdldCwgbWV0aG9kX3R5cGUpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBnZXRDb21wbGV4RmxvYXRFZGl0ID0gZnVuY3Rpb24odGFyZ2V0LCBtZXRob2RfdHlwZSkNCiAgICAgICAgd2hpbGUgKG5pbCkgZG8NCiAgICAgICAgICAgIGxvY2FsIGdldENvbXBsZXhGbG9hdEVkaXRWYWwgPSB7fQ0KICAgICAgICAgICAgaWYgKGdldENvbXBsZXhGbG9hdEVkaXRWYWwuZ2V0Q29tcGxleEZsb2F0RWRpdFZhbCkgdGhlbg0KICAgICAgICAgICAgICAgIGdldENvbXBsZXhGbG9hdEVkaXRWYWwuZ2V0Q29tcGxleEZsb2F0RWRpdFZhbCA9IChnZXRDb21wbGV4RmxvYXRFZGl0VmFsLmdldENvbXBsZXhGbG9hdEVkaXRWYWwoZ2V0Q29tcGxleEZsb2F0RWRpdFZhbCkpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIHRhcmdldCA9IHRvbnVtYmVyKHRhcmdldCkNCiAgICAgICAgbG9jYWwgZmxvYXRfZWRpdHNfYXJtNyA9IHt9DQogICAgICAgIGxvY2FsIGZsb2F0X2VkaXRzX2FybTggPSB7fQ0KICAgICAgICBpZiB0YXJnZXQgPD0gNjU1MzUgYW5kIHRhcmdldCA+PSAwIHRoZW4NCiAgICAgICAgICAgIGlmIG1ldGhvZF90eXBlID09ICJmbG9hdCIgdGhlbg0KICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybTdbMV0gPSAifkEgTU9WVyBSMCwgIyIgLi4gdGFyZ2V0DQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtN1syXSA9ICIxMDBBMDBFRXIiIC0tIFZNT1YgUzAsIFIwDQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtN1szXSA9ICJDMDBBQjhFRXIiIC0tIFZDVlQuRjMyLlMzMiBTMCwgUzANCiAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm03WzRdID0gIjEwMEExMEVFciIgLS0gVk1PViBSMCwgUzANCiAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm03WzVdID0gIjFFRkYyRkUxciIgLS0gQlggTFINCiAgICAgICAgICAgICAgICBpZiB0YXJnZXQgPT0gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybThbMV0gPSAifkE4IE1PViBXMCwgV1pSIg0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtOFsxXSA9ICJ+QTggTU9WIFcwLCAjIiAuLiB0YXJnZXQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm04WzJdID0gIjAwMDAyNzFFciIgLS0gRk1PViBTMCwgVzANCiAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm04WzNdID0gIjAwRDgyMTVFciIgLS0gU0NWVEYgUzAsIFMwDQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtOFs0XSA9ICIwMDAwMjYxRXIiIC0tIEZNT1YgVzAsIFMwDQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtOFs1XSA9ICJDMDAzNUZENnIiIC0tIFJFVA0KICAgICAgICAgICAgZWxzZWlmIG1ldGhvZF90eXBlID09ICJkb3VibGUiIHRoZW4NCiAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm03WzFdID0gIn5BIE1PVlcgUjAsICMiIC4uIHRhcmdldA0KICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybTdbMl0gPSAifkEgVk1PViBTMCwgUjAiDQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtN1szXSA9ICJ+QSBWQ1ZULkY2NC5VMzIgRDAsIFMwIg0KICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybTdbNF0gPSAifkEgVk1PViBSMCwgUjEsIEQwIg0KICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybTdbNV0gPSAiMUVGRjJGRTFyIiAtLSBCWCBMUg0KICAgICAgICAgICAgICAgIGlmIHRhcmdldCA9PSAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtOFsxXSA9ICJ+QTggTU9WIFcwLCBXWlIiDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm04WzFdID0gIn5BOCBNT1YgVzAsICMiIC4uIHRhcmdldA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybThbMl0gPSAifkE4IFNDVlRGIEQwLCBXMCINCiAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm04WzNdID0gIkMwMDM1RkQ2ciIgLS0gUkVUDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGlmIHRhcmdldCA8PSAxMzEwNzIgYW5kIHRhcmdldCA+PSA2NTUzNyB0aGVuDQogICAgICAgICAgICBmbG9hdF92YWxfMiA9IHRhcmdldCAtIDY1NTM1DQogICAgICAgICAgICBpZiBtZXRob2RfdHlwZSA9PSAiZmxvYXQiIHRoZW4NCiAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm03WzFdID0gIn5BIE1PVlcgUjAsICM2NTUzNSINCiAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm03WzJdID0gIn5BIE1PVlcgUjEsICMiIC4uIGZsb2F0X3ZhbF8yDQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtN1szXSA9ICIwMTAwODBFMHIiIC0tIEFERCBSMCwgUjAsIFIxDQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtN1s0XSA9ICIxMDBBMDBFRXIiIC0tIFZNT1YgUzAsIFIwDQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtN1s1XSA9ICJDMDBBQjhFRXIiIC0tIFZDVlQuRjMyLlMzMiBTMCwgUzANCiAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm03WzZdID0gIjEwMEExMEVFciIgLS0gVk1PViBSMCwgUzANCiAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm03WzddID0gIjFFRkYyRkUxciIgLS0gQlggTFINCiAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm04WzFdID0gIn5BOCBNT1YgVzAsICM2NTUzNSINCiAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm04WzJdID0gIn5BOCBNT1YgVzEsICMiIC4uIGZsb2F0X3ZhbF8yDQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtOFszXSA9ICIwMDAwMDEwQnIiIC0tIEFERCBXMCwgVzAsIFcxDQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtOFs0XSA9ICIwMDAwMjcxRXIiIC0tIEZNT1YgUzAsIFcwDQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtOFs1XSA9ICIwMEQ4MjE1RXIiIC0tIFNDVlRGIFMwLCBTMA0KICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybThbNl0gPSAiMDAwMDI2MUVyIiAtLSBGTU9WIFcwLCBTMA0KICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybThbN10gPSAiQzAwMzVGRDZyIiAtLSBSRVQNCiAgICAgICAgICAgIGVsc2VpZiBtZXRob2RfdHlwZSA9PSAiZG91YmxlIiB0aGVuDQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtN1sxXSA9ICJ+QSBNT1ZXIFIwLCAjNjU1MzUiDQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtN1syXSA9ICJ+QSBNT1ZXIFIxLCAgIyIgLi4gZmxvYXRfdmFsXzINCiAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm03WzNdID0gIn5BIEFERCBSMCwgUjAsIFIxIg0KICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybTdbNF0gPSAifkEgVk1PViBTMCwgUjAiDQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtN1s1XSA9ICJ+QSBWQ1ZULkY2NC5VMzIgRDAsIFMwIg0KICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybTdbNl0gPSAifkEgVk1PViBSMCwgUjEsIEQwIg0KICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybTdbN10gPSAiMUVGRjJGRTFyIiAtLSBCWCBMUg0KICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybThbMV0gPSAifkE4IE1PViBXMCwgIzY1NTM1Ig0KICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybThbMl0gPSAifkE4IE1PViBXMSwgICMiIC4uIGZsb2F0X3ZhbF8yDQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtOFszXSA9ICJ+QTggQUREIFcwLCBXMCwgVzEiDQogICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtOFs0XSA9ICJ+QTggU0NWVEYgRDAsIFcwIg0KICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybThbNV0gPSAiQzAwMzVGRDZyIiAtLSBSRVQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgaWYgdGFyZ2V0ID4gMTMxMDcyIGFuZCB0YXJnZXQgPCA0Mjk1MDMyODQgdGhlbg0KICAgICAgICAgICAgZm9yIGkgPSAyLCA2NTUzNiBkbw0KICAgICAgICAgICAgICAgIHJlbSA9IHRhcmdldCAlIGkNCiAgICAgICAgICAgICAgICBtdWx0ID0gaQ0KICAgICAgICAgICAgICAgIHN1Yl90b3RhbCA9IHJlbSAqIG11bHQNCiAgICAgICAgICAgICAgICBhZGRfdG8gPSB0YXJnZXQgLSBzdWJfdG90YWwNCiAgICAgICAgICAgICAgICBpZiBhZGRfdG8gPD0gNjU1MzYgYW5kIGFkZF90byA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBtZXRob2RfdHlwZSA9PSAiZmxvYXQiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybTdbMV0gPSAifkEgTU9WVyBSMCwgIyIgLi4gcmVtDQogICAgICAgICAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm03WzJdID0gIn5BIE1PVlcgUjEsICMiIC4uIG11bHQNCiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybTdbM10gPSAiOTAwMTAwRTByIiAtLSBNVUwgUjAsIFIwLCBSMQ0KICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtN1s0XSA9ICJ+QSBNT1ZXIFIxLCAjIiAuLiBhZGRfdG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybTdbNV0gPSAiMDEwMDgwRTByIiAtLSBBREQgUjAsIFIwLCBSMQ0KICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtN1s2XSA9ICIxMDBBMDBFRXIiIC0tIFZNT1YgUzAsIFIwDQogICAgICAgICAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm03WzddID0gIkMwMEFCOEVFciIgLS0gVkNWVC5GMzIuUzMyIFMwLCBTMA0KICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtN1s4XSA9ICIxMDBBMTBFRXIiIC0tIFZNT1YgUjAsIFMwDQogICAgICAgICAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm03WzldID0gIjFFRkYyRkUxciIgLS0gQlggTFINCiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybThbMV0gPSAifkE4IE1PViBXMCwgIyIgLi4gcmVtDQogICAgICAgICAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm04WzJdID0gIn5BOCBNT1YgVzEsICMiIC4uIG11bHQNCiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybThbM10gPSAiMDA3QzAxMUJyIiAtLSBNVUwgVzAsIFcwLCBXMQ0KICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtOFs0XSA9ICJ+QTggTU9WIFcxLCAjIiAuLiBhZGRfdG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybThbNV0gPSAiMDAwMDAxMEJyIiAtLSBBREQgVzAsIFcwLCBXMQ0KICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtOFs2XSA9ICIwMDAwMjcxRXIiIC0tIEZNT1YgUzAsIFcwDQogICAgICAgICAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm04WzddID0gIjAwRDgyMTVFciIgLS0gU0NWVEYgUzAsIFMwDQogICAgICAgICAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm04WzhdID0gIjAwMDAyNjFFciIgLS0gRk1PViBXMCwgUzANCiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybThbOV0gPSAiQzAwMzVGRDZyIiAtLSBSRVQNCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIG1ldGhvZF90eXBlID09ICJkb3VibGUiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybTdbMV0gPSAifkEgTU9WVyBSMCwgIyIgLi4gcmVtDQogICAgICAgICAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm03WzJdID0gIn5BIE1PVlcgUjEsICAjIiAuLiBtdWx0DQogICAgICAgICAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm03WzNdID0gIn5BIE1VTCBSMCwgUjAsIFIxIg0KICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtN1s0XSA9ICJ+QSBNT1ZXIFIxLCAgIyIgLi4gYWRkX3RvDQogICAgICAgICAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm03WzVdID0gIn5BIEFERCBSMSwgUjAsIFIxIg0KICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtN1s2XSA9ICJ+QSBWTU9WIFMwLCBSMCINCiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybTdbN10gPSAifkEgVkNWVC5GNjQuVTMyIEQwLCBTMCINCiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybTdbOF0gPSAifkEgVk1PViBSMCwgUjEsIEQwIg0KICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtN1s5XSA9ICIxRUZGMkZFMXIiIC0tIEJYIExSDQogICAgICAgICAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm04WzFdID0gIn5BOCBNT1YgVzAsICMiIC4uIHJlbQ0KICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtOFsyXSA9ICJ+QTggTU9WIFcxLCAgIyIgLi4gbXVsdA0KICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtOFszXSA9ICJ+QTggTVVMIFcwLCBXMCwgVzEiDQogICAgICAgICAgICAgICAgICAgICAgICBmbG9hdF9lZGl0c19hcm04WzRdID0gIn5BOCBNT1YgVzEsICAjIiAuLiBhZGRfdG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0X2VkaXRzX2FybThbNV0gPSAifkE4IEFERCBXMCwgVzAsIFcxIg0KICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtOFs2XSA9ICJ+QTggU0NWVEYgRDAsIFcwIg0KICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXRfZWRpdHNfYXJtOFs3XSA9ICJDMDAzNUZENnIiIC0tIFJFVA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWYgdGFyZ2V0ID4gNDI5NTAzMjgzIHRoZW4NCiAgICAgICAgICAgICAgICBnZy5hbGVydCgi4pqg77iPIFZhbHVlIGlzIHRvbyBoaWdoLCBzZXQgbG93ZXIgdGhhbiA0Mjk1MDMyODMg4pqg77iPIikNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWYgdGFyZ2V0IDwgMCB0aGVuDQogICAgICAgICAgICAgICAgZ2cuYWxlcnQoIuKaoO+4jyBWYWx1ZSBpcyB0b28gbG93LCBzZXQgdG8gMCBvciBoaWdoZXIg4pqg77iPIikNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgaWYgZmxvYXRfZWRpdHNfYXJtNyBhbmQgZmxvYXRfZWRpdHNfYXJtOCB0aGVuDQogICAgICAgICAgICByZXR1cm4ge2Zsb2F0X2VkaXRzX2FybTcsIGZsb2F0X2VkaXRzX2FybTh9DQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRWRpdHMuc2ltcGxlRmxvYXRzVGFibGUNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIHNpbXBsZUZsb2F0c1RhYmxlID0gew0KICAgICAgICBbIkFSTTciXSA9IHt7DQogICAgICAgICAgICBbImhleF9lZGl0cyJdID0gIjAxMDFBMEUzciIsDQogICAgICAgICAgICBbImZsb2F0X3ZhbHVlIl0gPSAyDQogICAgICAgIH0sIHsNCiAgICAgICAgICAgIFsiaGV4X2VkaXRzIl0gPSAiNDEwNEEwRTNyIiwNCiAgICAgICAgICAgIFsiZmxvYXRfdmFsdWUiXSA9IDgNCiAgICAgICAgfSwgew0KICAgICAgICAgICAgWyJoZXhfZWRpdHMiXSA9ICI0MjA0QTBFM3IiLA0KICAgICAgICAgICAgWyJmbG9hdF92YWx1ZSJdID0gMzINCiAgICAgICAgfSwgew0KICAgICAgICAgICAgWyJoZXhfZWRpdHMiXSA9ICI0MzA0QTBFM3IiLA0KICAgICAgICAgICAgWyJmbG9hdF92YWx1ZSJdID0gMTI4DQogICAgICAgIH0sIHsNCiAgICAgICAgICAgIFsiaGV4X2VkaXRzIl0gPSAiMTEwM0EwRTNyIiwNCiAgICAgICAgICAgIFsiZmxvYXRfdmFsdWUiXSA9IDUxMg0KICAgICAgICB9LCB7DQogICAgICAgICAgICBbImhleF9lZGl0cyJdID0gIjQ1MDRBMEUzciIsDQogICAgICAgICAgICBbImZsb2F0X3ZhbHVlIl0gPSAyMDQ4DQogICAgICAgIH0sIHsNCiAgICAgICAgICAgIFsiaGV4X2VkaXRzIl0gPSAiNDYwNEEwRTNyIiwNCiAgICAgICAgICAgIFsiZmxvYXRfdmFsdWUiXSA9IDgxOTINCiAgICAgICAgfSwgew0KICAgICAgICAgICAgWyJoZXhfZWRpdHMiXSA9ICI0NzA0QTBFM3IiLA0KICAgICAgICAgICAgWyJmbG9hdF92YWx1ZSJdID0gMzI3NjgNCiAgICAgICAgfSwgew0KICAgICAgICAgICAgWyJoZXhfZWRpdHMiXSA9ICIxMjAzQTBFM3IiLA0KICAgICAgICAgICAgWyJmbG9hdF92YWx1ZSJdID0gMTMxMDcyDQogICAgICAgIH0sIHsNCiAgICAgICAgICAgIFsiaGV4X2VkaXRzIl0gPSAiNDkwNEEwRTNyIiwNCiAgICAgICAgICAgIFsiZmxvYXRfdmFsdWUiXSA9IDUyNDI4OA0KICAgICAgICB9LCB7DQogICAgICAgICAgICBbImhleF9lZGl0cyJdID0gIjA1MDJBMEUzciIsDQogICAgICAgICAgICBbImZsb2F0X3ZhbHVlIl0gPSA4NTg5OTM0NTkyDQogICAgICAgIH0sIHsNCiAgICAgICAgICAgIFsiaGV4X2VkaXRzIl0gPSAiNTEwNEEwRTNyIiwNCiAgICAgICAgICAgIFsiZmxvYXRfdmFsdWUiXSA9IDM0MzU5NzM4MzY4DQogICAgICAgIH0sIHsNCiAgICAgICAgICAgIFsiaGV4X2VkaXRzIl0gPSAiNTIwNEEwRTNyIiwNCiAgICAgICAgICAgIFsiZmxvYXRfdmFsdWUiXSA9IDEzNzQzODk1MzQ3Mg0KICAgICAgICB9LCB7DQogICAgICAgICAgICBbImhleF9lZGl0cyJdID0gIjUzMDRBMEUzciIsDQogICAgICAgICAgICBbImZsb2F0X3ZhbHVlIl0gPSA1NDk3NTU4MTM4ODgNCiAgICAgICAgfSwgew0KICAgICAgICAgICAgWyJoZXhfZWRpdHMiXSA9ICIxNTAzQTBFM3IiLA0KICAgICAgICAgICAgWyJmbG9hdF92YWx1ZSJdID0gMjE5OTAyMzI1NTU1Mg0KICAgICAgICB9LCB7DQogICAgICAgICAgICBbImhleF9lZGl0cyJdID0gIjU1MDRBMEUzciIsDQogICAgICAgICAgICBbImZsb2F0X3ZhbHVlIl0gPSA4Nzk2MDkzMDIyMjA4DQogICAgICAgIH0sIHsNCiAgICAgICAgICAgIFsiaGV4X2VkaXRzIl0gPSAiNTYwNEEwRTNyIiwNCiAgICAgICAgICAgIFsiZmxvYXRfdmFsdWUiXSA9IDM1MTg0MzcyMDg4ODMyDQogICAgICAgIH0sIHsNCiAgICAgICAgICAgIFsiaGV4X2VkaXRzIl0gPSAiNTcwNEEwRTNyIiwNCiAgICAgICAgICAgIFsiZmxvYXRfdmFsdWUiXSA9IDE0MDczNzQ4ODM1NTMyOA0KICAgICAgICB9LCB7DQogICAgICAgICAgICBbImhleF9lZGl0cyJdID0gIjE2MDNBMEUzciIsDQogICAgICAgICAgICBbImZsb2F0X3ZhbHVlIl0gPSA1NjI5NDk5NTM0MjEzMTINCiAgICAgICAgfSwgew0KICAgICAgICAgICAgWyJoZXhfZWRpdHMiXSA9ICI1OTA0QTBFM3IiLA0KICAgICAgICAgICAgWyJmbG9hdF92YWx1ZSJdID0gMjI1MTc5OTgxMzY4NTI0OA0KICAgICAgICB9LCB7DQogICAgICAgICAgICBbImhleF9lZGl0cyJdID0gIjA2MDJBMEUzciIsDQogICAgICAgICAgICBbImZsb2F0X3ZhbHVlIl0gPSAzNjg5MzQ4ODE0NzQxOTEwMzAwMA0KICAgICAgICB9fSwNCiAgICAgICAgWyJBUk04Il0gPSB7ew0KICAgICAgICAgICAgWyJoZXhfZWRpdHMiXSA9ICIwMDAwQTg1MnIiLA0KICAgICAgICAgICAgWyJmbG9hdF92YWx1ZSJdID0gMg0KICAgICAgICB9LCB7DQogICAgICAgICAgICBbImhleF9lZGl0cyJdID0gIjAwMjBBODUyciIsDQogICAgICAgICAgICBbImZsb2F0X3ZhbHVlIl0gPSA4DQogICAgICAgIH0sIHsNCiAgICAgICAgICAgIFsiaGV4X2VkaXRzIl0gPSAiMDA0MEE4NTJyIiwNCiAgICAgICAgICAgIFsiZmxvYXRfdmFsdWUiXSA9IDMyDQogICAgICAgIH0sIHsNCiAgICAgICAgICAgIFsiaGV4X2VkaXRzIl0gPSAiMDA2MEE4NTJyIiwNCiAgICAgICAgICAgIFsiZmxvYXRfdmFsdWUiXSA9IDEyOA0KICAgICAgICB9LCB7DQogICAgICAgICAgICBbImhleF9lZGl0cyJdID0gIjAwODBBODUyciIsDQogICAgICAgICAgICBbImZsb2F0X3ZhbHVlIl0gPSA1MTINCiAgICAgICAgfSwgew0KICAgICAgICAgICAgWyJoZXhfZWRpdHMiXSA9ICIwMEEwQTg1MnIiLA0KICAgICAgICAgICAgWyJmbG9hdF92YWx1ZSJdID0gMjA0OA0KICAgICAgICB9LCB7DQogICAgICAgICAgICBbImhleF9lZGl0cyJdID0gIjAwQzBBODUyciIsDQogICAgICAgICAgICBbImZsb2F0X3ZhbHVlIl0gPSA4MTkyDQogICAgICAgIH0sIHsNCiAgICAgICAgICAgIFsiaGV4X2VkaXRzIl0gPSAiMDBFMEE4NTJyIiwNCiAgICAgICAgICAgIFsiZmxvYXRfdmFsdWUiXSA9IDMyNzY4DQogICAgICAgIH0sIHsNCiAgICAgICAgICAgIFsiaGV4X2VkaXRzIl0gPSAiMDAwMEE5NTJyIiwNCiAgICAgICAgICAgIFsiZmxvYXRfdmFsdWUiXSA9IDEzMTA3Mg0KICAgICAgICB9LCB7DQogICAgICAgICAgICBbImhleF9lZGl0cyJdID0gIjAwMjBBOTUyciIsDQogICAgICAgICAgICBbImZsb2F0X3ZhbHVlIl0gPSA1MjQyODgNCiAgICAgICAgfSwgew0KICAgICAgICAgICAgWyJoZXhfZWRpdHMiXSA9ICIwMDAwQUE1MnIiLA0KICAgICAgICAgICAgWyJmbG9hdF92YWx1ZSJdID0gODU4OTkzNDU5Mg0KICAgICAgICB9LCB7DQogICAgICAgICAgICBbImhleF9lZGl0cyJdID0gIjAwMjBBQTUyciIsDQogICAgICAgICAgICBbImZsb2F0X3ZhbHVlIl0gPSAzNDM1OTczODM2OA0KICAgICAgICB9LCB7DQogICAgICAgICAgICBbImhleF9lZGl0cyJdID0gIjAwNDBBQTUyciIsDQogICAgICAgICAgICBbImZsb2F0X3ZhbHVlIl0gPSAxMzc0Mzg5NTM0NzINCiAgICAgICAgfSwgew0KICAgICAgICAgICAgWyJoZXhfZWRpdHMiXSA9ICIwMDYwQUE1MnIiLA0KICAgICAgICAgICAgWyJmbG9hdF92YWx1ZSJdID0gNTQ5NzU1ODEzODg4DQogICAgICAgIH0sIHsNCiAgICAgICAgICAgIFsiaGV4X2VkaXRzIl0gPSAiMDA4MEFBNTJyIiwNCiAgICAgICAgICAgIFsiZmxvYXRfdmFsdWUiXSA9IDIxOTkwMjMyNTU1NTINCiAgICAgICAgfSwgew0KICAgICAgICAgICAgWyJoZXhfZWRpdHMiXSA9ICIwMEEwQUE1MnIiLA0KICAgICAgICAgICAgWyJmbG9hdF92YWx1ZSJdID0gODc5NjA5MzAyMjIwOA0KICAgICAgICB9LCB7DQogICAgICAgICAgICBbImhleF9lZGl0cyJdID0gIjAwQzBBQTUyciIsDQogICAgICAgICAgICBbImZsb2F0X3ZhbHVlIl0gPSAzNTE4NDM3MjA4ODgzMg0KICAgICAgICB9LCB7DQogICAgICAgICAgICBbImhleF9lZGl0cyJdID0gIjAwRTBBQTUyciIsDQogICAgICAgICAgICBbImZsb2F0X3ZhbHVlIl0gPSAxNDA3Mzc0ODgzNTUzMjgNCiAgICAgICAgfSwgew0KICAgICAgICAgICAgWyJoZXhfZWRpdHMiXSA9ICIwMDAwQUI1MnIiLA0KICAgICAgICAgICAgWyJmbG9hdF92YWx1ZSJdID0gNTYyOTQ5OTUzNDIxMzEyDQogICAgICAgIH0sIHsNCiAgICAgICAgICAgIFsiaGV4X2VkaXRzIl0gPSAiMDAyMEFCNTJyIiwNCiAgICAgICAgICAgIFsiZmxvYXRfdmFsdWUiXSA9IDIyNTE3OTk4MTM2ODUyNDgNCiAgICAgICAgfSwgew0KICAgICAgICAgICAgWyJoZXhfZWRpdHMiXSA9ICIwMDAwQUM1MnIiLA0KICAgICAgICAgICAgWyJmbG9hdF92YWx1ZSJdID0gMzY4OTM0ODgxNDc0MTkxMDMwMDANCiAgICAgICAgfX0NCiAgICB9LA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglpbDJjcHBFZGl0cy5nZXRTaW1wbGVGbG9hdEVkaXQoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgZ2V0U2ltcGxlRmxvYXRFZGl0ID0gZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBlZGl0c19hcm03ID0ge30NCiAgICAgICAgbG9jYWwgZWRpdHNfYXJtOCA9IHt9DQogICAgICAgIGxvY2FsIG1lbnVfdGFibGUgPSB7fQ0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhpbDJjcHBFZGl0cy5zaW1wbGVGbG9hdHNUYWJsZVsiQVJNNyJdKSBkbw0KICAgICAgICAgICAgbWVudV90YWJsZVsjbWVudV90YWJsZSArIDFdID0gdi5mbG9hdF92YWx1ZQ0KICAgICAgICBlbmQNCiAgICAgICAgbG9jYWwgbWVudSA9IGdnLmNob2ljZShtZW51X3RhYmxlLCBuaWwsICLihLnvuI8gU2VsZWN0IEZsb2F0IFZhbHVlIOKEue+4jyIpDQogICAgICAgIGlmIG1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgIGVkaXRzX2FybTdbMV0gPSBpbDJjcHBFZGl0cy5zaW1wbGVGbG9hdHNUYWJsZVsiQVJNNyJdW21lbnVdLmhleF9lZGl0cw0KICAgICAgICAgICAgZWRpdHNfYXJtN1syXSA9ICJ+QSBCWCBMUiINCiAgICAgICAgICAgIGVkaXRzX2FybThbMV0gPSBpbDJjcHBFZGl0cy5zaW1wbGVGbG9hdHNUYWJsZVsiQVJNOCJdW21lbnVdLmhleF9lZGl0cw0KICAgICAgICAgICAgZWRpdHNfYXJtOFsyXSA9ICJ+QTggUkVUIg0KICAgICAgICAgICAgcmV0dXJuIHtlZGl0c19hcm03LCBlZGl0c19hcm04fQ0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLS0gQ3JlYXRlIEVkaXQtLQ0KICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIGxhc3Rfc2VhcmNoID0gIiIsDQogICAgbGFzdF9zZWFyY2hfMiA9ICIiLA0KICAgIGNhc2Vfc2Vuc2l0aXZlID0gdHJ1ZSwNCiAgICBhbGxfdGVybXMgPSB0cnVlLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglpbDJjcHBFZGl0cy5jcmVhdGVFZGl0KCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIGNyZWF0ZUVkaXQgPSBmdW5jdGlvbihtZXRob2RfbmFtZSwgZGJzZWFyY2gsIHNlYXJjaF90ZXJtXzIpDQogICAgICAgIHdoaWxlIChuaWwpIGRvDQogICAgICAgICAgICBsb2NhbCBjcmVhdGVFZGl0VmFsID0ge30NCiAgICAgICAgICAgIGlmIChjcmVhdGVFZGl0VmFsLmNyZWF0ZUVkaXRWYWwpIHRoZW4NCiAgICAgICAgICAgICAgICBjcmVhdGVFZGl0VmFsLmNyZWF0ZUVkaXRWYWwgPSAoY3JlYXRlRWRpdFZhbC5jcmVhdGVFZGl0VmFsKGNyZWF0ZUVkaXRWYWwpKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBpZiBub3QgY2FzZV9zIHRoZW4NCiAgICAgICAgICAgIGNhc2VfcyA9IGlsMmNwcEVkaXRzLmNhc2Vfc2Vuc2l0aXZlDQogICAgICAgIGVuZA0KICAgICAgICBpZiBub3QgYWxsX3QgdGhlbg0KICAgICAgICAgICAgYWxsX3QgPSBpbDJjcHBFZGl0cy5hbGxfdGVybXMNCiAgICAgICAgZW5kDQogICAgICAgIGlmIG5vdCBkYnNlYXJjaCB0aGVuDQogICAgICAgICAgICBkYnNlYXJjaCA9IGZhbHNlDQogICAgICAgIGVuZA0KICAgICAgICBpZiBub3Qgc2VhcmNoX3Rlcm1fMiB0aGVuDQogICAgICAgICAgICBzZWFyY2hfdGVybV8yID0gaWwyY3BwRWRpdHMubGFzdF9zZWFyY2hfMg0KICAgICAgICBlbmQNCiAgICAgICAgaWYgbm90IG1ldGhvZF9uYW1lIHRoZW4NCiAgICAgICAgICAgIG1ldGhvZF9uYW1lID0gaWwyY3BwRWRpdHMubGFzdF9zZWFyY2gNCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIG1lbnUgPSBnZy5wcm9tcHQoe3NjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBFbnRlciBhIG1ldGhvZCBuYW1lLiDihLnvuI9cbkZvciBcInB1YmxpYyBib29sIGdldF9Jc1VubG9ja2VkKCkgeyB9XCIgeW91IHdvdWxkIGVudGVyIFwiZ2V0X0lzVW5sb2NrZWRcIiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTZWFyY2ggRm9yIFN0cmluZyBJbnN0ZWFkIiwgDQoJCQkJCQkJCSJDYXNlIFNlbnNpdGl2ZSIsIA0KCQkJCQkJCQkiTXVzdCBJbmNsdWRlIEFsbCBTZWFyY2ggU3RyaW5ncyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTZWNvbmRhcnkgU2VhcmNoIFN0cmluZyJ9LCANCgkJCQkJCQkJew0KCQkJCQkJCQltZXRob2RfbmFtZSwgDQoJCQkJCQkJCWRic2VhcmNoLCANCgkJCQkJCQkJY2FzZV9zLCANCgkJCQkJCQkJYWxsX3QsIA0KCQkJCQkJCQlzZWFyY2hfdGVybV8yfSwNCgkJCQkJCQkJew0KCQkJCQkJCQkidGV4dCIsIA0KCQkJCQkJCQkiY2hlY2tib3giLCANCgkJCQkJCQkJImNoZWNrYm94IiwgDQoJCQkJCQkJCSJjaGVja2JveCIsIA0KCQkJCQkJCQkidGV4dCJ9KQ0KICAgICAgICBpZiBtZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICBpbDJjcHBFZGl0cy5sYXN0X3NlYXJjaCA9IG1lbnVbMV0NCiAgICAgICAgICAgIGlmIG1lbnVbMl0gPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgbG9jYWwgc2VhcmNoX3Rlcm1fMSA9IG1lbnVbMV0NCiAgICAgICAgICAgICAgICBsb2NhbCBzZWFyY2hfdGVybV8yID0gbWVudVs1XQ0KICAgICAgICAgICAgICAgIGNhc2VfcyA9IG1lbnVbM10NCiAgICAgICAgICAgICAgICBhbGxfdCA9IG1lbnVbNF0NCiAgICAgICAgICAgICAgICBtZW51WzFdID0gaWwyY3BwRWRpdHMuc2VhcmNoRGF0YUJhc2Uoc2VhcmNoX3Rlcm1fMSwgc2VhcmNoX3Rlcm1fMiwgY2FzZV9zLCBhbGxfdCkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgbG9jYWwgbWV0aG9kcyA9IGlsMmNwcEVkaXRzLmdldE1ldGhvZHMobWVudVsxXSkNCiAgICAgICAgICAgIGlmIG1ldGhvZHMgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICBsb2NhbCBtZXRob2RzX21lbnVfaXRlbXMgPSB7fQ0KICAgICAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKG1ldGhvZHMpIGRvDQogICAgICAgICAgICAgICAgICAgIG1ldGhvZHNfbWVudV9pdGVtc1sjbWV0aG9kc19tZW51X2l0ZW1zICsgMV0gPSAi44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iPXG5DbGFzcyBOYW1lOiAiIC4uIHYuY2xhc3NfbmFtZSAuLiAiXG5NZXRob2QgTmFtZTogIiAuLiB2Lm1ldGhvZF9uYW1lIC4uICJcbk1ldGhvZCBUeXBlOiAiIC4uIHYubWV0aG9kX3R5cGUgLi4gIlxu44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iP44Cw77iPIg0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGxvY2FsIG1ldGhvZHNfbWVudSA9IGdnLmNob2ljZShtZXRob2RzX21lbnVfaXRlbXMsIG5pbCwNCiAgICAgICAgICAgICAgICAgICAgc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIFNlbGVjdCBtZXRob2QgdG8gZWRpdC4g4oS577iPIikNCiAgICAgICAgICAgICAgICBpZiBtZXRob2RzX21lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgY2xhc3NfbmFtZSA9IG1ldGhvZHNbbWV0aG9kc19tZW51XS5jbGFzc19uYW1lDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIG1ldGhvZF9uYW1lID0gbWV0aG9kc1ttZXRob2RzX21lbnVdLm1ldGhvZF9uYW1lDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGlsMmNwcF9hZGRyZXNzID0gbWV0aG9kc1ttZXRob2RzX21lbnVdLmlsMmNwcF9hZGRyZXNzDQogICAgICAgICAgICAgICAgICAgIGlsMmNwcEVkaXRzLmNyZWF0ZV9lZGl0X3RhYmxlID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NfbmFtZSA9IGNsYXNzX25hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RfbmFtZSA9IG1ldGhvZF9uYW1lDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgOjpzZWxlY3RfZWRpdF90eXBlOjoNCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgbWVudV90eXBlID0geyJib29sIiwgImludCIsICJmbG9hdCIsICJkb3VibGUifQ0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBlZGl0X3R5cGUgPSBnZy5jaG9pY2UobWVudV90eXBlLCBuaWwsDQogICAgICAgICAgICAgICAgICAgICAgICBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2VsZWN0IHR5cGUgb2YgZWRpdCB0byBsb2FkLiDihLnvuI8iKQ0KICAgICAgICAgICAgICAgICAgICBpZiBlZGl0X3R5cGUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGVkaXRfdHlwZSA9PSAxIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0cyA9IGlsMmNwcEVkaXRzLmdldEJvb2xFZGl0KCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZWRpdF90eXBlID09IDIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRzID0gaWwyY3BwRWRpdHMuZ2V0SW50RWRpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGVkaXRfdHlwZSA9PSAzIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBzcGFjZV9saW1pdCA9IGlsMmNwcEVkaXRzLmdldFZhbHVlcyhpbDJjcHBfYWRkcmVzcykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAjc3BhY2VfbGltaXRbMV0gPj0gOSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heF92YWx1ZSA9IDQyOTUwMzI4NA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiAjc3BhY2VfbGltaXRbMV0gPj0gNyB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heF92YWx1ZSA9IDEzMTA3Mg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiAjc3BhY2VfbGltaXRbMV0gPj0gNSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heF92YWx1ZSA9IDY1NTM1DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhfdmFsdWUgPSAwDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbWF4X3ZhbHVlID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDo6c2V0X3ZhbHVlOjoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgc2V0X3ZhbCA9IGdnLnByb21wdCh7IlNldCBmbG9hdCB2YWx1ZSAoTWF4ICIgLi4gbWF4X3ZhbHVlIC4uICIpIn0sIG5pbCwgeyJudW1iZXIifSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgc2V0X3ZhbCB+PSBuaWwgYW5kIHRvbnVtYmVyKHNldF92YWxbMV0pIDw9IG1heF92YWx1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0cyA9IGlsMmNwcEVkaXRzLmdldENvbXBsZXhGbG9hdEVkaXQoc2V0X3ZhbFsxXSwgImZsb2F0IikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIHNldF92YWwgfj0gbmlsIGFuZCB0b251bWJlcihzZXRfdmFsWzFdKSA+IG1heF92YWx1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZy5hbGVydCgidmFsdWUgdG9vIGhpZ2giKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ290byBzZXRfdmFsdWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0cyA9IGlsMmNwcEVkaXRzLmdldFNpbXBsZUZsb2F0RWRpdCgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGVkaXRfdHlwZSA9PSA0IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBzcGFjZV9saW1pdCA9IGlsMmNwcEVkaXRzLmdldFZhbHVlcyhpbDJjcHBfYWRkcmVzcykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAjc3BhY2VfbGltaXRbMV0gPj0gOSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heF92YWx1ZSA9IDQyOTUwMzI4NA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiAjc3BhY2VfbGltaXRbMV0gPj0gNyB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heF92YWx1ZSA9IDEzMTA3Mg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiAjc3BhY2VfbGltaXRbMV0gPj0gNSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heF92YWx1ZSA9IDY1NTM1DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbWF4X3ZhbHVlID4gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDo6c2V0X3ZhbHVlOjoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgc2V0X3ZhbCA9IGdnLnByb21wdCh7IlNldCBkb3VibGUgdmFsdWUgKE1heCAiIC4uIG1heF92YWx1ZSAuLiAiKSJ9LCBuaWwsIHsibnVtYmVyIn0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNldF92YWwgfj0gbmlsIGFuZCB0b251bWJlcihzZXRfdmFsWzFdKSA8PSBtYXhfdmFsdWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdHMgPSBpbDJjcHBFZGl0cy5nZXRDb21wbGV4RmxvYXRFZGl0KHNldF92YWxbMV0sICJkb3VibGUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgc2V0X3ZhbCB+PSBuaWwgYW5kIHRvbnVtYmVyKHNldF92YWxbMV0pID4gbWF4X3ZhbHVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdnLmFsZXJ0KCJ2YWx1ZSB0b28gaGlnaCIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb3RvIHNldF92YWx1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdnLmFsZXJ0KCJub3QgZW5vdWdoIHJvb20gZm9yIGRvdWJsZSBlZGl0IikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IGVkaXRzIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gc2VsZWN0X2VkaXRfdHlwZQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgbWFraW5nX2VkaXQgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgIDo6ZW50ZXJfbmFtZTo6DQogICAgICAgICAgICAgICAgICAgIGxvY2FsIG5hbWVfbWVudSA9IGdnLnByb21wdCh7c2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIEVudGVyIG5hbWUgZm9yIGVkaXQuIOKEue+4jyJ9LCB7bWV0aG9kX25hbWV9LCB7InRleHQifSkNCiAgICAgICAgICAgICAgICAgICAgaWYgbmFtZV9tZW51ID09IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBnb3RvIGVudGVyX25hbWUNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlsMmNwcEVkaXRzLnNhdmVkRWRpdHNUYWJsZVsjaWwyY3BwRWRpdHMuc2F2ZWRFZGl0c1RhYmxlICsgMV0gPSB7DQogICAgICAgICAgICAgICAgICAgICAgICBlZGl0X25hbWUgPSBuYW1lX21lbnVbMV0sDQogICAgICAgICAgICAgICAgICAgICAgICBjbGFzc19uYW1lID0gY2xhc3NfbmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZF9uYW1lID0gbWV0aG9kX25hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICBhcm03X2VkaXRzID0gZWRpdHNbMV0sDQogICAgICAgICAgICAgICAgICAgICAgICBhcm04X2VkaXRzID0gZWRpdHNbMl0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiBpbDJjcHBFZGl0cy5hcmNoLng2NCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpbDJjcHBFZGl0cy5jcmVhdGVTZXRWYWx1ZXMoaWwyY3BwX2FkZHJlc3MsIGVkaXRzWzJdKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBpbDJjcHBFZGl0cy5jcmVhdGVTZXRWYWx1ZXMoaWwyY3BwX2FkZHJlc3MsIGVkaXRzWzFdKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZ2cuYWxlcnQoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIFZhbHVlIGhhcyBiZWVuIHNldC4g4oS577iPIFxuVGVzdCB0byB2ZXJpZnkgaXQgaXMgd29ya2luZyBhbmQgdGhlbiBwcmVzcyB0aGUgZmxvYXRpbmcgR0cgYnV0dG9uIHRvIGVpdGhlciBTYXZlIG9yIERpc2NhcmQgZWRpdC4iKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRWRpdHMucmVtb3ZlRnJvbURhdGFCYXNlKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIHJlbW92ZUZyb21EYXRhQmFzZSA9IGZ1bmN0aW9uKHN0cmluZ19uYW1lKQ0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhpbDJjcHBFZGl0cy5wYXJzZWRfc3RyaW5nc190YWJsZSkgZG8NCiAgICAgICAgICAgIGlmIHYuaWwyY3BwX3N0cmluZyA9PSBzdHJpbmdfbmFtZSB0aGVuDQogICAgICAgICAgICAgICAgdGFibGUucmVtb3ZlKGlsMmNwcEVkaXRzLnBhcnNlZF9zdHJpbmdzX3RhYmxlLCBpKQ0KICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC0tIFNldCBWYWx1ZXMgRm9yIENyZWF0aW5nIEZ1bmN0aW9uLS0NCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRWRpdHMuY3JlYXRlU2V0VmFsdWVzKGFkZHJlc3MsIGVkaXRzKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgY3JlYXRlU2V0VmFsdWVzID0gZnVuY3Rpb24oYWRkcmVzcywgZWRpdHMpDQogICAgICAgIGxvY2FsIGFkZHJlc3NfdGFibGUgPSB7fQ0KICAgICAgICBsb2NhbCBvZmZzZXQgPSAwDQogICAgICAgIGxvY2FsIGNvdW50ID0gMQ0KICAgICAgICByZXBlYXQNCiAgICAgICAgICAgIGFkZHJlc3NfdGFibGVbY291bnRdID0ge30NCiAgICAgICAgICAgIGFkZHJlc3NfdGFibGVbY291bnRdLmFkZHJlc3MgPSBhZGRyZXNzICsgb2Zmc2V0DQogICAgICAgICAgICBhZGRyZXNzX3RhYmxlW2NvdW50XS5mbGFncyA9IGdnLlRZUEVfRFdPUkQNCiAgICAgICAgICAgIGFkZHJlc3NfdGFibGVbY291bnRdLnZhbHVlID0gZWRpdHNbY291bnRdDQogICAgICAgICAgICBvZmZzZXQgPSBvZmZzZXQgKyA0DQogICAgICAgICAgICBjb3VudCA9IGNvdW50ICsgMQ0KICAgICAgICB1bnRpbCAoY291bnQgPT0gI2VkaXRzICsgMSkNCiAgICAgICAgaWwyY3BwRWRpdHMuY3JlYXRlX3JldmVydF90YWJsZSA9IGdnLmdldFZhbHVlcyhhZGRyZXNzX3RhYmxlKQ0KICAgICAgICBpbDJjcHBFZGl0cy5yZXZlcnRfdGFibGVbI2lsMmNwcEVkaXRzLnNhdmVkRWRpdHNUYWJsZV0gPSBnZy5nZXRWYWx1ZXMoYWRkcmVzc190YWJsZSkNCiAgICAgICAgZ2cuc2V0VmFsdWVzKGFkZHJlc3NfdGFibGUpDQogICAgZW5kLA0KICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC0tIEdldCBDdXJyZW50IFZhbHVlcyBGcm9tIE1lbW9yeS0tDQogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWlsMmNwcEVkaXRzLmdldFZhbHVlcyhhZGRyZXNzKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgZ2V0VmFsdWVzID0gZnVuY3Rpb24oYWRkcmVzcykNCiAgICAgICAgbG9jYWwgbGliX2VkaXRfdGFibGUgPSB7fQ0KICAgICAgICBsb2NhbCBvZmZzZXQgPSAweDANCiAgICAgICAgbG9jYWwgY291bnQgPSAxDQogICAgICAgIHJlcGVhdA0KICAgICAgICAgICAgbGliX2VkaXRfdGFibGVbY291bnRdID0ge30NCiAgICAgICAgICAgIGxpYl9lZGl0X3RhYmxlW2NvdW50XS5hZGRyZXNzID0gYWRkcmVzcyArIG9mZnNldA0KICAgICAgICAgICAgbGliX2VkaXRfdGFibGVbY291bnRdLmZsYWdzID0gZmxhZ190eXBlDQogICAgICAgICAgICBvZmZzZXQgPSBvZmZzZXQgKyAweDQNCiAgICAgICAgICAgIGNvdW50ID0gY291bnQgKyAxDQogICAgICAgIHVudGlsIChjb3VudCA9PSAyMSkNCiAgICAgICAgbG9jYWwgdmFsdWVzID0gZ2cuZ2V0VmFsdWVzKGxpYl9lZGl0X3RhYmxlKQ0KICAgICAgICBsb2NhbCBlZGl0c190YWJsZSA9IHt9DQogICAgICAgIGxvY2FsIGVkaXRfbm90ZXNfdGFibGUgPSB7fQ0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyh2YWx1ZXMpIGRvDQogICAgICAgICAgICBlZGl0X25vdGVzX3RhYmxlWyNlZGl0X25vdGVzX3RhYmxlICsgMV0gPSAiIg0KICAgICAgICAgICAgaWYgaWwyY3BwRWRpdHMuYXJjaC54NjQgdGhlbg0KICAgICAgICAgICAgICAgIGVkaXRzX3RhYmxlWyNlZGl0c190YWJsZSArIDFdID0gIn5BOCAiIC4uIGdnLmRpc2FzbShnZy5BU01fQVJNNjQsIHYuYWRkcmVzcywgdi52YWx1ZSkNCiAgICAgICAgICAgICAgICBpZiBlZGl0c190YWJsZVsjZWRpdHNfdGFibGVdOmZpbmQoIlJFVCIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBlZGl0c190YWJsZVsjZWRpdHNfdGFibGUgKyAxXSA9ICJ+QSAiIC4uIGdnLmRpc2FzbShnZy5BU01fQVJNLCB2LmFkZHJlc3MsIHYudmFsdWUpDQogICAgICAgICAgICAgICAgaWYgZWRpdHNfdGFibGVbI2VkaXRzX3RhYmxlXTpmaW5kKCJCWCIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgcmV0dXJuIHtlZGl0c190YWJsZSwgZWRpdF9ub3Rlc190YWJsZX0NCiAgICBlbmQsDQogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC0tIEZpbmQgTWV0aG9kIEZvciBFbmFibGluZyBTYXZlZCBFZGl0LS0NCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWlsMmNwcEVkaXRzLmZpbmRNZXRob2QobWV0aG9kX25hbWUsIHBhc3NlZF9jbGFzc19uYW1lKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgZmluZE1ldGhvZCA9IGZ1bmN0aW9uKG1ldGhvZF9uYW1lLCBwYXNzZWRfY2xhc3NfbmFtZSkNCiAgICAgICAgd2hpbGUgKG5pbCkgZG8NCiAgICAgICAgICAgIGxvY2FsIGZpbmRNZXRob2RWYWwgPSB7fQ0KICAgICAgICAgICAgaWYgKGZpbmRNZXRob2RWYWwuZmluZE1ldGhvZFZhbCkgdGhlbg0KICAgICAgICAgICAgICAgIGZpbmRNZXRob2RWYWwuZmluZE1ldGhvZFZhbCA9IChmaW5kTWV0aG9kVmFsLmZpbmRNZXRob2RWYWwoZmluZE1ldGhvZFZhbCkpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGlmIGlsMmNwcEVkaXRzLmFyY2gueDY0IHRoZW4NCiAgICAgICAgICAgIHBfb2Zmc2V0ID0gMTYNCiAgICAgICAgICAgIHBfb2Zmc2V0MiA9IDgNCiAgICAgICAgICAgIGZsYWdfdHlwZSA9IGdnLlRZUEVfUVdPUkQNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgcF9vZmZzZXQgPSA4DQogICAgICAgICAgICBwX29mZnNldDIgPSA0DQogICAgICAgICAgICBmbGFnX3R5cGUgPSBnZy5UWVBFX0RXT1JEDQogICAgICAgIGVuZA0KICAgICAgICBtZXRob2RfbmFtZV9hZGRyZXNzID0gaWwyY3BwRWRpdHMuc2VhcmNoRHVtcChtZXRob2RfbmFtZSkNCiAgICAgICAgZ2cuY2xlYXJSZXN1bHRzKCkNCiAgICAgICAgZ2cuc2V0UmFuZ2VzKGdnLlJFR0lPTl9DX0FMTE9DIHwgZ2cuUkVHSU9OX0NfSEVBUCkNCiAgICAgICAgZ2cuc2VhcmNoTnVtYmVyKG1ldGhvZF9uYW1lX2FkZHJlc3MsIGZsYWdfdHlwZSkNCiAgICAgICAgbG9jYWwgcmVzdWx0cyA9IGdnLmdldFJlc3VsdHMoZ2cuZ2V0UmVzdWx0c0NvdW50KCkpDQogICAgICAgIGxvY2FsIG1ldGhvZHNfZm91bmQgPSB7fQ0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhyZXN1bHRzKSBkbw0KICAgICAgICAgICAgbG9jYWwgZ2V0X2NsYXNzX3BvaW50ZXJfMSA9IHt9DQogICAgICAgICAgICBnZXRfY2xhc3NfcG9pbnRlcl8xWzFdID0ge30NCiAgICAgICAgICAgIGdldF9jbGFzc19wb2ludGVyXzFbMV0uYWRkcmVzcyA9IHYuYWRkcmVzcyArIHBfb2Zmc2V0Mg0KICAgICAgICAgICAgZ2V0X2NsYXNzX3BvaW50ZXJfMVsxXS5mbGFncyA9IGZsYWdfdHlwZQ0KICAgICAgICAgICAgZ2V0X2NsYXNzX3BvaW50ZXJfMSA9IGdnLmdldFZhbHVlcyhnZXRfY2xhc3NfcG9pbnRlcl8xKQ0KICAgICAgICAgICAgbG9jYWwgZ2V0X2NsYXNzX3BvaW50ZXJfMiA9IHt9DQogICAgICAgICAgICBnZXRfY2xhc3NfcG9pbnRlcl8yWzFdID0ge30NCiAgICAgICAgICAgIGdldF9jbGFzc19wb2ludGVyXzJbMV0uYWRkcmVzcyA9IGdldF9jbGFzc19wb2ludGVyXzFbMV0udmFsdWUgKyBwX29mZnNldA0KICAgICAgICAgICAgZ2V0X2NsYXNzX3BvaW50ZXJfMlsxXS5mbGFncyA9IGZsYWdfdHlwZQ0KICAgICAgICAgICAgZ2V0X2NsYXNzX3BvaW50ZXJfMiA9IGdnLmdldFZhbHVlcyhnZXRfY2xhc3NfcG9pbnRlcl8yKQ0KICAgICAgICAgICAgbG9jYWwgZ2V0X2NsYXNzX3N0YXJ0ID0ge30NCiAgICAgICAgICAgIGdldF9jbGFzc19zdGFydFsxXSA9IHt9DQogICAgICAgICAgICBnZXRfY2xhc3Nfc3RhcnRbMV0uYWRkcmVzcyA9IGdldF9jbGFzc19wb2ludGVyXzJbMV0udmFsdWUNCiAgICAgICAgICAgIGdldF9jbGFzc19zdGFydFsxXS5mbGFncyA9IGdnLlRZUEVfQllURQ0KICAgICAgICAgICAgZ2cubG9hZFJlc3VsdHMoZ2V0X2NsYXNzX3N0YXJ0KQ0KICAgICAgICAgICAgZ2V0X2NsYXNzX3N0YXJ0ID0gZ2cuZ2V0VmFsdWVzKGdldF9jbGFzc19zdGFydCkNCiAgICAgICAgICAgIGxvY2FsIGdldF9jbGFzcyA9IHt9DQogICAgICAgICAgICBsb2NhbCBvZmZzZXQgPSAwDQogICAgICAgICAgICBsb2NhbCBjb3VudCA9IDENCiAgICAgICAgICAgIHJlcGVhdA0KICAgICAgICAgICAgICAgIGdldF9jbGFzc1tjb3VudF0gPSB7fQ0KICAgICAgICAgICAgICAgIGdldF9jbGFzc1tjb3VudF0uYWRkcmVzcyA9IGdldF9jbGFzc19wb2ludGVyXzJbMV0udmFsdWUgKyBvZmZzZXQNCiAgICAgICAgICAgICAgICBnZXRfY2xhc3NbY291bnRdLmZsYWdzID0gZ2cuVFlQRV9CWVRFDQogICAgICAgICAgICAgICAgY291bnQgPSBjb3VudCArIDENCiAgICAgICAgICAgICAgICBvZmZzZXQgPSBvZmZzZXQgKyAxDQogICAgICAgICAgICB1bnRpbCAoY291bnQgPT0gMTAwKQ0KICAgICAgICAgICAgZ2V0X2NsYXNzID0gZ2cuZ2V0VmFsdWVzKGdldF9jbGFzcykNCiAgICAgICAgICAgIGxvY2FsIGNsYXNzX25hbWUgPSAiIg0KICAgICAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBwYWlycyhnZXRfY2xhc3MpIGRvDQogICAgICAgICAgICAgICAgY2xhc3NfbmFtZSA9IGNsYXNzX25hbWUgLi4gc3RyaW5nLmNoYXIodmFsdWUudmFsdWUpDQogICAgICAgICAgICAgICAgaWYgdmFsdWUudmFsdWUgPT0gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGlmIGNsYXNzX25hbWUgPT0gcGFzc2VkX2NsYXNzX25hbWUgdGhlbg0KICAgICAgICAgICAgICAgIGxvY2FsIGdldF9pbDJjcHBfYWRkcmVzcyA9IHt9DQogICAgICAgICAgICAgICAgZ2V0X2lsMmNwcF9hZGRyZXNzWzFdID0ge30NCiAgICAgICAgICAgICAgICBnZXRfaWwyY3BwX2FkZHJlc3NbMV0uYWRkcmVzcyA9IHYuYWRkcmVzcyAtIHBfb2Zmc2V0DQogICAgICAgICAgICAgICAgZ2V0X2lsMmNwcF9hZGRyZXNzWzFdLmZsYWdzID0gZmxhZ190eXBlDQogICAgICAgICAgICAgICAgZ2V0X2lsMmNwcF9hZGRyZXNzID0gZ2cuZ2V0VmFsdWVzKGdldF9pbDJjcHBfYWRkcmVzcykNCiAgICAgICAgICAgICAgICBpbDJjcHBfYWRkcmVzcyA9IGdldF9pbDJjcHBfYWRkcmVzc1sxXS52YWx1ZQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICByZXR1cm4gaWwyY3BwX2FkZHJlc3MNCiAgICBlbmQsDQogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLS0gU2V0IFZhbHVlcyBGb3IgU2F2ZWQgRWRpdC0tDQogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWlsMmNwcEVkaXRzLnNldFZhbHVlcyhpbmRleCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIHNldFZhbHVlcyA9IGZ1bmN0aW9uKGluZGV4KQ0KICAgICAgICBpZiBpbDJjcHBFZGl0cy5yZXZlcnRfdGFibGVbaW5kZXhdIHRoZW4NCiAgICAgICAgICAgIGdnLnNldFZhbHVlcyhpbDJjcHBFZGl0cy5yZXZlcnRfdGFibGVbaW5kZXhdKQ0KICAgICAgICAgICAgaWwyY3BwRWRpdHMucmV2ZXJ0X3RhYmxlW2luZGV4XSA9IG5pbA0KICAgICAgICAgICAgZ2cudG9hc3QoIuKdjCAiIC4uIGlsMmNwcEVkaXRzLnNhdmVkRWRpdHNUYWJsZVtpbmRleF0uZWRpdF9uYW1lIC4uICIgRGlzYWJsZWQg4p2MIikNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgaWYgaWwyY3BwRWRpdHMuYXJjaC54NjQgdGhlbg0KICAgICAgICAgICAgICAgIGVkaXRzX2FyY2ggPSAiYXJtOF9lZGl0cyINCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBlZGl0c19hcmNoID0gImFybTdfZWRpdHMiDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGxvY2FsIG1ldGhvZF9uYW1lID0gaWwyY3BwRWRpdHMuc2F2ZWRFZGl0c1RhYmxlW2luZGV4XS5tZXRob2RfbmFtZQ0KICAgICAgICAgICAgbG9jYWwgY2xhc3NfbmFtZSA9IGlsMmNwcEVkaXRzLnNhdmVkRWRpdHNUYWJsZVtpbmRleF0uY2xhc3NfbmFtZQ0KICAgICAgICAgICAgbG9jYWwgYWRkcmVzcyA9IGlsMmNwcEVkaXRzLmZpbmRNZXRob2QobWV0aG9kX25hbWUsIGNsYXNzX25hbWUpDQogICAgICAgICAgICBsb2NhbCBlZGl0cyA9IGlsMmNwcEVkaXRzLnNhdmVkRWRpdHNUYWJsZVtpbmRleF1bZWRpdHNfYXJjaF0NCiAgICAgICAgICAgIGxvY2FsIGFkZHJlc3NfdGFibGUgPSB7fQ0KICAgICAgICAgICAgbG9jYWwgb2Zmc2V0ID0gMA0KICAgICAgICAgICAgbG9jYWwgY291bnQgPSAxDQogICAgICAgICAgICByZXBlYXQNCiAgICAgICAgICAgICAgICBhZGRyZXNzX3RhYmxlW2NvdW50XSA9IHt9DQogICAgICAgICAgICAgICAgYWRkcmVzc190YWJsZVtjb3VudF0uYWRkcmVzcyA9IGFkZHJlc3MgKyBvZmZzZXQNCiAgICAgICAgICAgICAgICBhZGRyZXNzX3RhYmxlW2NvdW50XS5mbGFncyA9IGdnLlRZUEVfRFdPUkQNCiAgICAgICAgICAgICAgICBhZGRyZXNzX3RhYmxlW2NvdW50XS52YWx1ZSA9IGVkaXRzW2NvdW50XQ0KICAgICAgICAgICAgICAgIG9mZnNldCA9IG9mZnNldCArIDQNCiAgICAgICAgICAgICAgICBjb3VudCA9IGNvdW50ICsgMQ0KICAgICAgICAgICAgdW50aWwgKGNvdW50ID09ICNlZGl0cyArIDEpDQogICAgICAgICAgICBpbDJjcHBFZGl0cy5yZXZlcnRfdGFibGVbaW5kZXhdID0gZ2cuZ2V0VmFsdWVzKGFkZHJlc3NfdGFibGUpDQogICAgICAgICAgICBnZy5zZXRWYWx1ZXMoYWRkcmVzc190YWJsZSkNCiAgICAgICAgICAgIGdnLnRvYXN0KCLinIUgIiAuLiBpbDJjcHBFZGl0cy5zYXZlZEVkaXRzVGFibGVbaW5kZXhdLmVkaXRfbmFtZSAuLiAiIEVuYWJsZWQg4pyFIikNCg0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLS0gU2F2ZSBFZGl0LS0NCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRWRpdHMuc2F2ZUNvbmZpZygpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBzYXZlQ29uZmlnID0gZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBmaWxlID0gaW8ub3BlbihpbDJjcHBFZGl0cy5zYXZlUGF0aCAuLiBnZy5nZXRUYXJnZXRQYWNrYWdlKCkgLi4gIi5jZmciLCAidysiKQ0KICAgICAgICBmaWxlOndyaXRlKCJpbDJjcHBFZGl0cy5zYXZlZEVkaXRzVGFibGUgPSAiIC4uIHRvc3RyaW5nKGlsMmNwcEVkaXRzLnNhdmVkRWRpdHNUYWJsZSkpDQogICAgICAgIGZpbGU6Y2xvc2UoKQ0KICAgIGVuZCwNCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAtLSBEZWxldGUgRWRpdHMtLQ0KICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglpbDJjcHBFZGl0cy5kZWxldGVFZGl0KCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIGRlbGV0ZUVkaXQgPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIG1lbnVfbmFtZXMgPSB7fQ0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhpbDJjcHBFZGl0cy5zYXZlZEVkaXRzVGFibGUpIGRvDQogICAgICAgICAgICBtZW51X25hbWVzW2ldID0gdi5lZGl0X25hbWUNCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIG1lbnUgPSBnZy5tdWx0aUNob2ljZShtZW51X25hbWVzLCBuaWwsICJTZWxlY3QgZWRpdHMgdG8gZGVsZXRlIikNCiAgICAgICAgaWYgbWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgbG9jYWwgY29uZmlybSA9IGdnLmNob2ljZSh7IuKchSBZZXMgZGVsZXRlIHRoZSBlZGl0cyIsICLinYwgTm8ifSwgbmlsLCBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gQXJlIHlvdSBzdXJlPyDihLlcbkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhlc2UgZWRpdHMsICB0aGlzIGNhbiBub3QgYmUgdW5kb25lPyAiKQ0KICAgICAgICAgICAgaWYgY29uZmlybSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgIGlmIGNvbmZpcm0gPT0gMSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGZvciBrLCB2IGluIHBhaXJzKGlsMmNwcEVkaXRzLnNhdmVkRWRpdHNUYWJsZSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBrZXksIHZhbHVlIGluIHBhaXJzKG1lbnUpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgayA9PSBrZXkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbDJjcHBFZGl0cy5zYXZlZEVkaXRzVGFibGVba10gPSAiZGVsZXRlIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICA6OmdldF9uZXh0OjoNCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgY291bnQgPSAxDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGRvX3VudGlsID0gI2lsMmNwcEVkaXRzLnNhdmVkRWRpdHNUYWJsZSArIDENCiAgICAgICAgICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoaWwyY3BwRWRpdHMuc2F2ZWRFZGl0c1RhYmxlKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgY291bnQgPSBjb3VudCArIDENCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHR5cGUodikgPT0gInN0cmluZyIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLnJlbW92ZShpbDJjcHBFZGl0cy5zYXZlZEVkaXRzVGFibGUsIGkpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgY291bnQgPCBkb191bnRpbCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBnb3RvIGdldF9uZXh0DQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpbDJjcHBFZGl0cy5zYXZlQ29uZmlnKCkNCiAgICAgICAgICAgICAgICAgICAgZ2cudG9hc3QoIuKchSBFZGl0cyBEZWxldGVkIOKchSIpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC0tIEV4cG9ydCBFZGl0cy0tDQogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWlsMmNwcEVkaXRzLmV4cG9ydEVkaXRzKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIGV4cG9ydEVkaXRzID0gZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBtZW51X25hbWVzID0ge30NCiAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoaWwyY3BwRWRpdHMuc2F2ZWRFZGl0c1RhYmxlKSBkbw0KICAgICAgICAgICAgbWVudV9uYW1lc1tpXSA9IHYuZWRpdF9uYW1lDQogICAgICAgIGVuZA0KICAgICAgICBsb2NhbCB0b19leHBvcnQgPSB7fQ0KICAgICAgICBsb2NhbCBtZW51ID0gZ2cubXVsdGlDaG9pY2UobWVudV9uYW1lcywgbmlsLCBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2VsZWN0IGVkaXRzIHRvIGV4cG9ydC4g4oS577iPIikNCiAgICAgICAgaWYgbWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgZm9yIGssIHYgaW4gcGFpcnMobWVudSkgZG8NCiAgICAgICAgICAgICAgICB0b19leHBvcnRbI3RvX2V4cG9ydCArIDFdID0gaWwyY3BwRWRpdHMuc2F2ZWRFZGl0c1RhYmxlW2tdDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGxvY2FsIGZpbGUgPSBpby5vcGVuKGlsMmNwcEVkaXRzLnNhdmVQYXRoIC4uIGdnLmdldFRhcmdldFBhY2thZ2UoKSAuLiAiXyIgLi4gb3MuZGF0ZSgpIC4uICJfZXhwb3J0Lmpzb24iLCAidysiKQ0KICAgICAgICAgICAgaWYgZmlsZSA9PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgIGZpbGUgPQ0KICAgICAgICAgICAgICAgICAgICBpby5vcGVuKGlsMmNwcEVkaXRzLnNhdmVQYXRoIC4uIGdnLmdldFRhcmdldFBhY2thZ2UoKSAuLiAiXyIgLi4gb3MudGltZSgpIC4uICJfZXhwb3J0Lmpzb24iLCAidysiKQ0KICAgICAgICAgICAgICAgIGdnLmFsZXJ0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKchSBFZGl0cyBFeHBvcnRlZCDinIVcblxuIiAuLiBpbDJjcHBFZGl0cy5zYXZlUGF0aCAuLiBnZy5nZXRUYXJnZXRQYWNrYWdlKCkgLi4gIl8iIC4uIG9zLnRpbWUoKSAuLiAiX2V4cG9ydC5qc29uIikNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBnZy5hbGVydChzY3JpcHRfdGl0bGUgLi4gIlxuXG7inIUgRWRpdHMgRXhwb3J0ZWQg4pyFXG5cbiIgLi4gaWwyY3BwRWRpdHMuc2F2ZVBhdGggLi4gZ2cuZ2V0VGFyZ2V0UGFja2FnZSgpIC4uICJfIiAuLiBvcy5kYXRlKCkgLi4gIl9leHBvcnQuanNvbiIpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGZpbGU6d3JpdGUoanNvbi5lbmNvZGUodG9fZXhwb3J0KSkNCiAgICAgICAgICAgIGZpbGU6Y2xvc2UoKQ0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgLS0gSW1wb3J0IEVkaXRzLS0NCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRWRpdHMuaW1wb3J0RWRpdHMoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgaW1wb3J0RWRpdHMgPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIG1lbnUgPSBnZy5wcm9tcHQoe3NjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBTZWxlY3QgSlNPTiDihLnvuI8ifSwgew0KICAgICAgICAgICAgWzFdID0gaWwyY3BwRWRpdHMuc2F2ZVBhdGgNCiAgICAgICAgfSwgew0KICAgICAgICAgICAgWzFdID0gImZpbGUiDQogICAgICAgIH0pDQogICAgICAgIGlmIG1lbnUgPT0gbmlsIHRoZW4NCiAgICAgICAgZW5kDQogICAgICAgIGlmIG1lbnUgfj0gbmlsIGFuZCBzdHJpbmcuZmluZChtZW51WzFdLCAiJS5qc29uIikgdGhlbg0KICAgICAgICAgICAgbG9jYWwgZmlsZSA9IGFzc2VydChpby5vcGVuKG1lbnVbMV0sICJyIikpDQogICAgICAgICAgICBsb2NhbCBjb250ZW50ID0gZmlsZTpyZWFkKCIqYSIpDQogICAgICAgICAgICBmaWxlOmNsb3NlKCkNCiAgICAgICAgICAgIGxvY2FsIGltcG9ydF90YWJsZSA9IGpzb24uZGVjb2RlKGNvbnRlbnQpDQogICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhpbXBvcnRfdGFibGUpIGRvDQogICAgICAgICAgICAgICAgaWwyY3BwRWRpdHMuc2F2ZWRFZGl0c1RhYmxlWyNpbDJjcHBFZGl0cy5zYXZlZEVkaXRzVGFibGUgKyAxXSA9IHYNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWwyY3BwRWRpdHMuc2F2ZUNvbmZpZygpDQogICAgICAgICAgICBnZy50b2FzdCgi4pyFIEVkaXRzIEltcG9ydGVkIOKchSIpDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRWRpdHMuY3JlYXRlU2VhcmNoRGF0YUJhc2UoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgY3JlYXRlU2VhcmNoRGF0YUJhc2UgPSBmdW5jdGlvbigpDQogICAgICAgIHN0cmluZ19hZGRyZXNzID0gcmFuZ2Vfc3RhcnQNCiAgICAgICAgY3VycmVudF9zdHJpbmdfYWRkcmVzcyA9IHN0cmluZ19hZGRyZXNzDQogICAgICAgIHN0b3BfYXQgPSByYW5nZV9lbmQgLSByYW5nZV9zdGFydA0KICAgICAgICBtYXhfcHJvYyA9IDEwMDAwMA0KICAgICAgICA6Om5leHRfYmF0Y2g6Og0KICAgICAgICBsb2NhbCBzdHJpbmdzX3RhYmxlID0ge30NCiAgICAgICAgc3RyaW5nX2NvdW50ID0gMQ0KICAgICAgICByZXBlYXQNCiAgICAgICAgICAgIHN0cmluZ3NfdGFibGVbc3RyaW5nX2NvdW50XSA9IHt9DQogICAgICAgICAgICBzdHJpbmdzX3RhYmxlW3N0cmluZ19jb3VudF0uYWRkcmVzcyA9IHN0cmluZ19hZGRyZXNzDQogICAgICAgICAgICBzdHJpbmdzX3RhYmxlW3N0cmluZ19jb3VudF0uZmxhZ3MgPSBnZy5UWVBFX0JZVEUNCiAgICAgICAgICAgIHN0cmluZ19jb3VudCA9IHN0cmluZ19jb3VudCArIDENCiAgICAgICAgICAgIHN0cmluZ19hZGRyZXNzID0gc3RyaW5nX2FkZHJlc3MgKyAxDQogICAgICAgIHVudGlsIChzdHJpbmdfYWRkcmVzcyA9PSByYW5nZV9zdGFydCArIG1heF9wcm9jIG9yIHN0cmluZ19hZGRyZXNzID09IHN0b3BfYXQpDQogICAgICAgIHN0cmluZ3NfdGFibGUgPSBnZy5nZXRWYWx1ZXMoc3RyaW5nc190YWJsZSkNCiAgICAgICAgY3VycmVudF9zdHJpbmcgPSAiIg0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhzdHJpbmdzX3RhYmxlKSBkbw0KICAgICAgICAgICAgaWYgdi52YWx1ZSA9PSAwIHRoZW4NCiAgICAgICAgICAgICAgICBpZiAjY3VycmVudF9zdHJpbmcgPiAyIGFuZCBjdXJyZW50X3N0cmluZzpmaW5kKCJbYS16QS1aMC05XVthLXpBLVowLTldW2EtekEtWjAtOV0iKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKGN1cnJlbnRfc3RyaW5nLCAiICIpIG9yIA0KCQkJCQkJc3RyaW5nLmZpbmQoY3VycmVudF9zdHJpbmcsICIOIikgb3INCiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZy5maW5kKGN1cnJlbnRfc3RyaW5nLCAiDCIpIG9yIA0KCQkJCQkJc3RyaW5nLmZpbmQoY3VycmVudF9zdHJpbmcsICJcclxuIikgb3INCiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZy5maW5kKGN1cnJlbnRfc3RyaW5nLCAiXHIiKSBvciANCgkJCQkJCXN0cmluZy5maW5kKGN1cnJlbnRfc3RyaW5nLCAiXG4iKSBvcg0KICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nLmZpbmQoY3VycmVudF9zdHJpbmcsICIXIikgb3IgDQoJCQkJCQlzdHJpbmcuZmluZChjdXJyZW50X3N0cmluZywgJyInKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIGlsMmNwcEVkaXRzLnBhcnNlZF9zdHJpbmdzX3RhYmxlWyNpbDJjcHBFZGl0cy5wYXJzZWRfc3RyaW5nc190YWJsZSArIDFdID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlsMmNwcF9zdHJpbmcgPSBjdXJyZW50X3N0cmluZw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBjdXJyZW50X3N0cmluZ19hZGRyZXNzID0gdi5hZGRyZXNzICsgMQ0KICAgICAgICAgICAgICAgIGN1cnJlbnRfc3RyaW5nID0gIiINCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBpZiB2LnZhbHVlID49IDAgYW5kIHYudmFsdWUgPD0gMjU1IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgY3VycmVudF9zdHJpbmcgPSBjdXJyZW50X3N0cmluZyAuLiBzdHJpbmcuY2hhcih2LnZhbHVlKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBpZiByYW5nZV9lbmQgLSByYW5nZV9zdGFydCA+IG1heF9wcm9jIHRoZW4NCiAgICAgICAgICAgIGlsMmNwcEVkaXRzLnRpY2tDbG9jaygpDQogICAgICAgICAgICBtYXhfcHJvYyA9IG1heF9wcm9jICsgMTAwMDAwDQogICAgICAgICAgICBnb3RvIG5leHRfYmF0Y2gNCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIGZpbGUgPSBpby5vcGVuKGlsMmNwcEVkaXRzLnNhdmVQYXRoIC4uIGdnLmdldFRhcmdldFBhY2thZ2UoKSAuLiAiXyIgLi4gZ2cuZ2V0VGFyZ2V0SW5mbygpLnZlcnNpb25Db2RlIC4uICJfZGIubHVhIiwgIncrIikNCiAgICAgICAgZmlsZTp3cml0ZSgiaWwyY3BwRWRpdHMucGFyc2VkX3N0cmluZ3NfdGFibGUgPSAiIC4uIHRvc3RyaW5nKGlsMmNwcEVkaXRzLnBhcnNlZF9zdHJpbmdzX3RhYmxlKSkNCiAgICAgICAgZmlsZTpjbG9zZSgpDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglpbDJjcHBFZGl0cy5zZWFyY2hEYXRhQmFzZShzZWFyY2hfdGVybV8xLCBzZWFyY2hfdGVybV8yLCBjYXNlX3MsIGFsbF90KQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgc2VhcmNoRGF0YUJhc2UgPSBmdW5jdGlvbihzZWFyY2hfdGVybV8xLCBzZWFyY2hfdGVybV8yLCBjYXNlX3MsIGFsbF90KQ0KICAgICAgICBpZiAjaWwyY3BwRWRpdHMucGFyc2VkX3N0cmluZ3NfdGFibGUgPT0gMCB0aGVuDQogICAgICAgICAgICBnZy5hbGVydChzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gV2FpdCB3aGlsZSB0aGUgc2VhcmNoIGRhdGFiYXNlIGlzIGNyZWF0ZWQuIOKEue+4jyIpDQogICAgICAgICAgICBpbDJjcHBFZGl0cy5jcmVhdGVTZWFyY2hEYXRhQmFzZSgpDQogICAgICAgIGVuZA0KICAgICAgICBpZiBtZXRob2RfdHlwZXNfcmFuIH49IHRydWUgdGhlbg0KICAgICAgICAgICAgZ2cudG9hc3Qoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIEdldHRpbmcgTWV0aG9kIFR5cGVzIOKEue+4jyIpDQogICAgICAgICAgICBpbDJjcHBFZGl0cy5nZXRNZXRob2RUeXBlcygpDQogICAgICAgIGVuZA0KICAgICAgICBsb2NhbCBzZWFyY2hfcmVzdWx0cyA9IHt9DQogICAgICAgIGxvY2FsIHNlYXJjaF9yZXN1bHRzX21lbnUgPSB7fQ0KICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhpbDJjcHBFZGl0cy5wYXJzZWRfc3RyaW5nc190YWJsZSkgZG8NCiAgICAgICAgICAgIGlmIChjYXNlX3MgPT0gZmFsc2UgYW5kIGFsbF90ID09IHRydWUgYW5kDQogICAgICAgICAgICAgICAgc3RyaW5nLmZpbmQoc3RyaW5nLmxvd2VyKHYuaWwyY3BwX3N0cmluZyksIHN0cmluZy5sb3dlcihzZWFyY2hfdGVybV8xKSkgYW5kDQogICAgICAgICAgICAgICAgc3RyaW5nLmZpbmQoc3RyaW5nLmxvd2VyKHYuaWwyY3BwX3N0cmluZyksIHN0cmluZy5sb3dlcihzZWFyY2hfdGVybV8yKSkpIG9yDQogICAgICAgICAgICAgICAgKGNhc2VfcyA9PSB0cnVlIGFuZCBhbGxfdCA9PSB0cnVlIGFuZCBzdHJpbmcuZmluZCh2LmlsMmNwcF9zdHJpbmcsIHNlYXJjaF90ZXJtXzEpIGFuZA0KICAgICAgICAgICAgICAgICAgICBzdHJpbmcuZmluZCh2LmlsMmNwcF9zdHJpbmcsIHNlYXJjaF90ZXJtXzIpKSBvcg0KICAgICAgICAgICAgICAgIChjYXNlX3MgPT0gZmFsc2UgYW5kIGFsbF90ID09IGZhbHNlIGFuZA0KICAgICAgICAgICAgICAgICAgICAoc3RyaW5nLmZpbmQoc3RyaW5nLmxvd2VyKHYuaWwyY3BwX3N0cmluZyksIHN0cmluZy5sb3dlcihzZWFyY2hfdGVybV8xKSkgb3INCiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZy5maW5kKHN0cmluZy5sb3dlcih2LmlsMmNwcF9zdHJpbmcpLCBzdHJpbmcubG93ZXIoc2VhcmNoX3Rlcm1fMikpKSkgb3INCiAgICAgICAgICAgICAgICAoY2FzZV9zID09IHRydWUgYW5kIGFsbF90ID09IGZhbHNlIGFuZA0KICAgICAgICAgICAgICAgICAgICAoc3RyaW5nLmZpbmQodi5pbDJjcHBfc3RyaW5nLCBzZWFyY2hfdGVybV8xKSBvciBzdHJpbmcuZmluZCh2LmlsMmNwcF9zdHJpbmcsIHNlYXJjaF90ZXJtXzIpKSkgdGhlbg0KICAgICAgICAgICAgICAgIGxvY2FsIG1lbnVfc3RyaW5nID0gIiINCiAgICAgICAgICAgICAgICBpZiB2LmNsYXNzX25hbWVzIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbWVudV9zdHJpbmcgPSBtZW51X3N0cmluZyAuLiAi4oS5IO+4j0NsYXNzIE5hbWVzOiAiDQogICAgICAgICAgICAgICAgICAgIGZvciBpbmRleCwgdmFsdWUgaW4gcGFpcnModi5jbGFzc19uYW1lcykgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVfc3RyaW5nID0gbWVudV9zdHJpbmcgLi4gdmFsdWUgLi4gIiwgIg0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgbWVudV9zdHJpbmcgPSBtZW51X3N0cmluZyAuLiAiXG4iDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgdi5tZXRob2RfdHlwZSBhbmQgdi5jbGFzc19uYW1lcyB0aGVuDQogICAgICAgICAgICAgICAgICAgIG1lbnVfc3RyaW5nID0gbWVudV9zdHJpbmcgLi4gIuKEue+4jyBNZXRob2QgTmFtZTogIiAuLiB2LmlsMmNwcF9zdHJpbmcgLi4gIlxuIg0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgbWVudV9zdHJpbmcgPSBtZW51X3N0cmluZyAuLiAi4p2TICIgLi4gdi5pbDJjcHBfc3RyaW5nIC4uICIg4p2TXG4iDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgdi5tZXRob2RfdHlwZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIG1lbnVfc3RyaW5nID0gbWVudV9zdHJpbmcgLi4gIuKEue+4jyBNZXRob2QgVHlwZTogIiAuLiB2Lm1ldGhvZF90eXBlIC4uICJcbiINCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBzZWFyY2hfcmVzdWx0c1sjc2VhcmNoX3Jlc3VsdHMgKyAxXSA9IHYuaWwyY3BwX3N0cmluZw0KICAgICAgICAgICAgICAgIHNlYXJjaF9yZXN1bHRzX21lbnVbI3NlYXJjaF9yZXN1bHRzX21lbnUgKyAxXSA9IG1lbnVfc3RyaW5nDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIHNlYXJjaF9yZXN1bHRzX21lbnVbI3NlYXJjaF9yZXN1bHRzX21lbnUgKyAxXSA9ICJQcm9jZXNzIGFsbCBzZWFyY2ggcmVzdWx0cyINCiAgICAgICAgbG9jYWwgbWVudSA9IGdnLmNob2ljZShzZWFyY2hfcmVzdWx0c19tZW51LCBuaWwsDQogICAgICAgICAgICBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2VsZWN0IGEgc3RyaW5nIHRvIGZpbmQgbWV0aG9kcyBmb3IuIOKEue+4jyIpDQogICAgICAgIGlmIG1lbnUgPT0gI3NlYXJjaF9yZXN1bHRzX21lbnUgdGhlbg0KICAgICAgICAgICAgbG9jYWwgY29uZmlybSA9IGdnLmNob2ljZSh7IuKchSBZZXMiLCAi4p2MIE5vIn0sIG5pbCwgc2NyaXB0X3RpdGxlIC4uDQogICAgICAgICAgICAgICAgIlxuXG7ihLnvuI8gQ29uZmlybSBQcm9jZXNzIEFsbCDihLnvuI9cblRoaXMgY2FuIHRha2UgYSBsb25nIHRpbWUgd2l0aCBhIGxhcmdlIG51bWJlciBvZiByZXN1bHRzLiBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gY29udGludWU/IikNCiAgICAgICAgICAgIGlmIGNvbmZpcm0gPT0gMSB0aGVuDQogICAgICAgICAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBwYWlycyhzZWFyY2hfcmVzdWx0cykgZG8NCiAgICAgICAgICAgICAgICAgICAgaWwyY3BwRWRpdHMuZ2V0TWV0aG9kcyh2YWx1ZSkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBnZy5hbGVydChzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gRG9uZSBQcm9jZXNzaW5nIEFsbCDihLnvuI8iKQ0KICAgICAgICAgICAgICAgIGlsMmNwcEVkaXRzLmNhc2Vfc2Vuc2l0aXZlID0gY2FzZV9zDQogICAgICAgICAgICAgICAgaWwyY3BwRWRpdHMuYWxsX3Rlcm1zID0gYWxsX3QNCiAgICAgICAgICAgICAgICBpbDJjcHBFZGl0cy5jcmVhdGVFZGl0KHNlYXJjaF90ZXJtXzEsIHRydWUsIHNlYXJjaF90ZXJtXzIpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgcmV0dXJuIHNlYXJjaF9yZXN1bHRzW21lbnVdDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRWRpdHMuYWJvdXQoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgYWJvdXQgPSBmdW5jdGlvbigpDQogICAgICAgIGdnLmFsZXJ0KHNjcmlwdF90aXRsZSAuLiBbWw0KDQoNCuKEue+4jyBBYm91dCBTY3JpcHQg4oS577iPDQoNClRoaXMgc2NyaXB0IGFsbG93cyB1c2VycyB0byBjcmVhdGUgSWwyQ3BwIGVkaXRzIGJ5IG1ldGhvZCBuYW1lLCB0aGlzIG1lYW5zIG5vIG9mZnNldHMgYXJlIG5lZWRlZC4gQXMgbG9uZyBhcyBtZXRob2QgbmFtZXMgYXJlIG5vdCBjaGFuZ2VkIGluIHRoZSBnYW1lIHRoZSBlZGl0cyB3aWxsIGNvbnRpbnVlIHdvcmtpbmcgZXZlbiBhZnRlciBhIGdhbWUgdXBkYXRlcy4NCg0K4p6VIENyZWF0ZSBFZGl0DQpIZXJlIHlvdSB3aWxsIGVudGVyIGEga25vd24gbWV0aG9kIG5hbWUgb3Igc2VhcmNoIGZvciBhIG1ldGhvZCBuYW1lIGFuZCBjcmVhdGUgYW4gZWRpdCBmb3IgaXQuIEVkaXRzIHlvdSBjcmVhdGUgZm9yIGEgZ2FtZSBhcmUgYWRkZWQgdG8gdGhlIG1haW4gbWVudSBhYm92ZSB0aGlzIG1lbnUgaXRlbS4NCg0K4qS077iPIEltcG9ydCBFZGl0cw0KSGVyZSB5b3UgY2FuIGltcG9ydCBlZGl0cyBjcmVhdGVkIGFuZCBleHBvcnRlZCBieSBvdGhlciB1c2VycyBvZiB0aGlzIHNjcmlwdC4NCiANCuKkte+4jyBFeHBvcnQgRWRpdHMNCkhlcmUgeW91IGNhbiBleHBvcnQgZWRpdHMgeW91IGhhdmUgY3JlYXRlZCB0byBzaGFyZSB0aGVtIHdpdGggb3RoZXIgdXNlcnMgb2YgdGhlIHNjcmlwdC4NCg0K8J+Xke+4jyBEZWxldGUgRWRpdA0KSGVyZSB5b3UgY2FuIGRlbGV0ZSBlZGl0cyBmb3IgYSBnYW1lIGFuZCByZW1vdmUgdGhlbSBmcm9tIHRoZSBtYWluIG1lbnUuDQpdXSkNCiAgICBlbmQsDQogICAgY2hlY2tfZGIgPSBmdW5jdGlvbigpDQogICAgICAgIGRvZmlsZShpbDJjcHBFZGl0cy5zYXZlUGF0aCAuLiBnZy5nZXRUYXJnZXRQYWNrYWdlKCkgLi4gIl8iIC4uIGdnLmdldFRhcmdldEluZm8oKS52ZXJzaW9uQ29kZSAuLiAiX2RiLmx1YSIpDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglpbDJjcHBFZGl0cy5ob21lKHBhc3NlZF9kYXRhKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgaG9tZSA9IGZ1bmN0aW9uKHBhc3NlZF9kYXRhKQ0KICAgICAgICBwbHVnaW5NYW5hZ2VyLnJldHVybkhvbWUgPSB0cnVlDQogICAgICAgIHBsdWdpbk1hbmFnZXIucmV0dXJuUGx1Z2luVGFibGUgPSAiaWwyY3BwRWRpdHMiDQogICAgICAgIGlmIHBhc3NlZF9kYXRhIHRoZW4NCiAgICAgICAgICAgIGlsMmNwcEVkaXRzLmNyZWF0ZUVkaXQocGFzc2VkX2RhdGEpDQogICAgICAgIGVsc2VpZiBtYWtpbmdfZWRpdCA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgIGxvY2FsIG1lbnUgPSBnZy5jaG9pY2UoeyLinIUgU2F2ZSBFZGl0IiwgIvCfl5HvuI8gRGlzY2FyZCBFZGl0In0sIG5pbCwgc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIFNhdmUgb3IgRGlzY2FyZCBlZGl0LiDihLnvuI8iKQ0KICAgICAgICAgICAgaWYgbWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgIGlmIG1lbnUgPT0gMSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlsMmNwcEVkaXRzLnNhdmVDb25maWcoKQ0KICAgICAgICAgICAgICAgICAgICBtYWtpbmdfZWRpdCA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIGdnLnRvYXN0KCLinIUgRWRpdCBzYXZlZCDinIUiKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIG1lbnUgPT0gMiB0aGVuDQogICAgICAgICAgICAgICAgICAgIGdnLnNldFZhbHVlcyhpbDJjcHBFZGl0cy5jcmVhdGVfcmV2ZXJ0X3RhYmxlKQ0KICAgICAgICAgICAgICAgICAgICB0YWJsZS5yZW1vdmUoaWwyY3BwRWRpdHMuc2F2ZWRFZGl0c1RhYmxlLCAjaWwyY3BwRWRpdHMuc2F2ZWRFZGl0c1RhYmxlKQ0KICAgICAgICAgICAgICAgICAgICBtYWtpbmdfZWRpdCA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIGdnLnRvYXN0KCLwn5eR77iPIEVkaXQgZGlzY2FyZGVkIPCfl5HvuI8iKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlsMmNwcEVkaXRzLmhvbWUoKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIGxvY2FsIG1lbnVfbmFtZXMgPSB7fQ0KICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoaWwyY3BwRWRpdHMuc2F2ZWRFZGl0c1RhYmxlKSBkbw0KICAgICAgICAgICAgICAgIGlmIGlsMmNwcEVkaXRzLnJldmVydF90YWJsZVtpXSB0aGVuDQogICAgICAgICAgICAgICAgICAgIG1lbnVfbmFtZXNbaV0gPSAi4pyFICIgLi4gdi5lZGl0X25hbWUNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIG1lbnVfbmFtZXNbaV0gPSAi4pa277iPICIgLi4gdi5lZGl0X25hbWUNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgbWVudV9uYW1lc1sjbWVudV9uYW1lcyArIDFdID0gIuKelSBDcmVhdGUgRWRpdCINCiAgICAgICAgICAgIG1lbnVfbmFtZXNbI21lbnVfbmFtZXMgKyAxXSA9ICLipLTvuI8gSW1wb3J0IEVkaXRzIg0KICAgICAgICAgICAgbWVudV9uYW1lc1sjbWVudV9uYW1lcyArIDFdID0gIuKkte+4jyBFeHBvcnQgRWRpdHMiDQogICAgICAgICAgICBtZW51X25hbWVzWyNtZW51X25hbWVzICsgMV0gPSAi8J+Xke+4jyBEZWxldGUgRWRpdCINCiAgICAgICAgICAgIG1lbnVfbmFtZXNbI21lbnVfbmFtZXMgKyAxXSA9ICLihLnvuI8gQWJvdXQgU2NyaXB0Ig0KICAgICAgICAgICAgbWVudV9uYW1lc1sjbWVudV9uYW1lcyArIDFdID0gIuKdjCBFeGl0IFNjcmlwdCINCiAgICAgICAgICAgIGxvY2FsIG1lbnUgPSBnZy5jaG9pY2UobWVudV9uYW1lcywgbmlsLCBzY3JpcHRfdGl0bGUpDQogICAgICAgICAgICBpZiBtZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgaWYgbWVudSA9PSAjbWVudV9uYW1lcyB0aGVuDQogICAgICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIucmV0dXJuSG9tZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIC0tIHBsdWdpbk1hbmFnZXIuaG9tZSgpDQogICAgICAgICAgICAgICAgZWxzZWlmIG1lbnUgPT0gI21lbnVfbmFtZXMgLSAxIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWwyY3BwRWRpdHMuYWJvdXQoKQ0KICAgICAgICAgICAgICAgIGVsc2VpZiBtZW51ID09ICNtZW51X25hbWVzIC0gMiB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlsMmNwcEVkaXRzLmRlbGV0ZUVkaXQoKQ0KICAgICAgICAgICAgICAgICAgICBpbDJjcHBFZGl0cy5ob21lKCkNCiAgICAgICAgICAgICAgICBlbHNlaWYgbWVudSA9PSAjbWVudV9uYW1lcyAtIDMgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpbDJjcHBFZGl0cy5leHBvcnRFZGl0cygpDQogICAgICAgICAgICAgICAgICAgIGlsMmNwcEVkaXRzLmhvbWUoKQ0KICAgICAgICAgICAgICAgIGVsc2VpZiBtZW51ID09ICNtZW51X25hbWVzIC0gNCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlsMmNwcEVkaXRzLmltcG9ydEVkaXRzKCkNCiAgICAgICAgICAgICAgICAgICAgaWwyY3BwRWRpdHMuaG9tZSgpDQogICAgICAgICAgICAgICAgZWxzZWlmIG1lbnUgPT0gI21lbnVfbmFtZXMgLSA1IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgcmVzdWx0LCBlcnJvciA9IHBjYWxsKGlsMmNwcEVkaXRzLmNyZWF0ZUVkaXQpDQogICAgICAgICAgICAgICAgICAgIGlmIHJlc3VsdCA9PSBmYWxzZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBnZy5hbGVydChlcnJvcikNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBpbDJjcHBFZGl0cy5zZXRWYWx1ZXMobWVudSkNCiAgICAgICAgICAgICAgICAgICAgaWwyY3BwRWRpdHMuaG9tZSgpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIGdldF9tZXRob2Rfc2VhcmNoZXMgPSB7eyJib29sIiwgIlN5c3RlbS5JQ29udmVydGlibGUuVG9Cb29sZWFuIn0sIA0KCQkJCQkJCXsiY2hhciIsICJTeXN0ZW0uSUNvbnZlcnRpYmxlLlRvQ2hhciJ9LA0KCQkJCQkJCXsic2J5dGUiLCAiU3lzdGVtLklDb252ZXJ0aWJsZS5Ub1NCeXRlIn0sDQoJCQkJCQkJeyJieXRlIiwgIlN5c3RlbS5JQ29udmVydGlibGUuVG9CeXRlIn0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyJzaG9ydCIsICJTeXN0ZW0uSUNvbnZlcnRpYmxlLlRvSW50MTYifSwgDQoJCQkJCQkJeyJ1c2hvcnQiLCAiU3lzdGVtLklDb252ZXJ0aWJsZS5Ub1VJbnQxNiJ9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsiaW50IiwgIlN5c3RlbS5JQ29udmVydGlibGUuVG9JbnQzMiJ9LCANCgkJCQkJCQl7InVpbnQiLCAiU3lzdGVtLklDb252ZXJ0aWJsZS5Ub1VJbnQzMiJ9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsibG9uZyIsICJTeXN0ZW0uSUNvbnZlcnRpYmxlLlRvSW50NjQifSwgDQoJCQkJCQkJeyJ1bG9uZyIsICJTeXN0ZW0uSUNvbnZlcnRpYmxlLlRvVUludDY0In0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyJmbG9hdCIsICJTeXN0ZW0uSUNvbnZlcnRpYmxlLlRvU2luZ2xlIn0sIA0KCQkJCQkJCXsiZG91YmxlIiwgIlN5c3RlbS5JQ29udmVydGlibGUuVG9Eb3VibGUifSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IkRlY2ltYWwiLCAiU3lzdGVtLklDb252ZXJ0aWJsZS5Ub0RlY2ltYWwifSwgDQoJCQkJCQkJeyJEYXRlVGltZSIsICJTeXN0ZW0uSUNvbnZlcnRpYmxlLlRvRGF0ZVRpbWUifSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7InZvaWQiLCAiR2V0T2JqZWN0RGF0YSJ9fSwNCiAgICBtZXRob2RfdHlwZXMgPSB7fSwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJaWwyY3BwRWRpdHMuY2hlY2tNZXRob2RUeXBlcygpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBjaGVja01ldGhvZFR5cGVzID0gZnVuY3Rpb24oKQ0KICAgICAgICBkb2ZpbGUoaWwyY3BwRWRpdHMuc2F2ZVBhdGggLi4gZ2cuZ2V0VGFyZ2V0UGFja2FnZSgpIC4uICJfIiAuLiBnZy5nZXRUYXJnZXRJbmZvKCkudmVyc2lvbkNvZGUgLi4gIl9tZXRob2RfdHlwZXMubHVhIikNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCWlsMmNwcEVkaXRzLmdldE1ldGhvZFR5cGVzKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIGdldE1ldGhvZFR5cGVzID0gZnVuY3Rpb24oKQ0KICAgICAgICBpZiBwY2FsbChpbDJjcHBFZGl0cy5jaGVja01ldGhvZFR5cGVzKSA9PSBmYWxzZSB0aGVuDQogICAgICAgICAgICBtZXRob2RfdHlwZXNfcmFuID0gdHJ1ZQ0KICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoaWwyY3BwRWRpdHMuZ2V0X21ldGhvZF9zZWFyY2hlcykgZG8NCiAgICAgICAgICAgICAgICBpbDJjcHBFZGl0cy50aWNrQ2xvY2soKQ0KICAgICAgICAgICAgICAgIGxvY2FsIG1ldGhvZHMgPSBpbDJjcHBFZGl0cy5nZXRNZXRob2RzKHZbMl0sIHRydWUpDQogICAgICAgICAgICAgICAgaWYgI21ldGhvZHMgPiAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWwyY3BwRWRpdHMubWV0aG9kX3R5cGVzW3Rvc3RyaW5nKG1ldGhvZHNbMV0ubWV0aG9kX3R5cGUpXSA9IHZbMV0NCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWwyY3BwRWRpdHMuc2F2ZU1ldGhvZFR5cGVzKCkNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIGFyY2ggPSBnZy5nZXRUYXJnZXRJbmZvKCksDQogICAgc2F2ZWRFZGl0c1RhYmxlID0ge30NCn0NCg0KcGNhbGwoaWwyY3BwRWRpdHMuY2hlY2tfZGIpDQppbDJjcHBFZGl0cy5iY19jcHBfY2hlY2tfY2ZnX2ZpbGUoKQ0KaWwyY3BwRWRpdHMuZ2V0UmFuZ2UoKQ0KaWYgcGNhbGwoaWwyY3BwRWRpdHMuY2hlY2tNZXRob2RUeXBlcykgPT0gZmFsc2UgdGhlbg0KICAgIGlsMmNwcEVkaXRzLmdldE1ldGhvZFR5cGVzKCkNCmVuZA0KDQpwbHVnaW5NYW5hZ2VyLnJldHVybkhvbWUgPSB0cnVlDQpwbHVnaW5NYW5hZ2VyLnJldHVyblBsdWdpblRhYmxlID0gImlsMmNwcEVkaXRzIg0KZ2cuYWxlcnQoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIFBsdWdpbiBsb2FkZWQsIGlmIGxhdW5jaGVkIGRpcmVjdGx5IHByZXNzIHRoZSBmbG9hdGluZyBbU3hdIGJ1dHRvbiB0byBvcGVuIHRoZSBtZW51LiDihLnvuI8iKQ0K"
        },
		[13] = {
            file_name = "plugin_bc_script_creator.lua",
            file_data = "c2NyaXB0Q3JlYXRvciA9IHsNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJc2NyaXB0Q3JlYXRvci5ob21lKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIGhvbWUgPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIG1lbnUgPSBnZy5jaG9pY2UoeyLwn4aVIENyZWF0ZSBTY3JpcHQgRnVuY3Rpb24iLCANCgkJCQkJCQkJIuKelSBBZGQgRWRpdCBUbyBGdW5jdGlvbiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICLinpYgUmVtb3ZlIEVkaXQgRnJvbSBGdW5jdGlvbiIsIA0KCQkJCQkJCQki4piwIE1lbnUgRWRpdG9yIiwgDQoJCQkJCQkJCSLwn5SkIFNldCBTY3JpcHQgVGl0bGUiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAi8J+SviBFeHBvcnQgc2NyaXB0IiwgDQoJCQkJCQkJCSLinYwgRXhpdCJ9LCANCgkJCQkJCQkJbmlsLA0KCQkJCQkJCQlzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2NyaXB0IENyZWF0b3Ig4oS577iPIikNCiAgICAgICAgaWYgbWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgaWYgbWVudSA9PSAxIHRoZW4NCiAgICAgICAgICAgICAgICBzY3JpcHRDcmVhdG9yLmNyZWF0ZUZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgICBzY3JpcHRDcmVhdG9yLmhvbWUoKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBtZW51ID09IDIgdGhlbg0KICAgICAgICAgICAgICAgIHNjcmlwdENyZWF0b3IuYWRkRWRpdFRvRnVuY3Rpb24oKQ0KICAgICAgICAgICAgICAgIHNjcmlwdENyZWF0b3IuaG9tZSgpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGlmIG1lbnUgPT0gMyB0aGVuDQogICAgICAgICAgICAgICAgc2NyaXB0Q3JlYXRvci5yZW1vdmVFZGl0RnJvbUZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgICBzY3JpcHRDcmVhdG9yLmhvbWUoKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBtZW51ID09IDQgdGhlbg0KICAgICAgICAgICAgICAgIHNjcmlwdENyZWF0b3IubWVudUVkaXRvcigpDQogICAgICAgICAgICAgICAgc2NyaXB0Q3JlYXRvci5ob21lKCkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWYgbWVudSA9PSA1IHRoZW4NCiAgICAgICAgICAgICAgICBzY3JpcHRDcmVhdG9yLm5hbWVTY3JpcHQoKQ0KICAgICAgICAgICAgICAgIHNjcmlwdENyZWF0b3IuaG9tZSgpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGlmIG1lbnUgPT0gNiB0aGVuDQogICAgICAgICAgICAgICAgc2NyaXB0Q3JlYXRvci5leHBvcnRTY3JpcHQoKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBtZW51ID09IDcgdGhlbg0KICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIucmV0dXJuSG9tZSA9IGZhbHNlDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglzY3JpcHRDcmVhdG9yLm5hbWVTY3JpcHQoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgbmFtZVNjcmlwdCA9IGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgbWVudSA9IGdnLnByb21wdCh7c2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIEVudGVyIGEgdGl0bGUgZm9yIHlvdXIgc2NyaXB0LiDihLnvuI8ifSwgbmlsLCB7InRleHQifSkNCiAgICAgICAgaWYgbWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgc2NyaXB0Q3JlYXRvci5zY3JpcHROYW1lID0gbWVudVsxXQ0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCXNjcmlwdENyZWF0b3IuY3JlYXRlRnVuY3Rpb24oKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgY3JlYXRlRnVuY3Rpb24gPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIG1lbnVfaXRlbXMgPSBzY3JpcHRDcmVhdG9yLmdldEVkaXRzTWVudSgpDQogICAgICAgIGlmICNtZW51X2l0ZW1zID4gMCB0aGVuDQogICAgICAgICAgICBsb2NhbCBtZW51ID0gZ2cubXVsdGlDaG9pY2UobWVudV9pdGVtcykNCiAgICAgICAgICAgIGlmIG1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICBsb2NhbCBmdW5jdGlvbkVkaXRzID0ge30NCiAgICAgICAgICAgICAgICBmb3IgaywgdiBpbiBwYWlycyhtZW51KSBkbw0KICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbkVkaXRzWyNmdW5jdGlvbkVkaXRzICsgMV0gPSBzY3JpcHRDcmVhdG9yLmFsbEVkaXRzW2tdDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgbG9jYWwgbmFtZU1lbnUgPSBnZy5wcm9tcHQoe3NjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBFbnRlciBhIG5hbWUgZm9yIHlvdXIgZnVuY3Rpb24uIOKEue+4jyJ9LCBuaWwsIHsidGV4dCJ9KQ0KICAgICAgICAgICAgICAgIGlmIG5hbWVNZW51IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgc2NyaXB0Q3JlYXRvci5zY3JpcHRGdW5jdGlvbnNbI3NjcmlwdENyZWF0b3Iuc2NyaXB0RnVuY3Rpb25zICsgMV0gPSB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZW51X25hbWUgPSBuYW1lTWVudVsxXSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRzID0gZnVuY3Rpb25FZGl0cw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGdnLnRvYXN0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBGdW5jdGlvbiBDcmVhdGVkIOKEue+4jyIpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgZ2cuYWxlcnQoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIExvYWQgdGhlIHBsdWdpbnMgeW91IHdhbnQgdG8gY3JlYXRlIHlvdXIgc2NyaXB0IGZyb20gZmlyc3QuIOKEue+4jyIpDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJc2NyaXB0Q3JlYXRvci5hZGRFZGl0VG9GdW5jdGlvbigpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBhZGRFZGl0VG9GdW5jdGlvbiA9IGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgbWVudSA9IGdnLmNob2ljZShzY3JpcHRDcmVhdG9yLmdldEZ1bmN0aW9uc01lbnUoKSwgbmlsLA0KICAgICAgICAgICAgc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIFNlbGVjdCBmdW5jdGlvbiB0byBhZGQgZWRpdCB0by4g4oS577iPIikNCiAgICAgICAgaWYgbWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgbG9jYWwgZWRpdHNNZW51ID0gZ2cubXVsdGlDaG9pY2Uoc2NyaXB0Q3JlYXRvci5nZXRFZGl0c01lbnUoKSkNCiAgICAgICAgICAgIGlmIGVkaXRzTWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgIGZvciBrLCB2IGluIHBhaXJzKGVkaXRzTWVudSkgZG8NCiAgICAgICAgICAgICAgICAgICAgc2NyaXB0Q3JlYXRvci5zY3JpcHRGdW5jdGlvbnNbbWVudV0uZWRpdHNbI3NjcmlwdENyZWF0b3Iuc2NyaXB0RnVuY3Rpb25zW21lbnVdLmVkaXRzICsgMV0gPSBzY3JpcHRDcmVhdG9yLmFsbEVkaXRzW2tdDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZ2cudG9hc3Qoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIEVkaXQgQWRkZWQgVG8gRnVuY3Rpb24g4oS577iPIikNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCXNjcmlwdENyZWF0b3IucmVtb3ZlRWRpdEZyb21GdW5jdGlvbigpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICByZW1vdmVFZGl0RnJvbUZ1bmN0aW9uID0gZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBtZW51ID0gZ2cuY2hvaWNlKHNjcmlwdENyZWF0b3IuZ2V0RnVuY3Rpb25zTWVudSgpLCBuaWwsDQogICAgICAgICAgICBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2VsZWN0IGZ1bmN0aW9uIHRvIHJlbW92ZSBlZGl0IGZyb20uIOKEue+4jyIpDQogICAgICAgIGlmIG1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgIGxvY2FsIGZ1bmN0aW9uRWRpdHMgPSB7fQ0KICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoc2NyaXB0Q3JlYXRvci5zY3JpcHRGdW5jdGlvbnNbbWVudV0uZWRpdHMpIGRvDQogICAgICAgICAgICAgICAgZnVuY3Rpb25FZGl0c1tpXSA9IHYuZWRpdF9uYW1lDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGxvY2FsIGVkaXRNZW51ID0gZ2cuY2hvaWNlKGZ1bmN0aW9uRWRpdHMsIG5pbCwNCiAgICAgICAgICAgICAgICBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2VsZWN0IGVkaXQgdG8gcmVtb3ZlIGZyb20gZnVuY3Rpb24uIOKEue+4jyIpDQogICAgICAgICAgICBpZiBlZGl0TWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgIHRhYmxlLnJlbW92ZShzY3JpcHRDcmVhdG9yLnNjcmlwdEZ1bmN0aW9uc1ttZW51XS5lZGl0cywgZWRpdE1lbnUpDQogICAgICAgICAgICAgICAgZ2cudG9hc3Qoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIEVkaXQgUmVtb3ZlZCBGcm9tIEZ1bmN0aW9uIOKEue+4jyIpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglzY3JpcHRDcmVhdG9yLmdldEVkaXRzTWVudSgpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBnZXRFZGl0c01lbnUgPSBmdW5jdGlvbigpDQogICAgICAgIHNjcmlwdENyZWF0b3IuYWxsRWRpdHMgPSB7fQ0KICAgICAgICBsb2NhbCBtZW51TmFtZXMgPSB7fQ0KICAgICAgICBpZiBpbDJjcHBFZGl0cyB0aGVuDQogICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhpbDJjcHBFZGl0cy5zYXZlZEVkaXRzVGFibGUpIGRvDQogICAgICAgICAgICAgICAgc2NyaXB0Q3JlYXRvci5hbGxFZGl0c1sjc2NyaXB0Q3JlYXRvci5hbGxFZGl0cyArIDFdID0gdg0KICAgICAgICAgICAgICAgIG1lbnVOYW1lc1sjbWVudU5hbWVzICsgMV0gPSB2LmVkaXRfbmFtZSAuLiAiKG1ldGhvZCBlZGl0KSINCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgaWYgaWwyY3BwRmllbGRzIHRoZW4NCiAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKGlsMmNwcEZpZWxkcy5zYXZlZEVkaXRzVGFibGUpIGRvDQogICAgICAgICAgICAgICAgc2NyaXB0Q3JlYXRvci5hbGxFZGl0c1sjc2NyaXB0Q3JlYXRvci5hbGxFZGl0cyArIDFdID0gdg0KICAgICAgICAgICAgICAgIG1lbnVOYW1lc1sjbWVudU5hbWVzICsgMV0gPSB2LmVkaXRfbmFtZSAuLiAiKGZpZWxkIGVkaXQpIg0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBpZiBzdGF0aWNWYWx1ZUZpbmRlciBhbmQgI3N0YXRpY1ZhbHVlRmluZGVyLnNhdmVkRWRpdHNUYWJsZSA+IDAgdGhlbg0KICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoc3RhdGljVmFsdWVGaW5kZXIuc2F2ZWRFZGl0c1RhYmxlKSBkbw0KICAgICAgICAgICAgICAgIHNjcmlwdENyZWF0b3IuYWxsRWRpdHNbI3NjcmlwdENyZWF0b3IuYWxsRWRpdHMgKyAxXSA9IHYuZWRpdF90YWJsZQ0KICAgICAgICAgICAgICAgIG1lbnVOYW1lc1sjbWVudU5hbWVzICsgMV0gPSB2LmVkaXRfdGFibGUuZWRpdF9uYW1lIC4uICIoc3RhdGljIHZhbHVlIHNlYXJjaCBlZGl0KSINCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgcmV0dXJuIG1lbnVOYW1lcw0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJc2NyaXB0Q3JlYXRvci5hbGxFZGl0cygpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBhbGxFZGl0cyA9IHt9LA0KICAgIHNjcmlwdEZ1bmN0aW9ucyA9IHt9LA0KICAgIGdldEZ1bmN0aW9uc01lbnUgPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIG1lbnVOYW1lcyA9IHt9DQogICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHNjcmlwdENyZWF0b3Iuc2NyaXB0RnVuY3Rpb25zKSBkbw0KICAgICAgICAgICAgbWVudU5hbWVzWyNtZW51TmFtZXMgKyAxXSA9IHYubWVudV9uYW1lDQogICAgICAgIGVuZA0KICAgICAgICByZXR1cm4gbWVudU5hbWVzDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglzY3JpcHRDcmVhdG9yLm1lbnVFZGl0b3JSZW1vdmUoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgbWVudUVkaXRvclJlbW92ZSA9IGZ1bmN0aW9uKGN1cnJlbnRfaW5kZXgpDQogICAgICAgIDo6Y29uZmlybTo6DQogICAgICAgIGxvY2FsIGNvbmZpcm1fbWVudSA9IGdnLmNob2ljZSh7IuKchSBZZXMgKERlbGV0ZSBmdW5jdGlvbikiLCAi4p2MIE5vIGdldCBtZSBvdXQgb2YgaGVyZS4ifSwgbmlsLCBzY3JpcHRfdGl0bGUgLi4gIlxuXG7imqDvuI8gV2FybmluZyDimqDvuI9cblxuWW91IGFyZSBhYm91dCB0byBkZWxldGUgdGhpcyBmdW5jdGlvbiBmcm9tIHlvdXIgc2NyaXB0LlxuXG5EbyB5b3Ugd2lzaCB0byBjb250aW51ZT8iKQ0KICAgICAgICBpZiBjb25maXJtX21lbnUgPT0gbmlsIHRoZW4NCiAgICAgICAgICAgIGdvdG8gY29uZmlybQ0KICAgICAgICBlbHNlDQogICAgICAgICAgICBpZiBjb25maXJtX21lbnUgPT0gMSB0aGVuDQogICAgICAgICAgICAgICAgdGFibGUucmVtb3ZlKHNjcmlwdENyZWF0b3Iuc2NyaXB0RnVuY3Rpb25zLCBjdXJyZW50X2luZGV4KQ0KICAgICAgICAgICAgICAgIGdnLnRvYXN0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBGdW5jdGlvbiBEZWxldGVkIOKEue+4jyIpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kLA0KICAgIC0tW1sNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgkNCglzY3JpcHRDcmVhdG9yLm1lbnVFZGl0b3JNb3ZlVXAoKQ0KCQ0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCV1dIC0tDQogICAgbWVudUVkaXRvck1vdmVVcCA9IGZ1bmN0aW9uKGN1cnJlbnRfaW5kZXgpDQogICAgICAgIGxvY2FsIHRlbXBfaW5kZXggPSAjc2NyaXB0Q3JlYXRvci5zY3JpcHRGdW5jdGlvbnMgKyAyDQogICAgICAgIHNjcmlwdENyZWF0b3Iuc2NyaXB0RnVuY3Rpb25zW3RlbXBfaW5kZXhdID0gc2NyaXB0Q3JlYXRvci5zY3JpcHRGdW5jdGlvbnNbY3VycmVudF9pbmRleCAtIDFdDQogICAgICAgIHNjcmlwdENyZWF0b3Iuc2NyaXB0RnVuY3Rpb25zW2N1cnJlbnRfaW5kZXggLSAxXSA9IHNjcmlwdENyZWF0b3Iuc2NyaXB0RnVuY3Rpb25zW2N1cnJlbnRfaW5kZXhdDQogICAgICAgIHNjcmlwdENyZWF0b3Iuc2NyaXB0RnVuY3Rpb25zW2N1cnJlbnRfaW5kZXhdID0gc2NyaXB0Q3JlYXRvci5zY3JpcHRGdW5jdGlvbnNbdGVtcF9pbmRleF0NCiAgICAgICAgc2NyaXB0Q3JlYXRvci5zY3JpcHRGdW5jdGlvbnNbdGVtcF9pbmRleF0gPSBuaWwNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCXNjcmlwdENyZWF0b3IubWVudUVkaXRvck1vdmVEb3duKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIG1lbnVFZGl0b3JNb3ZlRG93biA9IGZ1bmN0aW9uKGN1cnJlbnRfaW5kZXgpDQogICAgICAgIGxvY2FsIHRlbXBfaW5kZXggPSAjc2NyaXB0Q3JlYXRvci5zY3JpcHRGdW5jdGlvbnMgKyAyDQogICAgICAgIHNjcmlwdENyZWF0b3Iuc2NyaXB0RnVuY3Rpb25zW3RlbXBfaW5kZXhdID0gc2NyaXB0Q3JlYXRvci5zY3JpcHRGdW5jdGlvbnNbY3VycmVudF9pbmRleCArIDFdDQogICAgICAgIHNjcmlwdENyZWF0b3Iuc2NyaXB0RnVuY3Rpb25zW2N1cnJlbnRfaW5kZXggKyAxXSA9IHNjcmlwdENyZWF0b3Iuc2NyaXB0RnVuY3Rpb25zW2N1cnJlbnRfaW5kZXhdDQogICAgICAgIHNjcmlwdENyZWF0b3Iuc2NyaXB0RnVuY3Rpb25zW2N1cnJlbnRfaW5kZXhdID0gc2NyaXB0Q3JlYXRvci5zY3JpcHRGdW5jdGlvbnNbdGVtcF9pbmRleF0NCiAgICAgICAgc2NyaXB0Q3JlYXRvci5zY3JpcHRGdW5jdGlvbnNbdGVtcF9pbmRleF0gPSBuaWwNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCXNjcmlwdENyZWF0b3IubWVudUVkaXRvclJlbmFtZSgpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBtZW51RWRpdG9yUmVuYW1lID0gZnVuY3Rpb24oY3VycmVudF9pbmRleCkNCiAgICAgICAgbG9jYWwgbWVudSA9IGdnLnByb21wdCh7c2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIEVkaXQgRnVuY3Rpb24gTmFtZSDihLnvuI8ifSwge3NjcmlwdENyZWF0b3Iuc2NyaXB0RnVuY3Rpb25zW2N1cnJlbnRfaW5kZXhdLm1lbnVfbmFtZX0sIHsidGV4dCJ9KQ0KICAgICAgICBpZiBtZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICBzY3JpcHRDcmVhdG9yLnNjcmlwdEZ1bmN0aW9uc1tjdXJyZW50X2luZGV4XS5tZW51X25hbWUgPSBtZW51WzFdDQogICAgICAgIGVuZA0KICAgIGVuZCwNCiAgICAtLVtbDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJDQoJc2NyaXB0Q3JlYXRvci5tZW51RWRpdG9yKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIG1lbnVFZGl0b3IgPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIG1lbnUgPSBnZy5jaG9pY2Uoc2NyaXB0Q3JlYXRvci5nZXRGdW5jdGlvbnNNZW51KCksIG5pbCwNCiAgICAgICAgICAgIHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBTZWxlY3Qgc2NyaXB0IG1lbnUgaXRlbS4g4oS577iPIikNCiAgICAgICAgaWYgbWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgbG9jYWwgZG9XaXRoTWVudSA9IGdnLmNob2ljZSh7IuKshu+4jyBNb3ZlIFVwIiwgDQoJCQkJCQkJCQkJICAi4qyH77iPIE1vdmUgRG93biIsIA0KCQkJCQkJCQkJCSAgIvCfl5HvuI8gUmVtb3ZlIEZ1bmN0aW9uIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICLwn5OdIEVkaXQgRnVuY3Rpb24gTmFtZSIsIA0KCQkJCQkJCQkJCSAgIvCflJkgQmFjayBUbyBNZW51IEVkaXRvciJ9LCANCgkJCQkJCQkJCQkgIG5pbCwgDQoJCQkJCQkJCQkJICBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gIiAuLiBzY3JpcHRDcmVhdG9yLnNjcmlwdEZ1bmN0aW9uc1ttZW51XS5tZW51X25hbWUgLi4gIiDihLnvuI8iKQ0KICAgICAgICAgICAgaWYgZG9XaXRoTWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgIGlmIGRvV2l0aE1lbnUgPT0gMSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHNjcmlwdENyZWF0b3IubWVudUVkaXRvck1vdmVVcChtZW51KQ0KICAgICAgICAgICAgICAgICAgICBzY3JpcHRDcmVhdG9yLm1lbnVFZGl0b3IoKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIGRvV2l0aE1lbnUgPT0gMiB0aGVuDQogICAgICAgICAgICAgICAgICAgIHNjcmlwdENyZWF0b3IubWVudUVkaXRvck1vdmVEb3duKG1lbnUpDQogICAgICAgICAgICAgICAgICAgIHNjcmlwdENyZWF0b3IubWVudUVkaXRvcigpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgZG9XaXRoTWVudSA9PSAzIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgc2NyaXB0Q3JlYXRvci5tZW51RWRpdG9yUmVtb3ZlKG1lbnUpDQogICAgICAgICAgICAgICAgICAgIHNjcmlwdENyZWF0b3IubWVudUVkaXRvcigpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgZG9XaXRoTWVudSA9PSA0IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgc2NyaXB0Q3JlYXRvci5tZW51RWRpdG9yUmVuYW1lKG1lbnUpDQogICAgICAgICAgICAgICAgICAgIHNjcmlwdENyZWF0b3IubWVudUVkaXRvcigpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgZG9XaXRoTWVudSA9PSA1IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgc2NyaXB0Q3JlYXRvci5tZW51RWRpdG9yKCkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCXNjcmlwdENyZWF0b3IuZXhwb3J0U2NyaXB0KHNjcmlwdE5hbWUpDQoJDQoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJXV0gLS0NCiAgICBleHBvcnRTY3JpcHQgPSBmdW5jdGlvbihzY3JpcHROYW1lKQ0KICAgICAgICA6OmNoZWNrX25hbWU6Og0KICAgICAgICBpZiBub3Qgc2NyaXB0Q3JlYXRvci5zY3JpcHROYW1lIHRoZW4NCiAgICAgICAgICAgIHNjcmlwdENyZWF0b3IubmFtZVNjcmlwdCgpDQogICAgICAgICAgICBnb3RvIGNoZWNrX25hbWUNCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIHNjcmlwdEV4cG9ydFRhYmxlID0gew0KCQkJJ3NjcmlwdF90aXRsZSA9ICInIC4uIHNjcmlwdENyZWF0b3Iuc2NyaXB0TmFtZSAuLiAnIicsDQoJCQknc2NyaXB0RnVuY3Rpb25zID0gJyAuLiB0b3N0cmluZyhzY3JpcHRDcmVhdG9yLnNjcmlwdEZ1bmN0aW9ucyksIA0KCQkJJ2Vtb2ppcyA9IHt9JywNCgkJCSdmb3IgaSx2IGluIHBhaXJzIChzY3JpcHRGdW5jdGlvbnMpIGRvJywgDQoJCQknZW1vamlzW2ldID0gIvCflJgiJywgDQoJCQknZW5kJywNCgkJCSdyZXZlcnRfdGFibGUgPSB7fScsIA0KCQkJJ2FyY2ggPSBnZy5nZXRUYXJnZXRJbmZvKCknLA0KCQkJJ3N0cmluZ3NTdGFydCA9ICIxMDk7MTE1Ozk5OzExMTsxMTQ7MTA4OzEwNTs5ODs0NjsxMDA7MTA4OzEwODs3NzsxMTE7MTAwOzExNzsxMDg7MTAxOjoyMCInLA0KCQkJJ3N0cmluZ3NFbmQgPSAiMDBoOzAwaDswfn4wOzB+fjA7MH5+MDswMGg7MH5+MDswMGg7MH5+MDswMGg7RkZoO0ZGaDo6MTIiJywNCgkJCSdmdW5jdGlvbiBnZXRSYW5nZSgpJywgDQoJCQknICAgIGdnLnNldFJhbmdlcyhnZy5SRUdJT05fT1RIRVIpJywNCgkJCScgICAgZ2cuc2V0VmlzaWJsZShmYWxzZSknLA0KCQkJJyAgICBnZy50b2FzdChzY3JpcHRfdGl0bGUgLi4gIlxcblxcbuKEue+4jyBDb25maWd1cmluZyBTY3JpcHQg4oS577iPIiknLA0KCQkJJyAgICBnZy5jbGVhclJlc3VsdHMoKScsIA0KCQkJJyAgICA6OnRyeV9jYTo6JywNCgkJCScgICAgZ2cuc2VhcmNoTnVtYmVyKHN0cmluZ3NTdGFydCwgZ2cuVFlQRV9CWVRFLCBmYWxzZSwgZ2cuU0lHTl9FUVVBTCwgbmlsLCBuaWwsIDEpJywNCgkJCScgICAgaWYgZ2cuZ2V0UmVzdWx0c0NvdW50KCkgPT0gMCB0aGVuJywgDQoJCQknICAgICAgICBnZy5zZXRSYW5nZXMoZ2cuUkVHSU9OX0NfQUxMT0MpJywNCgkJCScgICAgICAgIGdvdG8gdHJ5X2NhJywgDQoJCQknICAgIGVuZCcsIA0KCQkJJyAgICBsb2NhbCBzdGFydF9zZWFyY2ggPSBnZy5nZXRSZXN1bHRzKDEpJywNCgkJCScgICAgZ2cuY2xlYXJSZXN1bHRzKCknLCANCgkJCScgICAgcmFuZ2Vfc3RhcnQgPSBzdGFydF9zZWFyY2hbMV0uYWRkcmVzcycsDQoJCQknICAgIGZvciBpLCB2IGluIHBhaXJzKGdnLmdldFJhbmdlc0xpc3QoKSkgZG8nLA0KCQkJJyAgICAgICAgaWYgdlsic3RhcnQiXSA8IHJhbmdlX3N0YXJ0IGFuZCB2WyJlbmQiXSA+IHJhbmdlX3N0YXJ0IHRoZW4nLA0KCQkJJyAgICAgICAgICAgIG1ldGFkYXRhX2VuZCA9IHZbImVuZCJdJywgDQoJCQknICAgICAgICAgICAgYnJlYWsnLCANCgkJCScgICAgICAgIGVuZCcsIA0KCQkJJyAgICBlbmQnLA0KCQkJJyAgICBnZy5zZWFyY2hOdW1iZXIoc3RyaW5nc0VuZCwgZ2cuVFlQRV9CWVRFLCBmYWxzZSwgZ2cuU0lHTl9FUVVBTCwgcmFuZ2Vfc3RhcnQsIG5pbCwgMSknLA0KCQkJJyAgICBsb2NhbCBlbmRfc2VhcmNoID0gZ2cuZ2V0UmVzdWx0cygxKScsIA0KCQkJJyAgICByYW5nZV9lbmQgPSBlbmRfc2VhcmNoWzFdLmFkZHJlc3MnLA0KCQkJJyAgICBnZy5jbGVhclJlc3VsdHMoKScsIA0KCQkJJ2VuZCcsDQoJCQknbWV0aG9kTmFtZUVkaXRzRm91bmQgPSB7fScsDQoJCQknYWN0aXZlTWV0aG9kTmFtZUVkaXRzID0ge30nLA0KCQkJJ2Z1bmN0aW9uIHNldE1ldGhvZFZhbHVlcyhmdW5jdGlvbl9pbmRleCwgZWRpdF9pbmRleCknLA0KCQkJJyAgICBpZiBub3QgcmFuZ2Vfc3RhcnQgdGhlbicsDQoJCQknICAgICAgICBnZXRSYW5nZSgpJywNCgkJCScgICAgZW5kJywNCgkJCScgICAgaWYgcmV2ZXJ0X3RhYmxlW2Z1bmN0aW9uX2luZGV4XSBhbmQgcmV2ZXJ0X3RhYmxlW2Z1bmN0aW9uX2luZGV4XVtlZGl0X2luZGV4XScsDQoJCQknICAgICAgICBhbmQgKGFjdGl2ZU1ldGhvZE5hbWVFZGl0c1tmdW5jdGlvbl9pbmRleF0gYW5kIGFjdGl2ZU1ldGhvZE5hbWVFZGl0c1tmdW5jdGlvbl9pbmRleF1bZWRpdF9pbmRleF0pIHRoZW4nLA0KCQkJJyAgICAgICAgZ2cuc2V0VmFsdWVzKHJldmVydF90YWJsZVtmdW5jdGlvbl9pbmRleF1bZWRpdF9pbmRleF0pJywNCgkJCScgICAgICAgIGFjdGl2ZU1ldGhvZE5hbWVFZGl0c1tmdW5jdGlvbl9pbmRleF1bZWRpdF9pbmRleF0gPSBuaWwnLA0KCQkJJyAgICAgICAgZ2cudG9hc3QoIuKdjCAiIC4uIHNjcmlwdEZ1bmN0aW9uc1tmdW5jdGlvbl9pbmRleF0ubWVudV9uYW1lIC4uICIgRGlzYWJsZWQg4p2MIiknLA0KCQkJJyAgICBlbHNlJywNCgkJCScgICAgICAgIGlmIG5vdCBhY3RpdmVNZXRob2ROYW1lRWRpdHNbZnVuY3Rpb25faW5kZXhdIHRoZW4nLA0KCQkJJyAgICAgICAgICAgIGFjdGl2ZU1ldGhvZE5hbWVFZGl0c1tmdW5jdGlvbl9pbmRleF0gPSB7fScsDQoJCQknICAgICAgICBlbmQnLA0KCQkJJyAgICAgICAgYWN0aXZlTWV0aG9kTmFtZUVkaXRzW2Z1bmN0aW9uX2luZGV4XVtlZGl0X2luZGV4XSA9IHRydWUnLA0KCQkJJyAgICAgICAgaWYgYXJjaC54NjQgdGhlbicsDQoJCQknICAgICAgICAgICAgZWRpdHNfYXJjaCA9ICJhcm04X2VkaXRzIicsDQoJCQknICAgICAgICBlbHNlJywNCgkJCScgICAgICAgICAgICBlZGl0c19hcmNoID0gImFybTdfZWRpdHMiJywNCgkJCScgICAgICAgIGVuZCcsDQoJCQknICAgICAgICBsb2NhbCBtZXRob2RfbmFtZSA9IHNjcmlwdEZ1bmN0aW9uc1tmdW5jdGlvbl9pbmRleF0uZWRpdHNbZWRpdF9pbmRleF0ubWV0aG9kX25hbWUnLA0KCQkJJyAgICAgICAgbG9jYWwgY2xhc3NfbmFtZSA9IHNjcmlwdEZ1bmN0aW9uc1tmdW5jdGlvbl9pbmRleF0uZWRpdHNbZWRpdF9pbmRleF0uY2xhc3NfbmFtZScsDQoJCQknICAgICAgICBsb2NhbCBhZGRyZXNzZXMgPSB7fScsDQoJCQknICAgICAgICBpZiBtZXRob2ROYW1lRWRpdHNGb3VuZFtmdW5jdGlvbl9pbmRleF0gYW5kIG1ldGhvZE5hbWVFZGl0c0ZvdW5kW2Z1bmN0aW9uX2luZGV4XVtlZGl0X2luZGV4XSB0aGVuJywNCgkJCScgICAgICAgICAgICBhZGRyZXNzZXMgPSBtZXRob2ROYW1lRWRpdHNGb3VuZFtmdW5jdGlvbl9pbmRleF1bZWRpdF9pbmRleF0nLA0KCQkJJyAgICAgICAgICAgIGxvY2FsIGVkaXRzID0gc2NyaXB0RnVuY3Rpb25zW2Z1bmN0aW9uX2luZGV4XS5lZGl0c1tlZGl0X2luZGV4XVtlZGl0c19hcmNoXScsDQoJCQknICAgICAgICAgICAgZm9yIGksIHYgaW4gaXBhaXJzKGFkZHJlc3NlcykgZG8nLA0KCQkJJyAgICAgICAgICAgICAgICB2LnZhbHVlID0gZWRpdHNbaV0nLA0KCQkJJyAgICAgICAgICAgIGVuZCcsDQoJCQknICAgICAgICAgICAgZ2cuc2V0VmFsdWVzKGFkZHJlc3NlcyknLA0KCQkJJyAgICAgICAgZWxzZScsDQoJCQknICAgICAgICAgICAgYWRkcmVzc2VzID0gZmluZE1ldGhvZChtZXRob2RfbmFtZSwgY2xhc3NfbmFtZSknLA0KCQkJJyAgICAgICAgICAgIGxvY2FsIGVkaXRzID0gc2NyaXB0RnVuY3Rpb25zW2Z1bmN0aW9uX2luZGV4XS5lZGl0c1tlZGl0X2luZGV4XVtlZGl0c19hcmNoXScsDQoJCQknICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoYWRkcmVzc2VzKSBkbycsDQoJCQknICAgICAgICAgICAgICAgIGxvY2FsIGFkZHJlc3NfdGFibGUgPSB7fScsDQoJCQknICAgICAgICAgICAgICAgIGxvY2FsIG9mZnNldCA9IDAnLA0KCQkJJyAgICAgICAgICAgICAgICBsb2NhbCBjb3VudCA9IDEnLA0KCQkJJyAgICAgICAgICAgICAgICByZXBlYXQnLA0KCQkJJyAgICAgICAgICAgICAgICAgICAgYWRkcmVzc190YWJsZVtjb3VudF0gPSB7fScsDQoJCQknICAgICAgICAgICAgICAgICAgICBpZiBtZXRob2ROYW1lRWRpdHNGb3VuZFtmdW5jdGlvbl9pbmRleF0gYW5kIG1ldGhvZE5hbWVFZGl0c0ZvdW5kW2Z1bmN0aW9uX2luZGV4XVtlZGl0X2luZGV4XSB0aGVuJywNCgkJCScgICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzX3RhYmxlW2NvdW50XS5hZGRyZXNzID0gdi5hZGRyZXNzJywNCgkJCScgICAgICAgICAgICAgICAgICAgIGVsc2UnLA0KCQkJJyAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3NfdGFibGVbY291bnRdLmFkZHJlc3MgPSB2ICsgb2Zmc2V0JywNCgkJCScgICAgICAgICAgICAgICAgICAgIGVuZCcsDQoJCQknICAgICAgICAgICAgICAgICAgICBhZGRyZXNzX3RhYmxlW2NvdW50XS5mbGFncyA9IGdnLlRZUEVfRFdPUkQnLA0KCQkJJyAgICAgICAgICAgICAgICAgICAgYWRkcmVzc190YWJsZVtjb3VudF0udmFsdWUgPSBlZGl0c1tjb3VudF0nLA0KCQkJJyAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0ICsgNCcsDQoJCQknICAgICAgICAgICAgICAgICAgICBjb3VudCA9IGNvdW50ICsgMScsDQoJCQknICAgICAgICAgICAgICAgIHVudGlsIChjb3VudCA9PSAjZWRpdHMgKyAxKScsDQoJCQknICAgICAgICAgICAgICAgIGlmIG5vdCByZXZlcnRfdGFibGVbZnVuY3Rpb25faW5kZXhdIHRoZW4nLA0KCQkJJyAgICAgICAgICAgICAgICAgICAgcmV2ZXJ0X3RhYmxlW2Z1bmN0aW9uX2luZGV4XSA9IHt9JywNCgkJCScgICAgICAgICAgICAgICAgZW5kJywNCgkJCScgICAgICAgICAgICAgICAgaWYgbm90IG1ldGhvZE5hbWVFZGl0c0ZvdW5kW2Z1bmN0aW9uX2luZGV4XSB0aGVuJywNCgkJCScgICAgICAgICAgICAgICAgICAgIG1ldGhvZE5hbWVFZGl0c0ZvdW5kW2Z1bmN0aW9uX2luZGV4XSA9IHt9JywNCgkJCScgICAgICAgICAgICAgICAgZW5kJywNCgkJCScgICAgICAgICAgICAgICAgaWYgbm90IHJldmVydF90YWJsZVtmdW5jdGlvbl9pbmRleF1bZWRpdF9pbmRleF0gdGhlbicsDQoJCQknICAgICAgICAgICAgICAgICAgICByZXZlcnRfdGFibGVbZnVuY3Rpb25faW5kZXhdW2VkaXRfaW5kZXhdID0ge30nLA0KCQkJJyAgICAgICAgICAgICAgICAgICAgbWV0aG9kTmFtZUVkaXRzRm91bmRbZnVuY3Rpb25faW5kZXhdW2VkaXRfaW5kZXhdID0ge30nLA0KCQkJJyAgICAgICAgICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoZ2cuZ2V0VmFsdWVzKGFkZHJlc3NfdGFibGUpKSBkbycsDQoJCQknICAgICAgICAgICAgICAgICAgICAgICAgcmV2ZXJ0X3RhYmxlW2Z1bmN0aW9uX2luZGV4XVtlZGl0X2luZGV4XVsjcmV2ZXJ0X3RhYmxlW2Z1bmN0aW9uX2luZGV4XVtlZGl0X2luZGV4XSArIDFdID0gdicsDQoJCQknICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kTmFtZUVkaXRzRm91bmRbZnVuY3Rpb25faW5kZXhdW2VkaXRfaW5kZXhdWyNtZXRob2ROYW1lRWRpdHNGb3VuZFtmdW5jdGlvbl9pbmRleF1bZWRpdF9pbmRleF0gKyAxXSA9IHYnLA0KCQkJJyAgICAgICAgICAgICAgICAgICAgZW5kJywNCgkJCScgICAgICAgICAgICAgICAgZW5kJywNCgkJCScgICAgICAgICAgICAgICAgZ2cuc2V0VmFsdWVzKGFkZHJlc3NfdGFibGUpJywNCgkJCScgICAgICAgICAgICBlbmQnLA0KCQkJJyAgICAgICAgZW5kJywNCgkJCScgICAgICAgIGdnLnRvYXN0KCLinIUgIiAuLiBzY3JpcHRGdW5jdGlvbnNbZnVuY3Rpb25faW5kZXhdLm1lbnVfbmFtZSAuLiAiIEVuYWJsZWQg4pyFIiknLA0KCQkJJyAgICBlbmQnLA0KCQkJJ2VuZCcsDQoJCQknZnVuY3Rpb24gaG9tZSgpJywgDQoJCQknICAgIGxvY2FsIG1lbnVOYW1lcyA9IHt9JywNCgkJCScgICAgZm9yIGksIHYgaW4gcGFpcnMoc2NyaXB0RnVuY3Rpb25zKSBkbycsDQoJCQknICAgICAgICBtZW51TmFtZXNbaV0gPSBlbW9qaXNbaV0uLiIgIi4uIHYubWVudV9uYW1lJywgDQoJCQknICAgIGVuZCcsDQoJCQknICAgIG1lbnVOYW1lc1sjbWVudU5hbWVzICsxXSA9ICLinYwgRXhpdCInLA0KCQkJJyAgICBsb2NhbCBtZW51ID0gZ2cuY2hvaWNlKG1lbnVOYW1lcyxuaWwsc2NyaXB0X3RpdGxlKScsIA0KCQkJJyAgICBpZiBtZW51IH49IG5pbCB0aGVuJywNCgkJCScgICAgICAgIGlmIG1lbnUgPT0gI21lbnVOYW1lcyB0aGVuJywgDQoJCQknICAgICAgICAgICAgb3MuZXhpdCgpJywgDQoJCQknICAgICAgICBlbHNlJywNCgkJCScgICAgICAgICAgICBzZXRWYWx1ZXMobWVudSknLCANCgkJCScgICAgICAgIGVuZCcsIA0KCQkJJyAgICBlbmQnLCANCgkJCSdlbmQnLA0KCQkJJ2Z1bmN0aW9uIHNldFZhbHVlcyhmdW5jdGlvbl9pbmRleCknLCANCgkJCScgICAgaWYgZW1vamlzW2Z1bmN0aW9uX2luZGV4XSA9PSAi8J+UmCIgdGhlbicsDQoJCQknICAgICAgICBlbW9qaXNbZnVuY3Rpb25faW5kZXhdID0gIuKchSIgJywgDQoJCQknICAgIGVsc2UnLA0KCQkJJyAgICAgICAgZW1vamlzW2Z1bmN0aW9uX2luZGV4XSA9ICLwn5SYIiAnLCANCgkJCScgICAgZW5kJywNCgkJCScgICAgZm9yIGksIHYgaW4gcGFpcnMoc2NyaXB0RnVuY3Rpb25zW2Z1bmN0aW9uX2luZGV4XS5lZGl0cykgZG8nLA0KCQkJJyAgICAgICAgaWYgdi5tZXRob2RfbmFtZSB0aGVuJywgDQoJCQknICAgICAgICAgICAgc2V0TWV0aG9kVmFsdWVzKGZ1bmN0aW9uX2luZGV4LCBpKScsDQoJCQknICAgICAgICBlbHNlaWYgdi5maWVsZF9uYW1lIHRoZW4nLA0KCQkJJyAgICAgICAgICAgIHNldEZpZWxkVmFsdWVzKHYsZnVuY3Rpb25faW5kZXgsIGkpJywgDQoJCQknICAgICAgICBlbHNlJywNCgkJCScgICAgICAgICAgICBzZXRTVkZWYWx1ZXModixmdW5jdGlvbl9pbmRleCwgaSknLCANCgkJCScgICAgICAgIGVuZCcsIA0KCQkJJyAgICBlbmQnLCANCgkJCSdlbmQnLA0KCQkJJ2Z1bmN0aW9uIGZpbmRNZXRob2QobWV0aG9kX25hbWUsIHBhc3NlZF9jbGFzc19uYW1lKScsIA0KCQkJJyAgICBpZiBhcmNoLng2NCB0aGVuJywNCgkJCScgICAgICAgIHBfb2Zmc2V0ID0gMTYnLCANCgkJCScgICAgICAgIHBfb2Zmc2V0MiA9IDgnLA0KCQkJJyAgICAgICAgZmxhZ190eXBlID0gZ2cuVFlQRV9RV09SRCcsIA0KCQkJJyAgICBlbHNlJywgDQoJCQknICAgICAgICBwX29mZnNldCA9IDgnLA0KCQkJJyAgICAgICAgcF9vZmZzZXQyID0gNCcsIA0KCQkJJyAgICAgICAgZmxhZ190eXBlID0gZ2cuVFlQRV9EV09SRCcsIA0KCQkJJyAgICBlbmQnLA0KCQkJJyAgICBtZXRob2RfbmFtZV9hZGRyZXNzID0gc2VhcmNoRHVtcChtZXRob2RfbmFtZSknLCANCgkJCScgICAgZ2cuY2xlYXJSZXN1bHRzKCknLA0KCQkJJyAgICBnZy5zZXRSYW5nZXMoZ2cuUkVHSU9OX0NfQUxMT0MgfCBnZy5SRUdJT05fQ19IRUFQKScsDQoJCQknICAgIGdnLnNlYXJjaE51bWJlcihtZXRob2RfbmFtZV9hZGRyZXNzLCBmbGFnX3R5cGUpJywNCgkJCScgICAgbG9jYWwgcmVzdWx0cyA9IGdnLmdldFJlc3VsdHMoZ2cuZ2V0UmVzdWx0c0NvdW50KCkpJywNCgkJCScgICAgbG9jYWwgbWV0aG9kc19mb3VuZCA9IHt9JywgDQoJCQknICAgIGxvY2FsIGlsMmNwcF9hZGRyZXNzZXMgPSB7fScsDQoJCQknICAgIGZvciBpLCB2IGluIHBhaXJzKHJlc3VsdHMpIGRvJywgDQoJCQknICAgICAgICBsb2NhbCBnZXRfY2xhc3NfcG9pbnRlcl8xID0ge30nLA0KCQkJJyAgICAgICAgZ2V0X2NsYXNzX3BvaW50ZXJfMVsxXSA9IHt9JywNCgkJCScgICAgICAgIGdldF9jbGFzc19wb2ludGVyXzFbMV0uYWRkcmVzcyA9IHYuYWRkcmVzcyArIHBfb2Zmc2V0MicsDQoJCQknICAgICAgICBnZXRfY2xhc3NfcG9pbnRlcl8xWzFdLmZsYWdzID0gZmxhZ190eXBlJywNCgkJCScgICAgICAgIGdldF9jbGFzc19wb2ludGVyXzEgPSBnZy5nZXRWYWx1ZXMoZ2V0X2NsYXNzX3BvaW50ZXJfMSknLA0KCQkJJyAgICAgICAgbG9jYWwgZ2V0X2NsYXNzX3BvaW50ZXJfMiA9IHt9JywgDQoJCQknICAgICAgICBnZXRfY2xhc3NfcG9pbnRlcl8yWzFdID0ge30nLA0KCQkJJyAgICAgICAgZ2V0X2NsYXNzX3BvaW50ZXJfMlsxXS5hZGRyZXNzID0gZ2V0X2NsYXNzX3BvaW50ZXJfMVsxXS52YWx1ZSArIHBfb2Zmc2V0JywNCgkJCScgICAgICAgIGdldF9jbGFzc19wb2ludGVyXzJbMV0uZmxhZ3MgPSBmbGFnX3R5cGUnLA0KCQkJJyAgICAgICAgZ2V0X2NsYXNzX3BvaW50ZXJfMiA9IGdnLmdldFZhbHVlcyhnZXRfY2xhc3NfcG9pbnRlcl8yKScsDQoJCQknICAgICAgICBsb2NhbCBnZXRfY2xhc3Nfc3RhcnQgPSB7fScsIA0KCQkJJyAgICAgICAgZ2V0X2NsYXNzX3N0YXJ0WzFdID0ge30nLA0KCQkJJyAgICAgICAgZ2V0X2NsYXNzX3N0YXJ0WzFdLmFkZHJlc3MgPSBnZXRfY2xhc3NfcG9pbnRlcl8yWzFdLnZhbHVlJywNCgkJCScgICAgICAgIGdldF9jbGFzc19zdGFydFsxXS5mbGFncyA9IGdnLlRZUEVfQllURScsDQoJCQknICAgICAgICBnZy5sb2FkUmVzdWx0cyhnZXRfY2xhc3Nfc3RhcnQpJywNCgkJCScgICAgICAgIGdldF9jbGFzc19zdGFydCA9IGdnLmdldFZhbHVlcyhnZXRfY2xhc3Nfc3RhcnQpJywNCgkJCScgICAgICAgIGxvY2FsIGdldF9jbGFzcyA9IHt9JywgDQoJCQknICAgICAgICBsb2NhbCBvZmZzZXQgPSAwJywNCgkJCScgICAgICAgIGxvY2FsIGNvdW50ID0gMScsIA0KCQkJJyAgICAgICAgcmVwZWF0JywgDQoJCQknICAgICAgICAgICAgZ2V0X2NsYXNzW2NvdW50XSA9IHt9JywNCgkJCScgICAgICAgICAgICBnZXRfY2xhc3NbY291bnRdLmFkZHJlc3MgPSBnZXRfY2xhc3NfcG9pbnRlcl8yWzFdLnZhbHVlICsgb2Zmc2V0JywNCgkJCScgICAgICAgICAgICBnZXRfY2xhc3NbY291bnRdLmZsYWdzID0gZ2cuVFlQRV9CWVRFJywgDQoJCQknICAgICAgICAgICAgY291bnQgPSBjb3VudCArIDEnLA0KCQkJJyAgICAgICAgICAgIG9mZnNldCA9IG9mZnNldCArIDEnLCANCgkJCScgICAgICAgIHVudGlsIChjb3VudCA9PSAxMDApJywNCgkJCScgICAgICAgIGdldF9jbGFzcyA9IGdnLmdldFZhbHVlcyhnZXRfY2xhc3MpJywgDQoJCQknICAgICAgICBsb2NhbCBjbGFzc19uYW1lID0gIiInLA0KCQkJJyAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBwYWlycyhnZXRfY2xhc3MpIGRvJywNCgkJCScgICAgICAgICAgICBjbGFzc19uYW1lID0gY2xhc3NfbmFtZSAuLiBzdHJpbmcuY2hhcih2YWx1ZS52YWx1ZSknLA0KCQkJJyAgICAgICAgICAgIGlmIHZhbHVlLnZhbHVlID09IDAgdGhlbicsIA0KCQkJJyAgICAgICAgICAgICAgICBicmVhaycsIA0KCQkJJyAgICAgICAgICAgIGVuZCcsDQoJCQknICAgICAgICBlbmQnLCANCgkJCScgICAgICAgIGlmIGNsYXNzX25hbWUgPT0gcGFzc2VkX2NsYXNzX25hbWUgdGhlbicsDQoJCQknICAgICAgICAgICAgbG9jYWwgZ2V0X2lsMmNwcF9hZGRyZXNzID0ge30nLA0KCQkJJyAgICAgICAgICAgIGdldF9pbDJjcHBfYWRkcmVzc1sxXSA9IHt9JywNCgkJCScgICAgICAgICAgICBnZXRfaWwyY3BwX2FkZHJlc3NbMV0uYWRkcmVzcyA9IHYuYWRkcmVzcyAtIHBfb2Zmc2V0JywNCgkJCScgICAgICAgICAgICBnZXRfaWwyY3BwX2FkZHJlc3NbMV0uZmxhZ3MgPSBmbGFnX3R5cGUnLA0KCQkJJyAgICAgICAgICAgIGdldF9pbDJjcHBfYWRkcmVzcyA9IGdnLmdldFZhbHVlcyhnZXRfaWwyY3BwX2FkZHJlc3MpJywNCgkJCScgICAgICAgICAgICBpbDJjcHBfYWRkcmVzc2VzWyNpbDJjcHBfYWRkcmVzc2VzICsgMV0gPSBnZXRfaWwyY3BwX2FkZHJlc3NbMV0udmFsdWUnLA0KCQkJJyAgICAgICAgZW5kJywgDQoJCQknICAgIGVuZCcsIA0KCQkJJyAgICByZXR1cm4gaWwyY3BwX2FkZHJlc3NlcycsIA0KCQkJJ2VuZCcsDQoJCQknZnVuY3Rpb24gcmVmaW5lUmVzdWx0cyhzZWFyY2hfc3RyaW5nKScsDQoJCQknICAgIGxvY2FsIGZpcnN0X3NlYXJjaF9zdHJpbmcgPSAiMDsiIC4uIHN0cmluZy5ieXRlKHN0cmluZy5zdWIoc2VhcmNoX3N0cmluZywgMSwgMSkpIC4uICI6OjIiJywNCgkJCScgICAgZ2cucmVmaW5lTnVtYmVyKGZpcnN0X3NlYXJjaF9zdHJpbmcsIGdnLlRZUEVfQllURSknLA0KCQkJJyAgICBsb2NhbCBzZWNvbmRfc2VhcmNoX3N0cmluZyA9IHN0cmluZy5ieXRlKHN0cmluZy5zdWIoc2VhcmNoX3N0cmluZywgMSwgMSkpJywNCgkJCScgICAgZ2cucmVmaW5lTnVtYmVyKHNlY29uZF9zZWFyY2hfc3RyaW5nLCBnZy5UWVBFX0JZVEUpJywNCgkJCScgICAgbG9jYWwgc2VhcmNoX3Jlc3VsdHMgPSBnZy5nZXRSZXN1bHRzKGdnLmdldFJlc3VsdHNDb3VudCgpKScsDQoJCQknICAgIHJldHVybiBzZWFyY2hfcmVzdWx0c1sxXS5hZGRyZXNzJywgDQoJCQknZW5kJywgDQoJCQknZnVuY3Rpb24gc2VhcmNoRHVtcChzZWFyY2hfc3RyaW5nKScsDQoJCQknICAgIGdnLnNldFJhbmdlcyhnZy5SRUdJT05fT1RIRVIgfCBnZy5SRUdJT05fQ19BTExPQyknLCANCgkJCScgICAgaWYgc2VhcmNoX3N0cmluZyB0aGVuJywNCgkJCScgICAgICAgIGdnLmNsZWFyUmVzdWx0cygpJywNCgkJCScgICAgICAgIGdnLnNlYXJjaE51bWJlcihjcmVhdGVTZWFyY2goc2VhcmNoX3N0cmluZyksIGdnLlRZUEVfQllURSwgZmFsc2UsIGdnLlNJR05fRVFVQUwsIHJhbmdlX3N0YXJ0LCByYW5nZV9lbmQpJywNCgkJCScgICAgICAgIGlmIGdnLmdldFJlc3VsdHNDb3VudCgpID4gMCB0aGVuJywNCgkJCScgICAgICAgICAgICByZXR1cm4gcmVmaW5lUmVzdWx0cyhzZWFyY2hfc3RyaW5nKScsIA0KCQkJJyAgICAgICAgZW5kJywgDQoJCQknICAgIGVuZCcsIA0KCQkJJ2VuZCcsDQoJCQknZnVuY3Rpb24gY3JlYXRlU2VhcmNoKHNlYXJjaF9zdHJpbmcpJywgDQoJCQknICAgIGxvY2FsIGJ5dGVfc2VhcmNoID0gIjA7IicsDQoJCQknICAgIGZvciBjIGluIHNlYXJjaF9zdHJpbmc6Z21hdGNoICIuIiBkbycsDQoJCQknICAgICAgICBieXRlX3NlYXJjaCA9IGJ5dGVfc2VhcmNoIC4uIHN0cmluZy5ieXRlKGMpIC4uICI7IicsIA0KCQkJJyAgICBlbmQnLA0KCQkJJyAgICBieXRlX3NlYXJjaCA9IGJ5dGVfc2VhcmNoIC4uICIwOjoiIC4uICNzZWFyY2hfc3RyaW5nICsgMicsDQoJCQknICAgIHJldHVybiBieXRlX3NlYXJjaCcsIA0KCQkJJ2VuZCcsIA0KCQkJJ2Z1bmN0aW9uIGZfaGV4KG4pJywNCgkJCScgICAgcmV0dXJuICIweCIgLi4gc3RyaW5nLmZvcm1hdCgiJXgiLCBuKScsIA0KCQkJJ2VuZCcsDQoJCQknc2V0RmllbGRzID0ge30nLA0KCQkJJ2Z1bmN0aW9uIHNldEZpZWxkVmFsdWVzKHNhdmVkX2VkaXRfdGFibGUsIGZ1bmN0aW9uX2luZGV4LCBlZGl0X2luZGV4KScsDQoJCQknCSBpZiBub3QgcmFuZ2Vfc3RhcnQgdGhlbicsDQoJCQknCQkgZ2V0UmFuZ2UoKScsDQoJCQknCSBlbmQnLA0KCQkJJyAgICBpZiBub3Qgc2V0RmllbGRzW2Z1bmN0aW9uX2luZGV4XSB0aGVuJywNCgkJCScgICAgICAgIHNldEZpZWxkc1tmdW5jdGlvbl9pbmRleF0gPSB7fScsDQoJCQknICAgICAgICBzZXRGaWVsZHNbZnVuY3Rpb25faW5kZXhdW2VkaXRfaW5kZXhdID0gZmFsc2UnLA0KCQkJJyAgICBlbHNlaWYgc2V0RmllbGRzW2Z1bmN0aW9uX2luZGV4XSBhbmQgbm90IHNldEZpZWxkc1tmdW5jdGlvbl9pbmRleF1bZWRpdF9pbmRleF0gdGhlbicsDQoJCQknICAgICAgICBzZXRGaWVsZHNbZnVuY3Rpb25faW5kZXhdW2VkaXRfaW5kZXhdID0gZmFsc2UnLA0KCQkJJyAgICBlbmQnLA0KCQkJJyAgICBpZiBzZXRGaWVsZHNbZnVuY3Rpb25faW5kZXhdW2VkaXRfaW5kZXhdID09IHRydWUgYW5kIHJldmVydF90YWJsZVtmdW5jdGlvbl9pbmRleF0nLA0KCQkJJyAgICAgICAgYW5kIHJldmVydF90YWJsZVtmdW5jdGlvbl9pbmRleF1bZWRpdF9pbmRleF0gdGhlbicsDQoJCQknICAgICAgICBnZy5zZXRWYWx1ZXMocmV2ZXJ0X3RhYmxlW2Z1bmN0aW9uX2luZGV4XVtlZGl0X2luZGV4XSknLA0KCQkJJyAgICAgICAgc2V0RmllbGRzW2Z1bmN0aW9uX2luZGV4XVtlZGl0X2luZGV4XSA9IGZhbHNlJywNCgkJCScgICAgICAgIGdnLnRvYXN0KCLinYwgIiAuLiBzY3JpcHRGdW5jdGlvbnNbZnVuY3Rpb25faW5kZXhdLm1lbnVfbmFtZSAuLiAiIERpc2FibGVkIOKdjCIpJywNCgkJCScgICAgZWxzZScsDQoJCQknICAgICAgICBzZXRGaWVsZHNbZnVuY3Rpb25faW5kZXhdW2VkaXRfaW5kZXhdID0gdHJ1ZScsDQoJCQknICAgICAgICBsb2NhbCBzdHJpbmdfYWRkcmVzcyA9IHt9JywNCgkJCScgICAgICAgIGxvY2FsIGNsYXNzX2hlYWRlcnMgPSB7fScsDQoJCQknICAgICAgICBsb2NhbCBnZXRfbnVtYmVyX29mX2ZpZWxkcyA9IHt9JywNCgkJCScgICAgICAgIGxvY2FsIGZpcnN0X2ZpZWxkX2FkZHJlc3MgPSB7fScsDQoJCQknICAgICAgICBsb2NhbCBmaWVsZF9kYXRhID0gIiInLA0KCQkJJyAgICAgICAgbG9jYWwgZmllbGRfbmFtZV9wb2ludGVyID0gIiInLA0KCQkJJyAgICAgICAgbG9jYWwgdHlwZV9wb2ludGVyID0gIiInLA0KCQkJJyAgICAgICAgbG9jYWwgY2xhc3NfcG9pbnRlciA9ICIiJywNCgkJCScgICAgICAgIGxvY2FsIGZpZWxkX29mZnNldCA9ICIiJywNCgkJCScgICAgICAgIGxvY2FsIGN1cnJlbnRfYWRkcmVzcyA9ICIiJywNCgkJCScgICAgICAgIGxvY2FsIGdldF9maWVsZF9uYW1lID0ge30nLA0KCQkJJyAgICAgICAgbG9jYWwgb2Zmc2V0ID0gMCcsDQoJCQknICAgICAgICBsb2NhbCBjb3VudCA9IDEnLA0KCQkJJyAgICAgICAgbG9jYWwgZmllbGRfZGF0YSA9IHt9JywNCgkJCScgICAgICAgIGxvY2FsIGZpZWxkX25hbWUgPSAiIicsDQoJCQknICAgICAgICBsb2NhbCBnZXRfdHlwZSA9IHt9JywNCgkJCScgICAgICAgIGxvY2FsIGZpZWxkX3R5cGUgPSB7fScsDQoJCQknICAgICAgICBsb2NhbCBwb2ludGVyc190b19pbnN0YW5jZXMgPSB7fScsDQoJCQknICAgICAgICBpZiBub3QgY2xhc3MgdGhlbicsDQoJCQknICAgICAgICAgICAgY2xhc3MgPSAiIicsDQoJCQknICAgICAgICBlbmQnLA0KCQkJJyAgICAgICAgaWYgYXJjaC54NjQgdGhlbicsDQoJCQknICAgICAgICAgICAgZmxhZ190eXBlID0gZ2cuVFlQRV9RV09SRCcsDQoJCQknICAgICAgICBlbHNlJywNCgkJCScgICAgICAgICAgICBmbGFnX3R5cGUgPSBnZy5UWVBFX0RXT1JEJywNCgkJCScgICAgICAgIGVuZCcsDQoJCQknICAgICAgICBnZy5jbGVhckxpc3QoKScsDQoJCQknICAgICAgICB3b3JraW5nX2NsYXNzID0gc2F2ZWRfZWRpdF90YWJsZS5jbGFzc19uYW1lJywNCgkJCScgICAgICAgIGdnLnNldFJhbmdlcyhnZy5SRUdJT05fT1RIRVIpJywNCgkJCScgICAgICAgIGdnLmNsZWFyUmVzdWx0cygpJywNCgkJCScgICAgICAgIGdnLnNlYXJjaE51bWJlcihjcmVhdGVTZWFyY2goc2F2ZWRfZWRpdF90YWJsZS5jbGFzc19uYW1lKSwgZ2cuVFlQRV9CWVRFLCBmYWxzZSwgZ2cuU0lHTl9FUVVBTCwgcmFuZ2Vfc3RhcnQsIHJhbmdlX2VuZCknLA0KCQkJJyAgICAgICAgc3RyaW5nX2FkZHJlc3MgPSBnZy5nZXRSZXN1bHRzKDEsIDEpJywNCgkJCScgICAgICAgIGlmIGdnLmdldFJlc3VsdHNDb3VudCgpID09IDAgdGhlbicsDQoJCQknICAgICAgICAgICAgbm9uZV9mb3VuZCA9IHRydWUnLA0KCQkJJyAgICAgICAgICAgIGdvdG8gbm9uZScsDQoJCQknICAgICAgICBlbmQnLA0KCQkJJyAgICAgICAgc3RyaW5nX2FkZHJlc3MgPSBzdHJpbmdfYWRkcmVzc1sxXS5hZGRyZXNzJywNCgkJCScgICAgICAgIGdnLmNsZWFyUmVzdWx0cygpJywNCgkJCScgICAgICAgIGdnLnNldFJhbmdlcyhnZy5SRUdJT05fQ19BTExPQyknLA0KCQkJJyAgICAgICAgZ2cuc2VhcmNoTnVtYmVyKHN0cmluZ19hZGRyZXNzLCBmbGFnX3R5cGUpJywNCgkJCScgICAgICAgIGNsYXNzX2hlYWRlcnMgPSBnZy5nZXRSZXN1bHRzKGdnLmdldFJlc3VsdHNDb3VudCgpKScsDQoJCQknICAgICAgICBpZiBnZy5nZXRSZXN1bHRzQ291bnQoKSA9PSAwIHRoZW4nLA0KCQkJJyAgICAgICAgICAgIG5vbmVfZm91bmQgPSB0cnVlJywNCgkJCScgICAgICAgICAgICBnb3RvIG5vbmUnLA0KCQkJJyAgICAgICAgZW5kJywNCgkJCScgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKGNsYXNzX2hlYWRlcnMpIGRvJywNCgkJCScgICAgICAgICAgICBpZiBhcmNoLng2NCB0aGVuJywNCgkJCScgICAgICAgICAgICAgICAgY2xhc3NfaGVhZGVyc1tpXS5hZGRyZXNzID0gY2xhc3NfaGVhZGVyc1tpXS5hZGRyZXNzIC0gMTYnLA0KCQkJJyAgICAgICAgICAgICAgICBuYW1lc3BhY2Vfb2Zmc2V0ID0gMjQnLA0KCQkJJyAgICAgICAgICAgIGVsc2UnLA0KCQkJJyAgICAgICAgICAgICAgICBjbGFzc19oZWFkZXJzW2ldLmFkZHJlc3MgPSBjbGFzc19oZWFkZXJzW2ldLmFkZHJlc3MgLSA4JywNCgkJCScgICAgICAgICAgICAgICAgbmFtZXNwYWNlX29mZnNldCA9IDEyJywNCgkJCScgICAgICAgICAgICBlbmQnLA0KCQkJJyAgICAgICAgZW5kJywNCgkJCScgICAgICAgIGdnLnNldFJhbmdlcyhnZy5SRUdJT05fQU5PTllNT1VTKScsDQoJCQknICAgICAgICBnZy5sb2FkUmVzdWx0cyhjbGFzc19oZWFkZXJzKScsDQoJCQknICAgICAgICBnZy5zZWFyY2hQb2ludGVyKDApJywNCgkJCScgICAgICAgIGluc3RhbmNlX2hlYWRlcnMgPSBnZy5nZXRSZXN1bHRzKGdnLmdldFJlc3VsdHNDb3VudCgpKScsDQoJCQknICAgICAgICBmb3VuZF9jbGFzc2VzID0ge30nLA0KCQkJJyAgICAgICAgZm9yIGksIHYgaW4gaXBhaXJzKGluc3RhbmNlX2hlYWRlcnMpIGRvJywNCgkJCScgICAgICAgICAgICBpZiBub3QgZm91bmRfY2xhc3Nlc1t0b3N0cmluZyh2LnZhbHVlKV0gdGhlbicsDQoJCQknICAgICAgICAgICAgICAgIGZvdW5kX2NsYXNzZXNbdG9zdHJpbmcodi52YWx1ZSldID0gMCcsDQoJCQknICAgICAgICAgICAgZWxzZScsDQoJCQknICAgICAgICAgICAgICAgIGZvdW5kX2NsYXNzZXNbdG9zdHJpbmcodi52YWx1ZSldID0gZm91bmRfY2xhc3Nlc1t0b3N0cmluZyh2LnZhbHVlKV0gKyAxJywNCgkJCScgICAgICAgICAgICBlbmQnLA0KCQkJJyAgICAgICAgZW5kJywNCgkJCScgICAgICAgIGZvdW5kX2NsYXNzZXNfc29ydGVkID0ge30nLA0KCQkJJyAgICAgICAgZm9yIGssIHYgaW4gcGFpcnMoZm91bmRfY2xhc3NlcykgZG8nLA0KCQkJJyAgICAgICAgICAgIGZvdW5kX2NsYXNzZXNfc29ydGVkWyNmb3VuZF9jbGFzc2VzX3NvcnRlZCArIDFdID0geycsDQoJCQknICAgICAgICAgICAgICAgIGNsYXNzX2FkZHJlc3MgPSBrLCcsDQoJCQknICAgICAgICAgICAgICAgIHBvaW50ZXJzX3RvID0gdicsDQoJCQknICAgICAgICAgICAgfScsDQoJCQknICAgICAgICBlbmQnLA0KCQkJJyAgICAgICAgbmFtZXNwYWNlX25hbWVzID0ge30nLA0KCQkJJyAgICAgICAgZm9yIGksIHYgaW4gaXBhaXJzKGZvdW5kX2NsYXNzZXNfc29ydGVkKSBkbycsDQoJCQknICAgICAgICAgICAgbmFtZXNwYWNlX3N0cmluZ19hZGRyZXNzID0ge30nLA0KCQkJJyAgICAgICAgICAgIG5hbWVzcGFjZV9zdHJpbmdfYWRkcmVzc1sxXSA9IHt9JywNCgkJCScgICAgICAgICAgICBuYW1lc3BhY2Vfc3RyaW5nX2FkZHJlc3NbMV0uYWRkcmVzcyA9IHYuY2xhc3NfYWRkcmVzcyArIG5hbWVzcGFjZV9vZmZzZXQnLA0KCQkJJyAgICAgICAgICAgIG5hbWVzcGFjZV9zdHJpbmdfYWRkcmVzc1sxXS5mbGFncyA9IGZsYWdfdHlwZScsDQoJCQknICAgICAgICAgICAgbmFtZXNwYWNlX3N0cmluZ19hZGRyZXNzID0gZ2cuZ2V0VmFsdWVzKG5hbWVzcGFjZV9zdHJpbmdfYWRkcmVzcyknLA0KCQkJJyAgICAgICAgICAgIG5hbWVzcGFjZV9zdHJpbmdfYWRkcmVzcyA9IG5hbWVzcGFjZV9zdHJpbmdfYWRkcmVzc1sxXS52YWx1ZScsDQoJCQknICAgICAgICAgICAgZ2V0X25hbWVzcGFjZV9uYW1lID0ge30nLA0KCQkJJyAgICAgICAgICAgIG9mZnNldCA9IDAnLA0KCQkJJyAgICAgICAgICAgIGNvdW50ID0gMScsDQoJCQknICAgICAgICAgICAgcmVwZWF0JywNCgkJCScgICAgICAgICAgICAgICAgZ2V0X25hbWVzcGFjZV9uYW1lW2NvdW50XSA9IHt9JywNCgkJCScgICAgICAgICAgICAgICAgZ2V0X25hbWVzcGFjZV9uYW1lW2NvdW50XS5hZGRyZXNzID0gbmFtZXNwYWNlX3N0cmluZ19hZGRyZXNzICsgb2Zmc2V0JywNCgkJCScgICAgICAgICAgICAgICAgZ2V0X25hbWVzcGFjZV9uYW1lW2NvdW50XS5mbGFncyA9IGdnLlRZUEVfQllURScsDQoJCQknICAgICAgICAgICAgICAgIGNvdW50ID0gY291bnQgKyAxJywNCgkJCScgICAgICAgICAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0ICsgMScsDQoJCQknICAgICAgICAgICAgdW50aWwgKGNvdW50ID09IDEwMCknLA0KCQkJJyAgICAgICAgICAgIGdldF9uYW1lc3BhY2VfbmFtZSA9IGdnLmdldFZhbHVlcyhnZXRfbmFtZXNwYWNlX25hbWUpJywNCgkJCScgICAgICAgICAgICBuYW1lc3BhY2VfbmFtZSA9ICIiJywNCgkJCScgICAgICAgICAgICBmb3IgaW5kZXgsIHZhbHVlIGluIHBhaXJzKGdldF9uYW1lc3BhY2VfbmFtZSkgZG8nLA0KCQkJJyAgICAgICAgICAgICAgICBpZiB2YWx1ZS52YWx1ZSA+PSAwIGFuZCB2YWx1ZS52YWx1ZSA8PSAyNTUgdGhlbicsDQoJCQknICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2VfbmFtZSA9IG5hbWVzcGFjZV9uYW1lIC4uIHN0cmluZy5jaGFyKHZhbHVlLnZhbHVlKScsDQoJCQknICAgICAgICAgICAgICAgIGVuZCcsDQoJCQknICAgICAgICAgICAgICAgIGlmIHZhbHVlLnZhbHVlID09IDAgdGhlbicsDQoJCQknICAgICAgICAgICAgICAgICAgICBicmVhaycsDQoJCQknICAgICAgICAgICAgICAgIGVuZCcsDQoJCQknICAgICAgICAgICAgZW5kJywNCgkJCQ0KCQkJJyAgICAgICAgICAgIGlmIG5hbWVzcGFjZV9uYW1lID09IHNhdmVkX2VkaXRfdGFibGUuZWRpdF9uYW1lc3BhY2UgdGhlbicsDQoJCQknICAgICAgICAgICAgICAgIGdnLnJlZmluZU51bWJlcihmb3VuZF9jbGFzc2VzX3NvcnRlZFtpXS5jbGFzc19hZGRyZXNzLCBmbGFnX3R5cGUpJywNCgkJCScgICAgICAgICAgICAgICAgaW5zdGFuY2VfaGVhZGVycyA9IGdnLmdldFJlc3VsdHMoZ2cuZ2V0UmVzdWx0Q291bnQoKSknLA0KCQkJJyAgICAgICAgICAgICAgICBicmVhaycsDQoJCQknICAgICAgICAgICAgZW5kJywNCgkJCScgICAgICAgIGVuZCcsDQoJCQknICAgICAgICBpZiBnZy5nZXRSZXN1bHRzQ291bnQoKSA9PSAwIHRoZW4nLA0KCQkJJyAgICAgICAgICAgIG5vbmVfZm91bmQgPSB0cnVlJywNCgkJCScgICAgICAgICAgICBnb3RvIG5vbmUnLA0KCQkJJyAgICAgICAgZW5kJywNCgkJCScgICAgICAgIGNsYXNzX2hlYWRlciA9IGluc3RhbmNlX2hlYWRlcnNbMV0udmFsdWUnLA0KCQkJJyAgICAgICAgZmlyc3RfZmllbGRfYWRkcmVzcyA9IHt9JywNCgkJCScgICAgICAgIGZpcnN0X2ZpZWxkX2FkZHJlc3NbMV0gPSB7fScsDQoJCQknICAgICAgICBpZiBhcmNoLng2NCB0aGVuJywNCgkJCScgICAgICAgICAgICBmaXJzdF9maWVsZF9hZGRyZXNzWzFdLmFkZHJlc3MgPSBjbGFzc19oZWFkZXIgKyAweDgwJywNCgkJCScgICAgICAgIGVsc2UnLA0KCQkJJyAgICAgICAgICAgIGZpcnN0X2ZpZWxkX2FkZHJlc3NbMV0uYWRkcmVzcyA9IGNsYXNzX2hlYWRlciArIDB4NDAnLA0KCQkJJyAgICAgICAgZW5kJywNCgkJCScgICAgICAgIGZpcnN0X2ZpZWxkX2FkZHJlc3NbMV0uZmxhZ3MgPSBmbGFnX3R5cGUnLA0KCQkJJyAgICAgICAgZmlyc3RfZmllbGRfYWRkcmVzcyA9IGdnLmdldFZhbHVlcyhmaXJzdF9maWVsZF9hZGRyZXNzKScsDQoJCQknICAgICAgICBmaXJzdF9maWVsZF9hZGRyZXNzID0gZmlyc3RfZmllbGRfYWRkcmVzc1sxXS52YWx1ZScsDQoJCQknICAgICAgICBpZiBhcmNoLng2NCB0aGVuJywNCgkJCScgICAgICAgICAgICBnZXRfbnVtX2ZpZWxkc19zdGFydCA9IGZpcnN0X2ZpZWxkX2FkZHJlc3MgKyAyNCcsDQoJCQknICAgICAgICAgICAgZ2V0X251bV9maWVsZHNfb2Zmc2V0ID0gMzInLA0KCQkJJyAgICAgICAgZWxzZScsDQoJCQknICAgICAgICAgICAgZ2V0X251bV9maWVsZHNfc3RhcnQgPSBmaXJzdF9maWVsZF9hZGRyZXNzICsgMTInLA0KCQkJJyAgICAgICAgICAgIGdldF9udW1fZmllbGRzX29mZnNldCA9IDIwJywNCgkJCScgICAgICAgIGVuZCcsDQoJCQknICAgICAgICBudW1fb2Zmc2V0ID0gMCcsDQoJCQknICAgICAgICBudW1fZmllbGRfZGF0YSA9IHt9JywNCgkJCScgICAgICAgIGZvciBpID0gMSwgMTAwMCBkbycsDQoJCQknICAgICAgICAgICAgbnVtX2ZpZWxkX2RhdGFbaV0gPSB7fScsDQoJCQknICAgICAgICAgICAgbnVtX2ZpZWxkX2RhdGFbaV0uYWRkcmVzcyA9IGdldF9udW1fZmllbGRzX3N0YXJ0ICsgbnVtX29mZnNldCcsDQoJCQknICAgICAgICAgICAgbnVtX2ZpZWxkX2RhdGFbaV0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEJywNCgkJCScgICAgICAgICAgICBudW1fb2Zmc2V0ID0gbnVtX29mZnNldCArIGdldF9udW1fZmllbGRzX29mZnNldCcsDQoJCQknICAgICAgICBlbmQnLA0KCQkJJyAgICAgICAgbnVtX2ZpZWxkX2RhdGEgPSBnZy5nZXRWYWx1ZXMobnVtX2ZpZWxkX2RhdGEpJywNCgkJCScgICAgICAgIGZpZWxkX2NvdW50ZXIgPSAwJywNCgkJCScgICAgICAgIGxhc3RfZmllbGRfb2Zmc2V0ID0gMCcsDQoJCQknICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhudW1fZmllbGRfZGF0YSkgZG8nLA0KCQkJJyAgICAgICAgICAgIGlmIHYudmFsdWUgPj0gbGFzdF9maWVsZF9vZmZzZXQgb3Igdi52YWx1ZSA9PSAwIHRoZW4nLA0KCQkJJyAgICAgICAgICAgICAgICBpZiB2LnZhbHVlID49IGxhc3RfZmllbGRfb2Zmc2V0IHRoZW4nLA0KCQkJJyAgICAgICAgICAgICAgICAgICAgbGFzdF9maWVsZF9vZmZzZXQgPSB2LnZhbHVlJywNCgkJCScgICAgICAgICAgICAgICAgZW5kJywNCgkJCScgICAgICAgICAgICAgICAgZmllbGRfY291bnRlciA9IGZpZWxkX2NvdW50ZXIgKyAxJywNCgkJCScgICAgICAgICAgICBlbHNlJywNCgkJCScgICAgICAgICAgICAgICAgYnJlYWsnLA0KCQkJJyAgICAgICAgICAgIGVuZCcsDQoJCQknICAgICAgICBlbmQnLA0KCQkJJyAgICAgICAgZmllbGRfZGF0YSA9ICIiJywNCgkJCScgICAgICAgIGZpZWxkX25hbWVfcG9pbnRlciA9ICIiJywNCgkJCScgICAgICAgIHR5cGVfcG9pbnRlciA9ICIiJywNCgkJCScgICAgICAgIGNsYXNzX3BvaW50ZXIgPSAiIicsDQoJCQknICAgICAgICBmaWVsZF9vZmZzZXQgPSAiIicsDQoJCQknICAgICAgICBmaWVsZHMgPSB7fScsDQoJCQknICAgICAgICBudW1iZXJfb2ZfZmllbGRzID0gZmllbGRfY291bnRlcicsDQoJCQknICAgICAgICBjdXJyZW50X2FkZHJlc3MgPSBmaXJzdF9maWVsZF9hZGRyZXNzJywNCgkJCScgICAgICAgIGZvciBpID0gMSwgbnVtYmVyX29mX2ZpZWxkcyBkbycsDQoJCQknICAgICAgICAgICAgaWYgYXJjaC54NjQgdGhlbicsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGEgPSB7fScsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbMV0gPSB7fScsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbMV0uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcycsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbMV0uZmxhZ3MgPSBnZy5UWVBFX1FXT1JEJywNCgkJCScgICAgICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNCcsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbMl0gPSB7fScsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbMl0uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcycsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbMl0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEJywNCgkJCScgICAgICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNCcsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbM10gPSB7fScsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbM10uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcycsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbM10uZmxhZ3MgPSBnZy5UWVBFX1FXT1JEJywNCgkJCScgICAgICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNCcsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNF0gPSB7fScsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNF0uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcycsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNF0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEJywNCgkJCScgICAgICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNCcsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNV0gPSB7fScsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNV0uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcycsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNV0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEJywNCgkJCScgICAgICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNCcsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNl0gPSB7fScsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNl0uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcycsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNl0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEJywNCgkJCScgICAgICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNCcsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbN10gPSB7fScsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbN10uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcycsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbN10uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEJywNCgkJCScgICAgICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNCcsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbOF0gPSB7fScsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbOF0uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcycsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbOF0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEJywNCgkJCScgICAgICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNCcsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGEgPSBnZy5nZXRWYWx1ZXMoZmllbGRfZGF0YSknLA0KCQkJJyAgICAgICAgICAgICAgICBmaWVsZF9uYW1lX3BvaW50ZXIgPSBmaWVsZF9kYXRhWzFdLnZhbHVlJywNCgkJCScgICAgICAgICAgICAgICAgdHlwZV9wb2ludGVyID0gZmllbGRfZGF0YVszXS52YWx1ZScsDQoJCQknICAgICAgICAgICAgICAgIGNsYXNzX3BvaW50ZXIgPSBmaWVsZF9kYXRhWzVdLnZhbHVlJywNCgkJCScgICAgICAgICAgICAgICAgZmllbGRfb2Zmc2V0ID0gZmllbGRfZGF0YVs3XS52YWx1ZScsDQoJCQknICAgICAgICAgICAgZWxzZScsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGEgPSB7fScsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbMV0gPSB7fScsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbMV0uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcycsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbMV0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEJywNCgkJCScgICAgICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNCcsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbMl0gPSB7fScsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbMl0uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcycsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbMl0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEJywNCgkJCScgICAgICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNCcsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbM10gPSB7fScsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbM10uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcycsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbM10uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEJywNCgkJCScgICAgICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNCcsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNF0gPSB7fScsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNF0uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcycsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNF0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEJywNCgkJCScgICAgICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNCcsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNV0gPSB7fScsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNV0uYWRkcmVzcyA9IGN1cnJlbnRfYWRkcmVzcycsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGFbNV0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEJywNCgkJCScgICAgICAgICAgICAgICAgY3VycmVudF9hZGRyZXNzID0gY3VycmVudF9hZGRyZXNzICsgNCcsDQoJCQknICAgICAgICAgICAgICAgIGZpZWxkX2RhdGEgPSBnZy5nZXRWYWx1ZXMoZmllbGRfZGF0YSknLA0KCQkJJyAgICAgICAgICAgICAgICBmaWVsZF9uYW1lX3BvaW50ZXIgPSBmaWVsZF9kYXRhWzFdLnZhbHVlJywNCgkJCScgICAgICAgICAgICAgICAgdHlwZV9wb2ludGVyID0gZmllbGRfZGF0YVsyXS52YWx1ZScsDQoJCQknICAgICAgICAgICAgICAgIGNsYXNzX3BvaW50ZXIgPSBmaWVsZF9kYXRhWzNdLnZhbHVlJywNCgkJCScgICAgICAgICAgICAgICAgZmllbGRfb2Zmc2V0ID0gZmllbGRfZGF0YVs0XS52YWx1ZScsDQoJCQknICAgICAgICAgICAgZW5kJywNCgkJCScgICAgICAgICAgICBnZXRfZmllbGRfbmFtZSA9IHt9JywNCgkJCScgICAgICAgICAgICBvZmZzZXQgPSAwJywNCgkJCScgICAgICAgICAgICBjb3VudCA9IDEnLA0KCQkJJyAgICAgICAgICAgIHJlcGVhdCcsDQoJCQknICAgICAgICAgICAgICAgIGdldF9maWVsZF9uYW1lW2NvdW50XSA9IHt9JywNCgkJCScgICAgICAgICAgICAgICAgZ2V0X2ZpZWxkX25hbWVbY291bnRdLmFkZHJlc3MgPSBmaWVsZF9uYW1lX3BvaW50ZXIgKyBvZmZzZXQnLA0KCQkJJyAgICAgICAgICAgICAgICBnZXRfZmllbGRfbmFtZVtjb3VudF0uZmxhZ3MgPSBnZy5UWVBFX0JZVEUnLA0KCQkJJyAgICAgICAgICAgICAgICBjb3VudCA9IGNvdW50ICsgMScsDQoJCQknICAgICAgICAgICAgICAgIG9mZnNldCA9IG9mZnNldCArIDEnLA0KCQkJJyAgICAgICAgICAgIHVudGlsIChjb3VudCA9PSAxMDApJywNCgkJCScgICAgICAgICAgICBnZXRfZmllbGRfbmFtZSA9IGdnLmdldFZhbHVlcyhnZXRfZmllbGRfbmFtZSknLA0KCQkJJyAgICAgICAgICAgIGZpZWxkX25hbWUgPSAiIicsDQoJCQknICAgICAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBwYWlycyhnZXRfZmllbGRfbmFtZSkgZG8nLA0KCQkJJyAgICAgICAgICAgICAgICBpZiB2YWx1ZS52YWx1ZSA+PSAwIGFuZCB2YWx1ZS52YWx1ZSA8PSAyNTUgdGhlbicsDQoJCQknICAgICAgICAgICAgICAgICAgICBmaWVsZF9uYW1lID0gZmllbGRfbmFtZSAuLiBzdHJpbmcuY2hhcih2YWx1ZS52YWx1ZSknLA0KCQkJJyAgICAgICAgICAgICAgICBlbmQnLA0KCQkJJyAgICAgICAgICAgICAgICBpZiB2YWx1ZS52YWx1ZSA9PSAwIHRoZW4nLA0KCQkJJyAgICAgICAgICAgICAgICAgICAgYnJlYWsnLA0KCQkJJyAgICAgICAgICAgICAgICBlbmQnLA0KCQkJJyAgICAgICAgICAgIGVuZCcsDQoJCQknICAgICAgICAgICAgZ2V0X3R5cGUgPSB7fScsDQoJCQknICAgICAgICAgICAgZ2V0X3R5cGVbMV0gPSB7fScsDQoJCQknICAgICAgICAgICAgZ2V0X3R5cGVbMV0uYWRkcmVzcyA9IHR5cGVfcG9pbnRlcicsDQoJCQknICAgICAgICAgICAgZ2V0X3R5cGVbMV0uZmxhZ3MgPSBnZy5UWVBFX0RXT1JEJywNCgkJCScgICAgICAgICAgICBmaWVsZF90eXBlID0gZ2cuZ2V0VmFsdWVzKGdldF90eXBlKScsDQoJCQknICAgICAgICAgICAgZmllbGRfdHlwZSA9IGZpZWxkX3R5cGVbMV0udmFsdWUnLA0KCQkJJyAgICAgICAgICAgIHZhbHVlX3R5cGUgPSBzYXZlZF9lZGl0X3RhYmxlLnZhbHVlX3R5cGUnLA0KCQkJJyAgICAgICAgICAgIGlmIHZhbHVlX3R5cGUgYW5kIGZpZWxkX29mZnNldCBhbmQgc3RyaW5nLmZpbmQoZmllbGRfbmFtZSwgIltBLVphLXpdIikgdGhlbicsDQoJCQknICAgICAgICAgICAgICAgIHR5cGVfbWVudSA9ICI/IiAuLiBmaWVsZF90eXBlIC4uICI/IicsDQoJCQknICAgICAgICAgICAgICAgIHR5cGVfbWVudSA9IHZhbHVlX3R5cGUnLA0KCQkJJyAgICAgICAgICAgICAgICBmaWVsZHNbI2ZpZWxkcyArIDFdID0geycsDQoJCQknICAgICAgICAgICAgICAgICAgICBmaWVsZF9uYW1lID0gZmllbGRfbmFtZSwnLA0KCQkJJyAgICAgICAgICAgICAgICAgICAgZmllbGRfb2Zmc2V0ID0gZl9oZXgoZmllbGRfb2Zmc2V0KSwnLA0KCQkJJyAgICAgICAgICAgICAgICAgICAgZmllbGRfdHlwZSA9IHZhbHVlX3R5cGUsJywNCgkJCScgICAgICAgICAgICAgICAgICAgIHR5cGVfbWVudSA9IHR5cGVfbWVudScsDQoJCQknICAgICAgICAgICAgICAgIH0nLA0KCQkJJyAgICAgICAgICAgIGVuZCcsDQoJCQknICAgICAgICBlbmQnLA0KCQkJJyAgICAgICAgZ2cubG9hZFJlc3VsdHMoaW5zdGFuY2VfaGVhZGVycyknLA0KCQkJJyAgICAgICAgZ2cuc2VhcmNoUG9pbnRlcigwKScsDQoJCQknICAgICAgICBwb2ludGVyc190b19pbnN0YW5jZXMgPSBnZy5nZXRSZXN1bHRzKGdnLmdldFJlc3VsdHNDb3VudCgpKScsDQoJCQknICAgICAgICBzb3J0ZWRfaW5zdGFuY2VfaGVhZGVycyA9IHt9JywNCgkJCScgICAgICAgIGFkZGVkX2hlYWRlcnMgPSB7fScsDQoJCQknICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhwb2ludGVyc190b19pbnN0YW5jZXMpIGRvJywNCgkJCScgICAgICAgICAgICBpZiBub3QgYWRkZWRfaGVhZGVyc1t2LnZhbHVlXSB0aGVuJywNCgkJCScgICAgICAgICAgICAgICAgYWRkZWRfaGVhZGVyc1t2LnZhbHVlXSA9IHYudmFsdWUnLA0KCQkJJyAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoc29ydGVkX2luc3RhbmNlX2hlYWRlcnMsIHYpJywNCgkJCScgICAgICAgICAgICBlbmQnLA0KCQkJJyAgICAgICAgZW5kJywNCgkJCScgICAgICAgIGdnLmxvYWRSZXN1bHRzKHNvcnRlZF9pbnN0YW5jZV9oZWFkZXJzKScsDQoJCQknICAgICAgICBzb3J0ZWRfaW5zdGFuY2VfaGVhZGVycyA9IGdnLmdldFJlc3VsdHMoZ2cuZ2V0UmVzdWx0c0NvdW50KCkpJywNCgkJCScgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKGZpZWxkcykgZG8nLA0KCQkJDQoJCQknICAgICAgICAgICAgaWYgc2F2ZWRfZWRpdF90YWJsZS5maWVsZF9uYW1lID09IHYuZmllbGRfbmFtZSB0aGVuJywNCgkJCScgICAgICAgICAgICAgICAgZWRpdF9vZmZzZXQgPSB2LmZpZWxkX29mZnNldCcsDQoJCQknICAgICAgICAgICAgICAgIGVkaXRfdHlwZSA9IHYuZmllbGRfdHlwZScsDQoJCQknICAgICAgICAgICAgICAgIGJyZWFrJywNCgkJCScgICAgICAgICAgICBlbmQnLA0KCQkJJyAgICAgICAgZW5kJywNCgkJCScgICAgICAgIGxvYWRfZmllbGRfdmFsdWVzID0ge30nLA0KCQkJJyAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoc29ydGVkX2luc3RhbmNlX2hlYWRlcnMpIGRvJywNCgkJCScgICAgICAgICAgICBsb2FkX2ZpZWxkX3ZhbHVlc1tpXSA9IHYnLA0KCQkJJyAgICAgICAgICAgIGxvYWRfZmllbGRfdmFsdWVzW2ldLmFkZHJlc3MgPSB2LnZhbHVlICsgZWRpdF9vZmZzZXQnLA0KCQkJJyAgICAgICAgICAgIGxvYWRfZmllbGRfdmFsdWVzW2ldLmZsYWdzID0gc2F2ZWRfZWRpdF90YWJsZS52YWx1ZV90eXBlJywNCgkJCScgICAgICAgIGVuZCcsDQoJCQknICAgICAgICBnZy5hZGRMaXN0SXRlbXMobG9hZF9maWVsZF92YWx1ZXMpJywNCgkJCScgICAgICAgIGlmIG5vdCByZXZlcnRfdGFibGVbZnVuY3Rpb25faW5kZXhdIHRoZW4nLA0KCQkJJyAgICAgICAgICAgIHJldmVydF90YWJsZVtmdW5jdGlvbl9pbmRleF0gPSB7fScsDQoJCQknICAgICAgICBlbmQnLA0KCQkJJyAgICAgICAgaWYgbm90IHJldmVydF90YWJsZVtmdW5jdGlvbl9pbmRleF1bZWRpdF9pbmRleF0gdGhlbicsDQoJCQknICAgICAgICAgICAgcmV2ZXJ0X3RhYmxlW2Z1bmN0aW9uX2luZGV4XVtlZGl0X2luZGV4XSA9IHt9JywNCgkJCScgICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhnZy5nZXRMaXN0SXRlbXMoKSkgZG8nLA0KCQkJJyAgICAgICAgICAgICAgICByZXZlcnRfdGFibGVbZnVuY3Rpb25faW5kZXhdW2VkaXRfaW5kZXhdWyNyZXZlcnRfdGFibGVbZnVuY3Rpb25faW5kZXhdW2VkaXRfaW5kZXhdICsgMV0gPSB2JywNCgkJCScgICAgICAgICAgICBlbmQnLA0KCQkJJyAgICAgICAgZW5kJywNCgkJCScgICAgICAgIGlmIHNhdmVkX2VkaXRfdGFibGUuZWRpdF90eXBlID09ICJlZGl0X2FsbF94NCIgdGhlbicsDQoJCQknICAgICAgICAgICAgbG9jYWwgc2F2ZV9saXN0X2FsbCA9IGdnLmdldExpc3RJdGVtcygpJywNCgkJCScgICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhzYXZlX2xpc3RfYWxsKSBkbycsDQoJCQknICAgICAgICAgICAgICAgIHNhdmVfbGlzdF9hbGxbaV0uYWRkcmVzcyA9IHNhdmVfbGlzdF9hbGxbaV0uYWRkcmVzcyArIDQnLA0KCQkJJyAgICAgICAgICAgICAgICBzYXZlX2xpc3RfYWxsW2ldLnZhbHVlID0gc2F2ZWRfZWRpdF90YWJsZS5lZGl0X3ZhbHVlIC4uICJYNCInLA0KCQkJJyAgICAgICAgICAgICAgICBzYXZlX2xpc3RfYWxsW2ldLmZyZWV6ZSA9IHNhdmVkX2VkaXRfdGFibGUuZnJlZXplJywNCgkJCScgICAgICAgICAgICBlbmQnLA0KCQkJJyAgICAgICAgICAgIGdnLnNldFZhbHVlcyhzYXZlX2xpc3RfYWxsKScsDQoJCQknICAgICAgICAgICAgZ2cuYWRkTGlzdEl0ZW1zKHNhdmVfbGlzdF9hbGwpJywNCgkJCScgICAgICAgIGVsc2VpZiBzYXZlZF9lZGl0X3RhYmxlLmVkaXRfdHlwZSA9PSAiZWRpdF9pbmRleGVzIiB0aGVuJywNCgkJCScgICAgICAgICAgICBsb2NhbCBzYXZlX2xpc3RfYWxsID0gZ2cuZ2V0TGlzdEl0ZW1zKCknLA0KCQkJJyAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHNhdmVkX2VkaXRfdGFibGUuZWRpdF9pbmRleGVzKSBkbycsDQoJCQknICAgICAgICAgICAgICAgIHNhdmVfbGlzdF9hbGxbdl0udmFsdWUgPSBzYXZlZF9lZGl0X3RhYmxlLmVkaXRfdmFsdWUnLA0KCQkJJyAgICAgICAgICAgICAgICBzYXZlX2xpc3RfYWxsW2ldLmZyZWV6ZSA9IHNhdmVkX2VkaXRfdGFibGUuZnJlZXplJywNCgkJCScgICAgICAgICAgICBlbmQnLA0KCQkJJyAgICAgICAgICAgIGdnLnNldFZhbHVlcyhzYXZlX2xpc3RfYWxsKScsDQoJCQknICAgICAgICAgICAgZ2cuYWRkTGlzdEl0ZW1zKHNhdmVfbGlzdF9hbGwpJywNCgkJCScgICAgICAgIGVsc2VpZiBzYXZlZF9lZGl0X3RhYmxlLmVkaXRfdHlwZSA9PSAiZWRpdF9hbGxfdGhhdF9lcXVhbCIgdGhlbicsDQoJCQknICAgICAgICAgICAgbG9jYWwgc2F2ZV9saXN0X2FsbCA9IGdnLmdldExpc3RJdGVtcygpJywNCgkJCScgICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhzYXZlX2xpc3RfYWxsKSBkbycsDQoJCQknICAgICAgICAgICAgICAgIGlmIHYudmFsdWUgPT0gc2F2ZWRfZWRpdF90YWJsZS5tdXN0X2VxdWFsIHRoZW4nLA0KCQkJJyAgICAgICAgICAgICAgICAgICAgc2F2ZV9saXN0X2FsbFtpXS52YWx1ZSA9IHNhdmVkX2VkaXRfdGFibGUuZWRpdF92YWx1ZScsDQoJCQknICAgICAgICAgICAgICAgICAgICBzYXZlX2xpc3RfYWxsW2ldLmZyZWV6ZSA9IHNhdmVkX2VkaXRfdGFibGUuZnJlZXplJywNCgkJCScgICAgICAgICAgICAgICAgZW5kJywNCgkJCScgICAgICAgICAgICBlbmQnLA0KCQkJJyAgICAgICAgICAgIGdnLnNldFZhbHVlcyhzYXZlX2xpc3RfYWxsKScsDQoJCQknICAgICAgICAgICAgZ2cuYWRkTGlzdEl0ZW1zKHNhdmVfbGlzdF9hbGwpJywNCgkJCScgICAgICAgIGVsc2VpZiBzYXZlZF9lZGl0X3RhYmxlLmVkaXRfdHlwZSA9PSAiZWRpdF9hbGwiIHRoZW4nLA0KCQkJJyAgICAgICAgICAgIGxvY2FsIHNhdmVfbGlzdF9hbGwgPSBnZy5nZXRMaXN0SXRlbXMoKScsDQoJCQknICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoc2F2ZV9saXN0X2FsbCkgZG8nLA0KCQkJJyAgICAgICAgICAgICAgICBzYXZlX2xpc3RfYWxsW2ldLnZhbHVlID0gc2F2ZWRfZWRpdF90YWJsZS5lZGl0X3ZhbHVlJywNCgkJCScgICAgICAgICAgICAgICAgc2F2ZV9saXN0X2FsbFtpXS5mcmVlemUgPSBzYXZlZF9lZGl0X3RhYmxlLmZyZWV6ZScsDQoJCQknICAgICAgICAgICAgZW5kJywNCgkJCScgICAgICAgICAgICBnZy5zZXRWYWx1ZXMoc2F2ZV9saXN0X2FsbCknLA0KCQkJJyAgICAgICAgICAgIGdnLmFkZExpc3RJdGVtcyhzYXZlX2xpc3RfYWxsKScsDQoJCQknICAgICAgICBlbHNlaWYgc2F2ZWRfZWRpdF90YWJsZS5lZGl0X3R5cGUgPT0gImVkaXRfYWxsX2luX3JhbmdlIiB0aGVuJywNCiAgICAgICAgICAgICcgICAgICAgICAgICBsb2NhbCBzYXZlX2xpc3RfYWxsID0gZ2cuZ2V0TGlzdEl0ZW1zKCknLA0KICAgICAgICAgICAgJyAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHNhdmVfbGlzdF9hbGwpIGRvJywNCiAgICAgICAgICAgICcgICAgICAgICAgICAgICAgaWYgdi52YWx1ZSA+PSB0b251bWJlcihzYXZlZF9lZGl0X3RhYmxlLm11c3RfYmVfZ3JlYXRlcikgYW5kIHYudmFsdWUgPD0gdG9udW1iZXIoc2F2ZWRfZWRpdF90YWJsZS5tdXN0X2JlX2xlc3NfdGhhbikgIHRoZW4nLA0KICAgICAgICAgICAgJyAgICAgICAgICAgICAgICAgICAgc2F2ZV9saXN0X2FsbFtpXS52YWx1ZSA9IHNhdmVkX2VkaXRfdGFibGUuZWRpdF92YWx1ZScsDQogICAgICAgICAgICAnICAgICAgICAgICAgICAgICAgICBzYXZlX2xpc3RfYWxsW2ldLmZyZWV6ZSA9IHNhdmVkX2VkaXRfdGFibGUuZnJlZXplJywNCiAgICAgICAgICAgICcgICAgICAgICAgICAgICAgZW5kJywNCiAgICAgICAgICAgICcgICAgICAgICAgICBlbmQnLA0KICAgICAgICAgICAgJyAgICAgICAgICAgIGdnLnNldFZhbHVlcyhzYXZlX2xpc3RfYWxsKScsDQogICAgICAgICAgICAnICAgICAgICAgICAgZ2cuYWRkTGlzdEl0ZW1zKHNhdmVfbGlzdF9hbGwpJywNCgkJCScgICAgICAgIGVuZCcsDQoJCQknICAgICAgICBmaWVsZHMgPSB7fScsDQoJCQknICAgICAgICA6Om5vbmU6OicsDQoJCQknICAgICAgICBpZiBub25lX2ZvdW5kID09IHRydWUgdGhlbicsDQoJCQknICAgICAgICAgICAgZ2cuYWxlcnQoc2NyaXB0X3RpdGxlIC4uICJcXG5cXG7ihLnvuI8gTm8gQ2xhc3MgSW5zdGFuY2VzIEZvdW5kIOKEue+4jyIpJywNCgkJCScgICAgICAgICAgICBub25lX2ZvdW5kID0gZmFsc2UnLA0KCQkJJyAgICAgICAgZWxzZScsDQoJCQknICAgICAgICAgICAgZ2cudG9hc3Qoc2NyaXB0X3RpdGxlIC4uICJcXG5cXG7ihLnvuI8gRWRpdHMgTWFkZSDihLnvuI8iKScsDQoJCQknICAgICAgICBlbmQnLA0KCQkJJyAgICBlbmQnLA0KCQkJJ2VuZCcsDQoJCQknZnVuY3Rpb24gc2V0U1ZGVmFsdWVzKGVkaXRfdGFibGUsZnVuY3Rpb25faW5kZXgsIGVkaXRfaW5kZXgpJywNCgkJCScgICAgbG9jYWwgc2VhcmNoX3RhYmxlID0gZWRpdF90YWJsZS5zZWFyY2hfdGFibGUnLA0KCQkJJyAgICBsb2NhbCBzZWFyY2hGbGFnID0gZWRpdF90YWJsZS5mbGFncycsDQoJCQknICAgIGxvY2FsIHNlYXJjaFJhbmdlID0gZWRpdF90YWJsZS5zZWFyY2hfcmFuZ2UnLA0KCQkJJyAgICBsb2NhbCBvZmZzZXQgPSBlZGl0X3RhYmxlLm9mZnNldCcsIA0KCQkJJyAgICBsb2NhbCBlZGl0X3RvID0gZWRpdF90YWJsZS5lZGl0JywNCgkJCScgICAgbG9jYWwgZWRpdF90b19mbGFncyA9IGVkaXRfdGFibGUuZWRpdF9mbGFncycsDQoJCQknICAgIGxvY2FsIGVkaXRfbmFtZSA9IGVkaXRfdGFibGUuZWRpdF9uYW1lJywNCgkJCScgICAgbG9jYWwgZXhwZWN0ZWRfcmFuZ2UgPSBlZGl0X3RhYmxlLmV4cGVjdGVkX3JhbmdlJywNCgkJCScgICAgbG9jYWwgZnJlZXplID0gZWRpdF90YWJsZS5mcmVlemUnLCANCgkJCScgICAgbG9jYWwgc2VhcmNoU3RyaW5nID0gIiInLA0KCQkJJyAgICBmb3IgaSwgdiBpbiBpcGFpcnMoc2VhcmNoX3RhYmxlKSBkbycsIA0KCQkJJyAgICAgICAgaWYgaSA8ICNzZWFyY2hfdGFibGUgdGhlbicsDQoJCQknICAgICAgICAgICAgc2VhcmNoU3RyaW5nID0gc2VhcmNoU3RyaW5nIC4uIHYgLi4gIjsiJywgDQoJCQknICAgICAgICBlbmQnLCANCgkJCScgICAgZW5kJywNCgkJCScgICAgc2VhcmNoU3RyaW5nID0gc2VhcmNoU3RyaW5nIC4uICI6OiIgLi4gc2VhcmNoUmFuZ2UnLA0KCQkJJyAgICBnZy5zZXRSYW5nZXMoZ2cuZ2V0UmFuZ2VzKCkpJywgDQoJCQknICAgIGdnLmNsZWFyUmVzdWx0cygpJywNCgkJCScgICAgZ2cuc2VhcmNoTnVtYmVyKHNlYXJjaFN0cmluZywgc2VhcmNoRmxhZyknLCANCgkJCScgICAgcmVwZWF0JywNCgkJCScgICAgICAgIHRhYmxlLnJlbW92ZShzZWFyY2hfdGFibGUsICNzZWFyY2hfdGFibGUpJywNCgkJCScgICAgICAgIGxvY2FsIHJlZmluZVN0cmluZyA9ICIiJywgDQoJCQknICAgICAgICBmb3IgaSwgdiBpbiBpcGFpcnMoc2VhcmNoX3RhYmxlKSBkbycsDQoJCQknICAgICAgICAgICAgcmVmaW5lU3RyaW5nID0gcmVmaW5lU3RyaW5nIC4uIHYnLA0KCQkJJyAgICAgICAgICAgIGlmICNzZWFyY2hfdGFibGUgPiAxIHRoZW4nLA0KCQkJJyAgICAgICAgICAgICAgICByZWZpbmVTdHJpbmcgPSByZWZpbmVTdHJpbmcgLi4gIjsiJywgDQoJCQknICAgICAgICAgICAgZW5kJywNCgkJCScgICAgICAgIGVuZCcsIA0KCQkJJyAgICAgICAgaWYgI3NlYXJjaF90YWJsZSA+IDEgdGhlbicsDQoJCQknICAgICAgICAgICAgcmVmaW5lU3RyaW5nID0gcmVmaW5lU3RyaW5nIC4uICI6OiInLCANCgkJCScgICAgICAgIGVuZCcsDQoJCQknICAgICAgICBnZy5yZWZpbmVOdW1iZXIocmVmaW5lU3RyaW5nLCBzZWFyY2hGbGFnKScsDQoJCQknICAgIHVudGlsICgjc2VhcmNoX3RhYmxlID09IDApJywNCgkJCScgICAgbG9jYWwgcmVzdWx0cyA9IGdnLmdldFJlc3VsdHMoZ2cuZ2V0UmVzdWx0c0NvdW50KCkpJywNCgkJCScgICAgZm9yIGksIHYgaW4gcGFpcnMocmVzdWx0cykgZG8nLA0KCQkJJyAgICAgICAgcmVzdWx0c1tpXS5hZGRyZXNzID0gcmVzdWx0c1tpXS5hZGRyZXNzICsgb2Zmc2V0JywNCgkJCScgICAgICAgIHJlc3VsdHNbaV0uZmxhZ3MgPSBlZGl0X3RvX2ZsYWdzJywgDQoJCQknICAgIGVuZCcsIA0KCQkJJyAgICBnZy5sb2FkUmVzdWx0cyhyZXN1bHRzKScsDQoJCQknICAgIGlmIGV4cGVjdGVkX3JhbmdlIH49IG5pbCB0aGVuJywNCgkJCScgICAgICAgIGdnLnJlZmluZU51bWJlcihleHBlY3RlZF9yYW5nZSAsIGVkaXRfdG9fZmxhZ3MpJywgDQoJCQknICAgIGVuZCcsDQoJCQknICAgIGxvY2FsIHJlc3VsdHMgPSBnZy5nZXRSZXN1bHRzKGdnLmdldFJlc3VsdHNDb3VudCgpKScsDQoJCQknICAgIGZvciBpLCB2IGluIGlwYWlycyhyZXN1bHRzKSBkbycsIA0KCQkJJyAgICAgICAgdi52YWx1ZSA9IGVkaXRfdG8nLA0KCQkJJyAgICAgICAgdi5mcmVlemUgPSBmcmVlemUnLCANCgkJCScgICAgZW5kJywgDQoJCQknICAgIGlmIGZyZWV6ZSA9PSB0cnVlIHRoZW4nLA0KCQkJJyAgICAgICAgZ2cuYWRkTGlzdEl0ZW1zKHJlc3VsdHMpJywgDQoJCQknICAgIGVsc2UnLCANCgkJCScgICAgICAgIGdnLnNldFZhbHVlcyhyZXN1bHRzKScsDQoJCQknICAgIGVuZCcsIA0KCQkJJyAgICBnZy50b2FzdCgi4pyFICIgLi4gZWRpdF9uYW1lIC4uICIg4pyFIiknLCANCgkJCSdlbmQnLA0KCQkJJ25lZWRUb0NvbmZpZ3VyZSA9IGZhbHNlJywgDQoJCQknZm9yIGksdiBpbiBwYWlycyAoc2NyaXB0RnVuY3Rpb25zKSBkbycsDQoJCQknICAgZm9yIGluZGV4LHZhbHVlIGluIHBhaXJzICh2LmVkaXRzKSBkbycsDQoJCQknICAgICAgIGlmIHYubWV0aG9kX25hbWUgb3Igdi5maWVsZF9uYW1lIHRoZW4nLCANCgkJCScgICAgICAgbmVlZFRvQ29uZmlndXJlID0gdHJ1ZScsDQoJCQknICAgICAgIGVuZCcsIA0KCQkJJyAgIGVuZCcsIA0KCQkJJ2VuZCcsIA0KCQkJJ2lmIG5lZWRUb0NvbmZpZ3VyZSA9PSB0cnVlIHRoZW4nLCANCgkJCScgICBnZXRSYW5nZSgpJywNCgkJCSdlbmQnLCANCgkJCSdob21lKCknLA0KCQkJJ3ByaW50KCLip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5rip5oiKScsDQoJCQkncHJpbnQoIuKnmuKnmuKnmiAgICAgICAgICAgU2NyaXB0IENyZWF0ZWQgV2l0aCIpJywNCgkJCSdwcmludCgi4qea4qea4qeaICDwn6ewICBCYWRDYXNlXCdzIFRvb2xib3gg8J+nsCIpJywgDQoJCQkncHJpbnQoIuKnmuKnmuKnmiIpJywNCgkJCSdwcmludCgi4qea4qea4qeaIiknLCANCgkJCSdwcmludCgi4qea4qea4qeaICAgICAgICAgICAgICAgICAgICAgICBXZWJzaXRlIiknLA0KCQkJJ3ByaW50KCLip5rip5rip5ogICAgICAgICAgICAgICAgICAgQmFkQ2FzZS5vcmciKScsIA0KCQkJJ3ByaW50KCLip5rip5rip5oiKScsDQoJCQkncHJpbnQoIuKnmuKnmuKnmiAgICAgICAgICAgICAgICBUZWxlZ3JhbSBHcm91cCIpJywNCgkJCSdwcmludCgi4qea4qea4qeaICAgIHQubWUvQmFkQ2FzZURvdE9yZ1N1cHBvcnQiKScsIA0KCQkJJ3ByaW50KCLip5rip5rip5oiKScsDQoJCQkncHJpbnQoIuKnmuKnmuKnmiAgICAgICAgICAgIERvbmF0ZSBXaXRoIFBheVBhbCIpJywNCgkJCSdwcmludCgi4qea4qea4qeaICAgICAgcGF5cGFsLm1lL0JhZENhc2VEb3RPcmciKScsIA0KCQkJJ3ByaW50KCLip5rip5rip5oiKScsDQoJCQkncHJpbnQoIuKnmuKnmuKnmuKnmuKnmuKnmuKnmuKnmuKnmuKnmuKnmuKnmuKnmuKnmuKnmuKnmuKnmuKnmuKnmuKnmuKnmuKnmuKnmuKnmuKnmuKnmuKnmuKnmuKnmuKnmuKnmuKnmiIpJywNCgkJCSd3aGlsZSB0cnVlIGRvJywgDQoJCQknICAgIGlmIGdnLmlzVmlzaWJsZSgpIHRoZW4nLCANCgkJCScgICAgICAgIGdnLnNldFZpc2libGUoZmFsc2UpJywNCgkJCScgICAgICAgIGhvbWUoKScsIA0KCQkJJyAgICBlbmQnLCANCgkJCScgICAgZ2cuc2xlZXAoMTAwKScsIA0KCQkJJ2VuZCcNCgkJfQ0KICAgICAgICBsb2NhbCBmaW5hbF9zY3JpcHRfc3RyaW5nID0gIiINCiAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoc2NyaXB0RXhwb3J0VGFibGUpIGRvDQogICAgICAgICAgICBmaW5hbF9zY3JpcHRfc3RyaW5nID0gZmluYWxfc2NyaXB0X3N0cmluZyAuLiB2IC4uICJcbiINCiAgICAgICAgZW5kDQogICAgICAgIGR1bXBIYW5kbGVyLmNyZWF0ZURpcmVjdG9yeSgpDQogICAgICAgIGZpbGUgPSBpby5vcGVuKGRhdGFQYXRoIC4uIGdhbWVfcGF0aCAuLiAiL3NjcmlwdHMvIiAuLiBnZy5nZXRUYXJnZXRQYWNrYWdlKCkgLi4gIi4iIC4uIHNjcmlwdENyZWF0b3IuZ2V0VGltZXN0YW1wKCkgLi4gIi5sdWEiLCAidysiKQ0KICAgICAgICBmaWxlOndyaXRlKGZpbmFsX3NjcmlwdF9zdHJpbmcpDQogICAgICAgIGZpbGU6Y2xvc2UoKQ0KICAgICAgICBnZy5hbGVydChzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2NyaXB0IGV4cG9ydGVkIHRvICIgLi4gZGF0YVBhdGggLi4gZ2FtZV9wYXRoIC4uICIvc2NyaXB0cy8g4oS577iPIikNCiAgICBlbmQsDQogICAgLS1bWw0KCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KCQ0KCXNjcmlwdENyZWF0b3IuZ2V0VGltZXN0YW1wKCkNCgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCgldXSAtLQ0KICAgIGdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uKCkNCiAgICAgICAgcmV0dXJuIG9zLmRhdGUoIiViXyVkXyVZXyVILiVNIikNCiAgICBlbmQNCn0NCg0KcGx1Z2luTWFuYWdlci5yZXR1cm5Ib21lID0gdHJ1ZQ0KcGx1Z2luTWFuYWdlci5yZXR1cm5QbHVnaW5UYWJsZSA9ICJzY3JpcHRDcmVhdG9yIg0Kc2NyaXB0Q3JlYXRvci5ob21lKCkNCg"
        },
        [14] = {
            file_name = "plugin_bc_static_value_finder.lua",
            file_data = "aWYgcGx1Z2luTWFuYWdlci5pbnN0YWxsaW5nUGx1Z2luID09IHRydWUgdGhlbg0KICAgIHBsdWdpbk1hbmFnZXIuaW5zdGFsbGluZ1BsdWdpbk5hbWUgPSAiU3RhdGljIFZhbHVlIEZpbmRlciINCiAgICBwbHVnaW5NYW5hZ2VyLmluc3RhbGxpbmdQbHVnaW5UYWJsZSA9ICJzdGF0aWNWYWx1ZUZpbmRlciINCmVsc2UNCiAgICBzdGF0aWNWYWx1ZUZpbmRlciA9IHsNCiAgICAgICAgZHdvcmRUYWJsZSA9IHt9LA0KICAgICAgICBxd29yZFRhYmxlID0ge30sDQogICAgICAgIGZsb2F0VGFibGUgPSB7fSwNCiAgICAgICAgZG91YmxlVGFibGUgPSB7fSwNCiAgICAgICAgeG9yVGFibGUgPSB7fSwNCiAgICAgICAgZGVzaXJlZFZhbHVlID0ge30sDQogICAgICAgIGdldEFib3ZlID0gZnVuY3Rpb24oYWRkcmVzcywgcmFuZ2UpDQogICAgICAgICAgICBsb2NhbCB2YWx1ZXMgPSByYW5nZSAvIDQNCiAgICAgICAgICAgIGxvY2FsIHN0YXJ0QWRkcmVzcyA9IGFkZHJlc3MgLSByYW5nZQ0KICAgICAgICAgICAgZm9yIGkgPSAxLCB2YWx1ZXMgZG8NCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5kd29yZFRhYmxlWyNzdGF0aWNWYWx1ZUZpbmRlci5kd29yZFRhYmxlICsgMV0gPSB7DQogICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgPSBzdGFydEFkZHJlc3MsDQogICAgICAgICAgICAgICAgICAgIGZsYWdzID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBzdGFydEFkZHJlc3MgPSBzdGFydEFkZHJlc3MgKyA0DQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kLA0KICAgICAgICBnZXRVbmRlciA9IGZ1bmN0aW9uKGFkZHJlc3MsIHJhbmdlKQ0KICAgICAgICAgICAgbG9jYWwgc3RhcnRBZGRyZXNzID0gYWRkcmVzcyArIDQNCiAgICAgICAgICAgIGxvY2FsIHZhbHVlcyA9IHJhbmdlIC8gNA0KICAgICAgICAgICAgZm9yIGkgPSAxLCB2YWx1ZXMgZG8NCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5kd29yZFRhYmxlWyNzdGF0aWNWYWx1ZUZpbmRlci5kd29yZFRhYmxlICsgMV0gPSB7DQogICAgICAgICAgICAgICAgICAgIGFkZHJlc3MgPSBzdGFydEFkZHJlc3MsDQogICAgICAgICAgICAgICAgICAgIGZsYWdzID0gZ2cuVFlQRV9EV09SRA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBzdGFydEFkZHJlc3MgPSBzdGFydEFkZHJlc3MgKyA0DQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kLA0KICAgICAgICBnZXRPdGhlclR5cGVzID0gZnVuY3Rpb24oKQ0KICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIuZHdvcmRUYWJsZU9yaWdpbmFsID0gZ2cuZ2V0VmFsdWVzKHN0YXRpY1ZhbHVlRmluZGVyLmR3b3JkVGFibGUpDQogICAgICAgICAgICBmb3IgaSwgdiBpbiBpcGFpcnMoc3RhdGljVmFsdWVGaW5kZXIuZHdvcmRUYWJsZSkgZG8NCiAgICAgICAgICAgICAgICBsb2NhbCB0ZW1wX3ZhciA9IHN0YXRpY1ZhbHVlRmluZGVyLmR3b3JkVGFibGVbaV0NCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5xd29yZFRhYmxlW2ldID0gdGVtcF92YXINCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5xd29yZFRhYmxlW2ldLmZsYWdzID0gZ2cuVFlQRV9RV09SRA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5xd29yZFRhYmxlID0gZ2cuZ2V0VmFsdWVzKHN0YXRpY1ZhbHVlRmluZGVyLnF3b3JkVGFibGUpDQogICAgICAgICAgICBmb3IgaSwgdiBpbiBpcGFpcnMoc3RhdGljVmFsdWVGaW5kZXIuZHdvcmRUYWJsZSkgZG8NCiAgICAgICAgICAgICAgICBsb2NhbCB0ZW1wX3ZhciA9IHN0YXRpY1ZhbHVlRmluZGVyLmR3b3JkVGFibGVbaV0NCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5mbG9hdFRhYmxlW2ldID0gdGVtcF92YXINCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5mbG9hdFRhYmxlW2ldLmZsYWdzID0gZ2cuVFlQRV9GTE9BVA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5mbG9hdFRhYmxlID0gZ2cuZ2V0VmFsdWVzKHN0YXRpY1ZhbHVlRmluZGVyLmZsb2F0VGFibGUpDQogICAgICAgICAgICBmb3IgaSwgdiBpbiBpcGFpcnMoc3RhdGljVmFsdWVGaW5kZXIuZHdvcmRUYWJsZSkgZG8NCiAgICAgICAgICAgICAgICBsb2NhbCB0ZW1wX3ZhciA9IHN0YXRpY1ZhbHVlRmluZGVyLmR3b3JkVGFibGVbaV0NCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5kb3VibGVUYWJsZVtpXSA9IHRlbXBfdmFyDQogICAgICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIuZG91YmxlVGFibGVbaV0uZmxhZ3MgPSBnZy5UWVBFX0RPVUJMRQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5kb3VibGVUYWJsZSA9IGdnLmdldFZhbHVlcyhzdGF0aWNWYWx1ZUZpbmRlci5kb3VibGVUYWJsZSkNCiAgICAgICAgICAgIGZvciBpLCB2IGluIGlwYWlycyhzdGF0aWNWYWx1ZUZpbmRlci5kd29yZFRhYmxlKSBkbw0KICAgICAgICAgICAgICAgIGxvY2FsIHRlbXBfdmFyID0gc3RhdGljVmFsdWVGaW5kZXIuZHdvcmRUYWJsZVtpXQ0KICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLnhvclRhYmxlW2ldID0gdGVtcF92YXINCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci54b3JUYWJsZVtpXS5mbGFncyA9IGdnLlRZUEVfWE9SDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLnhvclRhYmxlID0gZ2cuZ2V0VmFsdWVzKHN0YXRpY1ZhbHVlRmluZGVyLnhvclRhYmxlKQ0KICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIuZHdvcmRUYWJsZSA9IGdnLmdldFZhbHVlcyhzdGF0aWNWYWx1ZUZpbmRlci5kd29yZFRhYmxlT3JpZ2luYWwpDQogICAgICAgIGVuZCwNCiAgICAgICAgc2VhcmNoRm9yVmFsdWVzID0gZnVuY3Rpb24oc2V0TmFtZSkNCiAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLmRlc2lyZWRWYWx1ZSA9IGdnLmdldFNlbGVjdGVkUmVzdWx0cygpDQogICAgICAgICAgICBsb2NhbCBlZGl0X3R5cGUgPSBzdGF0aWNWYWx1ZUZpbmRlci5kZXNpcmVkVmFsdWVbMV0uZmxhZ3MNCiAgICAgICAgICAgIGlmICNzdGF0aWNWYWx1ZUZpbmRlci5kZXNpcmVkVmFsdWUgfj0gMSB0aGVuDQogICAgICAgICAgICAgICAgZ2cuYWxlcnQoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIFNlbGVjdCB0aGUgZGVzaXJlZCB2YWx1ZSBpbiB5b3VyIHNlYXJjaCByZXN1bHRzIGZpcnN0IOKEue+4jyIpDQogICAgICAgICAgICAgICAgZ290byBkb25lDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGxvY2FsIG1lbnVfcmFuZ2UgPSA1MA0KICAgICAgICAgICAgbG9jYWwgbWVudV9hYm92ZSA9IHRydWUNCiAgICAgICAgICAgIGxvY2FsIG1lbnVfdW5kZXIgPSBmYWxzZQ0KICAgICAgICAgICAgbG9jYWwgbWVudSA9IHt9DQogICAgICAgICAgICBsb2NhbCBlZGl0X2luZGV4ID0gMA0KICAgICAgICAgICAgaWYgc3RhdGljVmFsdWVGaW5kZXIuc2V0dGluZ3MgdGhlbg0KICAgICAgICAgICAgICAgIG1lbnVbMV0gPSBzdGF0aWNWYWx1ZUZpbmRlci5zZXR0aW5ncy5yYW5nZQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIG1lbnUgPSBnZy5wcm9tcHQoeyJSYW5nZSIsICJFeHBlY3RlZCBWYWx1ZSBSYW5nZSAoT3B0aW9uYWwpXG5FeGFtcGxlOiAxfjEwMCJ9LCB7bWVudV9yYW5nZSwgbmlsfSwgeyJudW1iZXIiLCAibnVtYmVyIn0pDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGlmIG1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICBsb2NhbCByYW5nZSA9IG1lbnVbMV0NCiAgICAgICAgICAgICAgICBsb2NhbCBleHBlY3RlZFZhbHVlUmFuZ2UgPSBtZW51WzJdDQogICAgICAgICAgICAgICAgbG9jYWwgZml4ZWRSYW5nZSA9IHJhbmdlICUgNA0KICAgICAgICAgICAgICAgIGZpeGVkUmFuZ2UgPSByYW5nZSAtIGZpeGVkUmFuZ2UNCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5nZXRBYm92ZShzdGF0aWNWYWx1ZUZpbmRlci5kZXNpcmVkVmFsdWVbMV0uYWRkcmVzcywgZml4ZWRSYW5nZSkNCiAgICAgICAgICAgICAgICBlZGl0X2luZGV4ID0gI3N0YXRpY1ZhbHVlRmluZGVyLmR3b3JkVGFibGUgKyAxDQogICAgICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIuZ2V0VW5kZXIoc3RhdGljVmFsdWVGaW5kZXIuZGVzaXJlZFZhbHVlWzFdLmFkZHJlc3MsIGZpeGVkUmFuZ2UpDQogICAgICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIuZ2V0T3RoZXJUeXBlcygpDQogICAgICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXJbc2V0TmFtZV0gPSB7DQogICAgICAgICAgICAgICAgICAgIGR3b3JkID0gc3RhdGljVmFsdWVGaW5kZXIuZHdvcmRUYWJsZSwNCiAgICAgICAgICAgICAgICAgICAgcXdvcmQgPSBzdGF0aWNWYWx1ZUZpbmRlci5xd29yZFRhYmxlLA0KICAgICAgICAgICAgICAgICAgICBmbG9hdCA9IHN0YXRpY1ZhbHVlRmluZGVyLmZsb2F0VGFibGUsDQogICAgICAgICAgICAgICAgICAgIGRvdWJsZSA9IHN0YXRpY1ZhbHVlRmluZGVyLmRvdWJsZVRhYmxlLA0KICAgICAgICAgICAgICAgICAgICB4b3IgPSBzdGF0aWNWYWx1ZUZpbmRlci54b3JUYWJsZQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBsb2NhbCBmaWxlID0gaW8ub3BlbihzdGF0aWNWYWx1ZUZpbmRlci5zYXZlUGF0aCAuLiAiLyIgLi4gZ2cuZ2V0VGFyZ2V0UGFja2FnZSgpIC4uIHNldE5hbWUgLi4gIi5sdWEiLCAidysiKQ0KICAgICAgICAgICAgICAgIGlmIG5vdCBleHBlY3RlZFZhbHVlUmFuZ2UgdGhlbg0KICAgICAgICAgICAgICAgICAgICBleHBlY3RlZFZhbHVlUmFuZ2UgPSBzdGF0aWNWYWx1ZUZpbmRlci5zZXR0aW5ncy5leHBlY3RlZF9yYW5nZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGZpbGU6d3JpdGUoInN0YXRpY1ZhbHVlRmluZGVyLiIgLi4gc2V0TmFtZSAuLiAiID0gIiAuLiB0b3N0cmluZyhzdGF0aWNWYWx1ZUZpbmRlcltzZXROYW1lXSkgLi4gIlxuc3RhdGljVmFsdWVGaW5kZXIuc2V0dGluZ3MgPSB7cmFuZ2UgPSAiIC4uIGZpeGVkUmFuZ2UgLi4gIiwgZmxhZ3MgPSAiIC4uIGVkaXRfdHlwZSAuLiAiLCBpbmRleCA9ICIgLi4gZWRpdF9pbmRleCAuLiAiLCBleHBlY3RlZF9yYW5nZSA9ICciIC4uIGV4cGVjdGVkVmFsdWVSYW5nZSAuLiAiJ30iKQ0KICAgICAgICAgICAgICAgIGZpbGU6Y2xvc2UoKQ0KICAgICAgICAgICAgICAgIGlmIHN0YXRpY1ZhbHVlRmluZGVyLmNsb3NlR2FtZUFmdGVyU2VhcmNoID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICBnZy5hbGVydChzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gUmVzdGFydCB0aGUgZ2FtZSwgZmluZCB5b3VyIHZhbHVlIGFnYWluIGFuZCBydW4gdGhlIG5leHQgc2VhcmNoLiDihLnvuI8iKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICA6OmRvbmU6Og0KICAgICAgICBlbmQsDQogICAgICAgIGNyZWF0ZURpcmVjdG9yeSA9IGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGRpcmVjdG9yeV9jcmVhdGVkID0gdHJ1ZQ0KICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMoZ2cuZ2V0UmFuZ2VzTGlzdCgpKSBkbw0KICAgICAgICAgICAgICAgIGlmIHZbImVuZCJdIC0gdi5zdGFydCA8IDEwMjQwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHN0cmluZy5maW5kKHZbIm5hbWUiXSwgImRlbGV0ZWQiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVfc3RhcnQgPSB2LnN0YXJ0DQogICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVfZW5kID0gdlsiZW5kIl0NCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBnZy5kdW1wTWVtb3J5KGNyZWF0ZV9zdGFydCwgY3JlYXRlX2VuZCwgc3RhdGljVmFsdWVGaW5kZXIuc2F2ZVBhdGgsIGdnLkRVTVBfU0tJUF9TWVNURU1fTElCUykNCiAgICAgICAgICAgIGxvY2FsIGZpbGUgPSBpby5vcGVuKHN0YXRpY1ZhbHVlRmluZGVyLnNhdmVQYXRoIC4uICIvY3JlYXRlZCIsICJ3KyIpDQogICAgICAgICAgICBmaWxlOndyaXRlKCJjcmVhdGVkIikNCiAgICAgICAgICAgIGZpbGU6Y2xvc2UoKQ0KICAgICAgICBlbmQsDQogICAgICAgIGNoZWNrRmlsZSA9IGZ1bmN0aW9uKGZpbGVuYW1lKQ0KICAgICAgICAgICAgbG9jYWwgZmlsZSA9IGFzc2VydChpby5vcGVuKGZpbGVuYW1lLCAiciIpKQ0KICAgICAgICAgICAgbG9jYWwgY29udGVudCA9IGZpbGU6cmVhZCgiKmEiKQ0KICAgICAgICAgICAgZmlsZTpjbG9zZSgpDQogICAgICAgIGVuZCwNCiAgICAgICAgbG9hZEZpbGUgPSBmdW5jdGlvbihmaWxlbmFtZSkNCiAgICAgICAgICAgIGRvZmlsZShmaWxlbmFtZSkNCiAgICAgICAgZW5kLA0KICAgICAgICBzYXZlUGF0aCA9IHBsdWdpbnNEYXRhUGF0aCAuLiAiYmFkY2FzZV9zdGF0aWNfdmFsdWVfZmluZGVyLyIsDQogICAgICAgIHN0YXJ0T3ZlciA9IGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLnNldHRpbmdzID0gbmlsDQogICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5zZXRPbmUgPSB7fQ0KICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIuc2V0VHdvID0ge30NCiAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLnNldFRocmVlID0ge30NCiAgICAgICAgICAgIHBjYWxsKG9zLnJlbW92ZSwgc3RhdGljVmFsdWVGaW5kZXIuc2F2ZVBhdGggLi4gIi8iIC4uIGdnLmdldFRhcmdldFBhY2thZ2UoKSAuLiAic2V0T25lLmx1YSIpDQogICAgICAgICAgICBwY2FsbChvcy5yZW1vdmUsIHN0YXRpY1ZhbHVlRmluZGVyLnNhdmVQYXRoIC4uICIvIiAuLiBnZy5nZXRUYXJnZXRQYWNrYWdlKCkgLi4gInNldFR3by5sdWEiKQ0KICAgICAgICAgICAgcGNhbGwob3MucmVtb3ZlLCBzdGF0aWNWYWx1ZUZpbmRlci5zYXZlUGF0aCAuLiAiLyIgLi4gZ2cuZ2V0VGFyZ2V0UGFja2FnZSgpIC4uICJzZXRUaHJlZS5sdWEiKQ0KICAgICAgICBlbmQsDQogICAgICAgIGNsb3NlR2FtZUFmdGVyU2VhcmNoID0gZmFsc2UsDQogICAgICAgIGRvaW5nRmlyc3RTZWFyY2ggPSBmYWxzZSwNCiAgICAgICAgZG9pbmdTZWNvbmRTZWFyY2ggPSBmYWxzZSwNCiAgICAgICAgc2V0T25lID0ge30sDQogICAgICAgIHNldFR3byA9IHt9LA0KICAgICAgICBzZXRUaHJlZSA9IHt9LA0KICAgICAgICBjb21wYXJlU2V0cyA9IGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGZvciBpLCB2IGluIGlwYWlycyhzdGF0aWNWYWx1ZUZpbmRlci5zZXRPbmUuZHdvcmQpIGRvDQogICAgICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIubWF0Y2hlc1RhYmxlW2ldID0ge30gLS0gcmVtb3ZlIGZvciBvdGhlcnMNCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5tYXRjaGVzVGFibGVbaV0uZHdvcmQgPSB7fQ0KICAgICAgICAgICAgICAgIGxvY2FsIG1hdGNoZXMgPSB7fQ0KICAgICAgICAgICAgICAgIGlmIHYudmFsdWUgPT0gc3RhdGljVmFsdWVGaW5kZXIuc2V0VHdvLmR3b3JkW2ldLnZhbHVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5vbmVfYW5kX3R3byA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5vbmVfYW5kX3R3b192YWx1ZSA9IHYudmFsdWUNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIG1hdGNoZXMub25lX2FuZF90d28gPSBmYWxzZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIHYudmFsdWUgPT0gc3RhdGljVmFsdWVGaW5kZXIuc2V0VGhyZWUuZHdvcmRbaV0udmFsdWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLm9uZV9hbmRfdGhyZWUgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgIG1hdGNoZXMub25lX2FuZF90aHJlZV92YWx1ZSA9IHYudmFsdWUNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIG1hdGNoZXMub25lX2FuZF90aHJlZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgc3RhdGljVmFsdWVGaW5kZXIuc2V0VGhyZWUuZHdvcmRbaV0udmFsdWUgPT0gc3RhdGljVmFsdWVGaW5kZXIuc2V0VHdvLmR3b3JkW2ldLnZhbHVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy50d29fYW5kX3RocmVlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLnR3b19hbmRfdGhyZWVfdmFsdWUgPSB2LnZhbHVlDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLnR3b19hbmRfdGhyZWUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLm1hdGNoZXNUYWJsZVtpXS5kd29yZCA9IG1hdGNoZXMNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZm9yIGksIHYgaW4gaXBhaXJzKHN0YXRpY1ZhbHVlRmluZGVyLnNldE9uZS5xd29yZCkgZG8NCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5tYXRjaGVzVGFibGVbaV0ucXdvcmQgPSB7fQ0KICAgICAgICAgICAgICAgIGxvY2FsIG1hdGNoZXMgPSB7fQ0KICAgICAgICAgICAgICAgIGlmIHYudmFsdWUgPT0gc3RhdGljVmFsdWVGaW5kZXIuc2V0VHdvLnF3b3JkW2ldLnZhbHVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5vbmVfYW5kX3R3byA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5vbmVfYW5kX3R3b192YWx1ZSA9IHYudmFsdWUNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIG1hdGNoZXMub25lX2FuZF90d28gPSBmYWxzZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIHYudmFsdWUgPT0gc3RhdGljVmFsdWVGaW5kZXIuc2V0VGhyZWUucXdvcmRbaV0udmFsdWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLm9uZV9hbmRfdGhyZWUgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgIG1hdGNoZXMub25lX2FuZF90aHJlZV92YWx1ZSA9IHYudmFsdWUNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIG1hdGNoZXMub25lX2FuZF90aHJlZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgc3RhdGljVmFsdWVGaW5kZXIuc2V0VGhyZWUucXdvcmRbaV0udmFsdWUgPT0gc3RhdGljVmFsdWVGaW5kZXIuc2V0VHdvLnF3b3JkW2ldLnZhbHVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy50d29fYW5kX3RocmVlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLnR3b19hbmRfdGhyZWVfdmFsdWUgPSB2LnZhbHVlDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLnR3b19hbmRfdGhyZWUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLm1hdGNoZXNUYWJsZVtpXS5xd29yZCA9IG1hdGNoZXMNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZm9yIGksIHYgaW4gaXBhaXJzKHN0YXRpY1ZhbHVlRmluZGVyLnNldE9uZS5mbG9hdCkgZG8NCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5tYXRjaGVzVGFibGVbaV0uZmxvYXQgPSB7fQ0KICAgICAgICAgICAgICAgIGxvY2FsIG1hdGNoZXMgPSB7fQ0KICAgICAgICAgICAgICAgIGlmIHYudmFsdWUgPT0gc3RhdGljVmFsdWVGaW5kZXIuc2V0VHdvLmZsb2F0W2ldLnZhbHVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5vbmVfYW5kX3R3byA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5vbmVfYW5kX3R3b192YWx1ZSA9IHYudmFsdWUNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIG1hdGNoZXMub25lX2FuZF90d28gPSBmYWxzZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIHYudmFsdWUgPT0gc3RhdGljVmFsdWVGaW5kZXIuc2V0VGhyZWUuZmxvYXRbaV0udmFsdWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLm9uZV9hbmRfdGhyZWUgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgIG1hdGNoZXMub25lX2FuZF90aHJlZV92YWx1ZSA9IHYudmFsdWUNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIG1hdGNoZXMub25lX2FuZF90aHJlZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgaWYgc3RhdGljVmFsdWVGaW5kZXIuc2V0VGhyZWUuZmxvYXRbaV0udmFsdWUgPT0gc3RhdGljVmFsdWVGaW5kZXIuc2V0VHdvLmZsb2F0W2ldLnZhbHVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy50d29fYW5kX3RocmVlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLnR3b19hbmRfdGhyZWVfdmFsdWUgPSB2LnZhbHVlDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLnR3b19hbmRfdGhyZWUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLm1hdGNoZXNUYWJsZVtpXS5mbG9hdCA9IG1hdGNoZXMNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZm9yIGksIHYgaW4gaXBhaXJzKHN0YXRpY1ZhbHVlRmluZGVyLnNldE9uZS5kb3VibGUpIGRvDQogICAgICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIubWF0Y2hlc1RhYmxlW2ldLmRvdWJsZSA9IHt9DQogICAgICAgICAgICAgICAgbG9jYWwgbWF0Y2hlcyA9IHt9DQogICAgICAgICAgICAgICAgaWYgdi52YWx1ZSA9PSBzdGF0aWNWYWx1ZUZpbmRlci5zZXRUd28uZG91YmxlW2ldLnZhbHVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5vbmVfYW5kX3R3byA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5vbmVfYW5kX3R3b192YWx1ZSA9IHYudmFsdWUNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIG1hdGNoZXMub25lX2FuZF90d28gPSBmYWxzZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIHYudmFsdWUgPT0gc3RhdGljVmFsdWVGaW5kZXIuc2V0VGhyZWUuZG91YmxlW2ldLnZhbHVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5vbmVfYW5kX3RocmVlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLm9uZV9hbmRfdGhyZWVfdmFsdWUgPSB2LnZhbHVlDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLm9uZV9hbmRfdGhyZWUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIHN0YXRpY1ZhbHVlRmluZGVyLnNldFRocmVlLmRvdWJsZVtpXS52YWx1ZSA9PSBzdGF0aWNWYWx1ZUZpbmRlci5zZXRUd28uZG91YmxlW2ldLnZhbHVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy50d29fYW5kX3RocmVlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLnR3b19hbmRfdGhyZWVfdmFsdWUgPSB2LnZhbHVlDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLnR3b19hbmRfdGhyZWUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLm1hdGNoZXNUYWJsZVtpXS5kb3VibGUgPSBtYXRjaGVzDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGZvciBpLCB2IGluIGlwYWlycyhzdGF0aWNWYWx1ZUZpbmRlci5zZXRPbmUueG9yKSBkbw0KICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLm1hdGNoZXNUYWJsZVtpXS54b3IgPSB7fQ0KICAgICAgICAgICAgICAgIGxvY2FsIG1hdGNoZXMgPSB7fQ0KICAgICAgICAgICAgICAgIGlmIHYudmFsdWUgPT0gc3RhdGljVmFsdWVGaW5kZXIuc2V0VHdvLnhvcltpXS52YWx1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIG1hdGNoZXMub25lX2FuZF90d28gPSB0cnVlDQogICAgICAgICAgICAgICAgICAgIG1hdGNoZXMub25lX2FuZF90d29fdmFsdWUgPSB2LnZhbHVlDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLm9uZV9hbmRfdHdvID0gZmFsc2UNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBpZiB2LnZhbHVlID09IHN0YXRpY1ZhbHVlRmluZGVyLnNldFRocmVlLnhvcltpXS52YWx1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIG1hdGNoZXMub25lX2FuZF90aHJlZSA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5vbmVfYW5kX3RocmVlX3ZhbHVlID0gdi52YWx1ZQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5vbmVfYW5kX3RocmVlID0gZmFsc2UNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBpZiBzdGF0aWNWYWx1ZUZpbmRlci5zZXRUaHJlZS54b3JbaV0udmFsdWUgPT0gc3RhdGljVmFsdWVGaW5kZXIuc2V0VHdvLnhvcltpXS52YWx1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIG1hdGNoZXMudHdvX2FuZF90aHJlZSA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy50d29fYW5kX3RocmVlX3ZhbHVlID0gdi52YWx1ZQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy50d29fYW5kX3RocmVlID0gZmFsc2UNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5tYXRjaGVzVGFibGVbaV0ueG9yID0gbWF0Y2hlcw0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5pc0NvbXBhcmluZyA9IHRydWUNCiAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLmNyZWF0ZUVkaXQoKQ0KICAgICAgICBlbmQsDQogICAgICAgIG1hdGNoZXNUYWJsZSA9IHt9LA0KICAgICAgICBpc0NvbXBhcmluZyA9IGZhbHNlLA0KICAgICAgICBjcmVhdGVFZGl0ID0gZnVuY3Rpb24oKQ0KICAgICAgICAgICAgbG9jYWwgZmlyc3RfbWF0Y2ggPSAwDQogICAgICAgICAgICBsb2NhbCBmaXJzdF9tYXRjaF90eXBlID0gIiINCiAgICAgICAgICAgIGxvY2FsIGxhc3RfbWF0Y2ggPSAwDQogICAgICAgICAgICBsb2NhbCBzZWFyY2hfdGFibGUgPSB7fQ0KICAgICAgICAgICAgZm9yIGksIHYgaW4gaXBhaXJzKHN0YXRpY1ZhbHVlRmluZGVyLm1hdGNoZXNUYWJsZSkgZG8NCiAgICAgICAgICAgICAgICBpZiB2LmR3b3JkLm9uZV9hbmRfdHdvID09IHRydWUgYW5kIHYuZHdvcmQub25lX2FuZF90aHJlZSA9PSB0cnVlIGFuZCB2LmR3b3JkLnR3b19hbmRfdGhyZWUgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHNob3VsZF9hZGQgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgIGlmIGZpcnN0X21hdGNoID09IDAgYW5kIHZhbHVlID09IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgc2hvdWxkX2FkZCA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBmaXJzdF9tYXRjaCA9PSAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0X21hdGNoID0gaQ0KICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RfbWF0Y2hfdHlwZSA9ICJkd29yZCINCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIHNob3VsZF9hZGQgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YWx1ZSA9IHYuZHdvcmQub25lX2FuZF90d29fdmFsdWUNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGZpcnN0X21hdGNoX3R5cGUgfj0gImR3b3JkIiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZSAuLiAiRCINCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdmFsdWUgfj0gc2VhcmNoX3RhYmxlWyNzZWFyY2hfdGFibGUgLSAxXSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3RhYmxlWyNzZWFyY2hfdGFibGUgKyAxXSA9IHZhbHVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdF9tYXRjaCA9IGkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbHNlaWYgdi5mbG9hdC5vbmVfYW5kX3R3byA9PSB0cnVlIGFuZCB2LmZsb2F0Lm9uZV9hbmRfdGhyZWUgPT0gdHJ1ZSBhbmQgdi5mbG9hdC50d29fYW5kX3RocmVlID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBzaG91bGRfYWRkID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICBpZiBmaXJzdF9tYXRjaCA9PSAwIGFuZCB2YWx1ZSA9PSAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZF9hZGQgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZmlyc3RfbWF0Y2ggPT0gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBmaXJzdF9tYXRjaCA9IGkNCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0X21hdGNoX3R5cGUgPSAiZmxvYXQiDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBzaG91bGRfYWRkID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFsdWUgPSB2LmZsb2F0Lm9uZV9hbmRfdHdvX3ZhbHVlDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBmaXJzdF9tYXRjaF90eXBlIH49ICJmbG9hdCIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgLi4gIkYiDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHZhbHVlIH49IHNlYXJjaF90YWJsZVsjc2VhcmNoX3RhYmxlIC0gMV0gdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaF90YWJsZVsjc2VhcmNoX3RhYmxlICsgMV0gPSB2YWx1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RfbWF0Y2ggPSBpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZWxzZWlmIHYucXdvcmQub25lX2FuZF90d28gPT0gdHJ1ZSBhbmQgdi5xd29yZC5vbmVfYW5kX3RocmVlID09IHRydWUgYW5kIHYucXdvcmQudHdvX2FuZF90aHJlZSA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgc2hvdWxkX2FkZCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgaWYgZmlyc3RfbWF0Y2ggPT0gMCBhbmQgdmFsdWUgPT0gMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBzaG91bGRfYWRkID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGZpcnN0X21hdGNoID09IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RfbWF0Y2ggPSBpDQogICAgICAgICAgICAgICAgICAgICAgICBmaXJzdF9tYXRjaF90eXBlID0gInF3b3JkIg0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgc2hvdWxkX2FkZCA9PSB0cnVlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhbHVlID0gdi5xd29yZC5vbmVfYW5kX3R3b192YWx1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZmlyc3RfbWF0Y2hfdHlwZSB+PSAicXdvcmQiIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlIC4uICJRIg0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBpZiB2YWx1ZSB+PSBzZWFyY2hfdGFibGVbI3NlYXJjaF90YWJsZSAtIDFdIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hfdGFibGVbI3NlYXJjaF90YWJsZSArIDFdID0gdmFsdWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0X21hdGNoID0gaQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVsc2VpZiB2Lnhvci5vbmVfYW5kX3R3byA9PSB0cnVlIGFuZCB2Lnhvci5vbmVfYW5kX3RocmVlID09IHRydWUgYW5kIHYueG9yLnR3b19hbmRfdGhyZWUgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHNob3VsZF9hZGQgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgIGlmIGZpcnN0X21hdGNoID09IDAgYW5kIHZhbHVlID09IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgc2hvdWxkX2FkZCA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBmaXJzdF9tYXRjaCA9PSAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0X21hdGNoID0gaQ0KICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RfbWF0Y2hfdHlwZSA9ICJ4b3IiDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBzaG91bGRfYWRkID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFsdWUgPSB2Lnhvci5vbmVfYW5kX3R3b192YWx1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZmlyc3RfbWF0Y2hfdHlwZSB+PSAieG9yIiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZSAuLiAiWCINCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdmFsdWUgfj0gc2VhcmNoX3RhYmxlWyNzZWFyY2hfdGFibGUgLSAxXSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3RhYmxlWyNzZWFyY2hfdGFibGUgKyAxXSA9IHZhbHVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdF9tYXRjaCA9IGkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBpZiAjc2VhcmNoX3RhYmxlID09IDY0IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWYgI3NlYXJjaF90YWJsZSA+IDIgdGhlbg0KICAgICAgICAgICAgICAgIGxvY2FsIHNhdmVfdG9fdGFibGUgPSB7fQ0KICAgICAgICAgICAgICAgIHNhdmVfdG9fdGFibGUuc2VhcmNoX3RhYmxlID0ge30NCiAgICAgICAgICAgICAgICBsb2NhbCBtZW51X2NoZWNrYm94ZXMgPSB7fQ0KICAgICAgICAgICAgICAgIGxvY2FsIG1lbnVfdHJ1ZSA9IHt9DQogICAgICAgICAgICAgICAgbG9jYWwgbWVudV9pdGVtcyA9IHt9DQogICAgICAgICAgICAgICAgZm9yIGluZGV4LCB2YWx1ZSBpbiBpcGFpcnMoc2VhcmNoX3RhYmxlKSBkbw0KICAgICAgICAgICAgICAgICAgICBsb2NhbCB0ZW1wX3ZhbHVlID0gdmFsdWUNCiAgICAgICAgICAgICAgICAgICAgc2F2ZV90b190YWJsZS5zZWFyY2hfdGFibGVbaW5kZXhdID0gdGVtcF92YWx1ZQ0KICAgICAgICAgICAgICAgICAgICBtZW51X2NoZWNrYm94ZXNbaW5kZXhdID0gImNoZWNrYm94Ig0KICAgICAgICAgICAgICAgICAgICBtZW51X3RydWVbaW5kZXhdID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICBpZiBpbmRleCA9PSAxIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVfaXRlbXNbaW5kZXhdID0gdGVtcF92YWx1ZSAuLiAiIChNdXN0IEluY2x1ZGUpIg0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBtZW51X2l0ZW1zW2luZGV4XSA9IHRlbXBfdmFsdWUNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgbG9jYWwgY3VzdG9taXplU2VhcmNoTWVudSA9IGdnLnByb21wdChtZW51X2l0ZW1zLCBtZW51X3RydWUsIG1lbnVfY2hlY2tib3hlcykNCiAgICAgICAgICAgICAgICBpZiBjdXN0b21pemVTZWFyY2hNZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHRlbXBfc2VhcmNoX3RhYmxlID0ge30NCiAgICAgICAgICAgICAgICAgICAgZm9yIGksIHYgaW4gaXBhaXJzKHNlYXJjaF90YWJsZSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGN1c3RvbWl6ZVNlYXJjaE1lbnVbaV0gPT0gdHJ1ZSBvciBpID09IDEgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHRlbXBfdmFsdWUgPSB2DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcF9zZWFyY2hfdGFibGVbI3RlbXBfc2VhcmNoX3RhYmxlICsgMV0gPSB2DQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIHNlYXJjaF90YWJsZSA9IHRlbXBfc2VhcmNoX3RhYmxlDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgbG9jYWwgc2VhcmNoUmFuZ2UgPSBsYXN0X21hdGNoIC0gZmlyc3RfbWF0Y2gNCiAgICAgICAgICAgICAgICBzZWFyY2hSYW5nZSA9IHNlYXJjaFJhbmdlICogNCArIDUNCiAgICAgICAgICAgICAgICBsb2NhbCBzZWFyY2hTdHJpbmcgPSAiIg0KICAgICAgICAgICAgICAgIGZvciBpLCB2IGluIGlwYWlycyhzZWFyY2hfdGFibGUpIGRvDQogICAgICAgICAgICAgICAgICAgIHNlYXJjaFN0cmluZyA9IHNlYXJjaFN0cmluZyAuLiB2IC4uICI7Ig0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIHNlYXJjaFN0cmluZyA9IHNlYXJjaFN0cmluZyAuLiAiOjoiIC4uIHNlYXJjaFJhbmdlDQogICAgICAgICAgICAgICAgZ2cuY29weVRleHQoc2VhcmNoU3RyaW5nKQ0KICAgICAgICAgICAgICAgIGxvY2FsIGdnX2ZsYWdzID0gew0KICAgICAgICAgICAgICAgICAgICBbImRvdWJsZSJdID0gZ2cuVFlQRV9ET1VCTEUsDQogICAgICAgICAgICAgICAgICAgIFsiZHdvcmQiXSA9IGdnLlRZUEVfRFdPUkQsDQogICAgICAgICAgICAgICAgICAgIFsiZmxvYXQiXSA9IGdnLlRZUEVfRkxPQVQsDQogICAgICAgICAgICAgICAgICAgIFsicXdvcmQiXSA9IGdnLlRZUEVfUVdPUkQsDQogICAgICAgICAgICAgICAgICAgIFsieG9yIl0gPSBnZy5UWVBFX1hPUg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBsb2NhbCBzZWFyY2hGbGFnID0gZ2dfZmxhZ3NbZmlyc3RfbWF0Y2hfdHlwZV0NCiAgICAgICAgICAgICAgICBnZy5zZXRSYW5nZXMoZ2cuZ2V0UmFuZ2VzKCkpDQogICAgICAgICAgICAgICAgZ2cuY2xlYXJSZXN1bHRzKCkNCiAgICAgICAgICAgICAgICBnZy5zZWFyY2hOdW1iZXIoc2VhcmNoU3RyaW5nLCBzZWFyY2hGbGFnKQ0KICAgICAgICAgICAgICAgIHJlcGVhdA0KICAgICAgICAgICAgICAgICAgICB0YWJsZS5yZW1vdmUoc2VhcmNoX3RhYmxlLCAjc2VhcmNoX3RhYmxlKQ0KICAgICAgICAgICAgICAgICAgICBsb2NhbCByZWZpbmVTdHJpbmcgPSAiIg0KICAgICAgICAgICAgICAgICAgICBmb3IgaSwgdiBpbiBpcGFpcnMoc2VhcmNoX3RhYmxlKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgcmVmaW5lU3RyaW5nID0gcmVmaW5lU3RyaW5nIC4uIHYNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICNzZWFyY2hfdGFibGUgPiAxIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZpbmVTdHJpbmcgPSByZWZpbmVTdHJpbmcgLi4gIjsiDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmICNzZWFyY2hfdGFibGUgPiAxIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHJlZmluZVN0cmluZyA9IHJlZmluZVN0cmluZyAuLiAiOjoiDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBnZy5yZWZpbmVOdW1iZXIocmVmaW5lU3RyaW5nLCBzZWFyY2hGbGFnKQ0KICAgICAgICAgICAgICAgIHVudGlsICgjc2VhcmNoX3RhYmxlID09IDApDQogICAgICAgICAgICAgICAgbG9jYWwgcmVzdWx0cyA9IGdnLmdldFJlc3VsdHMoZ2cuZ2V0UmVzdWx0c0NvdW50KCkpDQogICAgICAgICAgICAgICAgbG9jYWwgb2Zmc2V0ID0gMA0KICAgICAgICAgICAgICAgIGxvY2FsIGV4cG9ydF9vZmZzZXQgPSAwDQogICAgICAgICAgICAgICAgaWYgc3RhdGljVmFsdWVGaW5kZXIuc2V0dGluZ3MuaW5kZXggPiBmaXJzdF9tYXRjaCB0aGVuDQogICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IHN0YXRpY1ZhbHVlRmluZGVyLnNldHRpbmdzLmluZGV4IC0gZmlyc3RfbWF0Y2gNCiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0ICogNA0KICAgICAgICAgICAgICAgICAgICBleHBvcnRfb2Zmc2V0ID0gb2Zmc2V0DQogICAgICAgICAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHJlc3VsdHMpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzW2ldLmFkZHJlc3MgPSByZXN1bHRzW2ldLmFkZHJlc3MgKyBvZmZzZXQNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHNbaV0uZmxhZ3MgPSBzdGF0aWNWYWx1ZUZpbmRlci5zZXR0aW5ncy5mbGFncw0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IGZpcnN0X21hdGNoIC0gc3RhdGljVmFsdWVGaW5kZXIuc2V0dGluZ3MuaW5kZXgNCiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0ICogNCArIDQNCiAgICAgICAgICAgICAgICAgICAgZXhwb3J0X29mZnNldCA9IHRvbnVtYmVyKCItIiAuLiBvZmZzZXQpDQogICAgICAgICAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHJlc3VsdHMpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzW2ldLmFkZHJlc3MgPSByZXN1bHRzW2ldLmFkZHJlc3MgLSBvZmZzZXQNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHNbaV0uZmxhZ3MgPSBzdGF0aWNWYWx1ZUZpbmRlci5zZXR0aW5ncy5mbGFncw0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBnZy5sb2FkUmVzdWx0cyhyZXN1bHRzKQ0KICAgICAgICAgICAgICAgIGlmIHN0YXRpY1ZhbHVlRmluZGVyLnNldHRpbmdzLmV4cGVjdGVkX3JhbmdlIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZ2cucmVmaW5lTnVtYmVyKHN0YXRpY1ZhbHVlRmluZGVyLnNldHRpbmdzLmV4cGVjdGVkX3JhbmdlLCBzdGF0aWNWYWx1ZUZpbmRlci5zZXR0aW5ncy5mbGFncykNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBsb2NhbCByZXN1bHRzID0gZ2cuZ2V0UmVzdWx0cyhnZy5nZXRSZXN1bHRzQ291bnQoKSkNCiAgICAgICAgICAgICAgICBsb2NhbCBtZW51ID0gZ2cucHJvbXB0KHtzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gQ3JlYXRlIEVkaXQg4oS577iPXG5TZXQgbmFtZSBmb3IgZWRpdDoiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTZXQgdmFsdWUgdG86IiwgDQoJCQkJCQkJCQkJIkZyZWV6ZSB2YWx1ZToiLCANCgkJCQkJCQkJCQkiWDQgZWRpdCAoT25seSBTZWxlY3QgT25lKSIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlg4IGVkaXQgKE9ubHkgU2VsZWN0IE9uZSkifSwNCgkJCQkJCQkJCQl7DQoJCQkJCQkJCQkJIkVkaXQgIiAuLiAjc3RhdGljVmFsdWVGaW5kZXIuc2F2ZWRFZGl0c1RhYmxlICsgMSwgDQoJCQkJCQkJCQkJcmVzdWx0c1sxXS52YWx1ZSwgDQoJCQkJCQkJCQkJZmFsc2UsIA0KCQkJCQkJCQkJCWZhbHNlLCANCgkJCQkJCQkJCQlmYWxzZX0sDQoJCQkJCQkJCQkJew0KCQkJCQkJCQkJCSJ0ZXh0IiwgDQoJCQkJCQkJCQkJIm51bWJlciIsIA0KCQkJCQkJCQkJCSJjaGVja2JveCIsIA0KCQkJCQkJCQkJCSJjaGVja2JveCIsIA0KCQkJCQkJCQkJCSJjaGVja2JveCJ9KQ0KICAgICAgICAgICAgICAgIGlmIG1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgcHJlcF9lZGl0ID0gbWVudVsyXQ0KICAgICAgICAgICAgICAgICAgICBpZiBtZW51WzRdID09IHRydWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgcHJlcF9lZGl0ID0gcHJlcF9lZGl0IC4uICJYNCINCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIG1lbnVbNV0gPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBwcmVwX2VkaXQgPSBwcmVwX2VkaXQgLi4gIlg4Ig0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZm9yIGksIHYgaW4gcGFpcnMocmVzdWx0cykgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHNbaV0udmFsdWUgPSBwcmVwX2VkaXQNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1lbnVbM10gPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0c1tpXS5mcmVlemUgPSBtZW51WzNdDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIG1lbnVbM10gPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBnZy5hZGRMaXN0SXRlbXMocmVzdWx0cykNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGdnLnNldFZhbHVlcyhyZXN1bHRzKQ0KICAgICAgICAgICAgICAgICAgICBzYXZlX3RvX3RhYmxlLmVkaXRfbmFtZSA9IG1lbnVbMV0NCiAgICAgICAgICAgICAgICAgICAgc2F2ZV90b190YWJsZS5vZmZzZXQgPSBleHBvcnRfb2Zmc2V0DQogICAgICAgICAgICAgICAgICAgIHNhdmVfdG9fdGFibGUuc2VhcmNoX3JhbmdlID0gc2VhcmNoUmFuZ2UNCiAgICAgICAgICAgICAgICAgICAgc2F2ZV90b190YWJsZS5mbGFncyA9IHNlYXJjaEZsYWcNCiAgICAgICAgICAgICAgICAgICAgc2F2ZV90b190YWJsZS5lZGl0ID0gcHJlcF9lZGl0DQogICAgICAgICAgICAgICAgICAgIHNhdmVfdG9fdGFibGUuZWRpdF9mbGFncyA9IHN0YXRpY1ZhbHVlRmluZGVyLnNldHRpbmdzLmZsYWdzDQogICAgICAgICAgICAgICAgICAgIHNhdmVfdG9fdGFibGUuZnJlZXplID0gbWVudVszXQ0KICAgICAgICAgICAgICAgICAgICBzYXZlX3RvX3RhYmxlLmV4cGVjdGVkX3JhbmdlID0gc3RhdGljVmFsdWVGaW5kZXIuc2V0dGluZ3MuZXhwZWN0ZWRfcmFuZ2UNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5zYXZlZEVkaXRzVGFibGVbI3N0YXRpY1ZhbHVlRmluZGVyLnNhdmVkRWRpdHNUYWJsZSArIDFdID0gew0KICAgICAgICAgICAgICAgICAgICBlZGl0X3RhYmxlID0gc2F2ZV90b190YWJsZSwNCiAgICAgICAgICAgICAgICAgICAgc2V0T25lID0gc3RhdGljVmFsdWVGaW5kZXIuc2V0T25lLA0KICAgICAgICAgICAgICAgICAgICBzZXRUd28gPSBzdGF0aWNWYWx1ZUZpbmRlci5zZXRUd28sDQogICAgICAgICAgICAgICAgICAgIHNldFRocmVlID0gc3RhdGljVmFsdWVGaW5kZXIuc2V0VGhyZWUsDQogICAgICAgICAgICAgICAgICAgIHNldHRpbmdzID0gc3RhdGljVmFsdWVGaW5kZXIuc2V0dGluZ3MNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIubWFraW5nRWRpdCA9IHRydWUNCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5pc0NvbXBhcmluZyA9IGZhbHNlDQogICAgICAgICAgICAgICAgZ2cuYWxlcnQoc2NyaXB0X3RpdGxlIC4uICJcblxu4oS577iPIFZhbHVlIGhhcyBiZWVuIHNldC4g4oS577iPIFxuVGVzdCB0byB2ZXJpZnkgaXQgaXMgd29ya2luZyBhbmQgdGhlbiBwcmVzcyB0aGUgZmxvYXRpbmcgR0cgYnV0dG9uIHRvIGVpdGhlciBTYXZlIG9yIERpc2NhcmQgZWRpdC4iKQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIGdnLmFsZXJ0KHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBOb3QgZW5vdWdoIHN0YXRpYyB2YWx1ZXMgd2VyZSBmb3VuZCB0byBjcmVhdGUgYSBzZWFyY2gsIHN0YXJ0b3ZlciBhbmQgdXNlciBhIGxhcmdlciByYW5nZS4g4oS577iPIikNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQsDQogICAgICAgIG1ha2luZ0VkaXQgPSBmYWxzZSwNCiAgICAgICAgY3VycmVudEVkaXQgPSB7fSwNCiAgICAgICAgc2F2ZUNvbmZpZyA9IGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGxvY2FsIGZpbGUgPSBpby5vcGVuKHN0YXRpY1ZhbHVlRmluZGVyLnNhdmVQYXRoIC4uICIvIiAuLiBnZy5nZXRUYXJnZXRQYWNrYWdlKCkgLi4gIi5jZmciLCAidysiKQ0KICAgICAgICAgICAgZmlsZTp3cml0ZSgic3RhdGljVmFsdWVGaW5kZXIuc2F2ZWRFZGl0c1RhYmxlID0gIiAuLiB0b3N0cmluZyhzdGF0aWNWYWx1ZUZpbmRlci5zYXZlZEVkaXRzVGFibGUpKQ0KICAgICAgICAgICAgZmlsZTpjbG9zZSgpDQogICAgICAgIGVuZCwNCiAgICAgICAgY2hlY2tDb25maWdGaWxlR2FtZSA9IGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGRvZmlsZShzdGF0aWNWYWx1ZUZpbmRlci5zYXZlUGF0aCAuLiAiLyIgLi4gZ2cuZ2V0VGFyZ2V0UGFja2FnZSgpIC4uICIuY2ZnIikNCiAgICAgICAgZW5kLA0KICAgICAgICBjb21wYXJlTWVudSA9IGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGlmIG5vdCBzdGF0aWNWYWx1ZUZpbmRlci5zZXRPbmUuZHdvcmQgdGhlbg0KICAgICAgICAgICAgICAgIGxvY2FsIG1lbnUgPSBnZy5jaG9pY2UoeyLwn5SNIFJ1biBGaXJzdCBTZWFyY2gifSwgbmlsLCBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2VsZWN0IHRoZSBkZXNpcmVkIHZhbHVlIGluIHlvdXIgc2VhcmNoIHJlc3VsdHMgYW5kIHJ1biB0aGUgc2VhcmNoLiDihLnvuI8iKQ0KICAgICAgICAgICAgICAgIGlmIG1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIuY2xvc2VHYW1lQWZ0ZXJTZWFyY2ggPSB0cnVlDQogICAgICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLmRvaW5nRmlyc3RTZWFyY2ggPSB0cnVlDQogICAgICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLnNlYXJjaEZvclZhbHVlcygic2V0T25lIikNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2VpZiBzdGF0aWNWYWx1ZUZpbmRlci5kb2luZ1NlY29uZFNlYXJjaCA9PSB0cnVlIG9yIHN0YXRpY1ZhbHVlRmluZGVyLmRvaW5nRmlyc3RTZWFyY2ggPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgZ2cuYWxlcnQoInJlc3RhcnQgdGhlIGdhbWUgYW5kIHJ1biB0aGUgbmV4dCBzZWFyY2giKQ0KICAgICAgICAgICAgZWxzZWlmIG5vdCBzdGF0aWNWYWx1ZUZpbmRlci5zZXRUd28uZHdvcmQgdGhlbg0KICAgICAgICAgICAgICAgIGxvY2FsIG1lbnUgPSBnZy5jaG9pY2UoeyLwn5SNIFJ1biBTZWNvbmQgU2VhcmNoIiwgIvCfl5HvuI8gU3RhcnQgT3ZlciJ9LCBuaWwsIHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBTZWxlY3QgdGhlIGRlc2lyZWQgdmFsdWUgaW4geW91ciBzZWFyY2ggcmVzdWx0cyBhbmQgcnVuIHRoZSBzZWFyY2ggb3Igc3RhcnQgb3Zlci4g4oS577iPIikNCiAgICAgICAgICAgICAgICBpZiBtZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIG1lbnUgPT0gMSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5jbG9zZUdhbWVBZnRlclNlYXJjaCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLmRvaW5nU2Vjb25kU2VhcmNoID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIuc2VhcmNoRm9yVmFsdWVzKCJzZXRUd28iKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgbWVudSA9PSAyIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLnN0YXJ0T3ZlcigpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZWxzZWlmIG5vdCBzdGF0aWNWYWx1ZUZpbmRlci5zZXRUaHJlZS5kd29yZCB0aGVuDQogICAgICAgICAgICAgICAgbG9jYWwgbWVudSA9IGdnLmNob2ljZSh7IvCflI0gUnVuIFRoaXJkIFNlYXJjaCIsICLwn5eR77iPIFN0YXJ0IE92ZXIifSwgbmlsLCBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2VsZWN0IHRoZSBkZXNpcmVkIHZhbHVlIGluIHlvdXIgc2VhcmNoIHJlc3VsdHMgYW5kIHJ1biB0aGUgc2VhcmNoIG9yIHN0YXJ0IG92ZXIuIOKEue+4jyIpDQogICAgICAgICAgICAgICAgaWYgbWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBtZW51ID09IDEgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIuc2VhcmNoRm9yVmFsdWVzKCJzZXRUaHJlZSIpDQogICAgICAgICAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5ob21lKCkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGlmIG1lbnUgPT0gMiB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5zdGFydE92ZXIoKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBsb2NhbCBtZW51ID0gZ2cuY2hvaWNlKHsi8J+UjSBSZVJ1biBUaGlyZCBTZWFyY2giLCANCgkJCQkJCQkJCQki4p6VIENyZWF0ZSBTZWFyY2ggYW5kIEVkaXQiLCANCgkJCQkJCQkJCQki8J+Xke+4jyBTdGFydCBPdmVyIn0sDQoJCQkJCQkJCQkJbmlsLCANCgkJCQkJCQkJCQlzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gQ3JlYXRlIHNlYXJjaCBhbmQgZWRpdCBvciBzdGFydCBvdmVyLiDihLnvuI8iKQ0KICAgICAgICAgICAgICAgIGlmIG1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgbWVudSA9PSAxIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLnNldFRocmVlID0ge30NCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLnNlYXJjaEZvclZhbHVlcygic2V0VGhyZWUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIuaG9tZSgpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBtZW51ID09IDIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIuY29tcGFyZVNldHMoKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgaWYgbWVudSA9PSAzIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLnN0YXJ0T3ZlcigpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCwNCiAgICAgICAgaG9tZSA9IGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIGlmIHN0YXRpY1ZhbHVlRmluZGVyLm1ha2luZ0VkaXQgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgbG9jYWwgbWVudSA9IGdnLmNob2ljZSh7IuKchSBTYXZlIEVkaXQiLCANCgkJCQkJCQkJCQki8J+Xke+4jyBEaXNjYXJkIEVkaXQifSwgDQoJCQkJCQkJCQkJbmlsLA0KCQkJCQkJCQkJCXNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBTYXZlIG9yIERpc2NhcmQgZWRpdC4g4oS577iPIikNCiAgICAgICAgICAgICAgICBpZiBtZW51IH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIG1lbnUgPT0gMSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5zYXZlQ29uZmlnKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLm1ha2luZ0VkaXQgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgZ2cudG9hc3QoIuKchSBFZGl0IHNhdmVkIOKchSIpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBtZW51ID09IDIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUucmVtb3ZlKHN0YXRpY1ZhbHVlRmluZGVyLnNhdmVkRWRpdHNUYWJsZSwgI3N0YXRpY1ZhbHVlRmluZGVyLnNhdmVkRWRpdHNUYWJsZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLm1ha2luZ0VkaXQgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgZ2cudG9hc3QoIvCfl5HvuI8gRWRpdCBkaXNjYXJkZWQg8J+Xke+4jyIpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5ob21lKCkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2VpZiBzdGF0aWNWYWx1ZUZpbmRlci5zZXRPbmUuZHdvcmQgdGhlbg0KICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLmNvbXBhcmVNZW51KCkNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBsb2NhbCBtZW51X2l0ZW1zID0ge30NCiAgICAgICAgICAgICAgICBmb3IgaSwgdiBpbiBpcGFpcnMoc3RhdGljVmFsdWVGaW5kZXIuc2F2ZWRFZGl0c1RhYmxlKSBkbw0KICAgICAgICAgICAgICAgICAgICBtZW51X2l0ZW1zW2ldID0gIuKWtu+4jyAiIC4uIHYuZWRpdF90YWJsZS5lZGl0X25hbWUNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBtZW51X2l0ZW1zWyNtZW51X2l0ZW1zICsgMV0gPSAi8J+UjSBGaW5kIFN0YXRpYyBWYWx1ZXMiDQogICAgICAgICAgICAgICAgbWVudV9pdGVtc1sjbWVudV9pdGVtcyArIDFdID0gIvCfm6DvuI8gRml4IFNhdmVkIFNlYXJjaC9FZGl0Ig0KICAgICAgICAgICAgICAgIG1lbnVfaXRlbXNbI21lbnVfaXRlbXMgKyAxXSA9ICLwn5eR77iPIERlbGV0ZSBTYXZlZCBFZGl0Ig0KICAgICAgICAgICAgICAgIG1lbnVfaXRlbXNbI21lbnVfaXRlbXMgKyAxXSA9ICLinYwgRXhpdCINCiAgICAgICAgICAgICAgICBsb2NhbCBtZW51ID0gZ2cuY2hvaWNlKG1lbnVfaXRlbXMsIG5pbCwgc2NyaXB0X3RpdGxlIC4uICJcblxuU3RhdGljIFZhbHVlIEZpbmRlciIpDQogICAgICAgICAgICAgICAgaWYgbWVudSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBtZW51ID09ICNtZW51X2l0ZW1zIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIucmV0dXJuSG9tZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBtZW51ID09ICNtZW51X2l0ZW1zIC0gMSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5kZWxldGVFZGl0KCkNCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIG1lbnUgPT0gI21lbnVfaXRlbXMgLSAyIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLmZpeFNlYXJjaEVkaXQoKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlaWYgbWVudSA9PSAjbWVudV9pdGVtcyAtIDMgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIuY29tcGFyZU1lbnUoKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5kb0VkaXQobWVudSkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kLA0KICAgICAgICBkb0VkaXQgPSBmdW5jdGlvbihlZGl0X2luZGV4KQ0KICAgICAgICAgICAgbG9jYWwgc2VhcmNoX3RhYmxlID0gc3RhdGljVmFsdWVGaW5kZXIuc2F2ZWRFZGl0c1RhYmxlW2VkaXRfaW5kZXhdLmVkaXRfdGFibGUuc2VhcmNoX3RhYmxlDQogICAgICAgICAgICBsb2NhbCBzZWFyY2hGbGFnID0gc3RhdGljVmFsdWVGaW5kZXIuc2F2ZWRFZGl0c1RhYmxlW2VkaXRfaW5kZXhdLmVkaXRfdGFibGUuZmxhZ3MNCiAgICAgICAgICAgIGxvY2FsIHNlYXJjaFJhbmdlID0gc3RhdGljVmFsdWVGaW5kZXIuc2F2ZWRFZGl0c1RhYmxlW2VkaXRfaW5kZXhdLmVkaXRfdGFibGUuc2VhcmNoX3JhbmdlDQogICAgICAgICAgICBsb2NhbCBvZmZzZXQgPSBzdGF0aWNWYWx1ZUZpbmRlci5zYXZlZEVkaXRzVGFibGVbZWRpdF9pbmRleF0uZWRpdF90YWJsZS5vZmZzZXQNCiAgICAgICAgICAgIGxvY2FsIGVkaXRfdG8gPSBzdGF0aWNWYWx1ZUZpbmRlci5zYXZlZEVkaXRzVGFibGVbZWRpdF9pbmRleF0uZWRpdF90YWJsZS5lZGl0DQogICAgICAgICAgICBsb2NhbCBlZGl0X3RvX2ZsYWdzID0gc3RhdGljVmFsdWVGaW5kZXIuc2F2ZWRFZGl0c1RhYmxlW2VkaXRfaW5kZXhdLmVkaXRfdGFibGUuZWRpdF9mbGFncw0KICAgICAgICAgICAgbG9jYWwgZWRpdF9uYW1lID0gc3RhdGljVmFsdWVGaW5kZXIuc2F2ZWRFZGl0c1RhYmxlW2VkaXRfaW5kZXhdLmVkaXRfdGFibGUuZWRpdF9uYW1lDQogICAgICAgICAgICBsb2NhbCBmcmVlemUgPSBzdGF0aWNWYWx1ZUZpbmRlci5zYXZlZEVkaXRzVGFibGVbZWRpdF9pbmRleF0uZWRpdF90YWJsZS5mcmVlemUNCiAgICAgICAgICAgIGxvY2FsIGV4cGVjdGVkX3JhbmdlID0gc3RhdGljVmFsdWVGaW5kZXIuc2F2ZWRFZGl0c1RhYmxlW2VkaXRfaW5kZXhdLmVkaXRfdGFibGUuZXhwZWN0ZWRfcmFuZ2UNCiAgICAgICAgICAgIGxvY2FsIHNlYXJjaFN0cmluZyA9ICIiDQogICAgICAgICAgICBsb2NhbCB0ZW1wX3NlYXJjaF90YWJsZSA9IHt9DQogICAgICAgICAgICBmb3IgaSwgdiBpbiBpcGFpcnMoc2VhcmNoX3RhYmxlKSBkbw0KICAgICAgICAgICAgICAgIGxvY2FsIHRlbXBfdmFsID0gdg0KICAgICAgICAgICAgICAgIHRlbXBfc2VhcmNoX3RhYmxlW2ldID0gdGVtcF92YWwNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZm9yIGksIHYgaW4gaXBhaXJzKHRlbXBfc2VhcmNoX3RhYmxlKSBkbw0KICAgICAgICAgICAgICAgIHNlYXJjaFN0cmluZyA9IHNlYXJjaFN0cmluZyAuLiB2IC4uICI7Ig0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBzZWFyY2hTdHJpbmcgPSBzZWFyY2hTdHJpbmcgLi4gIjo6IiAuLiBzZWFyY2hSYW5nZQ0KICAgICAgICAgICAgZ2cuc2V0UmFuZ2VzKGdnLmdldFJhbmdlcygpKQ0KICAgICAgICAgICAgZ2cuY2xlYXJSZXN1bHRzKCkNCiAgICAgICAgICAgIGdnLnNlYXJjaE51bWJlcihzZWFyY2hTdHJpbmcsIHNlYXJjaEZsYWcpDQogICAgICAgICAgICByZXBlYXQNCiAgICAgICAgICAgICAgICB0YWJsZS5yZW1vdmUodGVtcF9zZWFyY2hfdGFibGUsICN0ZW1wX3NlYXJjaF90YWJsZSkNCiAgICAgICAgICAgICAgICBsb2NhbCByZWZpbmVTdHJpbmcgPSAiIg0KICAgICAgICAgICAgICAgIGZvciBpLCB2IGluIGlwYWlycyh0ZW1wX3NlYXJjaF90YWJsZSkgZG8NCiAgICAgICAgICAgICAgICAgICAgcmVmaW5lU3RyaW5nID0gcmVmaW5lU3RyaW5nIC4uIHYNCiAgICAgICAgICAgICAgICAgICAgaWYgI3RlbXBfc2VhcmNoX3RhYmxlID4gMSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICByZWZpbmVTdHJpbmcgPSByZWZpbmVTdHJpbmcgLi4gIjsiDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmICN0ZW1wX3NlYXJjaF90YWJsZSA+IDEgdGhlbg0KICAgICAgICAgICAgICAgICAgICByZWZpbmVTdHJpbmcgPSByZWZpbmVTdHJpbmcgLi4gIjo6Ig0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGdnLnJlZmluZU51bWJlcihyZWZpbmVTdHJpbmcsIHNlYXJjaEZsYWcpDQogICAgICAgICAgICB1bnRpbCAoI3RlbXBfc2VhcmNoX3RhYmxlID09IDApDQogICAgICAgICAgICBsb2NhbCByZXN1bHRzID0gZ2cuZ2V0UmVzdWx0cyhnZy5nZXRSZXN1bHRzQ291bnQoKSkNCiAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKHJlc3VsdHMpIGRvDQogICAgICAgICAgICAgICAgcmVzdWx0c1tpXS5hZGRyZXNzID0gcmVzdWx0c1tpXS5hZGRyZXNzICsgb2Zmc2V0DQogICAgICAgICAgICAgICAgcmVzdWx0c1tpXS5mbGFncyA9IGVkaXRfdG9fZmxhZ3MNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZ2cubG9hZFJlc3VsdHMocmVzdWx0cykNCiAgICAgICAgICAgIGlmIGV4cGVjdGVkX3JhbmdlIHRoZW4NCiAgICAgICAgICAgICAgICBnZy5yZWZpbmVOdW1iZXIoZXhwZWN0ZWRfcmFuZ2UsIGVkaXRfdG9fZmxhZ3MpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGxvY2FsIHJlc3VsdHMgPSBnZy5nZXRSZXN1bHRzKGdnLmdldFJlc3VsdHNDb3VudCgpKQ0KICAgICAgICAgICAgZm9yIGksIHYgaW4gaXBhaXJzKHJlc3VsdHMpIGRvDQogICAgICAgICAgICAgICAgdi52YWx1ZSA9IGVkaXRfdG8NCiAgICAgICAgICAgICAgICB2LmZyZWV6ZSA9IGZyZWV6ZQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBmcmVlemUgPT0gdHJ1ZSB0aGVuDQogICAgICAgICAgICAgICAgZ2cuYWRkTGlzdEl0ZW1zKHJlc3VsdHMpDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgZ2cuc2V0VmFsdWVzKHJlc3VsdHMpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGdnLnRvYXN0KCLinIUgIiAuLiBlZGl0X25hbWUgLi4gIiDinIUiKQ0KICAgICAgICBlbmQsDQogICAgICAgIGZpeFNlYXJjaEVkaXQgPSBmdW5jdGlvbigpDQogICAgICAgICAgICBsb2NhbCBtZW51X2l0ZW1zID0ge30NCiAgICAgICAgICAgIGZvciBpLCB2IGluIGlwYWlycyhzdGF0aWNWYWx1ZUZpbmRlci5zYXZlZEVkaXRzVGFibGUpIGRvDQogICAgICAgICAgICAgICAgbWVudV9pdGVtc1tpXSA9ICLilrbvuI8gIiAuLiB2LmVkaXRfdGFibGUuZWRpdF9uYW1lDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGxvY2FsIG1lbnUgPSBnZy5jaG9pY2UobWVudV9pdGVtcywgbmlsLCBzY3JpcHRfdGl0bGUgLi4gIlxuXG7ihLnvuI8gU2VsZWN0IFNlYXJjaC9FZGl0IHRvIGZpeC4g4oS577iPIikNCiAgICAgICAgICAgIGlmIG1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5zZXR0aW5ncyA9IHN0YXRpY1ZhbHVlRmluZGVyLnNhdmVkRWRpdHNUYWJsZVttZW51XS5zZXR0aW5ncw0KICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLnNldE9uZSA9IHN0YXRpY1ZhbHVlRmluZGVyLnNhdmVkRWRpdHNUYWJsZVttZW51XS5zZXRPbmUNCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5zZXRUd28gPSBzdGF0aWNWYWx1ZUZpbmRlci5zYXZlZEVkaXRzVGFibGVbbWVudV0uc2V0VHdvDQogICAgICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIuc2V0VGhyZWUgPSB7fQ0KICAgICAgICAgICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLmNsb3NlR2FtZUFmdGVyU2VhcmNoID0gZmFsc2UNCiAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5jb21wYXJlTWVudSgpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kLA0KICAgICAgICBkZWxldGVFZGl0ID0gZnVuY3Rpb24oKQ0KICAgICAgICAgICAgbG9jYWwgbWVudV9pdGVtcyA9IHt9DQogICAgICAgICAgICBmb3IgaSwgdiBpbiBpcGFpcnMoc3RhdGljVmFsdWVGaW5kZXIuc2F2ZWRFZGl0c1RhYmxlKSBkbw0KICAgICAgICAgICAgICAgIG1lbnVfaXRlbXNbaV0gPSAi4pa277iPICIgLi4gdi5lZGl0X3RhYmxlLmVkaXRfbmFtZQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBsb2NhbCBtZW51ID0gZ2cubXVsdGlDaG9pY2UobWVudV9pdGVtcywgbmlsLA0KICAgICAgICAgICAgICAgIHNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBTZWxlY3QgU2VhcmNoL0VkaXRzIHRvIGRlbGV0ZS4g4oS577iPIikNCiAgICAgICAgICAgIGlmIG1lbnUgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICBsb2NhbCBjb25maXJtID0gZ2cuY2hvaWNlKHsi4pyFIFllcyBkZWxldGUgdGhlIGVkaXRzIiwgDQoJCQkJCQkJCQkJCSLinYwgTm8ifSwgDQoJCQkJCQkJCQkJCW5pbCwgDQoJCQkJCQkJCQkJCXNjcmlwdF90aXRsZSAuLiAiXG5cbuKEue+4jyBBcmUgeW91IHN1cmU/IOKEuVxuQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGVzZSBlZGl0cywgdGhpcyBjYW4gbm90IGJlIHVuZG9uZT8gIikNCiAgICAgICAgICAgICAgICBpZiBjb25maXJtIH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIGNvbmZpcm0gPT0gMSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgaywgdiBpbiBwYWlycyhzdGF0aWNWYWx1ZUZpbmRlci5zYXZlZEVkaXRzVGFibGUpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gcGFpcnMobWVudSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgayA9PSBrZXkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIuc2F2ZWRFZGl0c1RhYmxlW2tdID0gImRlbGV0ZSINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIDo6Z2V0X25leHQ6Og0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgY291bnQgPSAxDQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBkb191bnRpbCA9ICNzdGF0aWNWYWx1ZUZpbmRlci5zYXZlZEVkaXRzVGFibGUgKyAxDQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhzdGF0aWNWYWx1ZUZpbmRlci5zYXZlZEVkaXRzVGFibGUpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQgPSBjb3VudCArIDENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB0eXBlKHYpID09ICJzdHJpbmciIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUucmVtb3ZlKHN0YXRpY1ZhbHVlRmluZGVyLnNhdmVkRWRpdHNUYWJsZSwgaSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgY291bnQgPCBkb191bnRpbCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ290byBnZXRfbmV4dA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5zYXZlQ29uZmlnKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGdnLnRvYXN0KCLinIUgRWRpdHMgRGVsZXRlZCDinIUiKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICB9DQoNCiAgICBpZiBwY2FsbChzdGF0aWNWYWx1ZUZpbmRlci5jaGVja0ZpbGUsIHN0YXRpY1ZhbHVlRmluZGVyLnNhdmVQYXRoIC4uICIvY3JlYXRlZCIpID09IGZhbHNlIHRoZW4NCiAgICAgICAgc3RhdGljVmFsdWVGaW5kZXIuY3JlYXRlRGlyZWN0b3J5KCkNCiAgICBlbmQNCiAgICBpZiBwY2FsbChzdGF0aWNWYWx1ZUZpbmRlci5jaGVja0NvbmZpZ0ZpbGVHYW1lKSA9PSBmYWxzZSB0aGVuDQogICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLnNhdmVkRWRpdHNUYWJsZSA9IHt9DQogICAgICAgIHN0YXRpY1ZhbHVlRmluZGVyLnNhdmVDb25maWcoKQ0KICAgIGVuZA0KDQogICAgaWYgcGNhbGwoc3RhdGljVmFsdWVGaW5kZXIuY2hlY2tGaWxlLCBzdGF0aWNWYWx1ZUZpbmRlci5zYXZlUGF0aCAuLiAiLyIgLi4gZ2cuZ2V0VGFyZ2V0UGFja2FnZSgpIC4uICJzZXRPbmUubHVhIikgPT0gZmFsc2UgdGhlbg0KICAgICAgICBzdGF0aWNWYWx1ZUZpbmRlci5jbG9zZUdhbWVBZnRlclNlYXJjaCA9IHRydWUNCiAgICBlbmQNCg0KICAgIHBjYWxsKHN0YXRpY1ZhbHVlRmluZGVyLmxvYWRGaWxlLCBzdGF0aWNWYWx1ZUZpbmRlci5zYXZlUGF0aCAuLiAiLyIgLi4gZ2cuZ2V0VGFyZ2V0UGFja2FnZSgpIC4uICJzZXRPbmUubHVhIikNCiAgICBwY2FsbChzdGF0aWNWYWx1ZUZpbmRlci5sb2FkRmlsZSwgc3RhdGljVmFsdWVGaW5kZXIuc2F2ZVBhdGggLi4gIi8iIC4uIGdnLmdldFRhcmdldFBhY2thZ2UoKSAuLiAic2V0VHdvLmx1YSIpDQogICAgcGNhbGwoc3RhdGljVmFsdWVGaW5kZXIubG9hZEZpbGUsIHN0YXRpY1ZhbHVlRmluZGVyLnNhdmVQYXRoIC4uICIvIiAuLiBnZy5nZXRUYXJnZXRQYWNrYWdlKCkgLi4gInNldFRocmVlLmx1YSIpDQoNCiAgICBwbHVnaW5NYW5hZ2VyLnJldHVybkhvbWUgPSB0cnVlDQogICAgcGx1Z2luTWFuYWdlci5yZXR1cm5QbHVnaW5UYWJsZSA9ICJzdGF0aWNWYWx1ZUZpbmRlciINCiAgICBzdGF0aWNWYWx1ZUZpbmRlci5ob21lKCkNCmVuZA0K"
        }
    },
    installToolbox = function()
        directory_created = true
        for i, v in pairs(gg.getRangesList()) do
            if v["end"] - v.start < 10240 then
                if not string.find(v["name"], "deleted") then
                    create_start = v.start
                    create_end = v["end"]
                    break
                end
            end
        end
        gg.dumpMemory(create_start, create_end, dataPath, gg.DUMP_SKIP_SYSTEM_LIBS)
        gg.dumpMemory(create_start, create_end, pluginsDataPath, gg.DUMP_SKIP_SYSTEM_LIBS)
        gg.dumpMemory(create_start, create_end, configDataPath, gg.DUMP_SKIP_SYSTEM_LIBS)
        for i, v in pairs(toolboxInstaller.filesTable) do
            toolboxInstaller.writeFile(v.file_name, toolboxInstaller.decodeBase64(v.file_data))
        end
        file = io.open(configDataPath .. "version", "w+")
        file:write(current_version)
        file:close()
    end,
    writeFile = function(file_name, file_data)
        file = io.open(pluginsDataPath .. file_name, "w+")
        file:write(file_data)
        file:close()
    end,
    checkInstall = function()
        local file = assert(io.open(configDataPath .. "version", "r"))
        local content = file:read("*a")
        file:close()
        return content
    end,
    decodeBase64 = function(s)
        local bs = {
            [0] =   'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P',
            'Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f',
            'g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v',
            'w','x','y','z','0','1','2','3','4','5','6','7','8','9','+','/',
        }
        local invBs1 = {}
        local invBs2 = {}
        local invBs3 = {}
        local invBs4 = {}
        for i = 0, 63 do
            invBs1[bs[i]] = i << 18
            invBs2[bs[i]] = i << 12
            invBs3[bs[i]] = i << 6
            invBs4[bs[i]] = i
        end
        local char = string.char
        local sub = string.sub
        local len = #s
        if len % 4 ~= 0 then
            s = s .. string.rep('=', 4 - (len % 4))
        end
        local pad = s:sub(-2)
        if pad == '==' then
            pad = 'AA'
        elseif pad:sub(-1) == '=' then
            pad = 'A'
        else
            pad = ''
        end
        if #pad > 0 then
            s = s:sub(1, #s - #pad) .. pad
        end
        s = s:gsub('....', function(block)
            local n = invBs1[block:sub(1, 1)] + invBs2[block:sub(2, 2)] + invBs3[block:sub(3, 3)] +
                          invBs4[block:sub(4, 4)]
            return char((n >> 16) & 255, (n >> 8) & 255, n & 255)
        end)
        if #pad == 0 then
            return s
        end
        return s:sub(1, #s - #pad)
    end,
    updateToolbox = function()
        local should_compare
        local download_all
        
        if toolboxInstaller.githubSHAs then
            should_compare = true
        else
            download_all = true
        end
		local githubCurrentSHA = gg.makeRequest("https://api.github.com/repos/BadCaseDotOrg/badcases-toolbox/git/refs/heads/main").content
        githubCurrentSHA = json.decode(githubCurrentSHA)
        local githubTree = gg.makeRequest("https://api.github.com/repos/BadCaseDotOrg/badcases-toolbox/git/trees/"..githubCurrentSHA.object.sha).content
        githubTree = json.decode(githubTree)
		gg.alert(tostring(githubTree))
        for i,v in ipairs (githubTree["tree"]) do
            local download 
            if should_compare == true then
                if (toolboxInstaller.githubSHAs["tree"][i] and toolboxInstaller.githubSHAs["tree"][i].sha ~= v.sha) or not toolboxInstaller.githubSHAs["tree"][i] then
                    download = true
                end
            end
            if download_all == true then
                download = true
            end 
            if download == true then
                if v.path:find("%.lua$") and not v.path:find("BadCase's Toolbox") then
                    gg.toast(script_title.."\n\nUpdating "..v.path)
                    local githubBlob = gg.makeRequest(v.url).content
                    githubBlob = json.decode(githubBlob)
                    local updatedPluginData = toolboxInstaller.decodeBase64(githubBlob["content"]:gsub("%\n",""))
                    toolboxInstaller.writeFile(v.path, updatedPluginData)
                end
            end
        end
        toolboxInstaller.githubSHAs = githubTree
        file = io.open(configDataPath .. "githubTree.json", "w+")
        file:write(json.encode(toolboxInstaller.githubSHAs))
        file:close()
    end,
    checkUpdates = function()
        local file = assert(io.open(configDataPath .. "githubTree.json", "r"))
        local content = file:read("*a")
        file:close()
        toolboxInstaller.githubSHAs = json.decode(content)
    end,
}
current_version = "1.2.1"
if pcall(toolboxInstaller.checkInstall) == false then
    toolboxInstaller.installToolbox()
elseif toolboxInstaller.checkInstall() ~= current_version then
    toolboxInstaller.installToolbox()
end
pcall(toolboxInstaller.checkUpdates)

local updateMenu = gg.choice({"âœ… Yes", "âŒ No"},nil,script_title.."\n\nDo you want to check GitHub for updates?")
if updateMenu ~= nil then
    if updateMenu == 1 then
        toolboxInstaller.updateToolbox()
    end
end

dofile(pluginsDataPath .. "toolbox_core.lua")
